{
  "version": 3,
  "sources": ["../../aframe/dist/webpack:/aframe/node_modules/an-array/index.js", "../../aframe/dist/webpack:/aframe/node_modules/as-number/index.js", "../../aframe/dist/webpack:/aframe/node_modules/base64-js/index.js", "../../aframe/dist/webpack:/aframe/node_modules/buffer-equal/index.js", "../../aframe/dist/webpack:/aframe/node_modules/buffer/index.js", "../../aframe/dist/webpack:/aframe/node_modules/css-loader/dist/runtime/api.js", "../../aframe/dist/webpack:/aframe/node_modules/css-loader/dist/runtime/getUrl.js", "../../aframe/dist/webpack:/aframe/node_modules/css-loader/dist/runtime/sourceMaps.js", "../../aframe/dist/webpack:/aframe/node_modules/debug/src/browser.js", "../../aframe/dist/webpack:/aframe/node_modules/debug/src/common.js", "../../aframe/dist/webpack:/aframe/node_modules/deep-assign/index.js", "../../aframe/dist/webpack:/aframe/node_modules/dtype/index.js", "../../aframe/dist/webpack:/aframe/node_modules/global/window.js", "../../aframe/dist/webpack:/aframe/node_modules/ieee754/index.js", "../../aframe/dist/webpack:/aframe/node_modules/is-buffer/index.js", "../../aframe/dist/webpack:/aframe/node_modules/is-function/index.js", "../../aframe/dist/webpack:/aframe/node_modules/is-obj/index.js", "../../aframe/dist/webpack:/aframe/node_modules/layout-bmfont-text/index.js", "../../aframe/dist/webpack:/aframe/node_modules/load-bmfont/browser.js", "../../aframe/dist/webpack:/aframe/node_modules/load-bmfont/lib/is-binary.js", "../../aframe/dist/webpack:/aframe/node_modules/ms/index.js", "../../aframe/dist/webpack:/aframe/node_modules/parse-bmfont-ascii/index.js", "../../aframe/dist/webpack:/aframe/node_modules/parse-bmfont-binary/index.js", "../../aframe/dist/webpack:/aframe/node_modules/parse-bmfont-xml/lib/browser.js", "../../aframe/dist/webpack:/aframe/node_modules/parse-bmfont-xml/lib/parse-attribs.js", "../../aframe/dist/webpack:/aframe/node_modules/parse-headers/parse-headers.js", "../../aframe/dist/webpack:/aframe/node_modules/quad-indices/index.js", "../../aframe/dist/webpack:/aframe/node_modules/three-bmfont-text/index.js", "../../aframe/dist/webpack:/aframe/node_modules/three-bmfont-text/lib/utils.js", "../../aframe/dist/webpack:/aframe/node_modules/three-bmfont-text/lib/vertices.js", "../../aframe/dist/webpack:/aframe/node_modules/word-wrapper/index.js", "../../aframe/dist/webpack:/aframe/node_modules/xhr/index.js", "../../aframe/dist/webpack:/aframe/node_modules/xml-parse-from-string/index.js", "../../aframe/dist/webpack:/aframe/node_modules/xtend/immutable.js", "../../aframe/dist/webpack:/aframe/src/lib/rStatsAframe.js", "../../aframe/dist/webpack:/aframe/vendor/rStats.extras.js", "../../aframe/dist/webpack:/aframe/vendor/rStats.js", "../../aframe/dist/webpack:/aframe/vendor/wakelock/util.js", "../../aframe/dist/webpack:/aframe/vendor/wakelock/wakelock.js", "../../aframe/dist/webpack:/aframe/src/style/aframe.css", "../../aframe/dist/webpack:/aframe/src/style/rStats.css", "../../aframe/dist/webpack:/aframe/src/style/aframe.css?ccfc", "../../aframe/dist/webpack:/aframe/src/style/rStats.css?d035", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/insertBySelector.js", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/insertStyleElement.js", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/styleDomAPI.js", "../../aframe/dist/webpack:/aframe/node_modules/style-loader/dist/runtime/styleTagTransform.js", "../../aframe/dist/webpack:/aframe/webpack/bootstrap", "../../aframe/dist/webpack:/aframe/webpack/runtime/compat get default export", "../../aframe/dist/webpack:/aframe/webpack/runtime/define property getters", "../../aframe/dist/webpack:/aframe/webpack/runtime/global", "../../aframe/dist/webpack:/aframe/webpack/runtime/hasOwnProperty shorthand", "../../aframe/dist/webpack:/aframe/webpack/runtime/make namespace object", "../../aframe/dist/webpack:/aframe/webpack/runtime/jsonp chunk loading", "../../aframe/dist/webpack:/aframe/webpack/runtime/nonce", "../../aframe/dist/webpack:/aframe/node_modules/super-animejs/lib/anime.es.js", "../../aframe/dist/webpack:/aframe/external module \"three\"", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/loaders/DRACOLoader.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/utils/BufferGeometryUtils.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/loaders/GLTFLoader.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/utils/WorkerPool.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/libs/ktx-parse.module.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/libs/zstddec.module.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/loaders/KTX2Loader.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/math/ColorSpaces.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/math/OBB.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/loaders/OBJLoader.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/loaders/MTLLoader.js", "../../aframe/dist/webpack:/aframe/node_modules/three/examples/jsm/lights/LightProbeGenerator.js", "../../aframe/dist/webpack:/aframe/vendor/DeviceOrientationControls.js", "../../aframe/dist/webpack:/aframe/src/lib/three.js", "../../aframe/dist/webpack:/aframe/src/constants/index.js", "../../aframe/dist/webpack:/aframe/src/utils/debug.js", "../../aframe/dist/webpack:/aframe/src/utils/device.js", "../../aframe/dist/webpack:/aframe/src/utils/object-pool.js", "../../aframe/dist/webpack:/aframe/src/utils/coordinates.js", "../../aframe/dist/webpack:/aframe/src/utils/split.js", "../../aframe/dist/webpack:/aframe/src/utils/entity.js", "../../aframe/dist/webpack:/aframe/src/utils/forceCanvasResizeSafariMobile.js", "../../aframe/dist/webpack:/aframe/src/utils/src-loader.js", "../../aframe/dist/webpack:/aframe/src/utils/material.js", "../../aframe/dist/webpack:/aframe/src/utils/styleParser.js", "../../aframe/dist/webpack:/aframe/src/utils/tracked-controls.js", "../../aframe/dist/webpack:/aframe/src/utils/index.js", "../../aframe/dist/webpack:/aframe/src/core/scene/metaTags.js", "../../aframe/dist/webpack:/aframe/src/core/scene/loadingScreen.js", "../../aframe/dist/webpack:/aframe/src/core/scene/scenes.js", "../../aframe/dist/webpack:/aframe/src/core/propertyTypes.js", "../../aframe/dist/webpack:/aframe/src/core/schema.js", "../../aframe/dist/webpack:/aframe/src/core/component.js", "../../aframe/dist/webpack:/aframe/src/core/readyState.js", "../../aframe/dist/webpack:/aframe/src/core/system.js", "../../aframe/dist/webpack:/aframe/src/core/a-node.js", "../../aframe/dist/webpack:/aframe/src/core/a-entity.js", "../../aframe/dist/webpack:/aframe/src/core/scene/postMessage.js", "../../aframe/dist/webpack:/aframe/src/utils/ios-orientationchange-blank-bug.js", "../../aframe/dist/webpack:/aframe/src/core/scene/a-scene.js", "../../aframe/dist/webpack:/aframe/src/core/scene/wakelock.js", "../../aframe/dist/webpack:/aframe/src/core/geometry.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives.js", "../../aframe/dist/webpack:/aframe/src/core/shader.js", "../../aframe/dist/webpack:/aframe/src/core/a-assets.js", "../../aframe/dist/webpack:/aframe/src/core/a-cubemap.js", "../../aframe/dist/webpack:/aframe/src/core/a-mixin.js", "../../aframe/dist/webpack:/aframe/src/components/animation.js", "../../aframe/dist/webpack:/aframe/src/components/anchored.js", "../../aframe/dist/webpack:/aframe/src/components/camera.js", "../../aframe/dist/webpack:/aframe/src/components/cursor.js", "../../aframe/dist/webpack:/aframe/src/components/geometry.js", "../../aframe/dist/webpack:/aframe/src/components/generic-tracked-controller-controls.js", "../../aframe/dist/webpack:/aframe/src/components/gltf-model.js", "../../aframe/dist/webpack:/aframe/src/components/grabbable.js", "../../aframe/dist/webpack:/aframe/src/components/hand-tracking-controls.js", "../../aframe/dist/webpack:/aframe/src/components/hand-tracking-grab-controls.js", "../../aframe/dist/webpack:/aframe/src/components/hand-controls.js", "../../aframe/dist/webpack:/aframe/src/components/hide-on-enter-ar.js", "../../aframe/dist/webpack:/aframe/src/components/hide-on-enter-vr.js", "../../aframe/dist/webpack:/aframe/src/components/hp-mixed-reality-controls.js", "../../aframe/dist/webpack:/aframe/src/components/layer.js", "../../aframe/dist/webpack:/aframe/src/utils/math.js", "../../aframe/dist/webpack:/aframe/src/components/laser-controls.js", "../../aframe/dist/webpack:/aframe/src/components/light.js", "../../aframe/dist/webpack:/aframe/src/components/link.js", "../../aframe/dist/webpack:/aframe/src/components/line.js", "../../aframe/dist/webpack:/aframe/src/components/logitech-mx-ink-controls.js", "../../aframe/dist/webpack:/aframe/src/components/look-controls.js", "../../aframe/dist/webpack:/aframe/src/components/magicleap-controls.js", "../../aframe/dist/webpack:/aframe/src/components/material.js", "../../aframe/dist/webpack:/aframe/src/components/meta-touch-controls.js", "../../aframe/dist/webpack:/aframe/src/components/obb-collider.js", "../../aframe/dist/webpack:/aframe/src/components/obj-model.js", "../../aframe/dist/webpack:/aframe/src/components/oculus-go-controls.js", "../../aframe/dist/webpack:/aframe/src/components/pico-controls.js", "../../aframe/dist/webpack:/aframe/src/components/raycaster.js", "../../aframe/dist/webpack:/aframe/src/components/position.js", "../../aframe/dist/webpack:/aframe/src/components/rotation.js", "../../aframe/dist/webpack:/aframe/src/components/text.js", "../../aframe/dist/webpack:/aframe/src/components/sound.js", "../../aframe/dist/webpack:/aframe/src/components/scale.js", "../../aframe/dist/webpack:/aframe/src/components/shadow.js", "../../aframe/dist/webpack:/aframe/src/components/tracked-controls.js", "../../aframe/dist/webpack:/aframe/src/components/wasd-controls.js", "../../aframe/dist/webpack:/aframe/src/components/valve-index-controls.js", "../../aframe/dist/webpack:/aframe/src/components/visible.js", "../../aframe/dist/webpack:/aframe/src/components/vive-controls.js", "../../aframe/dist/webpack:/aframe/src/components/vive-focus-controls.js", "../../aframe/dist/webpack:/aframe/src/constants/keyboardevent.js", "../../aframe/dist/webpack:/aframe/src/components/windows-motion-controls.js", "../../aframe/dist/webpack:/aframe/src/components/scene/ar-hit-test.js", "../../aframe/dist/webpack:/aframe/src/components/scene/background.js", "../../aframe/dist/webpack:/aframe/src/components/scene/debug.js", "../../aframe/dist/webpack:/aframe/src/components/scene/device-orientation-permission-ui.js", "../../aframe/dist/webpack:/aframe/src/components/scene/embedded.js", "../../aframe/dist/webpack:/aframe/src/components/scene/inspector.js", "../../aframe/dist/webpack:/aframe/src/components/scene/fog.js", "../../aframe/dist/webpack:/aframe/src/components/scene/keyboard-shortcuts.js", "../../aframe/dist/webpack:/aframe/src/components/scene/pool.js", "../../aframe/dist/webpack:/aframe/src/components/scene/real-world-meshing.js", "../../aframe/dist/webpack:/aframe/src/components/scene/reflection.js", "../../aframe/dist/webpack:/aframe/src/components/scene/screenshot.js", "../../aframe/dist/webpack:/aframe/src/components/scene/stats.js", "../../aframe/dist/webpack:/aframe/src/components/scene/xr-mode-ui.js", "../../aframe/dist/webpack:/aframe/src/geometries/box.js", "../../aframe/dist/webpack:/aframe/src/geometries/circle.js", "../../aframe/dist/webpack:/aframe/src/geometries/cone.js", "../../aframe/dist/webpack:/aframe/src/geometries/cylinder.js", "../../aframe/dist/webpack:/aframe/src/geometries/dodecahedron.js", "../../aframe/dist/webpack:/aframe/src/geometries/icosahedron.js", "../../aframe/dist/webpack:/aframe/src/geometries/octahedron.js", "../../aframe/dist/webpack:/aframe/src/geometries/plane.js", "../../aframe/dist/webpack:/aframe/src/geometries/ring.js", "../../aframe/dist/webpack:/aframe/src/geometries/sphere.js", "../../aframe/dist/webpack:/aframe/src/geometries/tetrahedron.js", "../../aframe/dist/webpack:/aframe/src/geometries/torus.js", "../../aframe/dist/webpack:/aframe/src/geometries/torusKnot.js", "../../aframe/dist/webpack:/aframe/src/geometries/triangle.js", "../../aframe/dist/webpack:/aframe/src/shaders/flat.js", "../../aframe/dist/webpack:/aframe/src/shaders/standard.js", "../../aframe/dist/webpack:/aframe/src/shaders/phong.js", "../../aframe/dist/webpack:/aframe/src/shaders/sdf.js", "../../aframe/dist/webpack:/aframe/src/shaders/msdf.js", "../../aframe/dist/webpack:/aframe/src/shaders/shadow.js", "../../aframe/dist/webpack:/aframe/src/systems/camera.js", "../../aframe/dist/webpack:/aframe/src/systems/geometry.js", "../../aframe/dist/webpack:/aframe/src/systems/gltf-model.js", "../../aframe/dist/webpack:/aframe/src/systems/light.js", "../../aframe/dist/webpack:/aframe/src/systems/material.js", "../../aframe/dist/webpack:/aframe/src/systems/obb-collider.js", "../../aframe/dist/webpack:/aframe/src/systems/renderer.js", "../../aframe/dist/webpack:/aframe/src/systems/shadow.js", "../../aframe/dist/webpack:/aframe/src/systems/tracked-controls.js", "../../aframe/dist/webpack:/aframe/src/systems/webxr.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/getMeshMixin.js", "../../aframe/dist/webpack:/aframe/src/extras/components/pivot.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-camera.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-cursor.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-curvedimage.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-gltf-model.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-image.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-light.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-link.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-obj-model.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/meshPrimitives.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-sky.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-sound.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-text.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-video.js", "../../aframe/dist/webpack:/aframe/src/extras/primitives/primitives/a-videosphere.js", "../../aframe/dist/webpack:/aframe/src/index.js"],
  "sourcesContent": ["var str = Object.prototype.toString\n\nmodule.exports = anArray\n\nfunction anArray(arr) {\n  return (\n       arr.BYTES_PER_ELEMENT\n    && str.call(arr.buffer) === '[object ArrayBuffer]'\n    || Array.isArray(arr)\n  )\n}\n", "module.exports = function numtype(num, def) {\n\treturn typeof num === 'number'\n\t\t? num \n\t\t: (typeof def === 'number' ? def : 0)\n}", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "var Buffer = require('buffer').Buffer; // for use with browserify\n\nmodule.exports = function (a, b) {\n    if (!Buffer.isBuffer(a)) return undefined;\n    if (!Buffer.isBuffer(b)) return undefined;\n    if (typeof a.equals === 'function') return a.equals(b);\n    if (a.length !== b.length) return false;\n    \n    for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n    }\n    \n    return true;\n};\n", "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n", "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};", "\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};", "\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};", "/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n", "'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n", "module.exports = function(dtype) {\n  switch (dtype) {\n    case 'int8':\n      return Int8Array\n    case 'int16':\n      return Int16Array\n    case 'int32':\n      return Int32Array\n    case 'uint8':\n      return Uint8Array\n    case 'uint16':\n      return Uint16Array\n    case 'uint32':\n      return Uint32Array\n    case 'float32':\n      return Float32Array\n    case 'float64':\n      return Float64Array\n    case 'array':\n      return Array\n    case 'uint8_clamped':\n      return Uint8ClampedArray\n  }\n}\n", "var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n", "/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n", "/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n", "module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n", "'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n", "var wordWrap = require('word-wrapper')\nvar xtend = require('xtend')\nvar number = require('as-number')\n\nvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\nvar M_WIDTHS = ['m', 'w']\nvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n\nvar TAB_ID = '\\t'.charCodeAt(0)\nvar SPACE_ID = ' '.charCodeAt(0)\nvar ALIGN_LEFT = 0, \n    ALIGN_CENTER = 1, \n    ALIGN_RIGHT = 2\n\nmodule.exports = function createLayout(opt) {\n  return new TextLayout(opt)\n}\n\nfunction TextLayout(opt) {\n  this.glyphs = []\n  this._measure = this.computeMetrics.bind(this)\n  this.update(opt)\n}\n\nTextLayout.prototype.update = function(opt) {\n  opt = xtend({\n    measure: this._measure\n  }, opt)\n  this._opt = opt\n  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n  if (!opt.font)\n    throw new Error('must provide a valid bitmap font')\n\n  var glyphs = this.glyphs\n  var text = opt.text||'' \n  var font = opt.font\n  this._setupSpaceGlyphs(font)\n  \n  var lines = wordWrap.lines(text, opt)\n  var minWidth = opt.width || 0\n\n  //clear glyphs\n  glyphs.length = 0\n\n  //get max line width\n  var maxLineWidth = lines.reduce(function(prev, line) {\n    return Math.max(prev, line.width, minWidth)\n  }, 0)\n\n  //the pen position\n  var x = 0\n  var y = 0\n  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n  var baseline = font.common.base\n  var descender = lineHeight-baseline\n  var letterSpacing = opt.letterSpacing || 0\n  var height = lineHeight * lines.length - descender\n  var align = getAlignType(this._opt.align)\n\n  //draw text along baseline\n  y -= height\n  \n  //the metrics for this text layout\n  this._width = maxLineWidth\n  this._height = height\n  this._descender = lineHeight - baseline\n  this._baseline = baseline\n  this._xHeight = getXHeight(font)\n  this._capHeight = getCapHeight(font)\n  this._lineHeight = lineHeight\n  this._ascender = lineHeight - descender - this._xHeight\n    \n  //layout each glyph\n  var self = this\n  lines.forEach(function(line, lineIndex) {\n    var start = line.start\n    var end = line.end\n    var lineWidth = line.width\n    var lastGlyph\n    \n    //for each glyph in that line...\n    for (var i=start; i<end; i++) {\n      var id = text.charCodeAt(i)\n      var glyph = self.getGlyph(font, id)\n      if (glyph) {\n        if (lastGlyph) \n          x += getKerning(font, lastGlyph.id, glyph.id)\n\n        var tx = x\n        if (align === ALIGN_CENTER) \n          tx += (maxLineWidth-lineWidth)/2\n        else if (align === ALIGN_RIGHT)\n          tx += (maxLineWidth-lineWidth)\n\n        glyphs.push({\n          position: [tx, y],\n          data: glyph,\n          index: i,\n          line: lineIndex\n        })  \n\n        //move pen forward\n        x += glyph.xadvance + letterSpacing\n        lastGlyph = glyph\n      }\n    }\n\n    //next line down\n    y += lineHeight\n    x = 0\n  })\n  this._linesTotal = lines.length;\n}\n\nTextLayout.prototype._setupSpaceGlyphs = function(font) {\n  //These are fallbacks, when the font doesn't include\n  //' ' or '\\t' glyphs\n  this._fallbackSpaceGlyph = null\n  this._fallbackTabGlyph = null\n\n  if (!font.chars || font.chars.length === 0)\n    return\n\n  //try to get space glyph\n  //then fall back to the 'm' or 'w' glyphs\n  //then fall back to the first glyph available\n  var space = getGlyphById(font, SPACE_ID) \n          || getMGlyph(font) \n          || font.chars[0]\n\n  //and create a fallback for tab\n  var tabWidth = this._opt.tabSize * space.xadvance\n  this._fallbackSpaceGlyph = space\n  this._fallbackTabGlyph = xtend(space, {\n    x: 0, y: 0, xadvance: tabWidth, id: TAB_ID, \n    xoffset: 0, yoffset: 0, width: 0, height: 0\n  })\n}\n\nTextLayout.prototype.getGlyph = function(font, id) {\n  var glyph = getGlyphById(font, id)\n  if (glyph)\n    return glyph\n  else if (id === TAB_ID) \n    return this._fallbackTabGlyph\n  else if (id === SPACE_ID) \n    return this._fallbackSpaceGlyph\n  return null\n}\n\nTextLayout.prototype.computeMetrics = function(text, start, end, width) {\n  var letterSpacing = this._opt.letterSpacing || 0\n  var font = this._opt.font\n  var curPen = 0\n  var curWidth = 0\n  var count = 0\n  var glyph\n  var lastGlyph\n\n  if (!font.chars || font.chars.length === 0) {\n    return {\n      start: start,\n      end: start,\n      width: 0\n    }\n  }\n\n  end = Math.min(text.length, end)\n  for (var i=start; i < end; i++) {\n    var id = text.charCodeAt(i)\n    var glyph = this.getGlyph(font, id)\n\n    if (glyph) {\n      //move pen forward\n      var xoff = glyph.xoffset\n      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n      curPen += kern\n\n      var nextPen = curPen + glyph.xadvance + letterSpacing\n      var nextWidth = curPen + glyph.width\n\n      //we've hit our limit; we can't move onto the next glyph\n      if (nextWidth >= width || nextPen >= width)\n        break\n\n      //otherwise continue along our line\n      curPen = nextPen\n      curWidth = nextWidth\n      lastGlyph = glyph\n    }\n    count++\n  }\n  \n  //make sure rightmost edge lines up with rendered glyphs\n  if (lastGlyph)\n    curWidth += lastGlyph.xoffset\n\n  return {\n    start: start,\n    end: start + count,\n    width: curWidth\n  }\n}\n\n//getters for the private vars\n;['width', 'height', \n  'descender', 'ascender',\n  'xHeight', 'baseline',\n  'capHeight',\n  'lineHeight' ].forEach(addGetter)\n\nfunction addGetter(name) {\n  Object.defineProperty(TextLayout.prototype, name, {\n    get: wrapper(name),\n    configurable: true\n  })\n}\n\n//create lookups for private vars\nfunction wrapper(name) {\n  return (new Function([\n    'return function '+name+'() {',\n    '  return this._'+name,\n    '}'\n  ].join('\\n')))()\n}\n\nfunction getGlyphById(font, id) {\n  if (!font.chars || font.chars.length === 0)\n    return null\n\n  var glyphIdx = findChar(font.chars, id)\n  if (glyphIdx >= 0)\n    return font.chars[glyphIdx]\n  return null\n}\n\nfunction getXHeight(font) {\n  for (var i=0; i<X_HEIGHTS.length; i++) {\n    var id = X_HEIGHTS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx].height\n  }\n  return 0\n}\n\nfunction getMGlyph(font) {\n  for (var i=0; i<M_WIDTHS.length; i++) {\n    var id = M_WIDTHS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx]\n  }\n  return 0\n}\n\nfunction getCapHeight(font) {\n  for (var i=0; i<CAP_HEIGHTS.length; i++) {\n    var id = CAP_HEIGHTS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx].height\n  }\n  return 0\n}\n\nfunction getKerning(font, left, right) {\n  if (!font.kernings || font.kernings.length === 0)\n    return 0\n\n  var table = font.kernings\n  for (var i=0; i<table.length; i++) {\n    var kern = table[i]\n    if (kern.first === left && kern.second === right)\n      return kern.amount\n  }\n  return 0\n}\n\nfunction getAlignType(align) {\n  if (align === 'center')\n    return ALIGN_CENTER\n  else if (align === 'right')\n    return ALIGN_RIGHT\n  return ALIGN_LEFT\n}\n\nfunction findChar (array, value, start) {\n  start = start || 0\n  for (var i = start; i < array.length; i++) {\n    if (array[i].id === value) {\n      return i\n    }\n  }\n  return -1\n}", "var xhr = require('xhr')\nvar noop = function(){}\nvar parseASCII = require('parse-bmfont-ascii')\nvar parseXML = require('parse-bmfont-xml')\nvar readBinary = require('parse-bmfont-binary')\nvar isBinaryFormat = require('./lib/is-binary')\nvar xtend = require('xtend')\n\nvar xml2 = (function hasXML2() {\n  return self.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest\n})()\n\nmodule.exports = function(opt, cb) {\n  cb = typeof cb === 'function' ? cb : noop\n\n  if (typeof opt === 'string')\n    opt = { uri: opt }\n  else if (!opt)\n    opt = {}\n\n  var expectBinary = opt.binary\n  if (expectBinary)\n    opt = getBinaryOpts(opt)\n\n  xhr(opt, function(err, res, body) {\n    if (err)\n      return cb(err)\n    if (!/^2/.test(res.statusCode))\n      return cb(new Error('http status code: '+res.statusCode))\n    if (!body)\n      return cb(new Error('no body result'))\n\n    var binary = false \n\n    //if the response type is an array buffer,\n    //we need to convert it into a regular Buffer object\n    if (isArrayBuffer(body)) {\n      var array = new Uint8Array(body)\n      body = Buffer.from(array, 'binary')\n    }\n\n    //now check the string/Buffer response\n    //and see if it has a binary BMF header\n    if (isBinaryFormat(body)) {\n      binary = true\n      //if we have a string, turn it into a Buffer\n      if (typeof body === 'string') \n        body = Buffer.from(body, 'binary')\n    } \n\n    //we are not parsing a binary format, just ASCII/XML/etc\n    if (!binary) {\n      //might still be a buffer if responseType is 'arraybuffer'\n      if (Buffer.isBuffer(body))\n        body = body.toString(opt.encoding)\n      body = body.trim()\n    }\n\n    var result\n    try {\n      var type = res.headers['content-type']\n      if (binary)\n        result = readBinary(body)\n      else if (/json/.test(type) || body.charAt(0) === '{')\n        result = JSON.parse(body)\n      else if (/xml/.test(type)  || body.charAt(0) === '<')\n        result = parseXML(body)\n      else\n        result = parseASCII(body)\n    } catch (e) {\n      cb(new Error('error parsing font '+e.message))\n      cb = noop\n    }\n    cb(null, result)\n  })\n}\n\nfunction isArrayBuffer(arr) {\n  var str = Object.prototype.toString\n  return str.call(arr) === '[object ArrayBuffer]'\n}\n\nfunction getBinaryOpts(opt) {\n  //IE10+ and other modern browsers support array buffers\n  if (xml2)\n    return xtend(opt, { responseType: 'arraybuffer' })\n  \n  if (typeof self.XMLHttpRequest === 'undefined')\n    throw new Error('your browser does not support XHR loading')\n\n  //IE9 and XML1 browsers could still use an override\n  var req = new self.XMLHttpRequest()\n  req.overrideMimeType('text/plain; charset=x-user-defined')\n  return xtend({\n    xhr: req\n  }, opt)\n}\n", "var equal = require('buffer-equal')\nvar HEADER = Buffer.from([66, 77, 70, 3])\n\nmodule.exports = function(buf) {\n  if (typeof buf === 'string')\n    return buf.substring(0, 3) === 'BMF'\n  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n}", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "module.exports = function parseBMFontAscii(data) {\n  if (!data)\n    throw new Error('no data provided')\n  data = data.toString().trim()\n\n  var output = {\n    pages: [],\n    chars: [],\n    kernings: []\n  }\n\n  var lines = data.split(/\\r\\n?|\\n/g)\n\n  if (lines.length === 0)\n    throw new Error('no data in BMFont file')\n\n  for (var i = 0; i < lines.length; i++) {\n    var lineData = splitLine(lines[i], i)\n    if (!lineData) //skip empty lines\n      continue\n\n    if (lineData.key === 'page') {\n      if (typeof lineData.data.id !== 'number')\n        throw new Error('malformed file at line ' + i + ' -- needs page id=N')\n      if (typeof lineData.data.file !== 'string')\n        throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"')\n      output.pages[lineData.data.id] = lineData.data.file\n    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n      //... do nothing for these two ...\n    } else if (lineData.key === 'char') {\n      output.chars.push(lineData.data)\n    } else if (lineData.key === 'kerning') {\n      output.kernings.push(lineData.data)\n    } else {\n      output[lineData.key] = lineData.data\n    }\n  }\n\n  return output\n}\n\nfunction splitLine(line, idx) {\n  line = line.replace(/\\t+/g, ' ').trim()\n  if (!line)\n    return null\n\n  var space = line.indexOf(' ')\n  if (space === -1) \n    throw new Error(\"no named row at line \" + idx)\n\n  var key = line.substring(0, space)\n\n  line = line.substring(space + 1)\n  //clear \"letter\" field as it is non-standard and\n  //requires additional complexity to parse \" / = symbols\n  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')  \n  line = line.split(\"=\")\n  line = line.map(function(str) {\n    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n  })\n\n  var data = []\n  for (var i = 0; i < line.length; i++) {\n    var dt = line[i]\n    if (i === 0) {\n      data.push({\n        key: dt[0],\n        data: \"\"\n      })\n    } else if (i === line.length - 1) {\n      data[data.length - 1].data = parseData(dt[0])\n    } else {\n      data[data.length - 1].data = parseData(dt[0])\n      data.push({\n        key: dt[1],\n        data: \"\"\n      })\n    }\n  }\n\n  var out = {\n    key: key,\n    data: {}\n  }\n\n  data.forEach(function(v) {\n    out.data[v.key] = v.data;\n  })\n\n  return out\n}\n\nfunction parseData(data) {\n  if (!data || data.length === 0)\n    return \"\"\n\n  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0)\n    return data.substring(1, data.length - 1)\n  if (data.indexOf(',') !== -1)\n    return parseIntList(data)\n  return parseInt(data, 10)\n}\n\nfunction parseIntList(data) {\n  return data.split(',').map(function(val) {\n    return parseInt(val, 10)\n  })\n}", "var HEADER = [66, 77, 70]\n\nmodule.exports = function readBMFontBinary(buf) {\n  if (buf.length < 6)\n    throw new Error('invalid buffer length for BMFont')\n\n  var header = HEADER.every(function(byte, i) {\n    return buf.readUInt8(i) === byte\n  })\n\n  if (!header)\n    throw new Error('BMFont missing BMF byte header')\n\n  var i = 3\n  var vers = buf.readUInt8(i++)\n  if (vers > 3)\n    throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)')\n  \n  var target = { kernings: [], chars: [] }\n  for (var b=0; b<5; b++)\n    i += readBlock(target, buf, i)\n  return target\n}\n\nfunction readBlock(target, buf, i) {\n  if (i > buf.length-1)\n    return 0\n\n  var blockID = buf.readUInt8(i++)\n  var blockSize = buf.readInt32LE(i)\n  i += 4\n\n  switch(blockID) {\n    case 1: \n      target.info = readInfo(buf, i)\n      break\n    case 2:\n      target.common = readCommon(buf, i)\n      break\n    case 3:\n      target.pages = readPages(buf, i, blockSize)\n      break\n    case 4:\n      target.chars = readChars(buf, i, blockSize)\n      break\n    case 5:\n      target.kernings = readKernings(buf, i, blockSize)\n      break\n  }\n  return 5 + blockSize\n}\n\nfunction readInfo(buf, i) {\n  var info = {}\n  info.size = buf.readInt16LE(i)\n\n  var bitField = buf.readUInt8(i+2)\n  info.smooth = (bitField >> 7) & 1\n  info.unicode = (bitField >> 6) & 1\n  info.italic = (bitField >> 5) & 1\n  info.bold = (bitField >> 4) & 1\n  \n  //fixedHeight is only mentioned in binary spec \n  if ((bitField >> 3) & 1)\n    info.fixedHeight = 1\n  \n  info.charset = buf.readUInt8(i+3) || ''\n  info.stretchH = buf.readUInt16LE(i+4)\n  info.aa = buf.readUInt8(i+6)\n  info.padding = [\n    buf.readInt8(i+7),\n    buf.readInt8(i+8),\n    buf.readInt8(i+9),\n    buf.readInt8(i+10)\n  ]\n  info.spacing = [\n    buf.readInt8(i+11),\n    buf.readInt8(i+12)\n  ]\n  info.outline = buf.readUInt8(i+13)\n  info.face = readStringNT(buf, i+14)\n  return info\n}\n\nfunction readCommon(buf, i) {\n  var common = {}\n  common.lineHeight = buf.readUInt16LE(i)\n  common.base = buf.readUInt16LE(i+2)\n  common.scaleW = buf.readUInt16LE(i+4)\n  common.scaleH = buf.readUInt16LE(i+6)\n  common.pages = buf.readUInt16LE(i+8)\n  var bitField = buf.readUInt8(i+10)\n  common.packed = 0\n  common.alphaChnl = buf.readUInt8(i+11)\n  common.redChnl = buf.readUInt8(i+12)\n  common.greenChnl = buf.readUInt8(i+13)\n  common.blueChnl = buf.readUInt8(i+14)\n  return common\n}\n\nfunction readPages(buf, i, size) {\n  var pages = []\n  var text = readNameNT(buf, i)\n  var len = text.length+1\n  var count = size / len\n  for (var c=0; c<count; c++) {\n    pages[c] = buf.slice(i, i+text.length).toString('utf8')\n    i += len\n  }\n  return pages\n}\n\nfunction readChars(buf, i, blockSize) {\n  var chars = []\n\n  var count = blockSize / 20\n  for (var c=0; c<count; c++) {\n    var char = {}\n    var off = c*20\n    char.id = buf.readUInt32LE(i + 0 + off)\n    char.x = buf.readUInt16LE(i + 4 + off)\n    char.y = buf.readUInt16LE(i + 6 + off)\n    char.width = buf.readUInt16LE(i + 8 + off)\n    char.height = buf.readUInt16LE(i + 10 + off)\n    char.xoffset = buf.readInt16LE(i + 12 + off)\n    char.yoffset = buf.readInt16LE(i + 14 + off)\n    char.xadvance = buf.readInt16LE(i + 16 + off)\n    char.page = buf.readUInt8(i + 18 + off)\n    char.chnl = buf.readUInt8(i + 19 + off)\n    chars[c] = char\n  }\n  return chars\n}\n\nfunction readKernings(buf, i, blockSize) {\n  var kernings = []\n  var count = blockSize / 10\n  for (var c=0; c<count; c++) {\n    var kern = {}\n    var off = c*10\n    kern.first = buf.readUInt32LE(i + 0 + off)\n    kern.second = buf.readUInt32LE(i + 4 + off)\n    kern.amount = buf.readInt16LE(i + 8 + off)\n    kernings[c] = kern\n  }\n  return kernings\n}\n\nfunction readNameNT(buf, offset) {\n  var pos=offset\n  for (; pos<buf.length; pos++) {\n    if (buf[pos] === 0x00) \n      break\n  }\n  return buf.slice(offset, pos)\n}\n\nfunction readStringNT(buf, offset) {\n  return readNameNT(buf, offset).toString('utf8')\n}", "var parseAttributes = require('./parse-attribs')\nvar parseFromString = require('xml-parse-from-string')\n\n//In some cases element.attribute.nodeName can return\n//all lowercase values.. so we need to map them to the correct \n//case\nvar NAME_MAP = {\n  scaleh: 'scaleH',\n  scalew: 'scaleW',\n  stretchh: 'stretchH',\n  lineheight: 'lineHeight',\n  alphachnl: 'alphaChnl',\n  redchnl: 'redChnl',\n  greenchnl: 'greenChnl',\n  bluechnl: 'blueChnl'\n}\n\nmodule.exports = function parse(data) {\n  data = data.toString()\n  \n  var xmlRoot = parseFromString(data)\n  var output = {\n    pages: [],\n    chars: [],\n    kernings: []\n  }\n\n  //get config settings\n  ;['info', 'common'].forEach(function(key) {\n    var element = xmlRoot.getElementsByTagName(key)[0]\n    if (element)\n      output[key] = parseAttributes(getAttribs(element))\n  })\n\n  //get page info\n  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n  if (!pageRoot)\n    throw new Error('malformed file -- no <pages> element')\n  var pages = pageRoot.getElementsByTagName('page')\n  for (var i=0; i<pages.length; i++) {\n    var p = pages[i]\n    var id = parseInt(p.getAttribute('id'), 10)\n    var file = p.getAttribute('file')\n    if (isNaN(id))\n      throw new Error('malformed file -- page \"id\" attribute is NaN')\n    if (!file)\n      throw new Error('malformed file -- needs page \"file\" attribute')\n    output.pages[parseInt(id, 10)] = file\n  }\n\n  //get kernings / chars\n  ;['chars', 'kernings'].forEach(function(key) {\n    var element = xmlRoot.getElementsByTagName(key)[0]\n    if (!element)\n      return\n    var childTag = key.substring(0, key.length-1)\n    var children = element.getElementsByTagName(childTag)\n    for (var i=0; i<children.length; i++) {      \n      var child = children[i]\n      output[key].push(parseAttributes(getAttribs(child)))\n    }\n  })\n  return output\n}\n\nfunction getAttribs(element) {\n  var attribs = getAttribList(element)\n  return attribs.reduce(function(dict, attrib) {\n    var key = mapName(attrib.nodeName)\n    dict[key] = attrib.nodeValue\n    return dict\n  }, {})\n}\n\nfunction getAttribList(element) {\n  //IE8+ and modern browsers\n  var attribs = []\n  for (var i=0; i<element.attributes.length; i++)\n    attribs.push(element.attributes[i])\n  return attribs\n}\n\nfunction mapName(nodeName) {\n  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n}", "//Some versions of GlyphDesigner have a typo\n//that causes some bugs with parsing. \n//Need to confirm with recent version of the software\n//to see whether this is still an issue or not.\nvar GLYPH_DESIGNER_ERROR = 'chasrset'\n\nmodule.exports = function parseAttributes(obj) {\n  obj = Object.assign({}, obj)\n  if (GLYPH_DESIGNER_ERROR in obj) {\n    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n    delete obj[GLYPH_DESIGNER_ERROR]\n  }\n\n  for (var k in obj) {\n    if (k === 'face' || k === 'charset') \n      continue\n    else if (k === 'padding' || k === 'spacing')\n      obj[k] = parseIntList(obj[k])\n    else\n      obj[k] = parseInt(obj[k], 10) \n  }\n  return obj\n}\n\nfunction parseIntList(data) {\n  return data.split(',').map(function(val) {\n    return parseInt(val, 10)\n  })\n}", "var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n", "var dtype = require('dtype')\nvar anArray = require('an-array')\nvar isBuffer = require('is-buffer')\n\nvar CW = [0, 2, 3]\nvar CCW = [2, 1, 3]\n\nmodule.exports = function createQuadElements(array, opt) {\n    //if user didn't specify an output array\n    if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {}\n        array = null\n    }\n\n    if (typeof opt === 'number') //backwards-compatible\n        opt = { count: opt }\n    else\n        opt = opt || {}\n\n    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n    var count = typeof opt.count === 'number' ? opt.count : 1\n    var start = (opt.start || 0) \n\n    var dir = opt.clockwise !== false ? CW : CCW,\n        a = dir[0], \n        b = dir[1],\n        c = dir[2]\n\n    var numIndices = count * 6\n\n    var indices = array || new (dtype(type))(numIndices)\n    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start\n        indices[x + 0] = j + 0\n        indices[x + 1] = j + 1\n        indices[x + 2] = j + 2\n        indices[x + 3] = j + a\n        indices[x + 4] = j + b\n        indices[x + 5] = j + c\n    }\n    return indices\n}", "var createLayout = require('layout-bmfont-text')\nvar createIndices = require('quad-indices')\n\nvar vertices = require('./lib/vertices')\nvar utils = require('./lib/utils')\n\n\nmodule.exports = function createTextGeometry (opt) {\n  return new TextGeometry(opt)\n}\n\nclass TextGeometry extends THREE.BufferGeometry {\n  constructor (opt) {\n    super()\n\n    if (typeof opt === 'string') {\n      opt = { text: opt }\n    }\n\n    // use these as default values for any subsequent\n    // calls to update()\n    this._opt = Object.assign({}, opt)\n\n    // also do an initial setup...\n    if (opt) this.update(opt)\n  }\n\n  update(opt) {\n    if (typeof opt === 'string') {\n      opt = { text: opt }\n    }\n\n    // use constructor defaults\n    opt = Object.assign({}, this._opt, opt)\n\n    if (!opt.font) {\n      throw new TypeError('must specify a { font } in options')\n    }\n\n    this.layout = createLayout(opt)\n\n    // get vec2 texcoords\n    var flipY = opt.flipY !== false\n\n    // the desired BMFont data\n    var font = opt.font\n\n    // determine texture size from font file\n    var texWidth = font.common.scaleW\n    var texHeight = font.common.scaleH\n\n    // get visible glyphs\n    var glyphs = this.layout.glyphs.filter(function (glyph) {\n      var bitmap = glyph.data\n      return bitmap.width * bitmap.height > 0\n    })\n\n    // provide visible glyphs for convenience\n    this.visibleGlyphs = glyphs\n\n    // get common vertex data\n    var positions = vertices.positions(glyphs)\n    var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n    var indices = createIndices([], {\n      clockwise: true,\n      type: 'uint16',\n      count: glyphs.length\n    })\n\n    // update vertex data\n    this.setIndex(indices)\n    this.setAttribute('position', new THREE.BufferAttribute(positions, 2))\n    this.setAttribute('uv', new THREE.BufferAttribute(uvs, 2))\n\n    // update multipage data\n    if (!opt.multipage && 'page' in this.attributes) {\n      // disable multipage rendering\n      this.removeAttribute('page')\n    } else if (opt.multipage) {\n      // enable multipage rendering\n      var pages = vertices.pages(glyphs)\n      this.setAttribute('page', new THREE.BufferAttribute(pages, 1))\n    }\n\n    // recompute bounding box and sphere, if present\n    if (this.boundingBox !== null) {\n      this.computeBoundingBox();\n    }\n    if (this.boundingSphere !== null) {\n      this.computeBoundingSphere();\n    }\n  }\n\n  computeBoundingSphere() {\n    if (this.boundingSphere === null) {\n      this.boundingSphere = new THREE.Sphere()\n    }\n\n    var positions = this.attributes.position.array\n    var itemSize = this.attributes.position.itemSize\n    if (!positions || !itemSize || positions.length < 2) {\n      this.boundingSphere.radius = 0\n      this.boundingSphere.center.set(0, 0, 0)\n      return\n    }\n    utils.computeSphere(positions, this.boundingSphere)\n    if (isNaN(this.boundingSphere.radius)) {\n      console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n        'Computed radius is NaN. The ' +\n        '\"position\" attribute is likely to have NaN values.')\n    }\n  }\n\n  computeBoundingBox() {\n    if (this.boundingBox === null) {\n      this.boundingBox = new THREE.Box3()\n    }\n\n    var bbox = this.boundingBox\n    var positions = this.attributes.position.array\n    var itemSize = this.attributes.position.itemSize\n    if (!positions || !itemSize || positions.length < 2) {\n      bbox.makeEmpty()\n      return\n    }\n    utils.computeBox(positions, bbox)\n  }\n\n}\n", "var itemSize = 2\nvar box = { min: [0, 0], max: [0, 0] }\n\nfunction bounds (positions) {\n  var count = positions.length / itemSize\n  box.min[0] = positions[0]\n  box.min[1] = positions[1]\n  box.max[0] = positions[0]\n  box.max[1] = positions[1]\n\n  for (var i = 0; i < count; i++) {\n    var x = positions[i * itemSize + 0]\n    var y = positions[i * itemSize + 1]\n    box.min[0] = Math.min(x, box.min[0])\n    box.min[1] = Math.min(y, box.min[1])\n    box.max[0] = Math.max(x, box.max[0])\n    box.max[1] = Math.max(y, box.max[1])\n  }\n}\n\nmodule.exports.computeBox = function (positions, output) {\n  bounds(positions)\n  output.min.set(box.min[0], box.min[1], 0)\n  output.max.set(box.max[0], box.max[1], 0)\n}\n\nmodule.exports.computeSphere = function (positions, output) {\n  bounds(positions)\n  var minX = box.min[0]\n  var minY = box.min[1]\n  var maxX = box.max[0]\n  var maxY = box.max[1]\n  var width = maxX - minX\n  var height = maxY - minY\n  var length = Math.sqrt(width * width + height * height)\n  output.center.set(minX + width / 2, minY + height / 2, 0)\n  output.radius = length / 2\n}\n", "module.exports.pages = function pages (glyphs) {\n  var pages = new Float32Array(glyphs.length * 4 * 1)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var id = glyph.data.page || 0\n    pages[i++] = id\n    pages[i++] = id\n    pages[i++] = id\n    pages[i++] = id\n  })\n  return pages\n}\n\nmodule.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n  var uvs = new Float32Array(glyphs.length * 4 * 2)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var bitmap = glyph.data\n    var bw = (bitmap.x + bitmap.width)\n    var bh = (bitmap.y + bitmap.height)\n\n    // top left position\n    var u0 = bitmap.x / texWidth\n    var v1 = bitmap.y / texHeight\n    var u1 = bw / texWidth\n    var v0 = bh / texHeight\n\n    if (flipY) {\n      v1 = (texHeight - bitmap.y) / texHeight\n      v0 = (texHeight - bh) / texHeight\n    }\n\n    // BL\n    uvs[i++] = u0\n    uvs[i++] = v1\n    // TL\n    uvs[i++] = u0\n    uvs[i++] = v0\n    // TR\n    uvs[i++] = u1\n    uvs[i++] = v0\n    // BR\n    uvs[i++] = u1\n    uvs[i++] = v1\n  })\n  return uvs\n}\n\nmodule.exports.positions = function positions (glyphs) {\n  var positions = new Float32Array(glyphs.length * 4 * 2)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var bitmap = glyph.data\n\n    // bottom left position\n    var x = glyph.position[0] + bitmap.xoffset\n    var y = glyph.position[1] + bitmap.yoffset\n\n    // quad size\n    var w = bitmap.width\n    var h = bitmap.height\n\n    // BL\n    positions[i++] = x\n    positions[i++] = y\n    // TL\n    positions[i++] = x\n    positions[i++] = y + h\n    // TR\n    positions[i++] = x + w\n    positions[i++] = y + h\n    // BR\n    positions[i++] = x + w\n    positions[i++] = y\n  })\n  return positions\n}\n", "var newline = /\\n/\nvar newlineChar = '\\n'\nvar whitespace = /\\s/\n\nmodule.exports = function(text, opt) {\n    var lines = module.exports.lines(text, opt)\n    return lines.map(function(line) {\n        return text.substring(line.start, line.end)\n    }).join('\\n')\n}\n\nmodule.exports.lines = function wordwrap(text, opt) {\n    opt = opt||{}\n\n    //zero width results in nothing visible\n    if (opt.width === 0 && opt.mode !== 'nowrap') \n        return []\n\n    text = text||''\n    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n    var start = Math.max(0, opt.start||0)\n    var end = typeof opt.end === 'number' ? opt.end : text.length\n    var mode = opt.mode\n\n    var measure = opt.measure || monospace\n    if (mode === 'pre')\n        return pre(measure, text, start, end, width)\n    else\n        return greedy(measure, text, start, end, width, mode)\n}\n\nfunction idxOf(text, chr, start, end) {\n    var idx = text.indexOf(chr, start)\n    if (idx === -1 || idx > end)\n        return end\n    return idx\n}\n\nfunction isWhitespace(chr) {\n    return whitespace.test(chr)\n}\n\nfunction pre(measure, text, start, end, width) {\n    var lines = []\n    var lineStart = start\n    for (var i=start; i<end && i<text.length; i++) {\n        var chr = text.charAt(i)\n        var isNewline = newline.test(chr)\n\n        //If we've reached a newline, then step down a line\n        //Or if we've reached the EOF\n        if (isNewline || i===end-1) {\n            var lineEnd = isNewline ? i : i+1\n            var measured = measure(text, lineStart, lineEnd, width)\n            lines.push(measured)\n            \n            lineStart = i+1\n        }\n    }\n    return lines\n}\n\nfunction greedy(measure, text, start, end, width, mode) {\n    //A greedy word wrapper based on LibGDX algorithm\n    //https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n    var lines = []\n\n    var testWidth = width\n    //if 'nowrap' is specified, we only wrap on newline chars\n    if (mode === 'nowrap')\n        testWidth = Number.MAX_VALUE\n\n    while (start < end && start < text.length) {\n        //get next newline position\n        var newLine = idxOf(text, newlineChar, start, end)\n\n        //eat whitespace at start of line\n        while (start < newLine) {\n            if (!isWhitespace( text.charAt(start) ))\n                break\n            start++\n        }\n\n        //determine visible # of glyphs for the available width\n        var measured = measure(text, start, newLine, testWidth)\n\n        var lineEnd = start + (measured.end-measured.start)\n        var nextStart = lineEnd + newlineChar.length\n\n        //if we had to cut the line before the next newline...\n        if (lineEnd < newLine) {\n            //find char to break on\n            while (lineEnd > start) {\n                if (isWhitespace(text.charAt(lineEnd)))\n                    break\n                lineEnd--\n            }\n            if (lineEnd === start) {\n                if (nextStart > start + newlineChar.length) nextStart--\n                lineEnd = nextStart // If no characters to break, show all.\n            } else {\n                nextStart = lineEnd\n                //eat whitespace at end of line\n                while (lineEnd > start) {\n                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length)))\n                        break\n                    lineEnd--\n                }\n            }\n        }\n        if (lineEnd >= start) {\n            var result = measure(text, start, lineEnd, testWidth)\n            lines.push(result)\n        }\n        start = nextStart\n    }\n    return lines\n}\n\n//determines the visible number of glyphs within a given width\nfunction monospace(text, start, end, width) {\n    var glyphs = Math.min(width, end-start)\n    return {\n        start: start,\n        end: start+glyphs\n    }\n}", "\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n", "module.exports = (function xmlparser() {\n  //common browsers\n  if (typeof self.DOMParser !== 'undefined') {\n    return function(str) {\n      var parser = new self.DOMParser()\n      return parser.parseFromString(str, 'application/xml')\n    }\n  } \n\n  //IE8 fallback\n  if (typeof self.ActiveXObject !== 'undefined'\n      && new self.ActiveXObject('Microsoft.XMLDOM')) {\n    return function(str) {\n      var xmlDoc = new self.ActiveXObject(\"Microsoft.XMLDOM\")\n      xmlDoc.async = \"false\"\n      xmlDoc.loadXML(str)\n      return xmlDoc\n    }\n  }\n\n  //last resort fallback\n  return function(str) {\n    var div = document.createElement('div')\n    div.innerHTML = str\n    return div\n  }\n})()\n", "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n", "window.aframeStats = function (scene) {\n  var _rS = null;\n  var _scene = scene;\n  var _values = {\n    te: {\n      caption: 'Entities'\n    },\n    lt: {\n      caption: 'Load Time'\n    }\n  };\n  var _groups = [{\n    caption: 'A-Frame',\n    values: ['te', 'lt']\n  }];\n\n  function _update () {\n    _rS('te').set(getEntityCount());\n    if (window.performance.getEntriesByName) {\n      _rS('lt').set(window.performance.getEntriesByName('render-started')[0].startTime.toFixed(0));\n    }\n  }\n\n  function getEntityCount () {\n    var elements = _scene.querySelectorAll('*');\n    Array.prototype.slice.call(elements).filter(function (el) {\n      return el.isEntity;\n    });\n    return elements.length;\n  }\n\n  function _start () {}\n\n  function _end () {}\n\n  function _attach (r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: []\n  };\n};\n", "window.glStats = function () {\n\n    var _rS = null;\n\n    var _totalDrawArraysCalls = 0,\n        _totalDrawElementsCalls = 0,\n        _totalUseProgramCalls = 0,\n        _totalFaces = 0,\n        _totalVertices = 0,\n        _totalPoints = 0,\n        _totalBindTexures = 0;\n\n    function _h ( f, c ) {\n        return function () {\n            c.apply( this, arguments );\n            f.apply( this, arguments );\n        };\n    }\n\n    WebGLRenderingContext.prototype.drawArrays = _h( WebGLRenderingContext.prototype.drawArrays, function () {\n        _totalDrawArraysCalls++;\n        if ( arguments[ 0 ] == this.POINTS ) _totalPoints += arguments[ 2 ];\n        else _totalVertices += arguments[ 2 ];\n    } );\n\n    WebGLRenderingContext.prototype.drawElements = _h( WebGLRenderingContext.prototype.drawElements, function () {\n        _totalDrawElementsCalls++;\n        _totalFaces += arguments[ 1 ] / 3;\n        _totalVertices += arguments[ 1 ];\n    } );\n\n    WebGLRenderingContext.prototype.useProgram = _h( WebGLRenderingContext.prototype.useProgram, function () {\n        _totalUseProgramCalls++;\n    } );\n\n    WebGLRenderingContext.prototype.bindTexture = _h( WebGLRenderingContext.prototype.bindTexture, function () {\n        _totalBindTexures++;\n    } );\n\n    var _values = {\n        allcalls: {\n            over: 3000,\n            caption: 'Calls (hook)'\n        },\n        drawelements: {\n            caption: 'drawElements (hook)'\n        },\n        drawarrays: {\n            caption: 'drawArrays (hook)'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'WebGL',\n        values: [ 'allcalls', 'drawelements', 'drawarrays', 'useprogram', 'bindtexture', 'glfaces', 'glvertices', 'glpoints' ]\n    } ];\n\n    var _fractions = [ {\n        base: 'allcalls',\n        steps: [ 'drawelements', 'drawarrays' ]\n    } ];\n\n    function _update () {\n        _rS( 'allcalls' ).set( _totalDrawArraysCalls + _totalDrawElementsCalls );\n        _rS( 'drawElements' ).set( _totalDrawElementsCalls );\n        _rS( 'drawArrays' ).set( _totalDrawArraysCalls );\n        _rS( 'bindTexture' ).set( _totalBindTexures );\n        _rS( 'useProgram' ).set( _totalUseProgramCalls );\n        _rS( 'glfaces' ).set( _totalFaces );\n        _rS( 'glvertices' ).set( _totalVertices );\n        _rS( 'glpoints' ).set( _totalPoints );\n    }\n\n    function _start () {\n        _totalDrawArraysCalls = 0;\n        _totalDrawElementsCalls = 0;\n        _totalUseProgramCalls = 0;\n        _totalFaces = 0;\n        _totalVertices = 0;\n        _totalPoints = 0;\n        _totalBindTexures = 0;\n    }\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\nwindow.threeStats = function ( renderer ) {\n\n    var _rS = null;\n\n    var _values = {\n        'renderer.info.memory.geometries': {\n            caption: 'Geometries'\n        },\n        'renderer.info.memory.textures': {\n            caption: 'Textures'\n        },\n        'renderer.info.programs': {\n            caption: 'Programs'\n        },\n        'renderer.info.render.calls': {\n            caption: 'Calls'\n        },\n        'renderer.info.render.triangles': {\n            caption: 'Triangles',\n            over: 1000\n        },\n        'renderer.info.render.points': {\n            caption: 'Points'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'Three.js - Memory',\n        values: [ 'renderer.info.memory.geometries', 'renderer.info.programs', 'renderer.info.memory.textures' ]\n    }, {\n        caption: 'Three.js - Render',\n        values: [ 'renderer.info.render.calls', 'renderer.info.render.triangles', 'renderer.info.render.points' ]\n    } ];\n\n    var _fractions = [];\n\n    function _update () {\n\n        _rS( 'renderer.info.memory.geometries' ).set( renderer.info.memory.geometries );\n        _rS( 'renderer.info.programs' ).set( renderer.info.programs?.length ?? NaN );\n        _rS( 'renderer.info.memory.textures' ).set( renderer.info.memory.textures );\n        _rS( 'renderer.info.render.calls' ).set( renderer.info.render.calls );\n        _rS( 'renderer.info.render.triangles' ).set( renderer.info.render.triangles );\n        _rS( 'renderer.info.render.points' ).set( renderer.info.render.points );\n\n    }\n\n    function _start () {}\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\n/*\n *   From https://github.com/paulirish/memory-stats.js\n */\n\nwindow.BrowserStats = function () {\n\n    var _rS = null;\n\n    var _usedJSHeapSize = 0,\n        _totalJSHeapSize = 0;\n\n    if ( window.performance && !performance.memory ) {\n        performance.memory = {\n            usedJSHeapSize: 0,\n            totalJSHeapSize: 0\n        };\n    }\n\n    if ( performance.memory.totalJSHeapSize === 0 ) {\n        console.warn( 'totalJSHeapSize === 0... performance.memory is only available in Chrome .' );\n    }\n\n    var _values = {\n        memory: {\n            caption: 'Used Memory',\n            average: true,\n            avgMs: 1000,\n            over: 22\n        },\n        total: {\n            caption: 'Total Memory'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'Browser',\n        values: [ 'memory', 'total' ]\n    } ];\n\n    var _fractions = [ {\n        base: 'total',\n        steps: [ 'memory' ]\n    } ];\n\n    var log1024 = Math.log( 1024 );\n\n    function _size ( v ) {\n\n        var precision = 100; //Math.pow(10, 2);\n        var i = Math.floor( Math.log( v ) / log1024 );\n        return Math.round( v * precision / Math.pow( 1024, i ) ) / precision; // + ' ' + sizes[i];\n\n    }\n\n    function _update () {\n        _usedJSHeapSize = _size( performance.memory.usedJSHeapSize );\n        _totalJSHeapSize = _size( performance.memory.totalJSHeapSize );\n\n        _rS( 'memory' ).set( _usedJSHeapSize );\n        _rS( 'total' ).set( _totalJSHeapSize );\n    }\n\n    function _start () {\n        _usedJSHeapSize = 0;\n    }\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\nif (typeof module === 'object') {\n  module.exports = {\n    glStats: window.glStats,\n    threeStats: window.threeStats,\n    BrowserStats: window.BrowserStats\n  };\n}\n", "// performance.now() polyfill from https://gist.github.com/paulirish/5438650\n'use strict';\n\n( function () {\n\n    if ( 'performance' in window == false ) {\n        window.performance = {};\n    }\n\n    var performance = window.performance;\n\n    if ( 'now' in performance == false ) {\n\n        var nowOffset = Date.now();\n\n        if ( performance.timing && performance.timing.navigationStart ) {\n            nowOffset = performance.timing.navigationStart;\n        }\n\n        performance.now = function now () {\n            return Date.now() - nowOffset;\n        };\n\n    }\n\n    if( !performance.mark ) {\n        performance.mark = function(){}\n    }\n\n    if( !performance.measure ) {\n        performance.measure = function(){}\n    }\n\n} )();\n\nwindow.rStats = function rStats ( settings ) {\n\n    function iterateKeys ( array, callback ) {\n        var keys = Object.keys( array );\n        for ( var j = 0, l = keys.length; j < l; j++ ) {\n            callback( keys[ j ] );\n        }\n    }\n\n    function importCSS ( url ) {\n\n        var element = document.createElement( 'link' );\n        element.href = url;\n        element.rel = 'stylesheet';\n        element.type = 'text/css';\n        document.getElementsByTagName( 'head' )[ 0 ].appendChild( element );\n\n    }\n\n    var _settings = settings || {};\n    var _colours = _settings.colours || [ '#850700', '#c74900', '#fcb300', '#284280', '#4c7c0c' ];\n\n    var _cssFont = 'https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300';\n    var _cssRStats = ( _settings.CSSPath ? _settings.CSSPath : '' ) + 'rStats.css';\n\n    var _css = _settings.css || [ _cssFont, _cssRStats ];\n    _css.forEach(function (uri) {\n        importCSS( uri );\n    });\n\n    if ( !_settings.values ) _settings.values = {};\n\n    var _base, _div, _elHeight = 10, _elWidth = 200;\n    var _perfCounters = {};\n\n\n    function Graph ( _dom, _id, _defArg ) {\n\n        var _def = _defArg || {};\n        var _canvas = document.createElement( 'canvas' ),\n            _ctx = _canvas.getContext( '2d' ),\n            _max = 0,\n            _current = 0;\n\n        var c = _def.color ? _def.color : '#666666';\n\n        var _dotCanvas = document.createElement( 'canvas' ),\n            _dotCtx = _dotCanvas.getContext( '2d' );\n        _dotCanvas.width = 1;\n        _dotCanvas.height = 2 * _elHeight;\n        _dotCtx.fillStyle = '#444444';\n        _dotCtx.fillRect( 0, 0, 1, 2 * _elHeight );\n        _dotCtx.fillStyle = c;\n        _dotCtx.fillRect( 0, _elHeight, 1, _elHeight );\n        _dotCtx.fillStyle = '#ffffff';\n        _dotCtx.globalAlpha = 0.5;\n        _dotCtx.fillRect( 0, _elHeight, 1, 1 );\n        _dotCtx.globalAlpha = 1;\n\n        var _alarmCanvas = document.createElement( 'canvas' ),\n            _alarmCtx = _alarmCanvas.getContext( '2d' );\n        _alarmCanvas.width = 1;\n        _alarmCanvas.height = 2 * _elHeight;\n        _alarmCtx.fillStyle = '#444444';\n        _alarmCtx.fillRect( 0, 0, 1, 2 * _elHeight );\n        _alarmCtx.fillStyle = '#b70000';\n        _alarmCtx.fillRect( 0, _elHeight, 1, _elHeight );\n        _alarmCtx.globalAlpha = 0.5;\n        _alarmCtx.fillStyle = '#ffffff';\n        _alarmCtx.fillRect( 0, _elHeight, 1, 1 );\n        _alarmCtx.globalAlpha = 1;\n\n        function _init () {\n\n            _canvas.width = _elWidth;\n            _canvas.height = _elHeight;\n            _canvas.style.width = _canvas.width + 'px';\n            _canvas.style.height = _canvas.height + 'px';\n            _canvas.className = 'rs-canvas';\n            _dom.appendChild( _canvas );\n\n            _ctx.fillStyle = '#444444';\n            _ctx.fillRect( 0, 0, _canvas.width, _canvas.height );\n\n        }\n\n        function _draw ( v, alarm ) {\n            _current += ( v - _current ) * 0.1;\n            _max *= 0.99;\n            if ( _current > _max ) _max = _current;\n            _ctx.drawImage( _canvas, 1, 0, _canvas.width - 1, _canvas.height, 0, 0, _canvas.width - 1, _canvas.height );\n            if ( alarm ) {\n                _ctx.drawImage( _alarmCanvas, _canvas.width - 1, _canvas.height - _current * _canvas.height / _max - _elHeight );\n            } else {\n                _ctx.drawImage( _dotCanvas, _canvas.width - 1, _canvas.height - _current * _canvas.height / _max - _elHeight );\n            }\n        }\n\n        _init();\n\n        return {\n            draw: _draw\n        };\n\n    }\n\n    function StackGraph ( _dom, _num ) {\n\n        var _canvas = document.createElement( 'canvas' ),\n            _ctx = _canvas.getContext( '2d' );\n\n        function _init () {\n\n            _canvas.width = _elWidth;\n            _canvas.height = _elHeight * _num;\n            _canvas.style.width = _canvas.width + 'px';\n            _canvas.style.height = _canvas.height + 'px';\n            _canvas.className = 'rs-canvas';\n            _dom.appendChild( _canvas );\n\n            _ctx.fillStyle = '#444444';\n            _ctx.fillRect( 0, 0, _canvas.width, _canvas.height );\n\n        }\n\n        function _draw ( v ) {\n            _ctx.drawImage( _canvas, 1, 0, _canvas.width - 1, _canvas.height, 0, 0, _canvas.width - 1, _canvas.height );\n            var th = 0;\n            iterateKeys( v, function ( j ) {\n                var h = v[ j ] * _canvas.height;\n                _ctx.fillStyle = _colours[ j ];\n                _ctx.fillRect( _canvas.width - 1, th, 1, h );\n                th += h;\n            } );\n        }\n\n        _init();\n\n        return {\n            draw: _draw\n        };\n\n    }\n\n    function PerfCounter ( id, group ) {\n\n        var _id = id,\n            _time,\n            _value = 0,\n            _total = 0,\n            _averageValue = 0,\n            _accumValue = 0,\n            _accumStart = performance.now(),\n            _accumSamples = 0,\n            _dom = document.createElement( 'div' ),\n            _spanId = document.createElement( 'span' ),\n            _spanValue = document.createElement( 'div' ),\n            _spanValueText = document.createTextNode( '' ),\n            _def = _settings ? _settings.values[ _id.toLowerCase() ] : null,\n            _graph = new Graph( _dom, _id, _def ),\n            _started = false;\n\n        _spanId.className = 'rs-counter-id';\n        _spanId.textContent = ( _def && _def.caption ) ? _def.caption : _id;\n\n        _spanValue.className = 'rs-counter-value';\n        _spanValue.appendChild( _spanValueText );\n\n        _dom.appendChild( _spanId );\n        _dom.appendChild( _spanValue );\n        if ( group ) group.div.appendChild( _dom );\n        else _div.appendChild( _dom );\n\n        _time = performance.now();\n\n        function _average ( v ) {\n            if ( _def && _def.average ) {\n                _accumValue += v;\n                _accumSamples++;\n                var t = performance.now();\n                if ( t - _accumStart >= ( _def.avgMs || 1000 ) ) {\n                    _averageValue = _accumValue / _accumSamples;\n                    _accumValue = 0;\n                    _accumStart = t;\n                    _accumSamples = 0;\n                }\n            }\n        }\n\n        function _start () {\n            _time = performance.now();\n            if( _settings.userTimingAPI ) performance.mark( _id + '-start' );\n            _started = true;\n        }\n\n        function _end () {\n            _value = performance.now() - _time;\n            if( _settings.userTimingAPI ) {\n                performance.mark( _id + '-end' );\n                if( _started ) {\n                    performance.measure( _id, _id + '-start', _id + '-end' );\n                }\n            }\n            _average( _value );\n        }\n\n        function _tick () {\n            _end();\n            _start();\n        }\n\n        function _draw () {\n            var v = ( _def && _def.average ) ? _averageValue : _value;\n            _spanValueText.nodeValue = Math.round( v * 100 ) / 100;\n            var a = ( _def && ( ( _def.below && _value < _def.below ) || ( _def.over && _value > _def.over ) ) );\n            _graph.draw( _value, a );\n            _dom.className = a ? 'rs-counter-base alarm' : 'rs-counter-base';\n\n        }\n\n        function _frame () {\n            var t = performance.now();\n            var e = t - _time;\n            _total++;\n            if ( e > 1000 ) {\n                if ( _def && _def.interpolate === false ) {\n                    _value = _total;\n                } else {\n                    _value = _total * 1000 / e;\n                }\n                _total = 0;\n                _time = t;\n                _average( _value );\n            }\n        }\n\n        function _set ( v ) {\n            _value = v;\n            _average( _value );\n        }\n\n        return {\n            set: _set,\n            start: _start,\n            tick: _tick,\n            end: _end,\n            frame: _frame,\n            value: function () {\n                return _value;\n            },\n            draw: _draw\n        };\n\n    }\n\n    function sample () {\n\n        var _value = 0;\n\n        function _set ( v ) {\n            _value = v;\n        }\n\n        return {\n            set: _set,\n            value: function () {\n                return _value;\n            }\n        };\n\n    }\n\n    function _perf ( idArg ) {\n\n        var id = idArg.toLowerCase();\n        if ( id === undefined ) id = 'default';\n        if ( _perfCounters[ id ] ) return _perfCounters[ id ];\n\n        var group = null;\n        if ( _settings && _settings.groups ) {\n            iterateKeys( _settings.groups, function ( j ) {\n                var g = _settings.groups[ parseInt( j, 10 ) ];\n                if ( !group && g.values.indexOf( id.toLowerCase() ) !== -1 ) {\n                    group = g;\n                }\n            } );\n        }\n\n        var p = new PerfCounter( id, group );\n        _perfCounters[ id ] = p;\n        return p;\n\n    }\n\n    function _init () {\n\n        if ( _settings.plugins ) {\n            if ( !_settings.values ) _settings.values = {};\n            if ( !_settings.groups ) _settings.groups = [];\n            if ( !_settings.fractions ) _settings.fractions = [];\n            for ( var j = 0; j < _settings.plugins.length; j++ ) {\n                _settings.plugins[ j ].attach( _perf );\n                iterateKeys( _settings.plugins[ j ].values, function ( k ) {\n                    _settings.values[ k ] = _settings.plugins[ j ].values[ k ];\n                } );\n                _settings.groups = _settings.groups.concat( _settings.plugins[ j ].groups );\n                _settings.fractions = _settings.fractions.concat( _settings.plugins[ j ].fractions );\n            }\n        } else {\n            _settings.plugins = {};\n        }\n\n        _base = document.createElement( 'div' );\n        _base.className = 'rs-base';\n        _div = document.createElement( 'div' );\n        _div.className = 'rs-container';\n        _div.style.height = 'auto';\n        _base.appendChild( _div );\n        document.body.appendChild( _base );\n\n        if ( !_settings ) return;\n\n        if ( _settings.groups ) {\n            iterateKeys( _settings.groups, function ( j ) {\n                var g = _settings.groups[ parseInt( j, 10 ) ];\n                var div = document.createElement( 'div' );\n                div.className = 'rs-group';\n                g.div = div;\n                var h1 = document.createElement( 'h1' );\n                h1.textContent = g.caption;\n                h1.addEventListener( 'click', function ( e ) {\n                    this.classList.toggle( 'hidden' );\n                    e.preventDefault();\n                }.bind( div ) );\n                _div.appendChild( h1 );\n                _div.appendChild( div );\n            } );\n        }\n\n        if ( _settings.fractions ) {\n            iterateKeys( _settings.fractions, function ( j ) {\n                var f = _settings.fractions[ parseInt( j, 10 ) ];\n                var div = document.createElement( 'div' );\n                div.className = 'rs-fraction';\n                var legend = document.createElement( 'div' );\n                legend.className = 'rs-legend';\n\n                var h = 0;\n                iterateKeys( _settings.fractions[ j ].steps, function ( k ) {\n                    var p = document.createElement( 'p' );\n                    p.textContent = _settings.fractions[ j ].steps[ k ];\n                    p.style.color = _colours[ h ];\n                    legend.appendChild( p );\n                    h++;\n                } );\n                div.appendChild( legend );\n                div.style.height = h * _elHeight + 'px';\n                f.div = div;\n                var graph = new StackGraph( div, h );\n                f.graph = graph;\n                _div.appendChild( div );\n            } );\n        }\n\n    }\n\n    function _update () {\n\n        iterateKeys( _settings.plugins, function ( j ) {\n            _settings.plugins[ j ].update();\n        } );\n\n        iterateKeys( _perfCounters, function ( j ) {\n            _perfCounters[ j ].draw();\n        } );\n\n        if ( _settings && _settings.fractions ) {\n            iterateKeys( _settings.fractions, function ( j ) {\n                var f = _settings.fractions[ parseInt( j, 10 ) ];\n                var v = [];\n                var base = _perfCounters[ f.base.toLowerCase() ];\n                if ( base ) {\n                    base = base.value();\n                    iterateKeys( _settings.fractions[ j ].steps, function ( k ) {\n                        var s = _settings.fractions[ j ].steps[ parseInt( k, 10 ) ].toLowerCase();\n                        var val = _perfCounters[ s ];\n                        if ( val ) {\n                            v.push( val.value() / base );\n                        }\n                    } );\n                }\n                f.graph.draw( v );\n            } );\n        }\n\n        /*if( _height != _div.clientHeight ) {\n            _height = _div.clientHeight;\n            _base.style.height = _height + 2 * _elHeight + 'px';\n        console.log( _base.clientHeight );\n        }*/\n\n    }\n\n    _init();\n\n    return function ( id ) {\n        if ( id ) return _perf( id );\n        return {\n            element: _base,\n            update: _update\n        };\n    };\n\n}\n\nif (typeof module === 'object') {\n  module.exports = window.rStats;\n}\n", "/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = {};\n\nUtil.base64 = function(mimeType, base64) {\n  return 'data:' + mimeType + ';base64,' + base64;\n};\n\nUtil.isMobile = function() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\nUtil.isIOS = function() {\n  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n};\n\nUtil.isIFrame = function() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n};\n\nUtil.appendQueryParameter = function(url, key, value) {\n  // Determine delimiter based on if the URL already GET parameters in it.\n  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');\n  url += delimiter + key + '=' + value;\n  return url;\n};\n\n// From http://goo.gl/4WX3tg\nUtil.getQueryParameter = function(name) {\n  name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n};\n\nUtil.isLandscapeMode = function() {\n  return (window.orientation == 90 || window.orientation == -90);\n};\n\n\nmodule.exports = Util;\n", "/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = require('./util.js');\n\n/**\n * Android and iOS compatible wakelock implementation.\n *\n * Refactored thanks to dkovalev@.\n */\nfunction AndroidWakeLock() {\n  var video = document.createElement('video');\n\n  video.addEventListener('ended', function() {\n    video.play();\n  });\n\n  this.request = function() {\n    if (video.paused) {\n      // Base64 version of videos_src/no-sleep-60s.webm.\n      video.src = Util.base64('video/webm', 'GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw==');\n      video.play();\n    }\n  };\n\n  this.release = function() {\n    video.pause();\n    video.src = '';\n  };\n}\n\nfunction iOSWakeLock() {\n  var timer = null;\n\n  this.request = function() {\n    if (!timer) {\n      timer = setInterval(function() {\n        window.location.href = '/';\n        setTimeout(window.stop, 0);\n      }, 15000);\n    }\n  }\n\n  this.release = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n}\n\n\nfunction getWakeLock() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {\n    return iOSWakeLock;\n  } else {\n    return AndroidWakeLock;\n  }\n}\n\nmodule.exports = getWakeLock();\n", "// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(${___CSS_LOADER_URL_REPLACEMENT_0___}) 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(${___CSS_LOADER_URL_REPLACEMENT_1___}) 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(${___CSS_LOADER_URL_REPLACEMENT_2___});\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(${___CSS_LOADER_URL_REPLACEMENT_3___}) center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: \"Insert phone into Cardboard holder.\";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(${___CSS_LOADER_URL_REPLACEMENT_4___}) no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/aframe.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/* .a-fullscreen means not embedded. */\\nhtml.a-fullscreen {\\n  bottom: 0;\\n  left: 0;\\n  position: fixed;\\n  right: 0;\\n  top: 0;\\n}\\n\\nhtml.a-fullscreen body {\\n  height: 100%;\\n  margin: 0;\\n  overflow: hidden;\\n  padding: 0;\\n  width: 100%;\\n}\\n\\n/* Class is removed when doing <a-scene embedded>. */\\nhtml.a-fullscreen .a-canvas {\\n  width: 100% !important;\\n  height: 100% !important;\\n  top: 0 !important;\\n  left: 0 !important;\\n  right: 0 !important;\\n  bottom: 0 !important;\\n  position: fixed !important;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-vr,\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 5px;\\n  bottom: 5px;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 60px;\\n}\\n\\n/* In chrome mobile the user agent stylesheet set it to white  */\\n:-webkit-full-screen {\\n  background-color: transparent;\\n}\\n\\n.a-hidden {\\n  display: none !important;\\n}\\n\\n.a-canvas {\\n  height: 100%;\\n  left: 0;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n}\\n\\n.a-canvas.a-grab-cursor:hover {\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\\n  cursor: pointer;\\n}\\n\\n.a-inspector-loader {\\n  background-color: #ed3160;\\n  position: fixed;\\n  left: 3px;\\n  top: 3px;\\n  padding: 6px 10px;\\n  color: #fff;\\n  text-decoration: none;\\n  font-size: 12px;\\n  font-family: Roboto,sans-serif;\\n  text-align: center;\\n  z-index: 99999;\\n  width: 204px;\\n}\\n\\n/* Inspector loader animation */\\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n\\n.a-inspector-loader .dots span {\\n  animation: dots-1 2s infinite steps(1);\\n  -webkit-animation: dots-1 2s infinite steps(1);\\n}\\n\\n.a-inspector-loader .dots span:first-child + span {\\n  animation-name: dots-2;\\n  -webkit-animation-name: dots-2;\\n}\\n\\n.a-inspector-loader .dots span:first-child + span + span {\\n  animation-name: dots-3;\\n  -webkit-animation-name: dots-3;\\n}\\n\\na-scene {\\n  display: block;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\na-assets,\\na-scene video,\\na-scene img,\\na-scene audio {\\n  display: none;\\n}\\n\\n.a-enter-vr-modal,\\n.a-orientation-modal {\\n  font-family: Consolas, Andale Mono, Courier New, monospace;\\n}\\n\\n.a-enter-vr-modal a {\\n  border-bottom: 1px solid #fff;\\n  padding: 2px 0;\\n  text-decoration: none;\\n  transition: .1s color ease-in;\\n}\\n\\n.a-enter-vr-modal a:hover {\\n  background-color: #fff;\\n  color: #111;\\n  padding: 2px 4px;\\n  position: relative;\\n  left: -4px;\\n}\\n\\n.a-enter-vr,\\n.a-enter-ar {\\n  font-family: sans-serif, monospace;\\n  font-size: 13px;\\n  width: 100%;\\n  font-weight: 200;\\n  line-height: 16px;\\n  position: absolute;\\n  right: 20px;\\n  bottom: 20px;\\n}\\n\\n.a-enter-ar.xr {\\n  right: 90px;\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-vr-modal,\\n.a-enter-vr-modal a {\\n  color: #fff;\\n  user-select: none;\\n  outline: none;\\n}\\n\\n.a-enter-vr-button {\\n  background: rgba(0, 0, 0, 0.35) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-ar-button {\\n  background: rgba(0, 0, 0, 0.20) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-vr.fullscreen .a-enter-vr-button {\\n  background-image: url(\\\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E\\\");\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-ar-button {\\n  background-size: 90% 90%;\\n  border: 0;\\n  bottom: 0;\\n  cursor: pointer;\\n  min-width: 58px;\\n  min-height: 34px;\\n  /* 1.74418604651 */\\n  /*\\n    In order to keep the aspect ratio when resizing\\n    padding-top percentages are relative to the containing block's width.\\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\\n  */\\n  padding-right: 0;\\n  padding-top: 0;\\n  position: absolute;\\n  right: 0;\\n  transition: background-color .05s ease;\\n  -webkit-transition: background-color .05s ease;\\n  z-index: 9999;\\n  border-radius: 8px;\\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\\n}\\n\\n.a-enter-ar-button {\\n  background-size: 100% 90%;\\n  border-radius: 7px;\\n}\\n\\n.a-enter-ar-button:active,\\n.a-enter-ar-button:hover,\\n.a-enter-vr-button:active,\\n.a-enter-vr-button:hover {\\n  background-color: #ef2d5e;\\n}\\n\\n.a-enter-vr-button.resethover {\\n  background-color: rgba(0, 0, 0, 0.35);\\n}\\n\\n.a-enter-vr-modal {\\n  background-color: #666;\\n  border-radius: 0;\\n  display: none;\\n  min-height: 32px;\\n  margin-right: 70px;\\n  padding: 9px;\\n  width: 280px;\\n  right: 2%;\\n  position: absolute;\\n}\\n\\n.a-enter-vr-modal:after {\\n  border-bottom: 10px solid transparent;\\n  border-left: 10px solid #666;\\n  border-top: 10px solid transparent;\\n  display: inline-block;\\n  content: '';\\n  position: absolute;\\n  right: -5px;\\n  top: 5px;\\n  width: 0;\\n  height: 0;\\n}\\n\\n.a-enter-vr-modal p,\\n.a-enter-vr-modal a {\\n  display: inline;\\n}\\n\\n.a-enter-vr-modal p {\\n  margin: 0;\\n}\\n\\n.a-enter-vr-modal p:after {\\n  content: ' ';\\n}\\n\\n.a-orientation-modal {\\n  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-orientation-modal:after {\\n  color: #666;\\n  content: \\\"Insert phone into Cardboard holder.\\\";\\n  display: block;\\n  position: absolute;\\n  text-align: center;\\n  top: 70%;\\n  transform: translateY(-70%);\\n  width: 100%;\\n}\\n\\n.a-orientation-modal button {\\n  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;\\n  border: none;\\n  height: 50px;\\n  text-indent: -9999px;\\n  width: 50px;\\n}\\n\\n.a-loader-title {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  font-family: sans-serif, monospace;\\n  text-align: center;\\n  font-size: 20px;\\n  height: 50px;\\n  font-weight: 300;\\n  line-height: 50px;\\n  position: absolute;\\n  right: 0px;\\n  left: 0px;\\n  top: 0px;\\n  color: white;\\n}\\n\\n.a-modal {\\n  position: absolute;\\n  background: rgba(0, 0, 0, 0.60);\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-dialog {\\n  position: relative;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  z-index: 199995;\\n  width: 300px;\\n  height: 200px;\\n  background-size: contain;\\n  background-color: white;\\n  font-family: sans-serif, monospace;\\n  font-size: 20px;\\n  border-radius: 3px;\\n  padding: 6px;\\n}\\n\\n.a-dialog-text-container {\\n  width: 100%;\\n  height: 70%;\\n  align-self: flex-start;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  flex-direction: column;\\n}\\n\\n.a-dialog-text {\\n  display: inline-block;\\n  font-weight: normal;\\n  font-size: 14pt;\\n  margin: 8px;\\n}\\n\\n.a-dialog-buttons-container {\\n  display: inline-flex;\\n  align-self: flex-end;\\n  width: 100%;\\n  height: 30%;\\n}\\n\\n.a-dialog-button {\\n  cursor: pointer;\\n  align-self: center;\\n  opacity: 0.9;\\n  height: 80%;\\n  width: 50%;\\n  font-size: 12pt;\\n  margin: 4px;\\n  border-radius: 2px;\\n  text-align:center;\\n  border: none;\\n  display: inline-block;\\n  -webkit-transition: all 0.25s ease-in-out;\\n  transition: all 0.25s ease-in-out;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\\n  user-select: none;\\n}\\n\\n.a-dialog-permission-button:hover {\\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\\n}\\n\\n.a-dialog-allow-button {\\n  background-color: #00ceff;\\n}\\n\\n.a-dialog-deny-button {\\n  background-color: #ff005b;\\n}\\n\\n.a-dialog-ok-button {\\n  background-color: #00ceff;\\n  width: 100%;\\n}\\n\\n.a-dom-overlay:not(.a-no-style) {\\n  overflow: hidden;\\n  position: absolute;\\n  pointer-events: none;\\n  box-sizing: border-box;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  padding: 1em;\\n}\\n\\n.a-dom-overlay:not(.a-no-style)>* {\\n  pointer-events: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n", "// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/rStats.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF\",\"sourcesContent\":[\".rs-base {\\n  background-color: #333;\\n  color: #fafafa;\\n  border-radius: 0;\\n  font: 10px monospace;\\n  left: 5px;\\n  line-height: 1em;\\n  opacity: 0.85;\\n  overflow: hidden;\\n  padding: 10px;\\n  position: fixed;\\n  top: 5px;\\n  width: 300px;\\n  z-index: 10000;\\n}\\n\\n.rs-base div.hidden {\\n  display: none;\\n}\\n\\n.rs-base h1 {\\n  color: #fff;\\n  cursor: pointer;\\n  font-size: 1.4em;\\n  font-weight: 300;\\n  margin: 0 0 5px;\\n  padding: 0;\\n}\\n\\n.rs-group {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-flex-direction: column-reverse;\\n  flex-direction: column-reverse;\\n  margin-bottom: 5px;\\n}\\n\\n.rs-group:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.rs-counter-base {\\n  align-items: center;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: flex;\\n  height: 10px;\\n  -webkit-justify-content: space-between;\\n  justify-content: space-between;\\n  margin: 2px 0;\\n}\\n\\n.rs-counter-base.alarm {\\n  color: #b70000;\\n  text-shadow: 0 0 0 #b70000,\\n               0 0 1px #fff,\\n               0 0 1px #fff,\\n               0 0 2px #fff,\\n               0 0 2px #fff,\\n               0 0 3px #fff,\\n               0 0 3px #fff,\\n               0 0 4px #fff,\\n               0 0 4px #fff;\\n}\\n\\n.rs-counter-id {\\n  font-weight: 300;\\n  -webkit-box-ordinal-group: 0;\\n  -webkit-order: 0;\\n  order: 0;\\n  width: 54px;\\n}\\n\\n.rs-counter-value {\\n  font-weight: 300;\\n  -webkit-box-ordinal-group: 1;\\n  -webkit-order: 1;\\n  order: 1;\\n  text-align: right;\\n  width: 35px;\\n}\\n\\n.rs-canvas {\\n  -webkit-box-ordinal-group: 2;\\n  -webkit-order: 2;\\n  order: 2;\\n}\\n\\n@media (min-width: 480px) {\\n  .rs-base {\\n    left: 20px;\\n    top: 20px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n", "\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n       export default content && content.locals ? content.locals : undefined;\n", "\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./rStats.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./rStats.css\";\n       export default content && content.locals ? content.locals : undefined;\n", "\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};", "\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;", "\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;", "\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;", "\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;", "\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;", "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n", "// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function", "__webpack_require__.nc = undefined;", "/*\n * anime.js v3.0.0\n * (c) 2019 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar hexRegex = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\nvar rgbPrefixRegex = /^rgb/;\nvar hslRegex = /^hsl/;\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return hexRegex.test(a); },\n  rgb: function (a) { return rgbPrefixRegex.test(a); },\n  hsl: function (a) { return hslRegex.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nvar easingFunctionRegex = /\\(([^)]+)\\)/;\n\nfunction parseEasingParameters(string) {\n  var match = easingFunctionRegex.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t :\n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = {\n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  for (var coords in curves) {\n    for (var i = 0, len = curves[coords].length; i < len; i++) {\n      eases['ease'+coords+names[i]] = curves[coords][i];\n    }\n  }\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nvar auxArrayFilter = [];\n\nfunction filterArray(arr, callback) {\n  var result = auxArrayFilter;\n\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n\n  // arr turns into the auxArray and we return the previously aux array.\n  auxArrayFilter = arr;\n  auxArrayFilter.length = 0;\n  return result;\n}\n\nfunction flattenArray (arr, result) {\n  if (!result) { result = []; }\n  for (var i = 0, length = arr.length; i < length; i++) {\n    var value = arr[i];\n    if (Array.isArray(value)) {\n      flattenArray(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nvar rgbRegex = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g;\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = rgbRegex.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nvar hexToRgbaHexRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nvar hexToRgbaRgbRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\nfunction hexToRgba(hexValue) {\n  var hex = hexValue.replace(hexToRgbaHexRegex, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = hexToRgbaRgbRegex.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nvar hslToRgbaHsl1Regex = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\nvar hslToRgbaHsl2Regex = /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g;\n\nfunction hslToRgba(hslValue) {\n  var hsl = hslToRgbaHsl1Regex.exec(hslValue) || hslToRgbaHsl2Regex.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nvar unitRegex = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;\n\nfunction getUnit(val) {\n  var split = unitRegex.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nvar transformRegex = /(\\w+)\\(([^)]*)\\)/g;\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var transforms = new Map();\n  var m; while (m = transformRegex.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nvar operatorRegex = /^(\\*=|\\+=|-=)/;\n\nfunction getRelativeValue(to, from) {\n  var operator = operatorRegex.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nvar whitespaceRegex = /\\s/g;\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !whitespaceRegex.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')},\n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nvar valueRegex = /-?\\d*\\.?\\d+/g;\n\nfunction decomposeValue(val, unit) {\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(valueRegex) ? value.match(valueRegex).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(valueRegex) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nvar springRegex = /^spring/;\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (springRegex.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n\n  for (var i = 0, len = animatables.length; i < len; i++) {\n    var animatable = animatables[i];\n\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  }\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() {\n    raf = requestAnimationFrame(step);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(t);\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = cancelAnimationFrame(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    for (var i = 0, len = activeInstances.length; i < len; i++) {\n      activeInstance[i].pause();\n    }\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    for (var i$1 = 0, len$1 = pausedInstances.length; i$1 < len$1; i$1++) {\n      pausedInstances[i$1].play();\n    }\n  }\n}\n\ndocument.addEventListener('visibilitychange', handleVisibilityChange);\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise() {\n    return window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n  }\n\n  var promise = makePromise();\n\n  var instance = createNewInstance(params);\n\n  function toggleInstanceDirection() {\n    instance.reversed = !instance.reversed;\n    for (var i = 0, len = children.length; i < len; i++) {\n      children[i].reversed = instance.reversed;\n    }\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if ('Promise' in window) {\n            resolve();\n            promise = makePromise();\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.finished = promise;\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.0';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n", "const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_three__;", "import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tColorManagement,\n\tFileLoader,\n\tLoader,\n\tLinearSRGBColorSpace,\n\tSRGBColorSpace\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\n\tparse( buffer, onLoad, onError = ()=>{} ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace, onError ).catch( onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace, onError = () => {} ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback ).catch( onError );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i );\n\t\t\tColorManagement.toWorkingColorSpace( _color, SRGBColorSpace );\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n", "import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * @param  {Array<BufferGeometry>} geometries\n * @param  {Boolean} useGroups\n * @return {BufferGeometry}\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {BufferAttribute}\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferAttribute} attribute\n * @return {BufferAttribute}\n */\nexport function deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {Array<InterleavedBufferAttribute>}\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n// returns a new, non-interleaved version of the provided attribute\nexport function deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n// deinterleaves all attributes on the geometry\nexport function deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @return {number}\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} tolerance\n * @return {BufferGeometry}\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new attr.constructor(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\tif ( morphAttributes ) {\n\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\n\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newArray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttributes ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n * Helpful for Raytracing or Decals.\n * @param {Mesh | Line | Points} object An instance of Mesh, Line or Points.\n * @return {Object} An Object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry\n * @param {number} [creaseAngle]\n * @return {BufferGeometry}\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeAttributes,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n", "import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image.\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n *\n * @param {Object<String, Material>} cache\n * @return {Material}\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = - 1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t *\n\t * @param {Object} cache\n\t * @param {Object3D} index\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/**\n\t * Returns a reference to a shared resource, cloning it if necessary.\n\t *\n\t * @param {Object} cache\n\t * @param {Number} index\n\t * @param {Object} object\n\t * @return {Object}\n\t */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t *\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @param {string} colorSpace\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * When Object3D instances are targeted by animation, they need unique names.\n\t *\n\t * @param {String} originalName\n\t * @return {String}\n\t */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.position:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\nexport { GLTFLoader };\n", "/**\n * @author Deepkolos / https://github.com/deepkolos\n */\n\nexport class WorkerPool {\n\n\tconstructor( pool = 4 ) {\n\n\t\tthis.pool = pool;\n\t\tthis.queue = [];\n\t\tthis.workers = [];\n\t\tthis.workersResolve = [];\n\t\tthis.workerStatus = 0;\n\n\t}\n\n\t_initWorker( workerId ) {\n\n\t\tif ( ! this.workers[ workerId ] ) {\n\n\t\t\tconst worker = this.workerCreator();\n\t\t\tworker.addEventListener( 'message', this._onMessage.bind( this, workerId ) );\n\t\t\tthis.workers[ workerId ] = worker;\n\n\t\t}\n\n\t}\n\n\t_getIdleWorker() {\n\n\t\tfor ( let i = 0; i < this.pool; i ++ )\n\t\t\tif ( ! ( this.workerStatus & ( 1 << i ) ) ) return i;\n\n\t\treturn - 1;\n\n\t}\n\n\t_onMessage( workerId, msg ) {\n\n\t\tconst resolve = this.workersResolve[ workerId ];\n\t\tresolve && resolve( msg );\n\n\t\tif ( this.queue.length ) {\n\n\t\t\tconst { resolve, msg, transfer } = this.queue.shift();\n\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t} else {\n\n\t\t\tthis.workerStatus ^= 1 << workerId;\n\n\t\t}\n\n\t}\n\n\tsetWorkerCreator( workerCreator ) {\n\n\t\tthis.workerCreator = workerCreator;\n\n\t}\n\n\tsetWorkerLimit( pool ) {\n\n\t\tthis.pool = pool;\n\n\t}\n\n\tpostMessage( msg, transfer ) {\n\n\t\treturn new Promise( ( resolve ) => {\n\n\t\t\tconst workerId = this._getIdleWorker();\n\n\t\t\tif ( workerId !== - 1 ) {\n\n\t\t\t\tthis._initWorker( workerId );\n\t\t\t\tthis.workerStatus |= 1 << workerId;\n\t\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t\t} else {\n\n\t\t\t\tthis.queue.push( { resolve, msg, transfer } );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workers.forEach( ( worker ) => worker.terminate() );\n\t\tthis.workersResolve.length = 0;\n\t\tthis.workers.length = 0;\n\t\tthis.queue.length = 0;\n\t\tthis.workerStatus = 0;\n\n\t}\n\n}\n", "const t=0,e=1,n=2,i=3,s=0,a=0,r=2,o=0,l=1,f=160,h=161,U=162,c=163,_=166,p=0,g=1,y=0,x=1,u=2,b=3,d=4,w=5,m=6,D=7,B=8,L=9,v=10,A=11,k=12,V=13,I=14,S=15,F=16,O=17,E=18,T=0,C=1,M=2,P=3,z=4,W=5,H=6,N=7,K=8,X=9,R=10,Y=11,j=0,q=1,G=2,J=13,Q=14,Z=15,$=128,tt=64,et=32,nt=16,it=0,st=1,at=2,rt=3,ot=4,lt=5,ft=6,ht=7,Ut=8,ct=9,_t=10,pt=13,gt=14,yt=15,xt=16,ut=17,bt=20,dt=21,wt=22,mt=23,Dt=24,Bt=27,Lt=28,vt=29,At=30,kt=31,Vt=34,It=35,St=36,Ft=37,Ot=38,Et=41,Tt=42,Ct=43,Mt=44,Pt=45,zt=48,Wt=49,Ht=50,Nt=58,Kt=59,Xt=62,Rt=63,Yt=64,jt=65,qt=68,Gt=69,Jt=70,Qt=71,Zt=74,$t=75,te=76,ee=77,ne=78,ie=81,se=82,ae=83,re=84,oe=85,le=88,fe=89,he=90,Ue=91,ce=92,_e=95,pe=96,ge=97,ye=98,xe=99,ue=100,be=101,de=102,we=103,me=104,De=105,Be=106,Le=107,ve=108,Ae=109,ke=110,Ve=111,Ie=112,Se=113,Fe=114,Oe=115,Ee=116,Te=117,Ce=118,Me=119,Pe=120,ze=121,We=122,He=123,Ne=124,Ke=125,Xe=126,Re=127,Ye=128,je=129,qe=130,Ge=131,Je=132,Qe=133,Ze=134,$e=135,tn=136,en=137,nn=138,sn=139,an=140,rn=141,on=142,ln=143,fn=144,hn=145,Un=146,cn=147,_n=148,pn=149,gn=150,yn=151,xn=152,un=153,bn=154,dn=155,wn=156,mn=157,Dn=158,Bn=159,Ln=160,vn=161,An=162,kn=163,Vn=164,In=165,Sn=166,Fn=167,On=168,En=169,Tn=170,Cn=171,Mn=172,Pn=173,zn=174,Wn=175,Hn=176,Nn=177,Kn=178,Xn=179,Rn=180,Yn=181,jn=182,qn=183,Gn=184,Jn=1000156007,Qn=1000156008,Zn=1000156009,$n=1000156010,ti=1000156011,ei=1000156017,ni=1000156018,ii=1000156019,si=1000156020,ai=1000156021,ri=1000054e3,oi=1000054001,li=1000054002,fi=1000054003,hi=1000054004,Ui=1000054005,ci=1000054006,_i=1000054007,pi=1000066e3,gi=1000066001,yi=1000066002,xi=1000066003,ui=1000066004,bi=1000066005,di=1000066006,wi=1000066007,mi=1000066008,Di=1000066009,Bi=1000066010,Li=1000066011,vi=1000066012,Ai=1000066013,ki=100034e4,Vi=1000340001;class Ii{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Si{constructor(t,e,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){void 0===e&&(e=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Fi=new Uint8Array([0]),Oi=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(t){return(new TextEncoder).encode(t)}function Ti(t){return(new TextDecoder).decode(t)}function Ci(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function Mi(t,e){return void 0===e&&(e=4),Math.ceil(t/e)*e-t}function Pi(t){const e=new Uint8Array(t.buffer,t.byteOffset,Oi.length);if(e[0]!==Oi[0]||e[1]!==Oi[1]||e[2]!==Oi[2]||e[3]!==Oi[3]||e[4]!==Oi[4]||e[5]!==Oi[5]||e[6]!==Oi[6]||e[7]!==Oi[7]||e[8]!==Oi[8]||e[9]!==Oi[9]||e[10]!==Oi[10]||e[11]!==Oi[11])throw new Error(\"Missing KTX 2.0 identifier.\");const n=new Ii,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Si(t,Oi.length,i,!0);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),f=s._nextUint32(),h=s._nextUint64(),U=s._nextUint64(),c=new Si(t,Oi.length+i,3*a*8,!0);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+c._nextUint64(),c._nextUint64()),uncompressedByteLength:c._nextUint64()});const _=new Si(t,r,o,!0),p={vendorId:_._skip(4)._nextUint16(),descriptorType:_._nextUint16(),versionNumber:_._nextUint16(),descriptorBlockSize:_._nextUint16(),colorModel:_._nextUint8(),colorPrimaries:_._nextUint8(),transferFunction:_._nextUint8(),flags:_._nextUint8(),texelBlockDimension:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],bytesPlane:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:_._nextUint16(),bitLength:_._nextUint8(),channelType:_._nextUint8(),samplePosition:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&e.channelType?(e.sampleLower=_._nextInt32(),e.sampleUpper=_._nextInt32()):(e.sampleLower=_._nextUint32(),e.sampleUpper=_._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const y=new Si(t,l,f,!0);for(;y._offset<f;){const t=y._nextUint32(),e=y._scan(t),i=Ti(e);if(n.keyValue[i]=y._nextUint8Array(t-e.byteLength-1),i.match(/^ktx/i)){const t=Ti(n.keyValue[i]);n.keyValue[i]=t.substring(0,t.lastIndexOf(\"\\0\"))}y._skip(t%4?4-t%4:0)}if(U<=0)return n;const x=new Si(t,h,U,!0),u=x._nextUint16(),b=x._nextUint16(),d=x._nextUint32(),w=x._nextUint32(),m=x._nextUint32(),D=x._nextUint32(),B=[];for(let t=0;t<a;t++)B.push({imageFlags:x._nextUint32(),rgbSliceByteOffset:x._nextUint32(),rgbSliceByteLength:x._nextUint32(),alphaSliceByteOffset:x._nextUint32(),alphaSliceByteLength:x._nextUint32()});const L=h+x._offset,v=L+d,A=v+w,k=A+m,V=new Uint8Array(t.buffer,t.byteOffset+L,d),I=new Uint8Array(t.buffer,t.byteOffset+v,w),S=new Uint8Array(t.buffer,t.byteOffset+A,m),F=new Uint8Array(t.buffer,t.byteOffset+k,D);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:B,endpointsData:V,selectorsData:I,tablesData:S,extendedData:F},n}const zi={keepWriter:!1};function Wi(t,e){void 0===e&&(e={}),e={...zi,...e};let n=new ArrayBuffer(0);if(t.globalData){const e=new ArrayBuffer(20+5*t.globalData.imageDescs.length*4),i=new DataView(e);i.setUint16(0,t.globalData.endpointCount,!0),i.setUint16(2,t.globalData.selectorCount,!0),i.setUint32(4,t.globalData.endpointsData.byteLength,!0),i.setUint32(8,t.globalData.selectorsData.byteLength,!0),i.setUint32(12,t.globalData.tablesData.byteLength,!0),i.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let e=0;e<t.globalData.imageDescs.length;e++){const n=t.globalData.imageDescs[e];i.setUint32(20+5*e*4+0,n.imageFlags,!0),i.setUint32(20+5*e*4+4,n.rgbSliceByteOffset,!0),i.setUint32(20+5*e*4+8,n.rgbSliceByteLength,!0),i.setUint32(20+5*e*4+12,n.alphaSliceByteOffset,!0),i.setUint32(20+5*e*4+16,n.alphaSliceByteLength,!0)}n=Ci([e,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}const i=[];let s=t.keyValue;e.keepWriter||(s={...t.keyValue,KTXwriter:\"KTX-Parse v0.7.1\"});for(const t in s){const e=s[t],n=Ei(t),a=\"string\"==typeof e?Ci([Ei(e),Fi]):e,r=n.byteLength+1+a.byteLength,o=Mi(r,4);i.push(Ci([new Uint32Array([r]),n,Fi,a,new Uint8Array(o).fill(0)]))}const a=Ci(i);if(1!==t.dataFormatDescriptor.length||0!==t.dataFormatDescriptor[0].descriptorType)throw new Error(\"Only BASICFORMAT Data Format Descriptor output supported.\");const r=t.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*r.samples.length),l=new DataView(o),f=24+16*r.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,r.vendorId,!0),l.setUint16(6,r.descriptorType,!0),l.setUint16(8,r.versionNumber,!0),l.setUint16(10,f,!0),l.setUint8(12,r.colorModel),l.setUint8(13,r.colorPrimaries),l.setUint8(14,r.transferFunction),l.setUint8(15,r.flags),!Array.isArray(r.texelBlockDimension))throw new Error(\"texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.\");l.setUint8(16,r.texelBlockDimension[0]),l.setUint8(17,r.texelBlockDimension[1]),l.setUint8(18,r.texelBlockDimension[2]),l.setUint8(19,r.texelBlockDimension[3]);for(let t=0;t<8;t++)l.setUint8(20+t,r.bytesPlane[t]);for(let t=0;t<r.samples.length;t++){const e=r.samples[t],n=28+16*t;if(e.channelID)throw new Error(\"channelID has been renamed to channelType.\");l.setUint16(n+0,e.bitOffset,!0),l.setUint8(n+2,e.bitLength),l.setUint8(n+3,e.channelType),l.setUint8(n+4,e.samplePosition[0]),l.setUint8(n+5,e.samplePosition[1]),l.setUint8(n+6,e.samplePosition[2]),l.setUint8(n+7,e.samplePosition[3]),64&e.channelType?(l.setInt32(n+8,e.sampleLower,!0),l.setInt32(n+12,e.sampleUpper,!0)):(l.setUint32(n+8,e.sampleLower,!0),l.setUint32(n+12,e.sampleUpper,!0))}const h=Oi.length+68+3*t.levels.length*8,U=h+o.byteLength;let c=n.byteLength>0?U+a.byteLength:0;c%8&&(c+=8-c%8);const _=[],p=new DataView(new ArrayBuffer(3*t.levels.length*8)),g=new Uint32Array(t.levels.length);let y=0;0===t.supercompressionScheme&&(y=function(t,e){const n=Math.max(t,4),i=Math.min(t,4);let s=n;for(;s%i!=0;)s+=n;return s}(function(t){return t.levels[0].levelData.byteLength/function(t,e){let n=1;const i=[t.pixelWidth,t.pixelHeight,t.pixelDepth],s=function(t){const[e,n,i]=t.dataFormatDescriptor[0].texelBlockDimension;return[e+1,n+1,i+1]}(t);for(let t=0;t<3;t++)if(i[t]>0){const e=Math.ceil(Math.floor(i[t]*Math.pow(2,-0))/s[t]);n*=Math.max(1,e)}return t.layerCount>0&&(n*=t.layerCount),t.faceCount>0&&(n*=t.faceCount),n}(t)}(t)));let x=(c||U+a.byteLength)+n.byteLength;for(let e=t.levels.length-1;e>=0;e--){if(x%y){const t=Mi(x,y);_.push(new Uint8Array(t)),x+=t}const n=t.levels[e];_.push(n.levelData),g[e]=x,x+=n.levelData.byteLength}for(let e=0;e<t.levels.length;e++){const n=t.levels[e];p.setBigUint64(24*e+0,BigInt(g[e]),!0),p.setBigUint64(24*e+8,BigInt(n.levelData.byteLength),!0),p.setBigUint64(24*e+16,BigInt(n.uncompressedByteLength),!0)}const u=new ArrayBuffer(68),b=new DataView(u);return b.setUint32(0,t.vkFormat,!0),b.setUint32(4,t.typeSize,!0),b.setUint32(8,t.pixelWidth,!0),b.setUint32(12,t.pixelHeight,!0),b.setUint32(16,t.pixelDepth,!0),b.setUint32(20,t.layerCount,!0),b.setUint32(24,t.faceCount,!0),b.setUint32(28,t.levels.length,!0),b.setUint32(32,t.supercompressionScheme,!0),b.setUint32(36,h,!0),b.setUint32(40,o.byteLength,!0),b.setUint32(44,U,!0),b.setUint32(48,a.byteLength,!0),b.setBigUint64(52,BigInt(n.byteLength>0?c:0),!0),b.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(Ci([new Uint8Array(Oi).buffer,u,p.buffer,o,a,c>0?new ArrayBuffer(c-(U+a.byteLength)):new ArrayBuffer(0),n,..._]))}export{Z as KHR_DF_CHANNEL_RGBSDA_ALPHA,G as KHR_DF_CHANNEL_RGBSDA_BLUE,Q as KHR_DF_CHANNEL_RGBSDA_DEPTH,q as KHR_DF_CHANNEL_RGBSDA_GREEN,j as KHR_DF_CHANNEL_RGBSDA_RED,J as KHR_DF_CHANNEL_RGBSDA_STENCIL,g as KHR_DF_FLAG_ALPHA_PREMULTIPLIED,p as KHR_DF_FLAG_ALPHA_STRAIGHT,s as KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,U as KHR_DF_MODEL_ASTC,f as KHR_DF_MODEL_ETC1,c as KHR_DF_MODEL_ETC1S,h as KHR_DF_MODEL_ETC2,l as KHR_DF_MODEL_RGBSDA,_ as KHR_DF_MODEL_UASTC,o as KHR_DF_MODEL_UNSPECIFIED,H as KHR_DF_PRIMARIES_ACES,N as KHR_DF_PRIMARIES_ACESCC,Y as KHR_DF_PRIMARIES_ADOBERGB,z as KHR_DF_PRIMARIES_BT2020,M as KHR_DF_PRIMARIES_BT601_EBU,P as KHR_DF_PRIMARIES_BT601_SMPTE,C as KHR_DF_PRIMARIES_BT709,W as KHR_DF_PRIMARIES_CIEXYZ,R as KHR_DF_PRIMARIES_DISPLAYP3,K as KHR_DF_PRIMARIES_NTSC1953,X as KHR_DF_PRIMARIES_PAL525,T as KHR_DF_PRIMARIES_UNSPECIFIED,et as KHR_DF_SAMPLE_DATATYPE_EXPONENT,$ as KHR_DF_SAMPLE_DATATYPE_FLOAT,nt as KHR_DF_SAMPLE_DATATYPE_LINEAR,tt as KHR_DF_SAMPLE_DATATYPE_SIGNED,F as KHR_DF_TRANSFER_ACESCC,O as KHR_DF_TRANSFER_ACESCCT,E as KHR_DF_TRANSFER_ADOBERGB,D as KHR_DF_TRANSFER_BT1886,k as KHR_DF_TRANSFER_DCIP3,L as KHR_DF_TRANSFER_HLG_EOTF,B as KHR_DF_TRANSFER_HLG_OETF,b as KHR_DF_TRANSFER_ITU,x as KHR_DF_TRANSFER_LINEAR,d as KHR_DF_TRANSFER_NTSC,I as KHR_DF_TRANSFER_PAL625_EOTF,V as KHR_DF_TRANSFER_PAL_OETF,v as KHR_DF_TRANSFER_PQ_EOTF,A as KHR_DF_TRANSFER_PQ_OETF,w as KHR_DF_TRANSFER_SLOG,m as KHR_DF_TRANSFER_SLOG2,u as KHR_DF_TRANSFER_SRGB,S as KHR_DF_TRANSFER_ST240,y as KHR_DF_TRANSFER_UNSPECIFIED,a as KHR_DF_VENDORID_KHRONOS,r as KHR_DF_VERSION,e as KHR_SUPERCOMPRESSION_BASISLZ,t as KHR_SUPERCOMPRESSION_NONE,i as KHR_SUPERCOMPRESSION_ZLIB,n as KHR_SUPERCOMPRESSION_ZSTD,Ii as KTX2Container,Ut as VK_FORMAT_A1R5G5B5_UNORM_PACK16,Gt as VK_FORMAT_A2B10G10R10_SINT_PACK32,jt as VK_FORMAT_A2B10G10R10_SNORM_PACK32,qt as VK_FORMAT_A2B10G10R10_UINT_PACK32,Yt as VK_FORMAT_A2B10G10R10_UNORM_PACK32,Rt as VK_FORMAT_A2R10G10B10_SINT_PACK32,Kt as VK_FORMAT_A2R10G10B10_SNORM_PACK32,Xt as VK_FORMAT_A2R10G10B10_UINT_PACK32,Nt as VK_FORMAT_A2R10G10B10_UNORM_PACK32,Vi as VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT,ki as VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT,Li as VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT,Rn as VK_FORMAT_ASTC_10x10_SRGB_BLOCK,Xn as VK_FORMAT_ASTC_10x10_UNORM_BLOCK,mi as VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT,zn as VK_FORMAT_ASTC_10x5_SRGB_BLOCK,Pn as VK_FORMAT_ASTC_10x5_UNORM_BLOCK,Di as VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT,Hn as VK_FORMAT_ASTC_10x6_SRGB_BLOCK,Wn as VK_FORMAT_ASTC_10x6_UNORM_BLOCK,Bi as VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT,Kn as VK_FORMAT_ASTC_10x8_SRGB_BLOCK,Nn as VK_FORMAT_ASTC_10x8_UNORM_BLOCK,vi as VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT,jn as VK_FORMAT_ASTC_12x10_SRGB_BLOCK,Yn as VK_FORMAT_ASTC_12x10_UNORM_BLOCK,Ai as VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT,Gn as VK_FORMAT_ASTC_12x12_SRGB_BLOCK,qn as VK_FORMAT_ASTC_12x12_UNORM_BLOCK,pi as VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,Dn as VK_FORMAT_ASTC_4x4_SRGB_BLOCK,mn as VK_FORMAT_ASTC_4x4_UNORM_BLOCK,gi as VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT,Ln as VK_FORMAT_ASTC_5x4_SRGB_BLOCK,Bn as VK_FORMAT_ASTC_5x4_UNORM_BLOCK,yi as VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT,An as VK_FORMAT_ASTC_5x5_SRGB_BLOCK,vn as VK_FORMAT_ASTC_5x5_UNORM_BLOCK,xi as VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT,Vn as VK_FORMAT_ASTC_6x5_SRGB_BLOCK,kn as VK_FORMAT_ASTC_6x5_UNORM_BLOCK,ui as VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT,Sn as VK_FORMAT_ASTC_6x6_SRGB_BLOCK,In as VK_FORMAT_ASTC_6x6_UNORM_BLOCK,bi as VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT,On as VK_FORMAT_ASTC_8x5_SRGB_BLOCK,Fn as VK_FORMAT_ASTC_8x5_UNORM_BLOCK,di as VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT,Tn as VK_FORMAT_ASTC_8x6_SRGB_BLOCK,En as VK_FORMAT_ASTC_8x6_UNORM_BLOCK,wi as VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT,Mn as VK_FORMAT_ASTC_8x8_SRGB_BLOCK,Cn as VK_FORMAT_ASTC_8x8_UNORM_BLOCK,We as VK_FORMAT_B10G11R11_UFLOAT_PACK32,ti as VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16,ai as VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16,rt as VK_FORMAT_B4G4R4A4_UNORM_PACK16,ht as VK_FORMAT_B5G5R5A1_UNORM_PACK16,lt as VK_FORMAT_B5G6R5_UNORM_PACK16,Wt as VK_FORMAT_B8G8R8A8_SINT,Pt as VK_FORMAT_B8G8R8A8_SNORM,Ht as VK_FORMAT_B8G8R8A8_SRGB,zt as VK_FORMAT_B8G8R8A8_UINT,Mt as VK_FORMAT_B8G8R8A8_UNORM,It as VK_FORMAT_B8G8R8_SINT,kt as VK_FORMAT_B8G8R8_SNORM,St as VK_FORMAT_B8G8R8_SRGB,Vt as VK_FORMAT_B8G8R8_UINT,At as VK_FORMAT_B8G8R8_UNORM,Ze as VK_FORMAT_BC1_RGBA_SRGB_BLOCK,Qe as VK_FORMAT_BC1_RGBA_UNORM_BLOCK,Je as VK_FORMAT_BC1_RGB_SRGB_BLOCK,Ge as VK_FORMAT_BC1_RGB_UNORM_BLOCK,tn as VK_FORMAT_BC2_SRGB_BLOCK,$e as VK_FORMAT_BC2_UNORM_BLOCK,nn as VK_FORMAT_BC3_SRGB_BLOCK,en as VK_FORMAT_BC3_UNORM_BLOCK,an as VK_FORMAT_BC4_SNORM_BLOCK,sn as VK_FORMAT_BC4_UNORM_BLOCK,on as VK_FORMAT_BC5_SNORM_BLOCK,rn as VK_FORMAT_BC5_UNORM_BLOCK,fn as VK_FORMAT_BC6H_SFLOAT_BLOCK,ln as VK_FORMAT_BC6H_UFLOAT_BLOCK,Un as VK_FORMAT_BC7_SRGB_BLOCK,hn as VK_FORMAT_BC7_UNORM_BLOCK,Ne as VK_FORMAT_D16_UNORM,Ye as VK_FORMAT_D16_UNORM_S8_UINT,je as VK_FORMAT_D24_UNORM_S8_UINT,Xe as VK_FORMAT_D32_SFLOAT,qe as VK_FORMAT_D32_SFLOAT_S8_UINT,He as VK_FORMAT_E5B9G9R9_UFLOAT_PACK32,wn as VK_FORMAT_EAC_R11G11_SNORM_BLOCK,dn as VK_FORMAT_EAC_R11G11_UNORM_BLOCK,bn as VK_FORMAT_EAC_R11_SNORM_BLOCK,un as VK_FORMAT_EAC_R11_UNORM_BLOCK,gn as VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK,pn as VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK,xn as VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,yn as VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK,_n as VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,cn as VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK,$n as VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16,si as VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16,hi as VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG,ri as VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG,Ui as VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG,oi as VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG,ci as VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG,li as VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG,_i as VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG,fi as VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG,Zn as VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16,Qn as VK_FORMAT_R10X6G10X6_UNORM_2PACK16,Jn as VK_FORMAT_R10X6_UNORM_PACK16,ii as VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16,ni as VK_FORMAT_R12X4G12X4_UNORM_2PACK16,ei as VK_FORMAT_R12X4_UNORM_PACK16,ge as VK_FORMAT_R16G16B16A16_SFLOAT,pe as VK_FORMAT_R16G16B16A16_SINT,ce as VK_FORMAT_R16G16B16A16_SNORM,_e as VK_FORMAT_R16G16B16A16_UINT,Ue as VK_FORMAT_R16G16B16A16_UNORM,he as VK_FORMAT_R16G16B16_SFLOAT,fe as VK_FORMAT_R16G16B16_SINT,oe as VK_FORMAT_R16G16B16_SNORM,le as VK_FORMAT_R16G16B16_UINT,re as VK_FORMAT_R16G16B16_UNORM,ae as VK_FORMAT_R16G16_SFLOAT,se as VK_FORMAT_R16G16_SINT,ne as VK_FORMAT_R16G16_SNORM,ie as VK_FORMAT_R16G16_UINT,ee as VK_FORMAT_R16G16_UNORM,te as VK_FORMAT_R16_SFLOAT,$t as VK_FORMAT_R16_SINT,Qt as VK_FORMAT_R16_SNORM,Zt as VK_FORMAT_R16_UINT,Jt as VK_FORMAT_R16_UNORM,Ae as VK_FORMAT_R32G32B32A32_SFLOAT,ve as VK_FORMAT_R32G32B32A32_SINT,Le as VK_FORMAT_R32G32B32A32_UINT,Be as VK_FORMAT_R32G32B32_SFLOAT,De as VK_FORMAT_R32G32B32_SINT,me as VK_FORMAT_R32G32B32_UINT,we as VK_FORMAT_R32G32_SFLOAT,de as VK_FORMAT_R32G32_SINT,be as VK_FORMAT_R32G32_UINT,ue as VK_FORMAT_R32_SFLOAT,xe as VK_FORMAT_R32_SINT,ye as VK_FORMAT_R32_UINT,at as VK_FORMAT_R4G4B4A4_UNORM_PACK16,st as VK_FORMAT_R4G4_UNORM_PACK8,ft as VK_FORMAT_R5G5B5A1_UNORM_PACK16,ot as VK_FORMAT_R5G6B5_UNORM_PACK16,ze as VK_FORMAT_R64G64B64A64_SFLOAT,Pe as VK_FORMAT_R64G64B64A64_SINT,Me as VK_FORMAT_R64G64B64A64_UINT,Ce as VK_FORMAT_R64G64B64_SFLOAT,Te as VK_FORMAT_R64G64B64_SINT,Ee as VK_FORMAT_R64G64B64_UINT,Oe as VK_FORMAT_R64G64_SFLOAT,Fe as VK_FORMAT_R64G64_SINT,Se as VK_FORMAT_R64G64_UINT,Ie as VK_FORMAT_R64_SFLOAT,Ve as VK_FORMAT_R64_SINT,ke as VK_FORMAT_R64_UINT,Tt as VK_FORMAT_R8G8B8A8_SINT,Ot as VK_FORMAT_R8G8B8A8_SNORM,Ct as VK_FORMAT_R8G8B8A8_SRGB,Et as VK_FORMAT_R8G8B8A8_UINT,Ft as VK_FORMAT_R8G8B8A8_UNORM,Lt as VK_FORMAT_R8G8B8_SINT,Dt as VK_FORMAT_R8G8B8_SNORM,vt as VK_FORMAT_R8G8B8_SRGB,Bt as VK_FORMAT_R8G8B8_UINT,mt as VK_FORMAT_R8G8B8_UNORM,dt as VK_FORMAT_R8G8_SINT,ut as VK_FORMAT_R8G8_SNORM,wt as VK_FORMAT_R8G8_SRGB,bt as VK_FORMAT_R8G8_UINT,xt as VK_FORMAT_R8G8_UNORM,gt as VK_FORMAT_R8_SINT,_t as VK_FORMAT_R8_SNORM,yt as VK_FORMAT_R8_SRGB,pt as VK_FORMAT_R8_UINT,ct as VK_FORMAT_R8_UNORM,Re as VK_FORMAT_S8_UINT,it as VK_FORMAT_UNDEFINED,Ke as VK_FORMAT_X8_D24_UNORM_PACK32,Pi as read,Wi as write};\n", "let A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,\"base64\"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0)}decode(A,g=0){if(!I)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ\";export{Q as ZSTDDecoder};\n", "/**\n * Loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader\n * supports Basis Universal GPU textures, which can be quickly transcoded to\n * a wide variety of GPU texture compression formats, as well as some\n * uncompressed DataTexture and Data3DTexture formats.\n *\n * References:\n * - KTX: http://github.khronos.org/KTX-Specification/\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\n * - BasisU HDR: https://github.com/BinomialLLC/basis_universal/wiki/UASTC-HDR-Texture-Specification-v1.0\n */\n\nimport {\n\tCompressedTexture,\n\tCompressedArrayTexture,\n\tCompressedCubeTexture,\n\tData3DTexture,\n\tDataTexture,\n\tFileLoader,\n\tFloatType,\n\tHalfFloatType,\n\tNoColorSpace,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tRedFormat,\n\tRGB_BPTC_UNSIGNED_Format,\n\tRGB_ETC1_Format,\n\tRGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format,\n\tRGBA_ASTC_4x4_Format,\n\tRGBA_ASTC_6x6_Format,\n\tRGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format,\n\tRGBA_S3TC_DXT1_Format,\n\tRGBAFormat,\n\tRGFormat,\n\tSRGBColorSpace,\n\tUnsignedByteType,\n} from 'three';\nimport { WorkerPool } from '../utils/WorkerPool.js';\nimport {\n\tread,\n\tKHR_DF_FLAG_ALPHA_PREMULTIPLIED,\n\tKHR_DF_TRANSFER_SRGB,\n\tKHR_SUPERCOMPRESSION_NONE,\n\tKHR_SUPERCOMPRESSION_ZSTD,\n\tVK_FORMAT_UNDEFINED,\n\tVK_FORMAT_R16_SFLOAT,\n\tVK_FORMAT_R16G16_SFLOAT,\n\tVK_FORMAT_R16G16B16A16_SFLOAT,\n\tVK_FORMAT_R32_SFLOAT,\n\tVK_FORMAT_R32G32_SFLOAT,\n\tVK_FORMAT_R32G32B32A32_SFLOAT,\n\tVK_FORMAT_R8_SRGB,\n\tVK_FORMAT_R8_UNORM,\n\tVK_FORMAT_R8G8_SRGB,\n\tVK_FORMAT_R8G8_UNORM,\n\tVK_FORMAT_R8G8B8A8_SRGB,\n\tVK_FORMAT_R8G8B8A8_UNORM,\n\tVK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,\n\tVK_FORMAT_ASTC_6x6_SRGB_BLOCK,\n\tVK_FORMAT_ASTC_6x6_UNORM_BLOCK,\n\tKHR_DF_PRIMARIES_UNSPECIFIED,\n\tKHR_DF_PRIMARIES_BT709,\n\tKHR_DF_PRIMARIES_DISPLAYP3\n} from '../libs/ktx-parse.module.js';\nimport { ZSTDDecoder } from '../libs/zstddec.module.js';\nimport { DisplayP3ColorSpace, LinearDisplayP3ColorSpace } from '../math/ColorSpaces.js';\n\nconst _taskCache = new WeakMap();\n\nlet _activeLoaders = 0;\n\nlet _zstd;\n\nclass KTX2Loader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.transcoderPath = '';\n\t\tthis.transcoderBinary = null;\n\t\tthis.transcoderPending = null;\n\n\t\tthis.workerPool = new WorkerPool();\n\t\tthis.workerSourceURL = '';\n\t\tthis.workerConfig = null;\n\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\n\n\t\t\tconsole.warn(\n\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\n\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tsetTranscoderPath( path ) {\n\n\t\tthis.transcoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( num ) {\n\n\t\tthis.workerPool.setWorkerLimit( num );\n\n\t\treturn this;\n\n\t}\n\n\tasync detectSupportAsync( renderer ) {\n\n\t\tthis.workerConfig = {\n\t\t\tastcSupported: await renderer.hasFeatureAsync( 'texture-compression-astc' ),\n\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\tetc1Supported: await renderer.hasFeatureAsync( 'texture-compression-etc1' ),\n\t\t\tetc2Supported: await renderer.hasFeatureAsync( 'texture-compression-etc2' ),\n\t\t\tdxtSupported: await renderer.hasFeatureAsync( 'texture-compression-bc' ),\n\t\t\tbptcSupported: await renderer.hasFeatureAsync( 'texture-compression-bptc' ),\n\t\t\tpvrtcSupported: await renderer.hasFeatureAsync( 'texture-compression-pvrtc' )\n\t\t};\n\n\t\treturn this;\n\n\t}\n\n\tdetectSupport( renderer ) {\n\n\t\tif ( renderer.isWebGPURenderer === true ) {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.hasFeature( 'texture-compression-astc' ),\n\t\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\t\tetc1Supported: renderer.hasFeature( 'texture-compression-etc1' ),\n\t\t\t\tetc2Supported: renderer.hasFeature( 'texture-compression-etc2' ),\n\t\t\t\tdxtSupported: renderer.hasFeature( 'texture-compression-bc' ),\n\t\t\t\tbptcSupported: renderer.hasFeature( 'texture-compression-bptc' ),\n\t\t\t\tpvrtcSupported: renderer.hasFeature( 'texture-compression-pvrtc' )\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\n\t\t\t\tastcHDRSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' )\n\t\t\t\t\t&& renderer.extensions.get( 'WEBGL_compressed_texture_astc' ).getSupportedProfiles().includes( 'hdr' ),\n\t\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\n\t\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\n\t\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\n\t\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\n\t\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\n\t\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\n\t\t\t};\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinit() {\n\n\t\tif ( ! this.transcoderPending ) {\n\n\t\t\t// Load transcoder wrapper.\n\t\t\tconst jsLoader = new FileLoader( this.manager );\n\t\t\tjsLoader.setPath( this.transcoderPath );\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst jsContent = jsLoader.loadAsync( 'basis_transcoder.js' );\n\n\t\t\t// Load transcoder WASM binary.\n\t\t\tconst binaryLoader = new FileLoader( this.manager );\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst binaryContent = binaryLoader.loadAsync( 'basis_transcoder.wasm' );\n\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\n\n\t\t\t\t\tconst fn = KTX2Loader.BasisWorker.toString();\n\n\t\t\t\t\tconst body = [\n\t\t\t\t\t\t'/* constants */',\n\t\t\t\t\t\t'let _EngineFormat = ' + JSON.stringify( KTX2Loader.EngineFormat ),\n\t\t\t\t\t\t'let _EngineType = ' + JSON.stringify( KTX2Loader.EngineType ),\n\t\t\t\t\t\t'let _TranscoderFormat = ' + JSON.stringify( KTX2Loader.TranscoderFormat ),\n\t\t\t\t\t\t'let _BasisFormat = ' + JSON.stringify( KTX2Loader.BasisFormat ),\n\t\t\t\t\t\t'/* basis_transcoder.js */',\n\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t\t].join( '\\n' );\n\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\n\n\t\t\t\t\tthis.workerPool.setWorkerCreator( () => {\n\n\t\t\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\t\t\t\t\t\tconst transcoderBinary = this.transcoderBinary.slice( 0 );\n\n\t\t\t\t\t\tworker.postMessage( { type: 'init', config: this.workerConfig, transcoderBinary }, [ transcoderBinary ] );\n\n\t\t\t\t\t\treturn worker;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\tif ( _activeLoaders > 0 ) {\n\n\t\t\t\t// Each instance loads a transcoder and allocates workers, increasing network and memory cost.\n\n\t\t\t\tconsole.warn(\n\n\t\t\t\t\t'THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues.'\n\t\t\t\t\t+ ' Use a single KTX2Loader instance, or call .dispose() on old instances.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_activeLoaders ++;\n\n\t\t}\n\n\t\treturn this.transcoderPending;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\n\n\t\t}\n\n\t\tthis._createTexture( buffer )\n\t\t\t.then( ( texture ) => onLoad ? onLoad( texture ) : null )\n\t\t\t.catch( onError );\n\n\t}\n\n\t_createTextureFrom( transcodeResult, container ) {\n\n\t\tconst { type: messageType, error, data: { faces, width, height, format, type, dfdFlags } } = transcodeResult;\n\n\t\tif ( messageType === 'error' ) return Promise.reject( error );\n\n\t\tlet texture;\n\n\t\tif ( container.faceCount === 6 ) {\n\n\t\t\ttexture = new CompressedCubeTexture( faces, format, type );\n\n\t\t} else {\n\n\t\t\tconst mipmaps = faces[ 0 ].mipmaps;\n\n\t\t\ttexture = container.layerCount > 1\n\t\t\t\t? new CompressedArrayTexture( mipmaps, width, height, container.layerCount, format, type )\n\t\t\t\t: new CompressedTexture( mipmaps, width, height, format, type );\n\n\t\t}\n\n\t\ttexture.minFilter = faces[ 0 ].mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\t\ttexture.generateMipmaps = false;\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.colorSpace = parseColorSpace( container );\n\t\ttexture.premultiplyAlpha = !! ( dfdFlags & KHR_DF_FLAG_ALPHA_PREMULTIPLIED );\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * @param {ArrayBuffer} buffer\n\t * @param {object?} config\n\t * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\n\t */\n\tasync _createTexture( buffer, config = {} ) {\n\n\t\tconst container = read( new Uint8Array( buffer ) );\n\n\t\t// Basis UASTC HDR is a subset of ASTC, which can be transcoded efficiently\n\t\t// to BC6H. To detect whether a KTX2 file uses Basis UASTC HDR, or default\n\t\t// ASTC, inspect the DFD color model.\n\t\t//\n\t\t// Source: https://github.com/BinomialLLC/basis_universal/issues/381\n\t\tconst isBasisHDR = container.vkFormat === VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT\n\t\t\t&& container.dataFormatDescriptor[ 0 ].colorModel === 0xA7;\n\n\t\t// If the device supports ASTC, Basis UASTC HDR requires no transcoder.\n\t\tconst needsTranscoder = container.vkFormat === VK_FORMAT_UNDEFINED\n\t\t\t|| isBasisHDR && ! this.workerConfig.astcHDRSupported;\n\n\t\tif ( ! needsTranscoder ) {\n\n\t\t\treturn createRawTexture( container );\n\n\t\t}\n\n\t\t//\n\t\tconst taskConfig = config;\n\t\tconst texturePending = this.init().then( () => {\n\n\t\t\treturn this.workerPool.postMessage( { type: 'transcode', buffer, taskConfig: taskConfig }, [ buffer ] );\n\n\t\t} ).then( ( e ) => this._createTextureFrom( e.data, container ) );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, { promise: texturePending } );\n\n\t\treturn texturePending;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workerPool.dispose();\n\t\tif ( this.workerSourceURL ) URL.revokeObjectURL( this.workerSourceURL );\n\n\t\t_activeLoaders --;\n\n\t\treturn this;\n\n\t}\n\n}\n\n\n/* CONSTANTS */\n\nKTX2Loader.BasisFormat = {\n\tETC1S: 0,\n\tUASTC: 1,\n\tUASTC_HDR: 2,\n};\n\n// Source: https://github.com/BinomialLLC/basis_universal/blob/master/webgl/texture_test/index.html\nKTX2Loader.TranscoderFormat = {\n\tETC1: 0,\n\tETC2: 1,\n\tBC1: 2,\n\tBC3: 3,\n\tBC4: 4,\n\tBC5: 5,\n\tBC7_M6_OPAQUE_ONLY: 6,\n\tBC7_M5: 7,\n\tPVRTC1_4_RGB: 8,\n\tPVRTC1_4_RGBA: 9,\n\tASTC_4x4: 10,\n\tATC_RGB: 11,\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\n\tRGBA32: 13,\n\tRGB565: 14,\n\tBGR565: 15,\n\tRGBA4444: 16,\n\tBC6H: 22,\n\tRGB_HALF: 24,\n\tRGBA_HALF: 25,\n};\n\nKTX2Loader.EngineFormat = {\n\tRGBAFormat: RGBAFormat,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGB_BPTC_UNSIGNED_Format: RGB_BPTC_UNSIGNED_Format,\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n};\n\nKTX2Loader.EngineType = {\n\tUnsignedByteType: UnsignedByteType,\n\tHalfFloatType: HalfFloatType,\n\tFloatType: FloatType,\n};\n\n/* WEB WORKER */\n\nKTX2Loader.BasisWorker = function () {\n\n\tlet config;\n\tlet transcoderPending;\n\tlet BasisModule;\n\n\tconst EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\tconst EngineType = _EngineType; // eslint-disable-line no-undef\n\tconst TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\tconst BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n\tself.addEventListener( 'message', function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tconfig = message.config;\n\t\t\t\tinit( message.transcoderBinary );\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\ttranscoderPending.then( () => {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} );\n\n\tfunction init( wasmBinary ) {\n\n\t\ttranscoderPending = new Promise( ( resolve ) => {\n\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\n\n\t\t} ).then( () => {\n\n\t\t\tBasisModule.initializeBasis();\n\n\t\t\tif ( BasisModule.KTX2File === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tfunction transcode( buffer ) {\n\n\t\tconst ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );\n\n\t\tfunction cleanup() {\n\n\t\t\tktx2File.close();\n\t\t\tktx2File.delete();\n\n\t\t}\n\n\t\tif ( ! ktx2File.isValid() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file' );\n\n\t\t}\n\n\t\tlet basisFormat;\n\n\t\tif ( ktx2File.isUASTC() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC;\n\n\t\t} else if ( ktx2File.isETC1S() ) {\n\n\t\t\tbasisFormat = BasisFormat.ETC1S;\n\n\t\t} else if ( ktx2File.isHDR() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC_HDR;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unknown Basis encoding' );\n\n\t\t}\n\n\t\tconst width = ktx2File.getWidth();\n\t\tconst height = ktx2File.getHeight();\n\t\tconst layerCount = ktx2File.getLayers() || 1;\n\t\tconst levelCount = ktx2File.getLevels();\n\t\tconst faceCount = ktx2File.getFaces();\n\t\tconst hasAlpha = ktx2File.getHasAlpha();\n\t\tconst dfdFlags = ktx2File.getDFDFlags();\n\n\t\tconst { transcoderFormat, engineFormat, engineType } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tif ( ! width || ! height || ! levelCount ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid texture' );\n\n\t\t}\n\n\t\tif ( ! ktx2File.startTranscoding() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader: .startTranscoding failed' );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst buffers = [];\n\n\t\tfor ( let face = 0; face < faceCount; face ++ ) {\n\n\t\t\tconst mipmaps = [];\n\n\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\n\n\t\t\t\tconst layerMips = [];\n\n\t\t\t\tlet mipWidth, mipHeight;\n\n\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\n\n\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\n\n\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( levelCount > 1 ) {\n\n\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\n\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\n\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\n\t\t\t\t\t\t// See mrdoob/three.js#25908.\n\t\t\t\t\t\tmipWidth = levelInfo.width;\n\t\t\t\t\t\tmipHeight = levelInfo.height;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\n\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, - 1, - 1 );\n\n\t\t\t\t\tif ( engineType === EngineType.HalfFloatType ) {\n\n\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! status ) {\n\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\tthrow new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayerMips.push( dst );\n\n\t\t\t\t}\n\n\t\t\t\tconst mipData = concat( layerMips );\n\n\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\n\t\t\t\tbuffers.push( mipData.buffer );\n\n\t\t\t}\n\n\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\n\n\t\t}\n\n\t\tcleanup();\n\n\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\n\n\t}\n\n\t//\n\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S, UASTC, or\n\t// UASTC HDR), device capabilities, and texture dimensions. The list below ranks the formats\n\t// separately for each format. Currently, priority is assigned based on:\n\t//\n\t//   high quality > low quality > uncompressed\n\t//\n\t// Prioritization may be revisited, or exposed for configuration, in the future.\n\t//\n\t// Reference: https://github.com/KhronosGroup/3D-Formats-Guidelines/blob/main/KTXDeveloperGuide.md\n\tconst FORMAT_OPTIONS = [\n\t\t{\n\t\t\tif: 'astcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: Infinity,\n\t\t\tpriorityUASTC: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 3,\n\t\t\tpriorityUASTC: 2,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'dxtSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 4,\n\t\t\tpriorityUASTC: 5,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc2Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 1,\n\t\t\tpriorityUASTC: 3,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc1Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 2,\n\t\t\tpriorityUASTC: 4,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'pvrtcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 5,\n\t\t\tpriorityUASTC: 6,\n\t\t\tneedsPowerOfTwo: true,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC6H ],\n\t\t\tengineFormat: [ EngineFormat.RGB_BPTC_UNSIGNED_Format ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\n\t\t// Uncompressed fallbacks.\n\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA32, TranscoderFormat.RGBA32 ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat, EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.UnsignedByteType, EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 100,\n\t\t\tpriorityUASTC: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA_HALF ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t}\n\t];\n\n\tconst OPTIONS = {\n\t\t// TODO: For ETC1S we intentionally sort by _UASTC_ priority, preserving\n\t\t// a historical accident shown to avoid performance pitfalls for Linux with\n\t\t// Firefox & AMD GPU (RadeonSI). Further work needed.\n\t\t// See https://github.com/mrdoob/three.js/pull/29730.\n\t\t[ BasisFormat.ETC1S ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.ETC1S ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC_HDR ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC_HDR ) )\n\t\t\t.sort( ( a, b ) => a.priorityHDR - b.priorityHDR ),\n\t};\n\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\n\n\t\tconst options = OPTIONS[ basisFormat ];\n\n\t\tfor ( let i = 0; i < options.length; i ++ ) {\n\n\t\t\tconst opt = options[ i ];\n\n\t\t\tif ( opt.if && ! config[ opt.if ] ) continue;\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\n\t\t\tif ( hasAlpha && opt.transcoderFormat.length < 2 ) continue;\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\n\n\t\t\tconst transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineType = opt.engineType[ 0 ];\n\n\t\t\treturn { transcoderFormat, engineFormat, engineType };\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Failed to identify transcoding target.' );\n\n\t}\n\n\tfunction isPowerOfTwo( value ) {\n\n\t\tif ( value <= 2 ) return true;\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n\t/**\n\t * Concatenates N byte arrays.\n\t *\n\t * @param {Uint8Array[]} arrays\n\t * @return {Uint8Array}\n\t */\n\tfunction concat( arrays ) {\n\n\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\n\n\t\tlet totalByteLength = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\ttotalByteLength += array.byteLength;\n\n\t\t}\n\n\t\tconst result = new Uint8Array( totalByteLength );\n\n\t\tlet byteOffset = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\tresult.set( array, byteOffset );\n\n\t\t\tbyteOffset += array.byteLength;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n};\n\n// Parsing for non-Basis textures. These textures may have supercompression\n// like Zstd, but they do not require transcoding.\n\nconst UNCOMPRESSED_FORMATS = new Set( [ RGBAFormat, RGFormat, RedFormat ] );\n\nconst FORMAT_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: RGBAFormat,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R8G8_UNORM ]: RGFormat,\n\t[ VK_FORMAT_R8G8_SRGB ]: RGFormat,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R16_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R8_SRGB ]: RedFormat,\n\t[ VK_FORMAT_R8_UNORM ]: RedFormat,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: RGBA_ASTC_4x4_Format,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: RGBA_ASTC_6x6_Format,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: RGBA_ASTC_6x6_Format,\n\n};\n\nconst TYPE_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8_SRGB ]: UnsignedByteType,\n\t[ VK_FORMAT_R8_UNORM ]: UnsignedByteType,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: HalfFloatType,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: UnsignedByteType,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: UnsignedByteType,\n\n};\n\nasync function createRawTexture( container ) {\n\n\tconst { vkFormat } = container;\n\n\tif ( FORMAT_MAP[ vkFormat ] === undefined ) {\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported vkFormat.' );\n\n\t}\n\n\t//\n\n\tlet zstd;\n\n\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\tif ( ! _zstd ) {\n\n\t\t\t_zstd = new Promise( async ( resolve ) => {\n\n\t\t\t\tconst zstd = new ZSTDDecoder();\n\t\t\t\tawait zstd.init();\n\t\t\t\tresolve( zstd );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tzstd = await _zstd;\n\n\t}\n\n\t//\n\n\tconst mipmaps = [];\n\n\n\tfor ( let levelIndex = 0; levelIndex < container.levels.length; levelIndex ++ ) {\n\n\t\tconst levelWidth = Math.max( 1, container.pixelWidth >> levelIndex );\n\t\tconst levelHeight = Math.max( 1, container.pixelHeight >> levelIndex );\n\t\tconst levelDepth = container.pixelDepth ? Math.max( 1, container.pixelDepth >> levelIndex ) : 0;\n\n\t\tconst level = container.levels[ levelIndex ];\n\n\t\tlet levelData;\n\n\t\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE ) {\n\n\t\t\tlevelData = level.levelData;\n\n\t\t} else if ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\t\tlevelData = zstd.decode( level.levelData, level.uncompressedByteLength );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported supercompressionScheme.' );\n\n\t\t}\n\n\t\tlet data;\n\n\t\tif ( TYPE_MAP[ vkFormat ] === FloatType ) {\n\n\t\t\tdata = new Float32Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Float32Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else if ( TYPE_MAP[ vkFormat ] === HalfFloatType ) {\n\n\t\t\tdata = new Uint16Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Uint16Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tdata = levelData;\n\n\t\t}\n\n\t\tmipmaps.push( {\n\n\t\t\tdata: data,\n\t\t\twidth: levelWidth,\n\t\t\theight: levelHeight,\n\t\t\tdepth: levelDepth,\n\n\t\t} );\n\n\t}\n\n\tlet texture;\n\n\tif ( UNCOMPRESSED_FORMATS.has( FORMAT_MAP[ vkFormat ] ) ) {\n\n\t\ttexture = container.pixelDepth === 0\n\t\t\t? new DataTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight )\n\t\t\t: new Data3DTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight, container.pixelDepth );\n\n\t} else {\n\n\t\tif ( container.pixelDepth > 0 ) throw new Error( 'THREE.KTX2Loader: Unsupported pixelDepth.' );\n\n\t\ttexture = new CompressedTexture( mipmaps, container.pixelWidth, container.pixelHeight );\n\n\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\n\t}\n\n\ttexture.mipmaps = mipmaps;\n\n\ttexture.type = TYPE_MAP[ vkFormat ];\n\ttexture.format = FORMAT_MAP[ vkFormat ];\n\ttexture.colorSpace = parseColorSpace( container );\n\ttexture.needsUpdate = true;\n\n\t//\n\n\treturn Promise.resolve( texture );\n\n}\n\nfunction parseColorSpace( container ) {\n\n\tconst dfd = container.dataFormatDescriptor[ 0 ];\n\n\tif ( dfd.colorPrimaries === KHR_DF_PRIMARIES_BT709 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_DISPLAYP3 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? DisplayP3ColorSpace : LinearDisplayP3ColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_UNSPECIFIED ) {\n\n\t\treturn NoColorSpace;\n\n\t} else {\n\n\t\tconsole.warn( `THREE.KTX2Loader: Unsupported color primaries, \"${ dfd.colorPrimaries }\"` );\n\t\treturn NoColorSpace;\n\n\t}\n\n}\n\nexport { KTX2Loader };\n", "import { LinearTransfer, Matrix3, SRGBTransfer } from 'three';\n\n// Reference: http://www.russellcottrell.com/photo/matrixCalculator.htm\n\nconst P3_PRIMARIES = [ 0.680, 0.320, 0.265, 0.690, 0.150, 0.060 ];\nconst P3_LUMINANCE_COEFFICIENTS = [ 0.2289, 0.6917, 0.0793 ];\nconst REC2020_PRIMARIES = [ 0.708, 0.292, 0.170, 0.797, 0.131, 0.046 ];\nconst REC2020_LUMINANCE_COEFFICIENTS = [ 0.2627, 0.6780, 0.0593 ];\nconst D65 = [ 0.3127, 0.3290 ];\n\n/******************************************************************************\n * Display P3 definitions\n */\n\nconst LINEAR_DISPLAY_P3_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.4865709, 0.2656677, 0.1982173,\n\t0.2289746, 0.6917385, 0.0792869,\n\t0.0000000, 0.0451134, 1.0439444\n);\n\nconst XYZ_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\n\t2.4934969, - 0.9313836, - 0.4027108,\n\t- 0.8294890, 1.7626641, 0.0236247,\n\t0.0358458, - 0.0761724, 0.9568845\n);\n\nexport const DisplayP3ColorSpace = 'display-p3';\nexport const LinearDisplayP3ColorSpace = 'display-p3-linear';\n\nexport const DisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: SRGBTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\nexport const LinearDisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\tworkingColorSpaceConfig: { unpackColorSpace: DisplayP3ColorSpace },\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\n/******************************************************************************\n * Rec. 2020 definitions\n */\n\nconst LINEAR_REC2020_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.6369580, 0.1446169, 0.1688810,\n\t0.2627002, 0.6779981, 0.0593017,\n\t0.0000000, 0.0280727, 1.0609851\n);\n\nconst XYZ_TO_LINEAR_REC2020 = /*@__PURE__*/ new Matrix3().set(\n\t1.7166512, - 0.3556708, - 0.2533663,\n\t- 0.6666844, 1.6164812, 0.0157685,\n\t0.0176399, - 0.0427706, 0.9421031\n);\n\nexport const LinearRec2020ColorSpace = 'rec2020-linear';\n\nexport const LinearRec2020ColorSpaceImpl = {\n\tprimaries: REC2020_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_REC2020_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_REC2020,\n\tluminanceCoefficients: REC2020_LUMINANCE_COEFFICIENTS,\n};\n", "import {\n\tBox3,\n\tMathUtils,\n\tMatrix4,\n\tMatrix3,\n\tRay,\n\tVector3\n} from 'three';\n\n// module scope helper variables\n\nconst a = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst b = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst R = [[], [], []];\nconst AbsR = [[], [], []];\nconst t = [];\n\nconst xAxis = new Vector3();\nconst yAxis = new Vector3();\nconst zAxis = new Vector3();\nconst v1 = new Vector3();\nconst size = new Vector3();\nconst closestPoint = new Vector3();\nconst rotationMatrix = new Matrix3();\nconst aabb = new Box3();\nconst matrix = new Matrix4();\nconst inverse = new Matrix4();\nconst localRay = new Ray();\n\n// OBB\n\nclass OBB {\n\n\tconstructor( center = new Vector3(), halfSize = new Vector3(), rotation = new Matrix3() ) {\n\n\t\tthis.center = center;\n\t\tthis.halfSize = halfSize;\n\t\tthis.rotation = rotation;\n\n\t}\n\n\tset( center, halfSize, rotation ) {\n\n\t\tthis.center = center;\n\t\tthis.halfSize = halfSize;\n\t\tthis.rotation = rotation;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( obb ) {\n\n\t\tthis.center.copy( obb.center );\n\t\tthis.halfSize.copy( obb.halfSize );\n\t\tthis.rotation.copy( obb.rotation );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tgetSize( result ) {\n\n\t\treturn result.copy( this.halfSize ).multiplyScalar( 2 );\n\n\t}\n\n\t/**\n\t* Reference: Closest Point on OBB to Point in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 5.1.4)\n\t*\n\t* @param {Vector3} point\n\t* @param {Vector3} result\n\t* @returns {Vector3}\n\t*/\n\tclampPoint( point, result ) {\n\n\t\tconst halfSize = this.halfSize;\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// start at the center position of the OBB\n\n\t\tresult.copy( this.center );\n\n\t\t// project the target onto the OBB axes and walk towards that point\n\n\t\tconst x = MathUtils.clamp( v1.dot( xAxis ), - halfSize.x, halfSize.x );\n\t\tresult.add( xAxis.multiplyScalar( x ) );\n\n\t\tconst y = MathUtils.clamp( v1.dot( yAxis ), - halfSize.y, halfSize.y );\n\t\tresult.add( yAxis.multiplyScalar( y ) );\n\n\t\tconst z = MathUtils.clamp( v1.dot( zAxis ), - halfSize.z, halfSize.z );\n\t\tresult.add( zAxis.multiplyScalar( z ) );\n\n\t\treturn result;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// project v1 onto each axis and check if these points lie inside the OBB\n\n\t\treturn Math.abs( v1.dot( xAxis ) ) <= this.halfSize.x &&\n\t\t\t\tMath.abs( v1.dot( yAxis ) ) <= this.halfSize.y &&\n\t\t\t\tMath.abs( v1.dot( zAxis ) ) <= this.halfSize.z;\n\n\t}\n\n\tintersectsBox3( box3 ) {\n\n\t\treturn this.intersectsOBB( obb.fromBox3( box3 ) );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// find the point on the OBB closest to the sphere center\n\n\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t// if that point is inside the sphere, the OBB and sphere intersect\n\n\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\t/**\n\t* Reference: OBB-OBB Intersection in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 4.4.1)\n\t*\n\t* @param {OBB} obb\n\t* @param {Number} [epsilon=Number.EPSILON] - A small value to prevent arithmetic errors\n\t* @returns {Boolean}\n\t*/\n\tintersectsOBB( obb, epsilon = Number.EPSILON ) {\n\n\t\t// prepare data structures (the code uses the same nomenclature like the reference)\n\n\t\ta.c = this.center;\n\t\ta.e[ 0 ] = this.halfSize.x;\n\t\ta.e[ 1 ] = this.halfSize.y;\n\t\ta.e[ 2 ] = this.halfSize.z;\n\t\tthis.rotation.extractBasis( a.u[ 0 ], a.u[ 1 ], a.u[ 2 ] );\n\n\t\tb.c = obb.center;\n\t\tb.e[ 0 ] = obb.halfSize.x;\n\t\tb.e[ 1 ] = obb.halfSize.y;\n\t\tb.e[ 2 ] = obb.halfSize.z;\n\t\tobb.rotation.extractBasis( b.u[ 0 ], b.u[ 1 ], b.u[ 2 ] );\n\n\t\t// compute rotation matrix expressing b in a's coordinate frame\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tR[ i ][ j ] = a.u[ i ].dot( b.u[ j ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute translation vector\n\n\t\tv1.subVectors( b.c, a.c );\n\n\t\t// bring translation into a's coordinate frame\n\n\t\tt[ 0 ] = v1.dot( a.u[ 0 ] );\n\t\tt[ 1 ] = v1.dot( a.u[ 1 ] );\n\t\tt[ 2 ] = v1.dot( a.u[ 2 ] );\n\n\t\t// compute common subexpressions. Add in an epsilon term to\n\t\t// counteract arithmetic errors when two edges are parallel and\n\t\t// their cross product is (near) null\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tAbsR[ i ][ j ] = Math.abs( R[ i ][ j ] ) + epsilon;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet ra, rb;\n\n\t\t// test axes L = A0, L = A1, L = A2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ i ];\n\t\t\trb = b.e[ 0 ] * AbsR[ i ][ 0 ] + b.e[ 1 ] * AbsR[ i ][ 1 ] + b.e[ 2 ] * AbsR[ i ][ 2 ];\n\t\t\tif ( Math.abs( t[ i ] ) > ra + rb ) return false;\n\n\n\t\t}\n\n\t\t// test axes L = B0, L = B1, L = B2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ 0 ] * AbsR[ 0 ][ i ] + a.e[ 1 ] * AbsR[ 1 ][ i ] + a.e[ 2 ] * AbsR[ 2 ][ i ];\n\t\t\trb = b.e[ i ];\n\t\t\tif ( Math.abs( t[ 0 ] * R[ 0 ][ i ] + t[ 1 ] * R[ 1 ][ i ] + t[ 2 ] * R[ 2 ][ i ] ) > ra + rb ) return false;\n\n\t\t}\n\n\t\t// test axis L = A0 x B0\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 0 ] - t[ 1 ] * R[ 2 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B1\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 1 ] - t[ 1 ] * R[ 2 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B2\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 1 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 1 ] + b.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 2 ] - t[ 1 ] * R[ 2 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 0 ] - t[ 2 ] * R[ 0 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 1 ] - t[ 2 ] * R[ 0 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 1 ] + b.e[ 1 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 2 ] - t[ 2 ] * R[ 0 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 0 ] + a.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 1 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 0 ] - t[ 0 ] * R[ 1 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 1 ] + a.e[ 1 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 1 ] - t[ 0 ] * R[ 1 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 2 ] + a.e[ 1 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 1 ] + b.e[ 1 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 2 ] - t[ 0 ] * R[ 1 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// since no separating axis is found, the OBBs must be intersecting\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t* Reference: Testing Box Against Plane in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 5.2.3)\n\t*\n\t* @param {Plane} plane\n\t* @returns {Boolean}\n\t*/\n\tintersectsPlane( plane ) {\n\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// compute the projection interval radius of this OBB onto L(t) = this->center + t * p.normal;\n\n\t\tconst r = this.halfSize.x * Math.abs( plane.normal.dot( xAxis ) ) +\n\t\t\t\tthis.halfSize.y * Math.abs( plane.normal.dot( yAxis ) ) +\n\t\t\t\tthis.halfSize.z * Math.abs( plane.normal.dot( zAxis ) );\n\n\t\t// compute distance of the OBB's center from the plane\n\n\t\tconst d = plane.normal.dot( this.center ) - plane.constant;\n\n\t\t// Intersection occurs when distance d falls within [-r,+r] interval\n\n\t\treturn Math.abs( d ) <= r;\n\n\t}\n\n\t/**\n\t* Performs a ray/OBB intersection test and stores the intersection point\n\t* to the given 3D vector. If no intersection is detected, *null* is returned.\n\t*\n\t* @param {Ray} ray\n\t* @param {Vector3} result\n\t* @return {Vector3?}\n\t*/\n\tintersectRay( ray, result ) {\n\n\t\t// the idea is to perform the intersection test in the local space\n\t\t// of the OBB.\n\n\t\tthis.getSize( size );\n\t\taabb.setFromCenterAndSize( v1.set( 0, 0, 0 ), size );\n\n\t\t// create a 4x4 transformation matrix\n\n\t\tmatrix.setFromMatrix3( this.rotation );\n\t\tmatrix.setPosition( this.center );\n\n\t\t// transform ray to the local space of the OBB\n\n\t\tinverse.copy( matrix ).invert();\n\t\tlocalRay.copy( ray ).applyMatrix4( inverse );\n\n\t\t// perform ray <-> AABB intersection test\n\n\t\tif ( localRay.intersectBox( aabb, result ) ) {\n\n\t\t\t// transform the intersection point back to world space\n\n\t\t\treturn result.applyMatrix4( matrix );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t* Performs a ray/OBB intersection test. Returns either true or false if\n\t* there is a intersection or not.\n\t*\n\t* @param {Ray} ray\n\t* @returns {Boolean}\n\t*/\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, v1 ) !== null;\n\n\t}\n\n\tfromBox3( box3 ) {\n\n\t\tbox3.getCenter( this.center );\n\n\t\tbox3.getSize( this.halfSize ).multiplyScalar( 0.5 );\n\n\t\tthis.rotation.identity();\n\n\t\treturn this;\n\n\t}\n\n\tequals( obb ) {\n\n\t\treturn obb.center.equals( this.center ) &&\n\t\t\tobb.halfSize.equals( this.halfSize ) &&\n\t\t\tobb.rotation.equals( this.rotation );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst e = matrix.elements;\n\n\t\tlet sx = v1.set( e[ 0 ], e[ 1 ], e[ 2 ] ).length();\n\t\tconst sy = v1.set( e[ 4 ], e[ 5 ], e[ 6 ] ).length();\n\t\tconst sz = v1.set( e[ 8 ], e[ 9 ], e[ 10 ] ).length();\n\n\t\tconst det = matrix.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\trotationMatrix.setFromMatrix4( matrix );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\trotationMatrix.elements[ 0 ] *= invSX;\n\t\trotationMatrix.elements[ 1 ] *= invSX;\n\t\trotationMatrix.elements[ 2 ] *= invSX;\n\n\t\trotationMatrix.elements[ 3 ] *= invSY;\n\t\trotationMatrix.elements[ 4 ] *= invSY;\n\t\trotationMatrix.elements[ 5 ] *= invSY;\n\n\t\trotationMatrix.elements[ 6 ] *= invSZ;\n\t\trotationMatrix.elements[ 7 ] *= invSZ;\n\t\trotationMatrix.elements[ 8 ] *= invSZ;\n\n\t\tthis.rotation.multiply( rotationMatrix );\n\n\t\tthis.halfSize.x *= sx;\n\t\tthis.halfSize.y *= sy;\n\t\tthis.halfSize.z *= sz;\n\n\t\tv1.setFromMatrixPosition( matrix );\n\t\tthis.center.add( v1 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst obb = new OBB();\n\nexport { OBB };\n", "import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3,\n\tColor,\n\tSRGBColorSpace\n} from 'three';\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n//\n\nclass OBJLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue; // skip comments\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] ),\n\t\t\t\t\t\t\t\tSRGBColorSpace\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\nexport { OBJLoader };\n", "import {\n\tColor,\n\tColorManagement,\n\tDefaultLoadingManager,\n\tFileLoader,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMeshPhongMaterial,\n\tRepeatWrapping,\n\tTextureLoader,\n\tVector2,\n\tSRGBColorSpace\n} from 'three';\n\n/**\n * Loads a Wavefront .mtl file specifying materials\n */\n\nclass MTLLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to load.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterialOptions( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @param {String} path\n\t * @return {MaterialCreator}\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to parse.\n\t */\n\tparse( text, path ) {\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet info = {};\n\t\tconst delimiter_pattern = /\\s+/;\n\t\tconst materialsInfo = {};\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlet line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst pos = line.indexOf( ' ' );\n\n\t\t\tlet key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tlet value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tconst ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst materialCreator = new MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n}\n\n/**\n * Create a new MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nclass MaterialCreator {\n\n\tconstructor( baseUrl = '', options = {} ) {\n\n\t\tthis.baseUrl = baseUrl;\n\t\tthis.options = options;\n\t\tthis.materialsInfo = {};\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t\tthis.crossOrigin = 'anonymous';\n\n\t\tthis.side = ( this.options.side !== undefined ) ? this.options.side : FrontSide;\n\t\tthis.wrap = ( this.options.wrap !== undefined ) ? this.options.wrap : RepeatWrapping;\n\n\t}\n\n\tsetCrossOrigin( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t}\n\n\tsetManager( value ) {\n\n\t\tthis.manager = value;\n\n\t}\n\n\tsetMaterials( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t}\n\n\tconvert( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tconst converted = {};\n\n\t\tfor ( const mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tconst mat = materialsInfo[ mn ];\n\n\t\t\tconst covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( const prop in mat ) {\n\n\t\t\t\tlet save = true;\n\t\t\t\tlet value = mat[ prop ];\n\t\t\t\tconst lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t}\n\n\tpreload() {\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t}\n\n\tgetIndex( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t}\n\n\tgetAsArray() {\n\n\t\tlet index = 0;\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t}\n\n\tcreate( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tcreateMaterial_( materialName ) {\n\n\t\t// Create material\n\n\t\tconst scope = this;\n\t\tconst mat = this.materialsInfo[ materialName ];\n\t\tconst params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tconst texParams = scope.getTextureParams( value, params );\n\t\t\tconst map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tif ( mapType === 'map' || mapType === 'emissiveMap' ) {\n\n\t\t\t\tmap.colorSpace = SRGBColorSpace;\n\n\t\t\t}\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( const prop in mat ) {\n\n\t\t\tconst value = mat[ prop ];\n\t\t\tlet n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( 'map', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( 'specularMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( 'emissiveMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( 'normalMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( 'bumpMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( 'alphaMap', value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tgetTextureParams( value, matParams ) {\n\n\t\tconst texParams = {\n\n\t\t\tscale: new Vector2( 1, 1 ),\n\t\t\toffset: new Vector2( 0, 0 )\n\n\t\t };\n\n\t\tconst items = value.split( /\\s+/ );\n\t\tlet pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t}\n\n\tloadTexture( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tconst manager = ( this.manager !== undefined ) ? this.manager : DefaultLoadingManager;\n\t\tlet loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\n\t\tconst texture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n}\n\nexport { MTLLoader };\n", "import {\n\tColor,\n\tLightProbe,\n\tLinearSRGBColorSpace,\n\tSphericalHarmonics3,\n\tVector3,\n\tSRGBColorSpace,\n\tNoColorSpace,\n\tHalfFloatType,\n\tDataUtils,\n\tWebGLCoordinateSystem\n} from 'three';\n\nclass LightProbeGenerator {\n\n\t// https://www.ppsloan.org/publications/StupidSH36.pdf\n\tstatic fromCubeTexture( cubeTexture ) {\n\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tconst image = cubeTexture.image[ faceIndex ];\n\n\t\t\tconst width = image.width;\n\t\t\tconst height = image.height;\n\n\t\t\tconst canvas = document.createElement( 'canvas' );\n\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\n\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, width, height );\n\n\t\t\tconst data = imageData.data;\n\n\t\t\tconst imageWidth = imageData.width; // assumed to be square\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( data[ i ] / 255, data[ i + 1 ] / 255, data[ i + 2 ] / 255 );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeTexture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = - 1 + ( pixelIndex % imageWidth + 0.5 ) * pixelSize;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1, row, - col ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1, row, col ); break;\n\n\t\t\t\t\tcase 2: coord.set( - col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( - col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( - col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n\tstatic async fromCubeRenderTarget( renderer, cubeRenderTarget ) {\n\n\t\tconst flip = renderer.coordinateSystem === WebGLCoordinateSystem ? - 1 : 1;\n\n\t\t// The renderTarget must be set to RGBA in order to make readRenderTargetPixels works\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tconst dataType = cubeRenderTarget.texture.type;\n\t\tconst imageWidth = cubeRenderTarget.width; // assumed to be square\n\n\t\tlet data;\n\n\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\tdata = new Uint16Array( imageWidth * imageWidth * 4 );\n\n\t\t\t} else {\n\n\t\t\t\t// assuming UnsignedByteType\n\n\t\t\t\tdata = new Uint8Array( imageWidth * imageWidth * 4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\t\tawait renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, data, faceIndex );\n\n\t\t\t} else {\n\n\t\t\t\tdata = await renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, 0, faceIndex );\n\n\t\t\t}\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\tlet r, g, b;\n\n\t\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\t\tr = DataUtils.fromHalfFloat( data[ i ] );\n\t\t\t\t\tg = DataUtils.fromHalfFloat( data[ i + 1 ] );\n\t\t\t\t\tb = DataUtils.fromHalfFloat( data[ i + 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr = data[ i ] / 255;\n\t\t\t\t\tg = data[ i + 1 ] / 255;\n\t\t\t\t\tb = data[ i + 2 ] / 255;\n\n\t\t\t\t}\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( r, g, b );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeRenderTarget.texture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = ( 1 - ( pixelIndex % imageWidth + 0.5 ) * pixelSize ) * flip;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1 * flip, row, col * flip ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1 * flip, row, - col * flip ); break;\n\n\t\t\t\t\tcase 2: coord.set( col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( - col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n}\n\nfunction convertColorToLinear( color, colorSpace ) {\n\n\tswitch ( colorSpace ) {\n\n\t\tcase SRGBColorSpace:\n\n\t\t\tcolor.convertSRGBToLinear();\n\t\t\tbreak;\n\n\t\tcase LinearSRGBColorSpace:\n\t\tcase NoColorSpace:\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tconsole.warn( 'WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.' );\n\t\t\tbreak;\n\n\t}\n\n\treturn color;\n\n}\n\nexport { LightProbeGenerator };\n", "/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nexport var DeviceOrientationControls = function ( object ) {\n\n  var scope = this;\n\n  this.object = object;\n  this.object.rotation.reorder( 'YXZ' );\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alphaOffset = 0; // radians\n\n  var onDeviceOrientationChangeEvent = function ( event ) {\n\n    scope.deviceOrientation = event;\n\n  };\n\n  var onScreenOrientationChangeEvent = function () {\n\n    scope.screenOrientation = window.orientation || 0;\n\n  };\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setObjectQuaternion = function () {\n\n    var zee = new THREE.Vector3( 0, 0, 1 );\n\n    var euler = new THREE.Euler();\n\n    var q0 = new THREE.Quaternion();\n\n    var q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n    return function ( quaternion, alpha, beta, gamma, orient ) {\n\n      euler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n      quaternion.setFromEuler( euler ); // orient the device\n\n      quaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n      quaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n    };\n\n  }();\n\n  this.connect = function () {\n \n    onScreenOrientationChangeEvent();\n\n    window.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = true;\n\n  };\n\n  this.disconnect = function () {\n\n    window.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = false;\n\n  };\n\n  this.update = function () {\n\n    if ( scope.enabled === false ) return;\n\n    var device = scope.deviceOrientation;\n\n    if ( device ) {\n\n      var alpha = device.alpha ? THREE.MathUtils.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\n      var beta = device.beta ? THREE.MathUtils.degToRad( device.beta ) : 0; // X'\n\n      var gamma = device.gamma ? THREE.MathUtils.degToRad( device.gamma ) : 0; // Y''\n\n      var orient = scope.screenOrientation ? THREE.MathUtils.degToRad( scope.screenOrientation ) : 0; // O\n\n      setObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\n    }\n\n\n  };\n\n  this.dispose = function () {\n\n    scope.disconnect();\n\n  };\n\n  this.connect();\n\n};\n", "import * as SUPER_THREE from 'three';\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\nimport { OBB } from 'three/addons/math/OBB.js';\nimport { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\nimport { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\nimport * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\nimport { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\nimport { DeviceOrientationControls } from '../../vendor/DeviceOrientationControls.js'; // THREE.DeviceOrientationControls\n\nvar THREE = globalThis.THREE = {...SUPER_THREE};\n\n// TODO: Eventually include these only if they are needed by a component.\nTHREE.DRACOLoader = DRACOLoader;\nTHREE.GLTFLoader = GLTFLoader;\nTHREE.KTX2Loader = KTX2Loader;\nTHREE.OBJLoader = OBJLoader;\nTHREE.MTLLoader = MTLLoader;\nTHREE.OBB = OBB;\nTHREE.BufferGeometryUtils = BufferGeometryUtils;\nTHREE.LightProbeGenerator = LightProbeGenerator;\nTHREE.DeviceOrientationControls = DeviceOrientationControls;\n\nTHREE.Cache.enabled = true;\n\nexport default THREE;\n", "export var AFRAME_CDN_ROOT = window.AFRAME_CDN_ROOT || 'https://cdn.aframe.io/';\nexport var AFRAME_INJECTED = 'aframe-injected';\nexport var DEFAULT_CAMERA_HEIGHT = 1.6;\nexport var DEFAULT_HANDEDNESS = 'right';\n", "import debug from 'debug';\n\nvar settings = {\n  colors: {\n    debug: 'gray',\n    error: 'red',\n    info: 'gray',\n    warn: 'orange'\n  }\n};\n\n/**\n * Overwrite `debug` so we can colorize error/warning messages  and remove Time Diff\n *\n * (See issue: https://github.com/debug-js/debug/issues/582#issuecomment-1755718739)\n */\ndebug.formatArgs = formatArgs;\n\nfunction formatArgs (args) {\n  args[0] =\n    (this.useColors ? '%c' : '') +\n    this.namespace +\n    (this.useColors ? ' %c' : ' ') +\n    args[0] +\n    (this.useColors ? '%c ' : ' ');\n\n  if (!this.useColors) {\n    return;\n  }\n  this.color = getDebugNamespaceColor(this.namespace);\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit');\n\n  // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n    index++;\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Returns the type of the namespace (e.g., `error`, `warn`).\n *\n * @param {string} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {string} The type of the namespace (e.g., `warn`).\n * @api private\n */\nfunction getDebugNamespaceType (namespace) {\n  var chunks = namespace.split(':');\n\n  return chunks[chunks.length - 1];  // Return the last one\n}\n\n/**\n * Returns the color of the namespace (e.g., `orange`).\n *\n * @param {string} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {string} The color of the namespace (e.g., `orange`).\n * @api private\n */\nfunction getDebugNamespaceColor (namespace) {\n  var type = getDebugNamespaceType(namespace);\n\n  var color = settings.colors && settings.colors[type];\n\n  return color || null;\n}\n\n/**\n * Returns `localStorage` if possible.\n *\n * This is necessary because Safari throws when a user disables\n * cookies or `localStorage` and you attempt to access it.\n *\n * @returns {localStorage}\n * @api private\n */\nfunction storage () {\n  try {\n    return window.localStorage;\n  } catch (e) {\n  }\n}\n\n/**\n * To enable console logging, type this in the Console of your Dev Tools:\n *\n *   localStorage.logs = 1\n *\n * To disable console logging:\n *\n *   localStorage.logs = 0\n *\n */\nvar ls = storage();\nif (ls && (parseInt(ls.logs, 10) || ls.logs === 'true')) {\n  debug.enable('*');\n} else {\n  debug.enable('*:error,*:info,*:warn');\n}\n\nexport default debug;\n", "import debug from './debug.js';\nvar error = debug('device:error');\n\nvar supportsVRSession = false;\nvar supportsARSession = false;\n\nexport var isWebXRAvailable = navigator.xr !== undefined;\n\n// Support both WebVR and WebXR APIs.\nif (isWebXRAvailable) {\n  var updateEnterInterfaces = function () {\n    var sceneEl = document.querySelector('a-scene');\n    if (!sceneEl) {\n      window.addEventListener('DOMContentLoaded', updateEnterInterfaces);\n      return;\n    }\n    if (sceneEl.hasLoaded) {\n      sceneEl.components['xr-mode-ui'].updateEnterInterfaces();\n    } else {\n      sceneEl.addEventListener('loaded', updateEnterInterfaces);\n    }\n  };\n  var errorHandler = function (err) {\n    error('WebXR session support error: ' + err.message);\n  };\n  if (navigator.xr.isSessionSupported) {\n    // Current WebXR spec uses a boolean-returning isSessionSupported promise\n    navigator.xr.isSessionSupported('immersive-vr').then(function (supported) {\n      supportsVRSession = supported;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n\n    navigator.xr.isSessionSupported('immersive-ar').then(function (supported) {\n      supportsARSession = supported;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else if (navigator.xr.supportsSession) {\n    // Fallback for implementations that haven't updated to the new spec yet,\n    // the old version used supportsSession which is rejected for missing\n    // support.\n    navigator.xr.supportsSession('immersive-vr').then(function () {\n      supportsVRSession = true;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n    navigator.xr.supportsSession('immersive-ar').then(function () {\n      supportsARSession = true;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else {\n    error('WebXR has neither isSessionSupported or supportsSession?!');\n  }\n}\n\n/**\n * Determine if a headset is connected.\n */\nexport function checkHeadsetConnected () {\n  return supportsVRSession || supportsARSession;\n}\n\nexport function checkARSupport () { return supportsARSession; }\n\nexport function checkVRSupport () { return supportsVRSession; }\n\n/**\n * Checks if browser is mobile and not stand-alone dedicated vr device.\n * @returns {boolean} True if mobile browser detected.\n */\nexport var isMobile = (function () {\n  var _isMobile = false;\n  (function (a) {\n    // eslint-disable-next-line no-useless-escape\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function () { return _isMobile; };\n})();\n\n/**\n *  Detect tablet devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n */\nexport function isTablet (mockUserAgent) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n\n  var isTablet = /Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n\n  // Additional check for iPad or MacIntel with touch capabilities and not an MSStream device\n  return isTablet || isIpad();\n}\n\n/**\n *  Detect ipad devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n *  @param {string} mockDevicePlatform - Allow passing a mock device platform for testing.\n *  @param {string} mockDeviceTouchPoints - Allow passing a mock device touch points for testing.\n*/\nexport function isIpad (mockUserAgent, mockDevicePlatform, mockDeviceTouchPoints) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n  var platform = mockDevicePlatform || window.navigator.platform;\n  var maxTouchPoints = mockDeviceTouchPoints || window.navigator.maxTouchPoints || 0;\n\n  return ((platform === 'iPad' || platform === 'MacIntel') && maxTouchPoints > 0 && /Macintosh|Intel|iPad|ipad/i.test(userAgent) && !window.MSStream);\n}\n\n/**\n *  Detect Apple Vision Pro devices.\n */\nexport function isAppleVisionPro () {\n  // Safari for Apple Vision Pro presents itself as a desktop browser.\n  var isMacintosh = navigator.userAgent.includes('Macintosh');\n  // Discriminates between a \"real\" desktop browser and Safari for Vision Pro.\n  var hasFiveTouchPoints = navigator.maxTouchPoints === 5;\n  // isWebXRAvailable discriminates between Vision Pro and iPad / iPhone.\n  // This will no longer work once WebXR ships in iOS / iPad OS.\n  return isMacintosh && hasFiveTouchPoints && isWebXRAvailable;\n}\n\nexport function isIOS () {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform);\n}\n\nexport function isMobileDeviceRequestingDesktopSite () {\n  return !isMobile() && !isMobileVR() && window.orientation !== undefined;\n}\n\n/**\n *  Detect Oculus Browser (standalone headset)\n */\nexport function isOculusBrowser () {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect Firefox Reality (standalone headset)\n */\nexport function isFirefoxReality () {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect browsers in Stand-Alone headsets\n */\nexport function isMobileVR () {\n  return isOculusBrowser() || isFirefoxReality() || isAppleVisionPro();\n}\n\nexport function isR7 () {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\n/**\n * Checks mobile device orientation.\n * @returns {boolean} True if landscape orientation.\n */\nexport function isLandscape () {\n  var orientation = window.orientation;\n  if (isR7()) { orientation += 90; }\n  return orientation === 90 || orientation === -90;\n}\n\n/**\n * Check if running in a browser or spoofed browser (bundler).\n * We need to check a node api that isn't mocked on either side.\n * `require` and `module.exports` are mocked in browser by bundlers.\n */\nexport var isBrowserEnvironment = typeof process === 'undefined';\n\n/**\n * Check if running in node on the server.\n */\nexport var isNodeEnvironment = !isBrowserEnvironment;\n", "/*\n  Adapted deePool by Kyle Simpson.\n  MIT License: http://getify.mit-license.org\n*/\nvar EMPTY_SLOT = Object.freeze(Object.create(null));\n\n// Default object factory.\nfunction defaultObjectFactory () { return {}; }\n\n/**\n * Create a new pool.\n */\nexport function createPool (objectFactory) {\n  var objPool = [];\n  var nextFreeSlot = null;  // Pool location to look for a free object to use.\n\n  objectFactory = objectFactory || defaultObjectFactory;\n\n  function use () {\n    var objToUse;\n    if (nextFreeSlot === null || nextFreeSlot === objPool.length) {\n      grow(objPool.length || 5);\n    }\n    objToUse = objPool[nextFreeSlot];\n    objPool[nextFreeSlot++] = EMPTY_SLOT;\n    clearObject(objToUse);\n    return objToUse;\n  }\n\n  function recycle (obj) {\n    if (!(obj instanceof Object)) { return; }\n    if (nextFreeSlot === null || nextFreeSlot === -1) {\n      objPool[objPool.length] = obj;\n      return;\n    }\n    objPool[--nextFreeSlot] = obj;\n  }\n\n  function grow (count) {\n    var currentLength;\n    var i;\n\n    count = count === undefined ? objPool.length : count;\n    if (count > 0 && nextFreeSlot == null) {\n      nextFreeSlot = 0;\n    }\n\n    if (count > 0) {\n      currentLength = objPool.length;\n      objPool.length += Number(count);\n      for (i = currentLength; i < objPool.length; i++) {\n        // Add new obj to pool.\n        objPool[i] = objectFactory();\n      }\n    }\n\n    return objPool.length;\n  }\n\n  function size () {\n    return objPool.length;\n  }\n\n  return {\n    grow: grow,\n    pool: objPool,\n    recycle: recycle,\n    size: size,\n    use: use\n  };\n}\n\nexport function clearObject (obj) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) { obj[key] = undefined; }\n}\n\nexport function removeUnusedKeys (obj, schema) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) {\n    if (!(key in schema)) {\n      delete obj[key];\n    }\n  }\n}\n", "import * as THREE from 'three';\nimport debug from './debug.js';\n\nvar warn = debug('utils:coordinates:warn');\n\n// Order of coordinates parsed by coordinates.parse.\nvar COORDINATE_KEYS = ['x', 'y', 'z', 'w'];\n\n// Coordinate string regex. Handles negative, positive, and decimals.\nexport var regex = /^\\s*((-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s+){2,3}(-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s*$/;\n\nvar whitespaceRegex = /\\s+/g;\n\n/**\n * Parses coordinates from an \"x y z\" string.\n * Example: \"3 10 -5\" to {x: 3, y: 10, z: -5}.\n *\n * @param {string} value - An \"x y z\" string.\n * @param {string} defaultVec - fallback value.\n * @param {object} target - Optional target object for coordinates.\n * @returns {object} An object with keys [x, y, z].\n */\nexport function parse (value, defaultVec, target) {\n  var coordinate;\n  var defaultVal;\n  var key;\n  var i;\n  var vec = (target && typeof target === 'object') ? target : {};\n  var x;\n  var y;\n  var z;\n  var w;\n\n  if (value && value instanceof Object) {\n    x = value.x === undefined ? defaultVec && defaultVec.x : value.x;\n    y = value.y === undefined ? defaultVec && defaultVec.y : value.y;\n    z = value.z === undefined ? defaultVec && defaultVec.z : value.z;\n    w = value.w === undefined ? defaultVec && defaultVec.w : value.w;\n    if (x !== undefined && x !== null) { vec.x = parseIfString(x); }\n    if (y !== undefined && y !== null) { vec.y = parseIfString(y); }\n    if (z !== undefined && z !== null) { vec.z = parseIfString(z); }\n    if (w !== undefined && w !== null) { vec.w = parseIfString(w); }\n    return vec;\n  }\n\n  if (value === null || value === undefined) {\n    return typeof defaultVec === 'object' ? Object.assign(vec, defaultVec) : defaultVec;\n  }\n\n  coordinate = value.trim().split(whitespaceRegex);\n  for (i = 0; i < COORDINATE_KEYS.length; i++) {\n    key = COORDINATE_KEYS[i];\n    if (coordinate[i]) {\n      vec[key] = parseFloat(coordinate[i], 10);\n    } else {\n      defaultVal = defaultVec && defaultVec[key];\n      if (defaultVal === undefined) { continue; }\n      vec[key] = parseIfString(defaultVal);\n    }\n  }\n  return vec;\n}\n\n/**\n * Stringify coordinates from an object with keys [x y z].\n * Example: {x: 3, y: 10, z: -5} to \"3 10 -5\".\n *\n * @param {object|string} data - An object with keys [x y z].\n * @returns {string} An \"x y z\" string.\n */\nexport function stringify (data) {\n  var str;\n  if (typeof data !== 'object') { return data; }\n  str = data.x + ' ' + data.y;\n  if (data.z != null) { str += ' ' + data.z; }\n  if (data.w != null) { str += ' ' + data.w; }\n  return str;\n}\n\n/**\n * Compares the values of two coordinates to check equality.\n *\n * @param {object|string} a - An object with keys [x y z].\n * @param {object|string} b - An object with keys [x y z].\n * @returns {boolean} True if both coordinates are equal, false otherwise\n */\nexport function equals (a, b) {\n  if (typeof a !== 'object' || typeof b !== 'object') {\n    return a === b;\n  }\n  return a.x === b.x && a.y === b.y && a.z === b.z && a.w === b.w;\n}\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nexport function isCoordinates (value) {\n  return regex.test(value);\n}\n\nexport function isCoordinate (value) {\n  warn('`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`');\n  return isCoordinates(value);\n}\n\nfunction parseIfString (val) {\n  if (val !== null && val !== undefined && val.constructor === String) {\n    return parseFloat(val, 10);\n  }\n  return val;\n}\n\n/**\n * Convert {x, y, z} object to three.js Vector3.\n */\nexport function toVector3 (vec3) {\n  return new THREE.Vector3(vec3.x, vec3.y, vec3.z);\n}\n", "/**\n * String split with cached result.\n */\nexport var split = (function () {\n  var splitCache = {};\n\n  return function (str, delimiter) {\n    if (!(delimiter in splitCache)) { splitCache[delimiter] = {}; }\n\n    if (str in splitCache[delimiter]) { return splitCache[delimiter][str]; }\n\n    splitCache[delimiter][str] = str.split(delimiter);\n    return splitCache[delimiter][str];\n  };\n})();\n", "import { split } from './split.js';\n\n/**\n * Split a delimited component property string (e.g., `material.color`) to an object\n * containing `component` name and `property` name. If there is no delimiter, just return the\n * string back.\n *\n * Uses the caching split implementation `AFRAME.utils.split`\n *\n * @param {string} str - e.g., `material.opacity`.\n * @param {string} delimiter - e.g., `.`.\n * @returns {string[]} e.g., `['material', 'opacity']`.\n */\nexport function getComponentPropertyPath (str, delimiter) {\n  delimiter = delimiter || '.';\n  var parts = split(str, delimiter);\n  if (parts.length === 1) {\n    return parts[0];\n  }\n  return parts;\n}\n\n/**\n * Get component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function getComponentProperty (el, name, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      return el.getAttribute(splitName);\n    }\n    return el.getAttribute(splitName[0])[splitName[1]];\n  }\n  return el.getAttribute(name);\n}\n\n/**\n * Set component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function setComponentProperty (el, name, value, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      el.setAttribute(splitName, value);\n    } else {\n      el.setAttribute(splitName[0], splitName[1], value);\n    }\n    return;\n  }\n  el.setAttribute(name, value);\n}\n", "export default function forceCanvasResizeSafariMobile (canvasEl) {\n  var width = canvasEl.style.width;\n  var height = canvasEl.style.height;\n  // Taken from webvr-polyfill (https://github.com/borismus/webvr-polyfill/blob/85f657cd502ec9417bf26b87c3cb2afa6a70e079/src/util.js#L200)\n  // iOS only workaround for https://bugs.webkit.org/show_bug.cgi?id=152556\n  // By changing the size 1 pixel and restoring the previous value\n  // we trigger a size recalculation cycle.\n  canvasEl.style.width = (parseInt(width, 10) + 1) + 'px';\n  canvasEl.style.height = (parseInt(height, 10) + 1) + 'px';\n  setTimeout(function () {\n    canvasEl.style.width = width;\n    canvasEl.style.height = height;\n  }, 200);\n}\n", "/* global Image, XMLHttpRequest */\nimport debug from './debug.js';\n\nvar warn = debug('utils:src-loader:warn');\n\n/**\n * Validate a texture, either as a selector or as a URL.\n * Detects whether `src` is pointing to an image or video and invokes the appropriate\n * callback.\n *\n * `src` will be passed into the callback\n *\n * @param {string|Element} src - URL or media element.\n * @param {function} isImageCb - callback if texture is an image.\n * @param {function} isVideoCb - callback if texture is a video.\n */\nexport function validateSrc (src, isImageCb, isVideoCb) {\n  checkIsImage(src, function isAnImageUrl (isImage) {\n    if (isImage) {\n      isImageCb(src);\n      return;\n    }\n    isVideoCb(src);\n  });\n}\n\n/**\n * Validates either six images as a cubemap or one image as an Equirectangular image.\n *\n * @param {string} src - A selector, image URL or comma-separated image URLs. Image URLS\n          must be wrapped by `url()`.\n * @param {function} isCubemapCb - callback if src is a cubemap.\n * @param {function} isEquirectCb - callback if src is a singular equirectangular image.\n */\nexport function validateEnvMapSrc (src, isCubemapCb, isEquirectCb) {\n  var el;\n  var cubemapSrcRegex = '';\n  var i;\n  var urls;\n  var validatedUrls = [];\n\n  if (typeof src === 'string') {\n    for (i = 0; i < 5; i++) {\n      cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\),\\\\s*)';\n    }\n    cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\)\\\\s*)';\n    urls = src.match(new RegExp(cubemapSrcRegex));\n\n    // `src` is a comma-separated list of URLs.\n    // In this case, re-use validateSrc for each side of the cube.\n    function isImageCb (url) {\n      validatedUrls.push(url);\n      if (validatedUrls.length === 6) {\n        isCubemapCb(validatedUrls);\n      }\n    }\n    if (urls) {\n      for (i = 1; i < 7; i++) {\n        validateSrc(parseUrl(urls[i]), isImageCb);\n      }\n      return;\n    }\n\n    // Single URL src\n    if (!src.startsWith('#')) {\n      var parsedSrc = parseUrl(src);\n      if (parsedSrc) {\n        validateSrc(parsedSrc, isEquirectCb);\n      } else {\n        validateSrc(src, isEquirectCb);\n      }\n      return;\n    }\n  }\n\n  // `src` is either an element or a query selector to an element (<a-cubemap> or <img>).\n  if (src.tagName) {\n    el = src;\n  } else {\n    el = validateAndGetQuerySelector(src);\n  }\n\n  if (!el) { return; }\n  if (el.tagName === 'A-CUBEMAP' && el.srcs) {\n    return isCubemapCb(el.srcs);\n  }\n  if (el.tagName === 'IMG') {\n    return isEquirectCb(el);\n  }\n  // Else if el is not a valid element, either <a-cubemap> or <img>.\n  warn('Selector \"%s\" does not point to <a-cubemap> or <img>', src);\n}\n\n/**\n * Validates six images as a cubemap, either as selector or comma-separated\n * URLs.\n *\n * @param {string} src - A selector or comma-separated image URLs. Image URLs\n          must be wrapped by `url()`.\n * @param {function} cb - callback if src is a cubemap.\n */\nexport function validateCubemapSrc (src, cb) {\n  return validateEnvMapSrc(src, cb, function isEquirectCb () {\n    warn('Expected cubemap but got image');\n  });\n}\n\n/**\n * Parses src from `url(src)`.\n * @param  {string} src - String to parse.\n * @returns {string} The parsed src, if parseable.\n */\nexport function parseUrl (src) {\n  var parsedSrc = src.match(/url\\((.+)\\)/);\n  if (!parsedSrc) { return; }\n  return parsedSrc[1];\n}\n\n/**\n * Call back whether `src` is an image.\n *\n * @param {string|Element} src - URL or element that will be tested.\n * @param {function} onResult - Callback with whether `src` is an image.\n */\nfunction checkIsImage (src, onResult) {\n  var request;\n\n  if (src.tagName) {\n    onResult(src.tagName === 'IMG');\n    return;\n  }\n  request = new XMLHttpRequest();\n\n  // Try to send HEAD request to check if image first.\n  request.open('HEAD', src);\n  request.addEventListener('load', function (event) {\n    var contentType;\n    if (request.status >= 200 && request.status < 300) {\n      contentType = request.getResponseHeader('Content-Type');\n      if (contentType == null) {\n        checkIsImageFallback(src, onResult);\n      } else {\n        if (contentType.startsWith('image')) {\n          onResult(true);\n        } else {\n          onResult(false);\n        }\n      }\n    } else {\n      checkIsImageFallback(src, onResult);\n    }\n    request.abort();\n  });\n  request.send();\n}\n\nfunction checkIsImageFallback (src, onResult) {\n  var tester = new Image();\n  tester.addEventListener('load', onLoad);\n  function onLoad () { onResult(true); }\n  tester.addEventListener('error', onError);\n  function onError () { onResult(false); }\n  tester.src = src;\n}\n\n/**\n * Query and validate a query selector,\n *\n * @param {string} selector - DOM selector.\n * @returns {object|null|undefined} Selected DOM element if exists.\n *          null if query yields no results.\n *          undefined if `selector` is not a valid selector.\n */\nfunction validateAndGetQuerySelector (selector) {\n  try {\n    var el = document.querySelector(selector);\n    if (!el) {\n      warn('No element was found matching the selector: \"%s\"', selector);\n    }\n    return el;\n  } catch (e) {  // Capture exception if it's not a valid selector.\n    warn('\"%s\" is not a valid selector', selector);\n    return undefined;\n  }\n}\n", "/* global HTMLCanvasElement, HTMLVideoElement */\nimport * as THREE from 'three';\nimport * as srcLoader from './src-loader.js';\nimport debug from './debug.js';\nvar warn = debug('utils:material:warn');\n\nvar COLOR_MAPS = new Set([\n  'emissiveMap',\n  'envMap',\n  'map',\n  'specularMap'\n]);\n\n/**\n * Set texture properties such as repeat and offset.\n *\n * @param {THREE.Texture} texture - a Texture instance.\n * @param {object} data - With keys like `repeat`.\n */\nexport function setTextureProperties (texture, data) {\n  var offset = data.offset || {x: 0, y: 0};\n  var repeat = data.repeat || {x: 1, y: 1};\n  var npot = data.npot || false;\n  var anisotropy = data.anisotropy || THREE.Texture.DEFAULT_ANISOTROPY;\n  var wrapS = texture.wrapS;\n  var wrapT = texture.wrapT;\n  var magFilter = texture.magFilter;\n  var minFilter = texture.minFilter;\n\n  // To support NPOT textures, wrap must be ClampToEdge (not Repeat),\n  // and filters must not use mipmaps (i.e. Nearest or Linear).\n  if (npot) {\n    wrapS = THREE.ClampToEdgeWrapping;\n    wrapT = THREE.ClampToEdgeWrapping;\n    magFilter = THREE.LinearFilter;\n    minFilter = THREE.LinearFilter;\n  }\n\n  // Set wrap mode to repeat only if repeat isn't 1/1. Power-of-two is required to repeat.\n  if (repeat.x !== 1 || repeat.y !== 1) {\n    wrapS = THREE.RepeatWrapping;\n    wrapT = THREE.RepeatWrapping;\n  }\n\n  // Apply texture properties\n  texture.offset.set(offset.x, offset.y);\n  texture.repeat.set(repeat.x, repeat.y);\n\n  if (texture.wrapS !== wrapS || texture.wrapT !== wrapT ||\n      texture.magFilter !== magFilter || texture.minFilter !== minFilter ||\n      texture.anisotropy !== anisotropy) {\n    texture.wrapS = wrapS;\n    texture.wrapT = wrapT;\n    texture.magFilter = magFilter;\n    texture.minFilter = minFilter;\n    texture.anisotropy = anisotropy;\n    texture.needsUpdate = true;\n  }\n}\n\n/**\n * Update `material` texture property (usually but not always `map`)\n * from `data` property (usually but not always `src`).\n *\n * @param {string} materialName\n * @param {string} dataName\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMapMaterialFromData (materialName, dataName, shader, data) {\n  var el = shader.el;\n  var material = shader.material;\n  var rendererSystem = el.sceneEl.systems.renderer;\n  var src = data[dataName];\n\n  // Because a single material / shader may have multiple textures,\n  // we need to remember the source value for this data property\n  // to avoid redundant operations which can be expensive otherwise\n  // (e.g. video texture loads).\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    // Remove the texture from the material.\n    setMap(null);\n    return;\n  }\n\n  // If material src hasn't changed, and we already have a texture,\n  // just update properties, but don't reload the texture.\n  if (src === shader.materialSrcs[materialName] &&\n      material[materialName]) {\n    setTextureProperties(material[materialName], data);\n    return;\n  }\n\n  // Remember the new src for this texture (there may be multiple).\n  shader.materialSrcs[materialName] = src;\n\n  // If the new material src is already a texture, just use it.\n  if (src instanceof THREE.Texture) { setMap(src); } else {\n    // Load texture source for the new material src.\n    // (And check if we should still use it once available in callback.)\n    el.sceneEl.systems.material.loadTextureSource(src, updateTexture);\n  }\n\n  function updateTexture (source) {\n    // If the source has been changed, don't use loaded texture.\n    if (shader.materialSrcs[materialName] !== src) { return; }\n\n    var texture = material[materialName];\n\n    // Handle removal or texture type change\n    if (texture && (source === null || !isCompatibleTexture(texture, source))) {\n      texture = null;\n    }\n\n    // Create texture if needed\n    if (!texture && source) {\n      texture = createCompatibleTexture(source);\n    }\n\n    // Update texture source and properties\n    if (texture) {\n      if (texture.source !== source) {\n        texture.source = source;\n        texture.needsUpdate = true;\n      }\n      if (COLOR_MAPS.has(materialName)) {\n        rendererSystem.applyColorCorrection(texture);\n      }\n      setTextureProperties(texture, data);\n    }\n\n    // Set map property on the material\n    setMap(texture);\n  }\n\n  function setMap (texture) {\n    // Nothing to do if texture is the same\n    if (material[materialName] === texture) {\n      return;\n    }\n\n    // Dispose old texture if present\n    if (material[materialName]) {\n      material[materialName].dispose();\n    }\n\n    material[materialName] = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Update `material.map` given `data.src`. For standard and flat shaders.\n *\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMap (shader, data) {\n  return updateMapMaterialFromData('map', 'src', shader, data);\n}\n\n/**\n * Updates the material's maps which give the illusion of extra geometry.\n *\n * @param {string} longType - The friendly name of the map from the component e.g. ambientOcclusionMap becomes aoMap in THREE.js\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateDistortionMap (longType, shader, data) {\n  var shortType = longType;\n  if (longType === 'ambientOcclusion') { shortType = 'ao'; }\n\n  var info = {};\n  info.src = data[longType + 'Map'];\n\n  // Pass through the repeat and offset to be handled by the material loader.\n  info.offset = data[longType + 'TextureOffset'];\n  info.repeat = data[longType + 'TextureRepeat'];\n  info.wrap = data[longType + 'TextureWrap'];\n  return updateMapMaterialFromData(shortType + 'Map', 'src', shader, info);\n}\n\n// Cache env map results as promises\nvar envMapPromises = {};\n\n/**\n * Updates the material's environment map providing reflections or refractions.\n *\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateEnvMap (shader, data) {\n  var material = shader.material;\n  var el = shader.el;\n  var materialName = 'envMap';\n  var src = data.envMap;\n  var sphericalEnvMap = data.sphericalEnvMap;\n  var refract = data.refract;\n\n  if (sphericalEnvMap) {\n    src = sphericalEnvMap;\n    warn('`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. ' +\n      'Use `envMap` property with a CubeMap or Equirectangular image instead.');\n  }\n\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  // EnvMap has been removed\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    material.envMap = null;\n    material.needsUpdate = true;\n    return;\n  }\n\n  // Remember the new src for this env map.\n  shader.materialSrcs[materialName] = src;\n\n  // Env map is already loading. Wait on promise.\n  if (envMapPromises[src]) {\n    envMapPromises[src].then(checkSetMap);\n    return;\n  }\n\n  // First time loading this env map.\n  envMapPromises[src] = new Promise(function (resolve) {\n    srcLoader.validateEnvMapSrc(src, function loadCubeMap (srcs) {\n      el.sceneEl.systems.material.loadCubeMapTexture(srcs, function (texture) {\n        texture.mapping = refract ? THREE.CubeRefractionMapping : THREE.CubeReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    }, function loadEquirectMap (src) {\n      el.sceneEl.systems.material.loadTexture(src, {src: src}, function (texture) {\n        texture.mapping = refract ? THREE.EquirectangularRefractionMapping : THREE.EquirectangularReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    });\n  });\n\n  function checkSetMap (texture) {\n    if (shader.materialSrcs[materialName] !== src) { return; }\n    material.envMap = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Emit event on entities on texture-related events.\n *\n * @param {Element} el - Entity.\n * @param {object} texture - three.js Texture.\n */\nexport function handleTextureEvents (el, texture) {\n  if (!texture) { return; }\n\n  el.emit('materialtextureloaded', {src: texture.image, texture: texture});\n\n  // Video events.\n  if (!texture.image || texture.image.tagName !== 'VIDEO') { return; }\n\n  texture.image.addEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n  texture.image.addEventListener('ended', emitVideoTextureEndedAll);\n  function emitVideoTextureLoadedDataAll () {\n    el.emit('materialvideoloadeddata', {src: texture.image, texture: texture});\n  }\n  function emitVideoTextureEndedAll () {\n    // Works for non-looping videos only.\n    el.emit('materialvideoended', {src: texture.image, texture: texture});\n  }\n\n  // Video source can outlive texture, so cleanup event listeners when texture is disposed\n  texture.addEventListener('dispose', function cleanupListeners () {\n    texture.image.removeEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n    texture.image.removeEventListener('ended', emitVideoTextureEndedAll);\n  });\n}\n\n/**\n * Checks if a given texture type is compatible with a given source.\n *\n * @param {THREE.Texture} texture - The texture to check compatibility with\n * @param {THREE.Source} source - The source to check compatibility with\n * @returns {boolean} True if the texture is compatible with the source, false otherwise\n */\nexport function isCompatibleTexture (texture, source) {\n  if (texture.source !== source) {\n    return false;\n  }\n\n  if (source.data instanceof HTMLCanvasElement) {\n    return texture.isCanvasTexture;\n  }\n\n  if (source.data instanceof HTMLVideoElement) {\n    return texture.isVideoTexture;\n  }\n\n  return texture.isTexture && !texture.isCanvasTexture && !texture.isVideoTexture;\n}\n\nexport function createCompatibleTexture (source) {\n  var texture;\n\n  if (source.data instanceof HTMLCanvasElement) {\n    texture = new THREE.CanvasTexture();\n  } else if (source.data instanceof HTMLVideoElement) {\n    // Pass underlying video to constructor to ensure requestVideoFrameCallback is setup\n    texture = new THREE.VideoTexture(source.data);\n  } else {\n    texture = new THREE.Texture();\n  }\n\n  texture.source = source;\n  texture.needsUpdate = true;\n  return texture;\n}\n", "/**\n * Utils for parsing style-like strings (e.g., \"primitive: box; width: 5; height: 4.5\").\n * Some code adapted from `style-attr` (https://github.com/joshwnj/style-attr)\n * by Josh Johnston (MIT License).\n */\nvar DASH_REGEX = /-([a-z])/g;\n\n/**\n * Deserialize style-like string into an object of properties.\n *\n * @param {string} value - HTML attribute value.\n * @param {object} obj - Reused object for object pooling.\n * @returns {object} Property data.\n */\nexport function parse (value, obj) {\n  var parsedData;\n  if (typeof value !== 'string') { return value; }\n  parsedData = styleParse(value, obj);\n  // The style parser returns an object { \"\" : \"test\"} when fed a string\n  if (parsedData['']) { return value; }\n  return parsedData;\n}\n\n/**\n * Serialize an object of properties into a style-like string.\n *\n * @param {object} data - Property data.\n * @returns {string}\n */\nexport function stringify (data) {\n  if (typeof data === 'string') { return data; }\n  return styleStringify(data);\n}\n\n/**\n * Converts string from hyphen to camelCase.\n *\n * @param {string} str - String to camelCase.\n * @returns {string} CamelCased string.\n */\nexport function toCamelCase (str) {\n  return str.replace(DASH_REGEX, upperCase);\n}\n\n/**\n * Split a string into chunks matching `<key>: <value>`\n */\nvar getKeyValueChunks = (function () {\n  var chunks = [];\n  var hasUnclosedUrl = /url\\([^)]+$/;\n\n  return function getKeyValueChunks (raw) {\n    var chunk = '';\n    var nextSplit;\n    var offset = 0;\n    var sep = ';';\n\n    chunks.length = 0;\n\n    while (offset < raw.length) {\n      nextSplit = raw.indexOf(sep, offset);\n      if (nextSplit === -1) { nextSplit = raw.length; }\n\n      chunk += raw.substring(offset, nextSplit);\n\n      // data URIs can contain semicolons, so make sure we get the whole thing\n      if (hasUnclosedUrl.test(chunk)) {\n        chunk += ';';\n        offset = nextSplit + 1;\n        continue;\n      }\n\n      chunks.push(chunk.trim());\n      chunk = '';\n      offset = nextSplit + 1;\n    }\n\n    return chunks;\n  };\n})();\n\n/**\n * Convert a style attribute string to an object.\n *\n * @param {object} str - Attribute string.\n * @param {object} obj - Object to reuse as a base, else a new one will be allocated.\n */\nfunction styleParse (str, obj) {\n  var chunks;\n  var i;\n  var item;\n  var pos;\n  var key;\n  var val;\n\n  obj = obj || {};\n\n  chunks = getKeyValueChunks(str);\n  for (i = 0; i < chunks.length; i++) {\n    item = chunks[i];\n    if (!item) { continue; }\n    // Split with `.indexOf` rather than `.split` because the value may also contain colons.\n    pos = item.indexOf(':');\n    key = item.substr(0, pos).trim();\n    val = item.substr(pos + 1).trim();\n    obj[toCamelCase(key)] = val;\n  }\n  return obj;\n}\n\n/**\n * Convert an object into an attribute string\n **/\nfunction styleStringify (obj) {\n  var key;\n  var keyCount = 0;\n  var i = 0;\n  var str = '';\n\n  for (key in obj) { keyCount++; }\n\n  for (key in obj) {\n    str += (key + ': ' + obj[key]);\n    if (i < keyCount - 1) { str += '; '; }\n    i++;\n  }\n  return str;\n}\n\nfunction upperCase (str) { return str[1].toUpperCase(); }\n", "var AXIS_LABELS = ['x', 'y', 'z', 'w'];\n\n/**\n * Called on controller component `.play` handlers.\n * Check if controller matches parameters and inject tracked-controls component.\n * Handle event listeners.\n * Generate controllerconnected or controllerdisconnected events.\n *\n * @param {object} component - Tracked controls component.\n * @param {object} idPrefix - Prefix to match in gamepad id if any.\n * @param {object} queryObject - Map of values to match.\n */\nexport function checkControllerPresentAndSetup (component, idPrefix, queryObject) {\n  var el = component.el;\n  var controller;\n  var isControllerPresent = isControllerPresentWebXR;\n  var isPresent;\n\n  controller = isControllerPresent(component, idPrefix, queryObject);\n  isPresent = !!controller;\n\n  // Nothing changed, no need to do anything.\n  if (isPresent === component.controllerPresent) { return isPresent; }\n\n  component.controllerPresent = isPresent;\n\n  // Update controller presence.\n  if (isPresent) {\n    component.addEventListeners();\n    component.injectTrackedControls(controller);\n    el.emit('controllerconnected', {name: component.name, component: component});\n  } else {\n    component.removeEventListeners();\n    el.emit('controllerdisconnected', {name: component.name, component: component});\n  }\n}\n\n/**\n *\n * @param {object} component - Tracked controls component.\n * @returns {boolean} True if a controller is present.\n */\nexport function isControllerPresentWebXR (component, id, queryObject) {\n  var controllers;\n  var sceneEl = component.el.sceneEl;\n  var trackedControlsSystem = sceneEl && sceneEl.systems['tracked-controls'];\n  if (!trackedControlsSystem) { return false; }\n\n  controllers = trackedControlsSystem.controllers;\n  if (!controllers || !controllers.length) { return false; }\n\n  return findMatchingControllerWebXR(\n    controllers, id,\n    queryObject.hand, queryObject.index, queryObject.iterateControllerProfiles, queryObject.handTracking);\n}\n\nexport function findMatchingControllerWebXR (controllers, idPrefix, handedness, index, iterateProfiles, handTracking) {\n  var i;\n  var j;\n  var controller;\n  var controllerMatch = false;\n  var controllerHasHandedness;\n  var profiles;\n  for (i = 0; i < controllers.length; i++) {\n    controller = controllers[i];\n    profiles = controller.profiles;\n    if (handTracking) {\n      controllerMatch = controller.hand;\n    } else {\n      if (iterateProfiles) {\n        for (j = 0; j < profiles.length; j++) {\n          controllerMatch = profiles[j].startsWith(idPrefix);\n          if (controllerMatch) { break; }\n        }\n      } else {\n        controllerMatch = profiles.length > 0 && profiles[0].startsWith(idPrefix);\n      }\n    }\n    if (!controllerMatch) { continue; }\n    // Vive controllers are assigned handedness at runtime and it might not be always available.\n    controllerHasHandedness = controller.handedness === 'right' || controller.handedness === 'left';\n    if (controllerHasHandedness) {\n      if (controller.handedness === handedness) { return controllers[i]; }\n    } else { // Fallback to index if controller has no handedness.\n      if ((i === index)) { return controllers[i]; }\n    }\n  }\n  return undefined;\n}\n\n/**\n * Emit specific `moved` event(s) if axes changed based on original axismove event.\n *\n * @param {object} component - Controller component in use.\n * @param {object} axesMapping - For example `{thumbstick: [0, 1]}`.\n * @param {object} evt - Event to process.\n */\nexport function emitIfAxesChanged (component, axesMapping, evt) {\n  var axes;\n  var buttonType;\n  var changed;\n  var detail;\n  var j;\n\n  for (buttonType in axesMapping) {\n    axes = axesMapping[buttonType];\n\n    changed = false;\n    for (j = 0; j < axes.length; j++) {\n      if (evt.detail.changed[axes[j]]) { changed = true; }\n    }\n\n    if (!changed) { continue; }\n\n    // Axis has changed. Emit the specific moved event with axis values in detail.\n    detail = {};\n    for (j = 0; j < axes.length; j++) {\n      detail[AXIS_LABELS[j]] = evt.detail.axis[axes[j]];\n    }\n    component.el.emit(buttonType + 'moved', detail);\n  }\n}\n\n/**\n * Handle a button event and reemits the events.\n *\n * @param {string} id - id of the button.\n * @param {string} evtName - name of the reemitted event\n * @param {object} component - reference to the component\n * @param {string} hand - handedness of the controller: left or right.\n */\nexport function onButtonEvent (id, evtName, component, hand) {\n  var mapping = hand ? component.mapping[hand] : component.mapping;\n  var buttonName = mapping.buttons[id];\n  component.el.emit(buttonName + evtName);\n  if (component.updateModel) {\n    component.updateModel(buttonName, evtName);\n  }\n}\n", "/* global location */\n\n/* Centralized place to reference utilities since utils is exposed to the user. */\nimport debug from './debug.js';\nimport deepAssign from 'deep-assign';\nimport * as device from './device.js';\nimport * as objectPool from './object-pool.js';\n\nvar warn = debug('utils:warn');\n\n/** @deprecated */\nexport function bind (fn) {\n  return fn.bind.apply(fn, Array.prototype.slice.call(arguments, 1));\n}\nexport * as coordinates from './coordinates.js';\nexport { default as debug } from './debug.js';\nexport * as device from './device.js';\nexport * as entity from './entity.js';\nexport { default as forceCanvasResizeSafariMobile } from './forceCanvasResizeSafariMobile.js';\nexport * as material from './material.js';\nexport * as objectPool from './object-pool.js';\nexport { split } from './split.js';\nexport * as styleParser from './styleParser.js';\nexport * as trackedControls from './tracked-controls.js';\n\nexport function checkHeadsetConnected () {\n  warn('`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`');\n  return device.checkHeadsetConnected(arguments);\n}\n\nexport function isIOS () {\n  warn('`utils.isIOS` has moved to `utils.device.isIOS`');\n  return device.isIOS(arguments);\n}\n\nexport function isMobile () {\n  warn('`utils.isMobile has moved to `utils.device.isMobile`');\n  return device.isMobile(arguments);\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttle (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * If there are multiple calls in the last interval we call the function one additional\n * time.\n * It behaves like throttle except for the very last call that gets deferred until the end of the interval.\n * This is useful when an event is used to trigger synchronization of state, and there is a need to converge\n * to the correct final state following a burst of events.\n *\n * Example use cases:\n * - synchronizing state based on the componentchanged event\n * - following a mouse pointer using the mousemove event\n * - integrating with THREE.TransformControls, via the objectChange event.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleLeadingAndTrailing (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  var deferTimer;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  var args;\n  var timerExpired = function () {\n    // Reached end of interval, call function\n    lastTime = Date.now();\n    functionToThrottle.apply(this, args);\n    deferTimer = undefined;\n  };\n\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (sinceLastTime >= minimumInterval) {\n      // Outside of minimum interval, call throttled function.\n      // Clear any pending timer as timeout imprecisions could otherwise cause two calls\n      // for the same interval.\n      clearTimeout(deferTimer);\n      deferTimer = undefined;\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    } else {\n      // Inside minimum interval, create timer if needed.\n      deferTimer = deferTimer || setTimeout(timerExpired, minimumInterval - sinceLastTime);\n      // Update args for when timer expires.\n      args = arguments;\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * Uses the time/timeDelta timestamps provided by the global render loop for better perf.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleTick (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function (time, delta) {\n    var sinceLastTime = typeof lastTime === 'undefined' ? delta : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle(time, sinceLastTime);\n    }\n  };\n}\n\n/**\n * Returns debounce function that gets called only once after a set of repeated calls.\n *\n * @param {function} func - function to debounce\n * @param {number} wait - Time to wait for repeated function calls (milliseconds).\n * @param {boolean} immediate - Calls the function immediately regardless of if it should be waiting.\n * @returns {function} Debounced function.\n */\nexport function debounce (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this;\n    var args = arguments;\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\n/**\n * Mix the properties of source object(s) into a destination object.\n *\n * @param  {object} dest - The object to which properties will be copied.\n * @param  {...object} source - The object(s) from which properties will be copied.\n */\nexport var extend = Object.assign;\nexport var extendDeep = deepAssign;\n\nexport function clone (obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Checks if two values are equal.\n * Includes objects and arrays and nested objects and arrays.\n * Try to keep this function performant as it will be called often to see if a component\n * should be updated.\n *\n * @param {object} a - First object.\n * @param {object} b - Second object.\n * @returns {boolean} Whether two objects are deeply equal.\n */\nexport var deepEqual = (function () {\n  var arrayPool = objectPool.createPool(function () { return []; });\n\n  return function (a, b) {\n    var key;\n    var keysA;\n    var keysB;\n    var i;\n    var valA;\n    var valB;\n\n    // If not objects or arrays, compare as values.\n    if (a === undefined || b === undefined || a === null || b === null ||\n        !(a && b && (a.constructor === Object && b.constructor === Object) ||\n                    (a.constructor === Array && b.constructor === Array))) {\n      return a === b;\n    }\n\n    // Different number of keys, not equal.\n    keysA = arrayPool.use();\n    keysB = arrayPool.use();\n    keysA.length = 0;\n    keysB.length = 0;\n    for (key in a) { keysA.push(key); }\n    for (key in b) { keysB.push(key); }\n    if (keysA.length !== keysB.length) {\n      arrayPool.recycle(keysA);\n      arrayPool.recycle(keysB);\n      return false;\n    }\n\n    // Return `false` at the first sign of inequality.\n    for (i = 0; i < keysA.length; ++i) {\n      valA = a[keysA[i]];\n      valB = b[keysA[i]];\n      // Check nested array and object.\n      if ((typeof valA === 'object' || typeof valB === 'object') ||\n          (Array.isArray(valA) && Array.isArray(valB))) {\n        if (valA === valB) { continue; }\n        if (!deepEqual(valA, valB)) {\n          arrayPool.recycle(keysA);\n          arrayPool.recycle(keysB);\n          return false;\n        }\n      } else if (valA !== valB) {\n        arrayPool.recycle(keysA);\n        arrayPool.recycle(keysB);\n        return false;\n      }\n    }\n\n    arrayPool.recycle(keysA);\n    arrayPool.recycle(keysB);\n    return true;\n  };\n})();\n\n/**\n * Computes the difference between two objects.\n *\n * @param {object} a - First object to compare (e.g., oldData).\n * @param {object} b - Second object to compare (e.g., newData).\n * @returns {object}\n *   Difference object where set of keys note which values were not equal, and values are\n *   `b`'s values.\n */\nexport var diff = (function () {\n  var keys = [];\n\n  return function (a, b, targetObject) {\n    var aVal;\n    var bVal;\n    var bKey;\n    var diff;\n    var key;\n    var i;\n    var isComparingObjects;\n\n    diff = targetObject || {};\n\n    // Collect A keys.\n    keys.length = 0;\n    for (key in a) { keys.push(key); }\n\n    if (!b) { return diff; }\n\n    // Collect B keys.\n    for (bKey in b) {\n      if (keys.indexOf(bKey) === -1) {\n        keys.push(bKey);\n      }\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      key = keys[i];\n      aVal = a[key];\n      bVal = b[key];\n      isComparingObjects = aVal && bVal &&\n                          aVal.constructor === Object && bVal.constructor === Object;\n      if ((isComparingObjects && !deepEqual(aVal, bVal)) ||\n          (!isComparingObjects && aVal !== bVal)) {\n        diff[key] = bVal;\n      }\n    }\n    return diff;\n  };\n})();\n\n/**\n * Returns whether we should capture this keyboard event for keyboard shortcuts.\n * @param {Event} event Event object.\n * @returns {boolean} Whether the key event should be captured.\n */\nexport function shouldCaptureKeyEvent (event) {\n  if (event.metaKey) { return false; }\n  return document.activeElement === document.body;\n}\n\n/**\n * Splits a string into an array based on a delimiter.\n *\n * @param   {string} [str='']        Source string\n * @param   {string} [delimiter=' '] Delimiter to use\n * @returns {string[]}               Array of delimited strings\n */\nexport function splitString (str, delimiter) {\n  if (typeof delimiter === 'undefined') { delimiter = ' '; }\n  // First collapse the whitespace (or whatever the delimiter is).\n  var regex = new RegExp(delimiter, 'g');\n  str = (str || '').replace(regex, delimiter);\n  // Then split.\n  return str.split(delimiter);\n}\n\n/**\n * Extracts data from the element given an object that contains expected keys.\n *\n * @param {Element} el - Source element.\n * @param {object} [defaults={}] - Object of default key-value pairs.\n * @returns {object}\n */\nexport function getElData (el, defaults) {\n  defaults = defaults || {};\n  var data = {};\n  Object.keys(defaults).forEach(copyAttribute);\n  function copyAttribute (key) {\n    if (el.hasAttribute(key)) {\n      data[key] = el.getAttribute(key);\n    }\n  }\n  return data;\n}\n\n/**\n * Retrieves querystring value.\n * @param {string} name Name of querystring key.\n * @returns {string} Value\n */\nexport function getUrlParameter (name) {\n  // eslint-disable-next-line no-useless-escape\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * Detects whether context is within iframe.\n */\nexport function isIframed () {\n  return window.top !== window.self;\n}\n\n/**\n * Finds all elements under the element that have the isScene\n * property set to true\n */\nexport function findAllScenes (el) {\n  var matchingElements = [];\n  var allElements = el.getElementsByTagName('*');\n  for (var i = 0, n = allElements.length; i < n; i++) {\n    if (allElements[i].isScene) {\n      // Element exists with isScene set.\n      matchingElements.push(allElements[i]);\n    }\n  }\n  return matchingElements;\n}\n\n// Must be at bottom to avoid circular dependency.\nexport * as srcLoader from './src-loader.js';\n", "import * as constants from '../../constants/index.js';\nimport { extend } from '../../utils/index.js';\n\nexport var MOBILE_HEAD_TAGS = [\n  Meta({name: 'viewport', content: 'width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover'}),\n\n  // W3C-standardised meta tags.\n  Meta({name: 'mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'theme-color', content: 'black'})\n];\n\nexport var MOBILE_IOS_HEAD_TAGS = [\n  // iOS-specific meta tags for fullscreen when pinning to homescreen.\n  Meta({name: 'apple-mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'apple-mobile-web-app-status-bar-style', content: 'black'}),\n  Link({rel: 'apple-touch-icon', href: 'https://aframe.io/images/aframe-logo-152.png'})\n];\n\nfunction Meta (attrs) {\n  return {\n    tagName: 'meta',\n    attributes: attrs,\n    exists: function () { return document.querySelector('meta[name=\"' + attrs.name + '\"]'); }\n  };\n}\n\nfunction Link (attrs) {\n  return {\n    tagName: 'link',\n    attributes: attrs,\n    exists: function () { return document.querySelector('link[rel=\"' + attrs.rel + '\"]'); }\n  };\n}\n\n/**\n * Injects the necessary metatags in the document for mobile support:\n * 1. Prevent the user to zoom in the document.\n * 2. Ensure that window.innerWidth and window.innerHeight have the correct\n *    values and the canvas is properly scaled.\n * 3. To allow fullscreen mode when pinning a web app on the home screen on\n *    iOS.\n * Adapted from https://www.reddit.com/r/web_design/comments/3la04p/\n *\n * @param {object} scene - Scene element\n * @returns {Array}\n */\nexport var inject = function injectHeadTags (scene) {\n  var headEl = document.head;\n  var headScriptEl = headEl.querySelector('script');\n  var tag;\n  var headTags = [];\n  MOBILE_HEAD_TAGS.forEach(createAndInjectTag);\n  if (scene.isIOS) {\n    MOBILE_IOS_HEAD_TAGS.forEach(createAndInjectTag);\n  }\n  return headTags;\n\n  function createAndInjectTag (tagObj) {\n    if (!tagObj || tagObj.exists()) { return; }\n\n    tag = createTag(tagObj);\n    if (!tag) { return; }\n\n    if (headScriptEl) {\n      headScriptEl.parentNode.insertBefore(tag, headScriptEl);\n    } else {\n      headEl.appendChild(tag);\n    }\n\n    headTags.push(tag);\n  }\n};\n\nfunction createTag (tagObj) {\n  if (!tagObj || !tagObj.tagName) { return; }\n  var meta = document.createElement(tagObj.tagName);\n  meta.setAttribute(constants.AFRAME_INJECTED, '');\n  return extend(meta, tagObj.attributes);\n}\n", "import * as THREE from 'three';\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\nvar styleParser = utils.styleParser;\n\nvar sceneEl;\nvar titleEl;\nvar getSceneCanvasSize;\n\nvar ATTR_NAME = 'loading-screen';\nvar LOADER_TITLE_CLASS = 'a-loader-title';\n\nexport function setup (el, getCanvasSize) {\n  sceneEl = el;\n  getSceneCanvasSize = getCanvasSize;\n  var loaderAttribute = sceneEl.hasAttribute(ATTR_NAME) ? styleParser.parse(sceneEl.getAttribute(ATTR_NAME)) : undefined;\n  var dotsColor = loaderAttribute && loaderAttribute.dotsColor || 'white';\n  var backgroundColor = loaderAttribute && loaderAttribute.backgroundColor || '#24CAFF';\n  var loaderEnabled = loaderAttribute === undefined || loaderAttribute.enabled === 'true' || loaderAttribute.enabled === undefined; // true default\n  var loaderScene;\n  var sphereGeometry;\n  var sphereMaterial;\n  var sphereMesh1;\n  var sphereMesh2;\n  var sphereMesh3;\n  var camera;\n  var clock;\n  var time;\n  var render;\n\n  if (!loaderEnabled) { return; }\n\n  // Setup Scene.\n  loaderScene = new THREE.Scene();\n  sphereGeometry = new THREE.SphereGeometry(0.20, 36, 18, 0, 2 * Math.PI, 0, Math.PI);\n  sphereMaterial = new THREE.MeshBasicMaterial({color: dotsColor});\n  sphereMesh1 = new THREE.Mesh(sphereGeometry, sphereMaterial);\n  sphereMesh2 = sphereMesh1.clone();\n  sphereMesh3 = sphereMesh1.clone();\n  camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.0005, 10000);\n  clock = new THREE.Clock();\n  time = 0;\n  render = function () {\n    sceneEl.renderer.render(loaderScene, camera);\n    time = clock.getElapsedTime() % 4;\n    sphereMesh1.visible = time >= 1;\n    sphereMesh2.visible = time >= 2;\n    sphereMesh3.visible = time >= 3;\n  };\n\n  loaderScene.background = new THREE.Color(backgroundColor);\n  loaderScene.add(camera);\n  sphereMesh1.position.set(-1, 0, -15);\n  sphereMesh2.position.set(0, 0, -15);\n  sphereMesh3.position.set(1, 0, -15);\n  camera.add(sphereMesh1);\n  camera.add(sphereMesh2);\n  camera.add(sphereMesh3);\n  setupTitle();\n\n  // Delay 200ms to avoid loader flashes.\n  setTimeout(function () {\n    if (sceneEl.hasLoaded) { return; }\n    resize(camera);\n    titleEl.style.display = 'block';\n    window.addEventListener('resize', function () { resize(camera); });\n    sceneEl.renderer.setAnimationLoop(render);\n  }, 200);\n}\n\nexport function remove () {\n  window.removeEventListener('resize', resize);\n  if (!titleEl) { return; }\n  // Hide title.\n  titleEl.style.display = 'none';\n}\n\nfunction resize (camera) {\n  var embedded = sceneEl.hasAttribute('embedded');\n  var size = getSceneCanvasSize(sceneEl.canvas, embedded, sceneEl.maxCanvasSize, sceneEl.is('vr-mode'));\n  camera.aspect = size.width / size.height;\n  camera.updateProjectionMatrix();\n   // Notify renderer of size change.\n  sceneEl.renderer.setSize(size.width, size.height, false);\n}\n\nfunction setupTitle () {\n  titleEl = document.createElement('div');\n  titleEl.className = LOADER_TITLE_CLASS;\n  titleEl.innerHTML = document.title;\n  titleEl.style.display = 'none';\n  titleEl.setAttribute(AFRAME_INJECTED, '');\n  sceneEl.appendChild(titleEl);\n}\n", "/*\n  Scene index for keeping track of created scenes.\n*/\nexport default [];\n", "import * as coordinates from '../utils/coordinates.js';\nimport debug from 'debug';\n\nvar warn = debug('core:propertyTypes:warn');\n\nexport var propertyTypes = {};\nvar nonCharRegex = /[,> .[\\]:]/;\nvar urlRegex = /url\\((.+)\\)/;\n\n// Built-in property types.\nregisterPropertyType('audio', '', assetParse, assetStringify);\nregisterPropertyType('array', [], arrayParse, arrayStringify, arrayEquals);\nregisterPropertyType('asset', '', assetParse, assetStringify);\nregisterPropertyType('boolean', false, boolParse);\nregisterPropertyType('color', '#FFF');\nregisterPropertyType('int', 0, intParse);\nregisterPropertyType('number', 0, numberParse);\nregisterPropertyType('map', '', assetParse, assetStringify);\nregisterPropertyType('model', '', assetParse, assetStringify);\nregisterPropertyType('selector', null, selectorParse, selectorStringify, defaultEquals, false);\nregisterPropertyType('selectorAll', null, selectorAllParse, selectorAllStringify, arrayEquals, false);\nregisterPropertyType('src', '', srcParse, assetStringify);\nregisterPropertyType('string', '');\nregisterPropertyType('time', 0, intParse);\nregisterPropertyType('vec2', {x: 0, y: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec3', {x: 0, y: 0, z: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec4', {x: 0, y: 0, z: 0, w: 1}, vecParse, coordinates.stringify, coordinates.equals);\n\n/**\n * Register a parser for re-use such that when someone uses `type` in the schema,\n * `schema.process` will set the property `parse` and `stringify`.\n *\n * @param {string} type - Type name.\n * @param {any} [defaultValue=null] - Default value to use if component does not define default value.\n * @param {function} [parse=defaultParse] - Parse string function.\n * @param {function} [stringify=defaultStringify] - Stringify to DOM function.\n * @param {function} [equals=defaultEquals] - Equality comparator.\n * @param {boolean} [cacheable=false] - Whether or not the parsed value of a property can be cached.\n */\nexport function registerPropertyType (type, defaultValue, parse, stringify, equals, cacheable) {\n  if (type in propertyTypes) {\n    throw new Error('Property type ' + type + ' is already registered.');\n  }\n\n  propertyTypes[type] = {\n    default: defaultValue,\n    parse: parse || defaultParse,\n    stringify: stringify || defaultStringify,\n    equals: equals || defaultEquals,\n    isCacheable: cacheable !== false\n  };\n}\n\nfunction arrayParse (value) {\n  if (Array.isArray(value)) { return value; }\n  if (!value || typeof value !== 'string') { return []; }\n  return value.split(',').map(trim);\n  function trim (str) { return str.trim(); }\n}\n\nfunction arrayStringify (value) {\n  return value.join(', ');\n}\n\nfunction arrayEquals (a, b) {\n  if (!Array.isArray(a) || !Array.isArray(b)) {\n    return a === b;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; i++) {\n    // FIXME: Deep-equals for objects?\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * For general assets.\n *\n * @param {string} value - Can either be `url(<value>)`, an ID selector to an asset, or\n *   just string.\n * @returns {string} Parsed value from `url(<value>)`, src from `<someasset src>`, or\n *   just string.\n */\nfunction assetParse (value) {\n  var el;\n  var parsedUrl;\n\n  // If an element was provided (e.g. canvas or video), just return it.\n  if (typeof value !== 'string') { return value; }\n\n  // Wrapped `url()` in case of data URI.\n  parsedUrl = value.match(urlRegex);\n  if (parsedUrl) { return parsedUrl[1]; }\n\n  // ID.\n  if (value.charAt(0) === '#') {\n    el = document.getElementById(value.substring(1));\n    if (el) {\n      // Pass through media elements. If we have the elements, we don't have to call\n      // three.js loaders which would re-request the assets.\n      if (el.tagName === 'CANVAS' || el.tagName === 'VIDEO' || el.tagName === 'IMG') {\n        return el;\n      }\n      return el.getAttribute('src');\n    }\n    warn('\"' + value + '\" asset not found.');\n    return;\n  }\n\n  // Non-wrapped url().\n  return value;\n}\n\nfunction assetStringify (value) {\n  if (value.getAttribute) {\n    var id = value.getAttribute('id');\n    if (id) {\n      return '#' + value.getAttribute('id');\n    }\n    // HTMLElement without id can not be stringified, as there is no string assetParse\n    // could convert back to this exact element, using the src attribute instead.\n    return value.getAttribute('src');\n  }\n  return defaultStringify(value);\n}\n\nfunction defaultParse (value) {\n  return value;\n}\n\nfunction defaultStringify (value) {\n  if (value === null) { return 'null'; }\n  return value.toString();\n}\n\nfunction defaultEquals (a, b) {\n  return a === b;\n}\n\nfunction boolParse (value) {\n  return value !== 'false' && value !== false;\n}\n\nfunction intParse (value) {\n  return parseInt(value, 10);\n}\n\nfunction numberParse (value) {\n  return parseFloat(value, 10);\n}\n\nfunction selectorParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  if (value[0] === '#' && !nonCharRegex.test(value)) {\n    // When selecting element by ID only, use getElementById for better performance.\n    // Don't match like #myId .child.\n    return document.getElementById(value.substring(1));\n  }\n  return document.querySelector(value);\n}\n\nfunction selectorAllParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  return Array.prototype.slice.call(document.querySelectorAll(value), 0);\n}\n\nfunction selectorStringify (value) {\n  if (value.getAttribute) {\n    return '#' + value.getAttribute('id');\n  }\n  return defaultStringify(value);\n}\n\nfunction selectorAllStringify (value) {\n  if (value instanceof Array) {\n    return value.map(function (element) {\n      return '#' + element.getAttribute('id');\n    }).join(', ');\n  }\n  return defaultStringify(value);\n}\n\nfunction srcParse (value) {\n  warn('`src` property type is deprecated. Use `asset` instead.');\n  return assetParse(value);\n}\n\nfunction vecParse (value, defaultValue, target) {\n  return coordinates.parse(value, defaultValue, target);\n}\n\n/**\n * Validate the default values in a schema to match their type.\n *\n * @param {string} type - Property type name.\n * @param defaultVal - Property type default value.\n * @returns {boolean} Whether default value is accurate given the type.\n */\nexport function isValidDefaultValue (type, defaultVal) {\n  if (type === 'audio' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'array' && !Array.isArray(defaultVal)) { return false; }\n  if (type === 'asset' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'boolean' && typeof defaultVal !== 'boolean') { return false; }\n  if (type === 'color' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'int' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'number' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'map' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'model' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'selector' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'selectorAll' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'src' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'string' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'time' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'vec2') { return isValidDefaultCoordinate(defaultVal, 2); }\n  if (type === 'vec3') { return isValidDefaultCoordinate(defaultVal, 3); }\n  if (type === 'vec4') { return isValidDefaultCoordinate(defaultVal, 4); }\n  return true;\n}\n\n/**\n * Checks if default coordinates are valid.\n *\n * @param possibleCoordinates\n * @param {number} dimensions - 2 for 2D Vector, 3 for 3D vector.\n * @returns {boolean} Whether coordinates are parsed correctly.\n */\nexport function isValidDefaultCoordinate (possibleCoordinates, dimensions) {\n  if (possibleCoordinates === null) { return true; }\n  if (typeof possibleCoordinates !== 'object') { return false; }\n\n  if (Object.keys(possibleCoordinates).length !== dimensions) {\n    return false;\n  } else {\n    var x = possibleCoordinates.x;\n    var y = possibleCoordinates.y;\n    var z = possibleCoordinates.z;\n    var w = possibleCoordinates.w;\n\n    if (typeof x !== 'number' || typeof y !== 'number') { return false; }\n    if (dimensions > 2 && typeof z !== 'number') { return false; }\n    if (dimensions > 3 && typeof w !== 'number') { return false; }\n  }\n\n  return true;\n}\n", "import * as utils from '../utils/index.js';\nimport * as PropertyTypes from './propertyTypes.js';\n\nvar debug = utils.debug;\nvar isValidDefaultValue = PropertyTypes.isValidDefaultValue;\nvar propertyTypes = PropertyTypes.propertyTypes;\n\nvar warn = debug('core:schema:warn');\n\n/**\n * A schema is classified as a schema for a single property if:\n * - `type` is defined on the schema as a string.\n * - OR `default` is defined on the schema, as a reserved keyword.\n * - OR schema is empty.\n */\nexport function isSingleProperty (schema) {\n  if ('type' in schema) {\n    return typeof schema.type === 'string';\n  }\n  return 'default' in schema;\n}\n\n/**\n * Build step to schema to use `type` to inject default value, parser, and stringifier.\n *\n * @param {object} schema\n * @param {string} componentName\n * @returns {object} Schema.\n */\nexport function process (schema, componentName) {\n  var propName;\n\n  // For single property schema, run processPropDefinition over the whole schema.\n  if (isSingleProperty(schema)) {\n    return processPropertyDefinition(schema, componentName);\n  }\n\n  // For multi-property schema, run processPropDefinition over each property definition.\n  for (propName in schema) {\n    schema[propName] = processPropertyDefinition(schema[propName], componentName);\n  }\n  return schema;\n}\n\n/**\n * Inject default value, parser, stringifier for single property.\n *\n * @param {object} propDefinition\n * @param {string} componentName\n */\nexport function processPropertyDefinition (propDefinition, componentName) {\n  var defaultVal = propDefinition.default;\n  var isCustomType;\n  var propType;\n  var typeName = propDefinition.type;\n\n  // Type inference.\n  if (!propDefinition.type) {\n    if (defaultVal !== undefined &&\n        (typeof defaultVal === 'boolean' || typeof defaultVal === 'number')) {\n      // Type inference.\n      typeName = typeof defaultVal;\n    } else if (Array.isArray(defaultVal)) {\n      typeName = 'array';\n    } else {\n      // Fall back to string.\n      typeName = 'string';\n    }\n  } else if (propDefinition.type === 'bool') {\n    typeName = 'boolean';\n  } else if (propDefinition.type === 'float') {\n    typeName = 'number';\n  }\n\n  propType = propertyTypes[typeName];\n  if (!propType) {\n    warn('Unknown property type for component `' + componentName + '`: ' + typeName);\n  }\n\n  // Fill in parse and stringify using property types.\n  isCustomType = !!propDefinition.parse;\n  propDefinition.parse = propDefinition.parse || propType.parse;\n  propDefinition.stringify = propDefinition.stringify || propType.stringify;\n  propDefinition.equals = propDefinition.equals || propType.equals;\n  propDefinition.isCacheable = propDefinition.isCacheable === true || propType.isCacheable;\n\n  // Fill in type name.\n  propDefinition.type = typeName;\n\n  // Check that default value exists.\n  if ('default' in propDefinition) {\n    // Check that default values are valid.\n    if (!isCustomType && !isValidDefaultValue(typeName, defaultVal)) {\n      warn('Default value `' + defaultVal + '` does not match type `' + typeName +\n           '` in component `' + componentName + '`');\n    }\n  } else {\n    // Fill in default value.\n    propDefinition.default = propType.default;\n  }\n\n  return propDefinition;\n}\n\n/**\n * Parse propData using schema. Use default values if not existing in propData.\n *\n * @param {object} propData - Unparsed properties.\n * @param {object} schema - Property types definition.\n * @param {boolean} getPartialData - Whether to return full component data or just the data\n *        with keys in `propData`.\n * @param {string } componentName - Name of the component, used for the property warning.\n * @param {boolean} silent - Suppress warning messages.\n */\nexport var parseProperties = (function () {\n  var propNames = [];\n\n  return function (propData, schema, getPartialData, componentName, silent) {\n    var i;\n    var propName;\n    var propDefinition;\n    var propValue;\n\n    propNames.length = 0;\n    for (propName in (getPartialData ? propData : schema)) {\n      if (getPartialData && propData[propName] === undefined) { continue; }\n      propNames.push(propName);\n    }\n\n    if (propData === null || typeof propData !== 'object') { return propData; }\n\n    // Validation errors.\n    for (propName in propData) {\n      if (propData[propName] !== undefined && !schema[propName] && !silent) {\n        warn('Unknown property `' + propName +\n             '` for component/system `' + componentName + '`.');\n      }\n    }\n\n    for (i = 0; i < propNames.length; i++) {\n      propName = propNames[i];\n      propDefinition = schema[propName];\n      propValue = propData[propName];\n      if (!(schema[propName])) { return; }\n      propData[propName] = parseProperty(propValue, propDefinition);\n    }\n\n    return propData;\n  };\n})();\n\n/**\n * Deserialize a single property.\n *\n * @param {any} value - The value to parse.\n * @param {object} propDefinition - The single property schema for the property.\n * @param {any} target - Optional target value to parse into (reuse).\n */\nexport function parseProperty (value, propDefinition, target) {\n  // Use default value if value is falsy.\n  if (value === undefined || value === null || value === '') {\n    value = propDefinition.default;\n    if (Array.isArray(value)) { value = value.slice(); }\n  }\n  // Invoke property type parser.\n  return propDefinition.parse(value, propDefinition.default, target);\n}\n\n/**\n * Serialize a group of properties.\n */\nexport function stringifyProperties (propData, schema) {\n  var propName;\n  var propDefinition;\n  var propValue;\n  var stringifiedData = {};\n  var value;\n\n  for (propName in propData) {\n    propDefinition = schema[propName];\n    propValue = propData[propName];\n    value = propValue;\n    if (typeof value === 'object') {\n      value = stringifyProperty(propValue, propDefinition);\n      if (!propDefinition) { warn('Unknown component property: ' + propName); }\n    }\n    if (value !== undefined) {\n      stringifiedData[propName] = value;\n    }\n  }\n  return stringifiedData;\n}\n\n/**\n * Serialize a single property.\n */\nexport function stringifyProperty (value, propDefinition) {\n  // This function stringifies but it's used in a context where\n  // there's always second stringification pass. By returning the original\n  // value when it's not an object we save one unnecessary call\n  // to JSON.stringify.\n  if (typeof value !== 'object') { return value; }\n  // if there's no schema for the property we use standard JSON stringify\n  if (!propDefinition || value === null) { return JSON.stringify(value); }\n  return propDefinition.stringify(value);\n}\n", "/* global Node */\nimport * as schema from './schema.js';\nimport scenes from './scene/scenes.js';\nimport * as systems from './system.js';\nimport * as utils from '../utils/index.js';\n\nexport var components = {}; // Keep track of registered components.\nvar parseProperty = schema.parseProperty;\nvar processSchema = schema.process;\nvar isSingleProp = schema.isSingleProperty;\nvar stringifyProperties = schema.stringifyProperties;\nvar stringifyProperty = schema.stringifyProperty;\nvar styleParser = utils.styleParser;\nvar warn = utils.debug('core:component:warn');\n\nvar aframeScript = document.currentScript;\nvar upperCaseRegExp = new RegExp('[A-Z]+');\n\n// Object pools by component, created upon registration.\nvar objectPools = {};\nvar emptyInitialOldData = Object.freeze({});\nvar encounteredUnknownProperties = [];\n\n// Handler translating get/set into getComputedPropertyValue and recomputeProperty.\nvar attrValueProxyHandler = {\n  get: function (target, prop) {\n    return target.getComputedPropertyValue(prop);\n  },\n  set: function (target, prop, newValue) {\n    if (prop in target.schema) {\n      target.recomputeProperty(prop, newValue);\n    } else if (newValue !== undefined) {\n      target.handleUnknownProperty(prop, newValue);\n    }\n    return true;\n  }\n};\n\n/**\n * Component class definition.\n *\n * Components configure appearance, modify behavior, or add functionality to\n * entities. The behavior and appearance of an entity can be changed at runtime\n * by adding, removing, or updating components. Entities do not share instances\n * of components.\n *\n * @constructor\n * @param {object} el - Reference to the entity element.\n * @param {string} attrValue - Value of the corresponding HTML attribute.\n * @param {string} id - Optional id for differentiating multiple instances on the same entity.\n */\nexport var Component = function (el, attrValue, id) {\n  var self = this;\n\n  // If component is sceneOnly check the entity is the scene element\n  if (this.sceneOnly && !el.isScene) {\n    throw new Error('Component `' + this.name + '` can only be applied to <a-scene>');\n  }\n\n  // If component name has an id we check component type multiplicity.\n  if (id && !this.multiple) {\n    throw new Error('Trying to initialize multiple ' +\n                    'components of type `' + this.name +\n                    '`. There can only be one component of this type per entity.');\n  }\n\n  this.el = el;\n  this.id = id;\n  this.attrName = this.name + (id ? '__' + id : '');\n  this.evtDetail = {id: this.id, name: this.name};\n  this.initialized = false;\n  this.el.components[this.attrName] = this;\n  this.objectPool = objectPools[this.name];\n\n  var events = this.events;\n  this.events = {};\n  eventsBind(this, events);\n\n  // Allocate data and oldData.\n  this.attrValue = undefined;\n  if (this.isObjectBased) {\n    this.data = this.objectPool.use();\n    // Drop any properties added by dynamic schemas in previous use\n    utils.objectPool.removeUnusedKeys(this.data, this.schema);\n    this.oldData = this.objectPool.use();\n    utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n\n    this.attrValueProxy = new Proxy(this, attrValueProxyHandler);\n  } else {\n    this.data = undefined;\n    this.oldData = undefined;\n    this.attrValueProxy = undefined;\n  }\n\n  // Dynamic schema requires special handling of unknown properties to avoid false-positives.\n  this.deferUnknownPropertyWarnings = !!this.updateSchema;\n\n  // Last value passed to updateProperties.\n  // This type of throttle ensures that when a burst of changes occurs, the final change to the\n  // component always triggers an event (so a consumer of this event will end up reading the correct\n  // final state, following a burst of changes).\n  this.throttledEmitComponentChanged = utils.throttleLeadingAndTrailing(function emitChange () {\n    el.emit('componentchanged', self.evtDetail, false);\n  }, 200);\n\n  // Initial call to updateProperties, force clobber to trigger an initial computation of all properties.\n  this.updateProperties(attrValue, true);\n};\n\nComponent.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during component initialization and is only run once.\n   * Components can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Map of event names to bound event handlers that will be lifecycle-handled.\n   * Will be detached on pause / remove.\n   * Will be attached on play.\n   */\n  events: {},\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever component's data changes.\n   * Also called on component initialization when the component receives initial data.\n   *\n   * @param {object} prevData - Previous attributes of the component.\n   */\n  update: function (prevData) { /* no-op */ },\n\n  /**\n   * Update schema handler. Allows the component to dynamically change its schema.\n   * Called whenever a property marked as schemaChange changes.\n   * Also called on initialization when the component receives initial data.\n   *\n   * @param {object} data - The data causing the schema change\n   */\n  updateSchema: undefined,\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   * @param {object} camera - Camera used to render the last frame.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ },\n\n  /**\n   * Remove handler. Similar to detachedCallback.\n   * Called whenever component is removed from the entity (i.e., removeAttribute).\n   * Components can use this to reset behavior on the entity.\n   */\n  remove: function () { /* no-op */ },\n\n  /**\n   * Stringify properties if necessary.\n   *\n   * Only called from `Entity.setAttribute` for properties whose parsers accept a non-string\n   * value (e.g., selector, vec3 property types).\n   *\n   * @param {object} data - Complete component data.\n   * @returns {string}\n   */\n  stringify: function (data) {\n    var schema = this.schema;\n    if (typeof data === 'string') { return data; }\n    if (this.isSingleProperty) { return stringifyProperty(data, schema); }\n    data = stringifyProperties(data, schema);\n    return styleParser.stringify(data);\n  },\n\n  /**\n   * Write cached attribute data to the entity DOM element.\n   *\n   * @param {boolean} isDefault - Whether component is a default component. Always flush for\n   *   default components.\n   */\n  flushToDOM: function (isDefault) {\n    var attrValue = isDefault ? this.data : this.attrValue;\n    if (attrValue === null || attrValue === undefined) { return; }\n    window.HTMLElement.prototype.setAttribute.call(this.el, this.attrName,\n                                                   this.stringify(attrValue));\n  },\n\n  /**\n   * Apply new component data if data has changed (from setAttribute).\n   *\n   * @param {string} attrValue - HTML attribute value.\n   *        If undefined, use the cached attribute value and continue updating properties.\n   * @param {boolean} clobber - The previous component data is overwritten by the attrValue.\n   */\n  updateProperties: function (attrValue, clobber) {\n    var el = this.el;\n\n    // Update data\n    this.updateData(attrValue, clobber);\n\n    // Just cache the attribute if the entity has not loaded\n    // Components are not initialized until the entity has loaded\n    if (!el.hasLoaded && !el.isLoading) {\n      return;\n    }\n\n    if (this.initialized) {\n      this.callUpdateHandler();\n    } else {\n      this.initComponent();\n    }\n  },\n\n  initComponent: function () {\n    var el = this.el;\n    var initialOldData;\n\n    // Component is already being initialized.\n    if (el.initializingComponents[this.name]) { return; }\n\n    // Prevent infinite loop in case of init method setting same component on the entity.\n    el.initializingComponents[this.name] = true;\n    // Initialize component.\n    this.init();\n    this.initialized = true;\n    delete el.initializingComponents[this.name];\n\n    // For oldData, pass empty object to multiple-prop schemas or object single-prop schema.\n    // Pass undefined to rest of types.\n    initialOldData = this.isObjectBased ? emptyInitialOldData : undefined;\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n    this.storeOldData();\n    this.update(initialOldData);\n\n    // Play the component if the entity is playing.\n    if (el.isPlaying) { this.play(); }\n    el.emit('componentinitialized', this.evtDetail, false);\n  },\n\n  /**\n   * @param {string|object} attrValue - Passed argument from setAttribute.\n   * @param {boolean} clobber - Whether or not to overwrite previous data by the attrValue.\n   */\n  updateData: function (attrValue, clobber) {\n    // Single property (including object based single property)\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    // Multi-property\n    if (clobber) {\n      // Clobber. Rebuild.\n      utils.objectPool.clearObject(this.attrValue);\n      this.recomputeData(attrValue);\n      // Quirk: always update schema when clobbering, even if there are no schemaChange properties in schema.\n      this.schemaChangeRequired = !!this.updateSchema;\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    } else {\n      // AttrValue is an object, apply it to the attrValueProxy object\n      utils.extend(this.attrValueProxy, attrValue);\n    }\n\n    // Update schema if needed\n    this.updateSchemaIfNeeded(attrValue);\n  },\n\n  updateSchemaIfNeeded: function (attrValue) {\n    if (this.schemaChangeRequired && this.updateSchema) {\n      encounteredUnknownProperties.length = 0;\n\n      this.updateSchema(this.data);\n      utils.objectPool.removeUnusedKeys(this.data, this.schema);\n      this.recomputeData(attrValue);\n      this.schemaChangeRequired = false;\n\n      // Report any excess properties not valid in the updated schema\n      for (var key in this.attrValue) {\n        if (this.attrValue[key] === undefined) { continue; }\n        if (encounteredUnknownProperties.indexOf(key) !== -1) { continue; }\n        if (!(key in this.schema)) {\n          warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n        }\n      }\n    }\n\n    // Log any pending unknown property warning\n    for (var i = 0; i < encounteredUnknownProperties.length; i++) {\n      warn('Unknown property `' + encounteredUnknownProperties[i] +\n            '` for component `' + this.name + '`.');\n    }\n    encounteredUnknownProperties.length = 0;\n  },\n\n  /**\n   * Check if component should fire update and fire update lifecycle handler.\n   */\n  callUpdateHandler: function () {\n    // Don't update if properties haven't changed.\n    // Always update rotation, position, scale.\n    if (!this.isPositionRotationScale && !this.dataChanged) { return; }\n\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n\n    // Flag oldData in use while inside `update()`\n    var oldData = this.oldData;\n    this.oldDataInUse = true;\n    this.update(oldData);\n    if (oldData !== this.oldData) {\n      // Recursive update replaced oldData, so clean up our copy.\n      this.objectPool.recycle(oldData);\n    }\n    this.oldDataInUse = false;\n\n    // Update oldData to match current data state for next update\n    this.storeOldData();\n\n    this.throttledEmitComponentChanged();\n  },\n\n  handleMixinUpdate: function () {\n    this.recomputeData();\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Reset value of a property to the property's default value.\n   * If single property component, reset value to component's default value.\n   *\n   * @param {string} propertyName - Name of property to reset.\n   */\n  resetProperty: function (propertyName) {\n    if (!this.isSingleProperty && !(propertyName in this.schema)) { return; }\n\n    // Reset attrValue for single- and multi-property components\n    if (propertyName) {\n      this.attrValue[propertyName] = undefined;\n    } else {\n      // Return attrValue for object based single property components\n      if (this.isObjectBased) {\n        this.objectPool.recycle(this.attrValue);\n      }\n      this.attrValue = undefined;\n    }\n    this.recomputeProperty(propertyName, undefined);\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Extend schema of component given a partial schema.\n   *\n   * Some components might want to mutate their schema based on certain properties.\n   * e.g., Material component changes its schema based on `shader` to account for different\n   * uniforms.\n   *\n   * @param {object} schemaAddon - Schema chunk that extend base schema.\n   */\n  extendSchema: function (schemaAddon) {\n    var extendedSchema;\n    // Clone base schema.\n    extendedSchema = utils.extend({}, components[this.name].schema);\n    // Extend base schema with new schema chunk.\n    utils.extend(extendedSchema, schemaAddon);\n    this.schema = processSchema(extendedSchema);\n    this.el.emit('schemachanged', this.evtDetail);\n  },\n\n  getComputedPropertyValue: function (key) {\n    var mixinEls = this.el.mixinEls;\n\n    // Defined as attribute on entity\n    var attrValue = (this.attrValue && key) ? this.attrValue[key] : this.attrValue;\n    if (attrValue !== undefined) {\n      return attrValue;\n    }\n\n    // Inherited from mixin\n    for (var i = mixinEls.length - 1; i >= 0; i--) {\n      var mixinData = mixinEls[i].getAttribute(this.attrName);\n      if ((mixinData === null) || (key && !(key in mixinData))) { continue; }\n      return key ? mixinData[key] : mixinData;\n    }\n\n    // Schema default\n    var schemaDefault = key ? this.schema[key].default : this.schema.default;\n    return schemaDefault;\n  },\n\n  recomputeProperty: function (key, newValue) {\n    var propertySchema = key ? this.schema[key] : this.schema;\n\n    if (newValue !== undefined && newValue !== null) {\n      // Initialize attrValue ad-hoc as it's the return value of getDOMAttribute\n      // and is expected to be undefined until a property has been set.\n      if (this.attrValue === undefined && this.isObjectBased) {\n        this.attrValue = this.objectPool.use();\n      }\n\n      // Parse the new value into attrValue (re-using objects where possible)\n      var newAttrValue = key ? this.attrValue[key] : this.attrValue;\n      // Some property types (like selectors) depend on external state (e.g. DOM) during parsing and can't be cached.\n      newAttrValue = propertySchema.isCacheable ? parseProperty(newValue, propertySchema, newAttrValue) : newValue;\n      // In case the output is a string, store the unparsed value (no double parsing and helps inspector)\n      if (typeof newAttrValue === 'string') {\n        // Quirk: empty strings aren't considered values for single-property schemas\n        newAttrValue = newValue === '' ? undefined : newValue;\n      }\n      // Update attrValue with new, possibly parsed, value.\n      if (key) {\n        this.attrValue[key] = newAttrValue;\n      } else {\n        this.attrValue = newAttrValue;\n      }\n    }\n\n    // Quirk: recursive updates keep this.oldData in use, meaning oldData isn't up-to-date yet.\n    // Before the first change to data is made, provision a new oldData and update it.\n    // Cleanup of orphaned oldData objects is handled in callUpdateHandler.\n    if (this.oldDataInUse) {\n      this.oldData = this.objectPool.use();\n      utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n      this.storeOldData();\n      this.oldDataInUse = false;\n    }\n\n    var oldComputedValue = key ? this.oldData[key] : this.oldData;\n    var targetValue = key ? this.data[key] : this.data;\n\n    var newComputedValue = parseProperty(this.getComputedPropertyValue(key), propertySchema, targetValue);\n    // Quirk: Single-property arrays DO NOT share references, while arrays in multi-property components do.\n    if (propertySchema.type === 'array' && !key) {\n      newComputedValue = utils.clone(newComputedValue);\n    }\n\n    // Check if the resulting (parsed) value differs from before\n    if (!propertySchema.equals(newComputedValue, oldComputedValue)) {\n      this.dataChanged = true;\n\n      // Mark schema change required\n      if (propertySchema.schemaChange) {\n        this.schemaChangeRequired = true;\n      }\n    }\n\n    // Update data with the newly computed value.\n    if (key) {\n      this.data[key] = newComputedValue;\n    } else {\n      this.data = newComputedValue;\n    }\n\n    return newComputedValue;\n  },\n\n  handleUnknownProperty: function (key, newValue) {\n    // Persist the raw value on attrValue\n    if (this.attrValue === undefined) {\n      this.attrValue = this.objectPool.use();\n    }\n    this.attrValue[key] = newValue;\n\n    // Handle warning the user about the unknown property.\n    // Since a component might have a dynamic schema, the warning might be\n    // silenced or deferred to avoid false-positives.\n    if (this.deferUnknownPropertyWarnings) {\n      encounteredUnknownProperties.push(key);\n    } else if (!this.silenceUnknownPropertyWarnings) {\n      warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n    }\n  },\n\n  /**\n   * Updates oldData to the current state of data taking care to\n   * copy and clone objects where necessary.\n   */\n  storeOldData: function () {\n    // Non object based single properties\n    if (!this.isObjectBased) {\n      this.oldData = this.data;\n      return;\n    }\n\n    // Object based single property\n    if (this.isSingleProperty) {\n      this.oldData = parseProperty(this.data, this.schema, this.oldData);\n      return;\n    }\n\n    // Object based\n    var key;\n    for (key in this.schema) {\n      if (this.data[key] === undefined) { continue; }\n      if (this.data[key] && typeof this.data[key] === 'object') {\n        this.oldData[key] = parseProperty(this.data[key], this.schema[key], this.oldData[key]);\n      } else {\n        this.oldData[key] = this.data[key];\n      }\n    }\n  },\n\n  /**\n   * Triggers a recompute of the data object.\n   *\n   * @param {string|object} attrValue - Optional additional data updates\n   */\n  recomputeData: function (attrValue) {\n    var key;\n\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    for (key in this.schema) {\n      this.attrValueProxy[key] = undefined;\n    }\n\n    if (attrValue && typeof attrValue === 'object') {\n      utils.extend(this.attrValueProxy, attrValue);\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    }\n  },\n\n  /**\n   * Attach events from component-defined events map.\n   */\n  eventsAttach: function () {\n    var eventName;\n    // Safety detach to prevent double-registration.\n    this.eventsDetach();\n    for (eventName in this.events) {\n      this.el.addEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Detach events from component-defined events map.\n   */\n  eventsDetach: function () {\n    var eventName;\n    for (eventName in this.events) {\n      this.el.removeEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Release and free memory.\n   */\n  destroy: function () {\n    this.objectPool.recycle(this.attrValue);\n    this.objectPool.recycle(this.data);\n    this.objectPool.recycle(this.oldData);\n    this.attrValue = this.data = this.oldData = this.attrValueProxy = undefined;\n  }\n};\n\nfunction eventsBind (component, events) {\n  var eventName;\n  for (eventName in events) {\n    component.events[eventName] = events[eventName].bind(component);\n  }\n}\n\n// For testing.\nexport var registrationOrderWarnings = {};\n\n/**\n * Register a component to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component schema and lifecycle method handlers.\n * @returns {object} Component.\n */\nexport function registerComponent (name, definition) {\n  var NewComponent;\n  var proto = {};\n  var schema;\n  var schemaIsSingleProp;\n\n  // Warning if component is statically registered after the scene.\n  if (document.currentScript && document.currentScript !== aframeScript) {\n    scenes.forEach(function checkPosition (sceneEl) {\n      // Okay to register component after the scene at runtime.\n      if (sceneEl.hasLoaded) { return; }\n\n      // Check that component is declared before the scene.\n      if (document.currentScript.compareDocumentPosition(sceneEl) ===\n          Node.DOCUMENT_POSITION_FOLLOWING) { return; }\n\n      warn('The component `' + name + '` was registered in a <script> tag after the scene. ' +\n           'Component <script> tags in an HTML file should be declared *before* the scene ' +\n           'such that the component is available to entities during scene initialization.');\n\n      // For testing.\n      if (window.debug) { registrationOrderWarnings[name] = true; }\n    });\n  }\n\n  if (upperCaseRegExp.test(name) === true) {\n    warn('The component name `' + name + '` contains uppercase characters, but ' +\n         'HTML will ignore the capitalization of attribute names. ' +\n         'Change the name to be lowercase: `' + name.toLowerCase() + '`');\n  }\n\n  if (name.indexOf('__') !== -1) {\n    throw new Error('The component name `' + name + '` is not allowed. ' +\n                    'The sequence __ (double underscore) is reserved to specify an id' +\n                    ' for multiple components of the same type');\n  }\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (components[name]) {\n    throw new Error('The component `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same component ' +\n                    'or two different components of the same name.');\n  }\n\n  NewComponent = function (el, attr, id) {\n    Component.call(this, el, attr, id);\n  };\n\n  NewComponent.prototype = Object.create(Component.prototype, proto);\n  NewComponent.prototype.name = name;\n  NewComponent.prototype.isPositionRotationScale =\n    name === 'position' || name === 'rotation' || name === 'scale';\n  NewComponent.prototype.constructor = NewComponent;\n  NewComponent.prototype.system = systems && systems.systems[name];\n  NewComponent.prototype.play = wrapPlay(NewComponent.prototype.play);\n  NewComponent.prototype.pause = wrapPause(NewComponent.prototype.pause);\n\n  schema = utils.extend(processSchema(NewComponent.prototype.schema,\n                                      NewComponent.prototype.name));\n  NewComponent.prototype.isSingleProperty = schemaIsSingleProp = isSingleProp(NewComponent.prototype.schema);\n  NewComponent.prototype.isObjectBased = !schemaIsSingleProp ||\n              (schemaIsSingleProp && (isObject(schema.default) || isObject(parseProperty(undefined, schema))));\n\n  // Create object pool for class of components.\n  objectPools[name] = utils.objectPool.createPool();\n\n  components[name] = {\n    Component: NewComponent,\n    dependencies: NewComponent.prototype.dependencies,\n    before: NewComponent.prototype.before,\n    after: NewComponent.prototype.after,\n    isSingleProperty: NewComponent.prototype.isSingleProperty,\n    isObjectBased: NewComponent.prototype.isObjectBased,\n    multiple: NewComponent.prototype.multiple,\n    sceneOnly: NewComponent.prototype.sceneOnly,\n    name: name,\n    schema: schema,\n    stringify: NewComponent.prototype.stringify\n  };\n\n  // Notify all scenes\n  for (var i = 0; i < scenes.length; i++) {\n    scenes[i].emit('componentregistered', {name: name}, false);\n  }\n\n  return NewComponent;\n}\n\n/**\n * Checks if a component has defined a method that needs to run every frame.\n */\nfunction hasBehavior (component) {\n  return component.tick || component.tock;\n}\n\n/**\n * Wrapper for defined pause method.\n * Pause component by removing tick behavior and calling user's pause method.\n *\n * @param {function} pauseMethod\n * @returns {function}\n */\nfunction wrapPause (pauseMethod) {\n  return function pause () {\n    var sceneEl = this.el.sceneEl;\n    if (!this.isPlaying) { return; }\n    pauseMethod.call(this);\n    this.isPlaying = false;\n    this.eventsDetach();\n    // Remove tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.removeBehavior(this);\n  };\n}\n\n/**\n * Wrapper for defined play method.\n * Play component by adding tick behavior and calling user's play method.\n *\n * @param {function} playMethod\n * @returns {function}\n */\nfunction wrapPlay (playMethod) {\n  return function play () {\n    var sceneEl = this.el.sceneEl;\n    var shouldPlay = this.el.isPlaying && !this.isPlaying;\n    if (!this.initialized || !shouldPlay) { return; }\n    playMethod.call(this);\n    this.isPlaying = true;\n    this.eventsAttach();\n    // Add tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.addBehavior(this);\n  };\n}\n\nfunction isObject (value) {\n  return value && value.constructor === Object && !(value instanceof window.HTMLElement);\n}\n", "/* global CustomEvent */\n\n/**\n * Flag indicating if A-Frame can initialize the scene or should wait.\n */\nexport var canInitializeElements = false;\n\n/**\n * Waits for the document to be ready.\n */\nexport function waitForDocumentReadyState () {\n  if (document.readyState === 'complete') {\n    emitReady();\n    return;\n  }\n\n  document.addEventListener('readystatechange', function onReadyStateChange () {\n    if (document.readyState !== 'complete') { return; }\n    document.removeEventListener('readystatechange', onReadyStateChange);\n    emitReady();\n  });\n}\n\n/**\n * Signals A-Frame that everything is ready to initialize.\n */\nexport function emitReady () {\n  if (canInitializeElements) { return; }\n  canInitializeElements = true;\n  setTimeout(function () {\n    document.dispatchEvent(new CustomEvent('aframeready'));\n  });\n}\n\n/** Resets the canInitializeElements flag, used for testing */\nexport function reset () {\n  canInitializeElements = false;\n}\n", "import { parseProperties, parseProperty, process as processSchema, isSingleProperty as isSingleProp } from './schema.js';\nimport * as components from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as ready from './readyState.js';\n\nvar styleParser = utils.styleParser;\n\nexport var systems = {};  // Keep track of registered systems.\n\n/**\n * System class definition.\n *\n * Systems provide global scope and services to a group of instantiated components of the\n * same class. They can also help abstract logic away from components such that components\n * only have to worry about data.\n *\n * For example, a physics component that creates a physics world that oversees\n * all entities with a physics or rigid body component.\n *\n * TODO: Have the System prototype reuse the Component prototype. Most code is copied\n * and some pieces are missing from the Component facilities (e.g., attribute caching,\n * setAttribute behavior).\n *\n * @constructor\n * @param {Element} sceneEl - Handle to the scene element where system applies to.\n * @property {string} name - Name that system is registered under.\n */\nexport var System = function (sceneEl) {\n  var component = components && components.components[this.name];\n\n  // Set reference to scene.\n  this.el = sceneEl;\n  this.sceneEl = sceneEl;\n\n  // Set reference to matching component (if exists).\n  if (component) { component.Component.prototype.system = this; }\n\n  // Process system configuration.\n  this.buildData();\n  this.init();\n  this.update({});\n};\n\nSystem.prototype = {\n  /**\n   * Schema to configure system.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Called during scene initialization and is only run once.\n   * Systems can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Update handler. Called during scene attribute updates.\n   * Systems can use this to dynamically update their state.\n   */\n  update: function (oldData) { /* no-op */ },\n\n  /**\n   * Build data and call update handler.\n   *\n   * @private\n   */\n  updateProperties: function (rawData) {\n    var oldData = this.data;\n    if (Object.keys(this.schema).length === 0) { return; }\n    this.buildData(rawData);\n    this.update(oldData);\n  },\n\n  /**\n   * Parse data.\n   */\n  buildData: function (rawData) {\n    var schema = this.schema;\n    if (Object.keys(schema).length === 0) { return; }\n    rawData = rawData || window.HTMLElement.prototype.getAttribute.call(this.sceneEl, this.name);\n    if (isSingleProp(schema)) {\n      this.data = parseProperty(rawData, schema);\n    } else {\n      this.data = parseProperties(styleParser.parse(rawData) || {}, schema, false, this.name);\n    }\n  },\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ }\n};\n\n/**\n * Registers a system to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component property and methods.\n */\nexport function registerSystem (name, definition) {\n  var i;\n  var NewSystem;\n  var proto = {};\n  var scenes = utils.findAllScenes(document);\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (systems[name]) {\n    throw new Error('The system `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same system ' +\n                    'or two different systems of the same name.');\n  }\n  NewSystem = function (sceneEl) { System.call(this, sceneEl); };\n  NewSystem.prototype = Object.create(System.prototype, proto);\n  NewSystem.prototype.name = name;\n  NewSystem.prototype.constructor = NewSystem;\n  NewSystem.prototype.schema = utils.extend(processSchema(NewSystem.prototype.schema));\n  systems[name] = NewSystem;\n\n  // Initialize systems for existing scenes\n  if (ready.canInitializeElements) {\n    for (i = 0; i < scenes.length; i++) { scenes[i].initSystem(name); }\n  }\n}\n", "/* global customElements, CustomEvent, HTMLElement, MutationObserver */\nimport * as utils from '../utils/index.js';\nimport * as readyState from './readyState.js';\n\nvar warn = utils.debug('core:a-node:warn');\n\nexport var knownTags = {\n  'a-scene': true,\n  'a-assets': true,\n  'a-assets-items': true,\n  'a-cubemap': true,\n  'a-mixin': true,\n  'a-node': true,\n  'a-entity': true\n};\n\nfunction isANode (node) {\n  return node.tagName.toLowerCase() in knownTags || node.isANode;\n}\n\n/**\n * Base class for A-Frame that manages loading of objects.\n *\n * Nodes can be modified using mixins.\n * Nodes emit a `loaded` event when they and their children have initialized.\n */\nexport class ANode extends HTMLElement {\n  constructor () {\n    super();\n    this.computedMixinStr = '';\n    this.hasLoaded = false;\n    this.isANode = true;\n    this.mixinEls = [];\n  }\n\n  connectedCallback () {\n    // Defer if not ready to initialize.\n    if (!readyState.canInitializeElements) {\n      document.addEventListener('aframeready', this.connectedCallback.bind(this));\n      return;\n    }\n    this.doConnectedCallback();\n  }\n\n  doConnectedCallback () {\n    var mixins;\n\n    this.sceneEl = this.closestScene();\n\n    if (!this.sceneEl) {\n      warn('You are attempting to attach <' + this.tagName + '> outside of an A-Frame ' +\n           'scene. Append this element to `<a-scene>` instead.');\n    }\n\n    this.hasLoaded = false;\n    this.emit('nodeready', undefined, false);\n\n    if (!this.isMixin) {\n      mixins = this.getAttribute('mixin');\n      if (mixins) { this.updateMixins(mixins); }\n    }\n  }\n\n  /**\n   * Handle mixin.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n    if (newVal === this.computedMixinStr) { return; }\n\n    if (attr === 'mixin' && !this.isMixin) {\n      this.updateMixins(newVal, oldVal);\n    }\n  }\n\n /**\n  * Returns the first scene by traversing up the tree starting from and\n  * including receiver element.\n  */\n  closestScene () {\n    var element = this;\n    while (element) {\n      if (element.isScene) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  /**\n   * Returns first element matching a selector by traversing up the tree starting\n   * from and including receiver element.\n   *\n   * @param {string} selector - Selector of element to find.\n   */\n  closest (selector) {\n    var matches = this.matches || this.mozMatchesSelector ||\n      this.msMatchesSelector || this.oMatchesSelector || this.webkitMatchesSelector;\n    var element = this;\n    while (element) {\n      if (matches.call(element, selector)) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  disconnectedCallback () {\n    this.hasLoaded = false;\n  }\n\n  /**\n   * Wait for children to load, if any.\n   * Then emit `loaded` event and set `hasLoaded`.\n   */\n  load (cb, childFilter) {\n    var children;\n    var childrenLoaded;\n    var self = this;\n\n    if (this.hasLoaded) { return; }\n\n    // Default to waiting for all nodes.\n    childFilter = childFilter || isANode;\n    // Wait for children to load (if any), then load.\n    children = this.getChildren();\n    childrenLoaded = children.filter(childFilter).map(function (child) {\n      return new Promise(function waitForLoaded (resolve, reject) {\n        if (child.hasLoaded) { return resolve(); }\n        child.addEventListener('loaded', resolve);\n        child.addEventListener('error', reject);\n      });\n    });\n\n    Promise.allSettled(childrenLoaded).then(function emitLoaded (results) {\n      results.forEach(function checkResultForError (result) {\n        if (result.status === 'rejected') {\n          // An \"error\" event has already been fired by THREE.js loader,\n          // so we don't need to fire another one.\n          // A warning explaining the consequences of the error is sufficient.\n          warn('Rendering scene with errors on node: ', result.reason.target);\n        }\n      });\n\n      self.isLoading = true;\n      self.setupMutationObserver();\n      if (cb) { cb(); }\n      self.isLoading = false;\n      self.hasLoaded = true;\n      // loaded-private is an event analog to loaded that gives A-Frame an opportunity to manage internal\n      // affairs before the publicly loaded event fires and corresponding handlers executed.\n      self.emit('loaded-private', undefined, false);\n      self.emit('loaded', undefined, false);\n    });\n  }\n\n  /**\n   * With custom elements V1 attributeChangedCallback only fires\n   * for attributes defined statically via observedAttributes.\n   * One can assign any arbitrary components to an A-Frame entity\n   * hence we can't know the list of attributes beforehand.\n   * This function setup a mutation observer to keep track of the entity attribute changes\n   * in the DOM and update components accordingly.\n   */\n  setupMutationObserver () {\n    var self = this;\n    var observerConfig = {attributes: true, attributeOldValue: true};\n    var observer = new MutationObserver(function callAttributeChangedCallback (mutationList) {\n      var i;\n      for (i = 0; i < mutationList.length; i++) {\n        if (mutationList[i].type === 'attributes') {\n          var attributeName = mutationList[i].attributeName;\n          var newValue = window.HTMLElement.prototype.getAttribute.call(self, attributeName);\n          var oldValue = mutationList[i].oldValue;\n          self.attributeChangedCallback(attributeName, oldValue, newValue);\n        }\n      }\n    });\n    observer.observe(this, observerConfig);\n  }\n\n  getChildren () {\n    return Array.prototype.slice.call(this.children, 0);\n  }\n\n  /**\n   * Unregister old mixins and listeners.\n   * Register new mixins and listeners.\n   * Registering means to update `this.mixinEls` with listeners.\n   */\n  updateMixins (newMixins, oldMixins) {\n    var newMixinIdArray = ANode.newMixinIdArray;\n    var oldMixinIdArray = ANode.oldMixinIdArray;\n    var mixinIds = ANode.mixinIds;\n\n    var i;\n    var newMixinIds;\n    var oldMixinIds;\n\n    newMixinIdArray.length = 0;\n    oldMixinIdArray.length = 0;\n    newMixinIds = newMixins ? utils.split(newMixins.trim(), /\\s+/) : newMixinIdArray;\n    oldMixinIds = oldMixins ? utils.split(oldMixins.trim(), /\\s+/) : oldMixinIdArray;\n\n    mixinIds.newMixinIds = newMixinIds;\n    mixinIds.oldMixinIds = oldMixinIds;\n\n    // Unregister old mixins.\n    for (i = 0; i < oldMixinIds.length; i++) {\n      if (newMixinIds.indexOf(oldMixinIds[i]) === -1) {\n        this.unregisterMixin(oldMixinIds[i]);\n      }\n    }\n\n    // Register new mixins.\n    this.computedMixinStr = '';\n    this.mixinEls.length = 0;\n    for (i = 0; i < newMixinIds.length; i++) {\n      this.registerMixin(newMixinIds[i]);\n    }\n\n    // Update DOM. Keep track of `computedMixinStr` to not recurse back here after\n    // update.\n    if (this.computedMixinStr) {\n      this.computedMixinStr = this.computedMixinStr.trim();\n      window.HTMLElement.prototype.setAttribute.call(this, 'mixin',\n                                                     this.computedMixinStr);\n    }\n\n    if (newMixinIds.length === 0) {\n      window.HTMLElement.prototype.removeAttribute.call(this, 'mixin');\n    }\n\n    return mixinIds;\n  }\n\n  /**\n   * From mixin ID, add mixin element to `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to register.\n   */\n  registerMixin (mixinId) {\n    var compositedMixinIds;\n    var i;\n    var mixin;\n    var mixinEl = document.getElementById(mixinId);\n\n    if (!mixinEl) {\n      warn('No mixin was found with id `%s`', mixinId);\n      return;\n    }\n\n    // Register composited mixins (if mixin has mixins).\n    mixin = mixinEl.getAttribute('mixin');\n    if (mixin) {\n      compositedMixinIds = utils.split(mixin.trim(), /\\s+/);\n      for (i = 0; i < compositedMixinIds.length; i++) {\n        this.registerMixin(compositedMixinIds[i]);\n      }\n    }\n\n    // Register mixin.\n    this.computedMixinStr = this.computedMixinStr + ' ' + mixinEl.id;\n    this.mixinEls.push(mixinEl);\n  }\n\n  setAttribute (attr, newValue) {\n    if (attr === 'mixin') { this.updateMixins(newValue); }\n    window.HTMLElement.prototype.setAttribute.call(this, attr, newValue);\n  }\n\n  /**\n   * Removes the mixin element from `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to remove.\n   */\n  unregisterMixin (mixinId) {\n    var i;\n    var mixinEls = this.mixinEls;\n    var mixinEl;\n    for (i = 0; i < mixinEls.length; ++i) {\n      mixinEl = mixinEls[i];\n      if (mixinId === mixinEl.id) {\n        mixinEls.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Emit a DOM event.\n   *\n   * @param {string} name - Name of event.\n   * @param {object} [detail={}] - Custom data to pass as `detail` to the event.\n   * @param {boolean} [bubbles=true] - Whether the event should bubble.\n   * @param {object} [extraData] - Extra data to pass to the event, if any.\n   */\n  emit (name, detail, bubbles, extraData) {\n    var data = ANode.evtData;\n\n    if (bubbles === undefined) { bubbles = true; }\n    data.bubbles = !!bubbles;\n    data.detail = detail;\n\n    // If extra data is present, we need to create a new object.\n    if (extraData) { data = utils.extend({}, extraData, data); }\n\n    this.dispatchEvent(new CustomEvent(name, data));\n  }\n}\n\nANode.evtData = {};\nANode.newMixinIdArray = [];\nANode.oldMixinIdArray = [];\nANode.mixinIds = {};\n\ncustomElements.define('a-node', ANode);\n", "/* global customElements */\nimport * as THREE from 'three';\nimport { ANode } from './a-node.js';\nimport { components as COMPONENTS } from './component.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug('core:a-entity:debug');\nvar warn = utils.debug('core:a-entity:warn');\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\nvar OBJECT3D_COMPONENTS = ['position', 'rotation', 'scale', 'visible'];\nvar ONCE = {once: true};\n\n/**\n * Entity is a container object that components are plugged into to comprise everything in\n * the scene. In A-Frame, they inherently have position, rotation, and scale.\n *\n * To be able to take components, the scene element inherits from the entity definition.\n *\n * @property {object} components - entity's currently initialized components.\n * @property {THREE.Object3D} object3D - three.js object.\n * @property {string[]} states\n * @property {boolean} isPlaying - false if dynamic behavior of the entity is paused.\n */\nexport class AEntity extends ANode {\n  constructor () {\n    super();\n    this.components = {};\n    // To avoid double initializations and infinite loops.\n    this.initializingComponents = {};\n    this.componentsToUpdate = {};\n    this.isEntity = true;\n    this.isPlaying = false;\n    this.object3D = new THREE.Group();\n    this.object3D.rotation.order = 'YXZ';\n    this.object3D.el = this;\n    this.object3DMap = {};\n    this.parentEl = null;\n    this.rotationObj = {};\n    this.states = [];\n  }\n\n  /**\n   * Handle changes coming from the browser DOM inspector.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    var component = this.components[attr];\n\n    super.attributeChangedCallback();\n    // If the empty string is passed by the component initialization\n    // logic we ignore the component update.\n    if (component && component.justInitialized && newVal === '') {\n      delete component.justInitialized;\n      return;\n    }\n    // When a component is removed after calling el.removeAttribute('material')\n    if (!component && newVal === null) { return; }\n    this.setEntityAttribute(attr, oldVal, newVal);\n  }\n\n  doConnectedCallback () {\n    var self = this;  // Component.\n    var assetsEl;  // Asset management system element.\n    var sceneEl;\n\n    // ANode method.\n    super.doConnectedCallback();\n\n    sceneEl = this.sceneEl;\n\n    this.addToParent();\n\n    // Don't .load() scene on attachedCallback.\n    if (this.isScene) { return; }\n\n    // Gracefully not error when outside of <a-scene> (e.g., tests).\n    if (!sceneEl) {\n      this.load();\n      return;\n    }\n\n    // Wait for asset management system to finish before loading.\n    assetsEl = sceneEl.querySelector('a-assets');\n    if (assetsEl && !assetsEl.hasLoaded) {\n      assetsEl.addEventListener('loaded', function () { self.load(); });\n      return;\n    }\n    this.load();\n  }\n\n  /**\n   * Tell parent to remove this element's object3D from its object3D.\n   * Do not call on scene element because that will cause a call to document.body.remove().\n   */\n  disconnectedCallback () {\n    var componentName;\n\n    if (!this.parentEl) { return; }\n\n    // Remove components.\n    for (componentName in this.components) {\n      this.removeComponent(componentName, false);\n    }\n\n    if (this.isScene) { return; }\n\n    this.removeFromParent();\n    super.disconnectedCallback();\n\n    // Remove cyclic reference.\n    this.object3D.el = null;\n  }\n\n  getObject3D (type) {\n    return this.object3DMap[type];\n  }\n\n  /**\n   * Set a THREE.Object3D into the map.\n   *\n   * @param {string} type - Developer-set name of the type of object, will be unique per type.\n   * @param {THREE.Object3D} obj - A THREE.Object3D.\n   */\n  setObject3D (type, obj) {\n    var oldObj;\n    var self = this;\n\n    if (!(obj instanceof THREE.Object3D)) {\n      throw new Error(\n        '`Entity.setObject3D` was called with an object that was not an instance of ' +\n        'THREE.Object3D.'\n      );\n    }\n\n    // Remove existing object of the type.\n    oldObj = this.getObject3D(type);\n    if (oldObj) { this.object3D.remove(oldObj); }\n\n    // Set references to A-Frame entity.\n    obj.el = this;\n    if (obj.children.length) {\n      obj.traverse(function bindEl (child) {\n        child.el = self;\n      });\n    }\n\n    // Add.\n    this.object3D.add(obj);\n    this.object3DMap[type] = obj;\n    this.emit('object3dset', {object: obj, type: type});\n  }\n\n  /**\n   * Remove object from scene and entity object3D map.\n   */\n  removeObject3D (type) {\n    var obj = this.getObject3D(type);\n    if (!obj) {\n      warn('Tried to remove `Object3D` of type:', type, 'which was not defined.');\n      return;\n    }\n    this.object3D.remove(obj);\n    delete this.object3DMap[type];\n    this.emit('object3dremove', {type: type});\n  }\n\n  /**\n   * Gets or creates an object3D of a given type.\n   *\n   * @param {string} type - Type of the object3D.\n   * @param {string} Constructor - Constructor to use to create the object3D if needed.\n   * @returns {object}\n   */\n  getOrCreateObject3D (type, Constructor) {\n    var object3D = this.getObject3D(type);\n    if (!object3D && Constructor) {\n      object3D = new Constructor();\n      this.setObject3D(type, object3D);\n    }\n    warn('`getOrCreateObject3D` has been deprecated. Use `setObject3D()` ' +\n         'and `object3dset` event instead.');\n    return object3D;\n  }\n\n  /**\n   * Add child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  add (el) {\n    if (!el.object3D) {\n      throw new Error(\"Trying to add an element that doesn't have an `object3D`\");\n    }\n    this.object3D.add(el.object3D);\n    this.emit('child-attached', {el: el});\n  }\n\n  /**\n   * Tell parentNode to add this entity to itself.\n   */\n  addToParent () {\n    var parentNode = this.parentEl = this.parentNode;\n\n    // `!parentNode` check primarily for unit tests.\n    if (!parentNode || !parentNode.add || this.attachedToParent) { return; }\n\n    parentNode.add(this);\n    this.attachedToParent = true;  // To prevent multiple attachments to same parent.\n  }\n\n  /**\n   * Tell parentNode to remove this entity from itself.\n   */\n  removeFromParent () {\n    var parentEl = this.parentEl;\n    this.parentEl.remove(this);\n    this.attachedToParent = false;\n    this.parentEl = null;\n    parentEl.emit('child-detached', {el: this});\n  }\n\n  load () {\n    var self = this;\n\n    if (this.hasLoaded || !this.parentEl) { return; }\n\n    super.load.call(this, function entityLoadCallback () {\n      // Check if entity was detached while it was waiting to load.\n      if (!self.parentEl) { return; }\n\n      self.updateComponents();\n      if (self.isScene || self.parentEl.isPlaying) { self.play(); }\n    });\n  }\n\n  /**\n   * Remove child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  remove (el) {\n    if (el) {\n      this.object3D.remove(el.object3D);\n    } else {\n      this.parentNode.removeChild(this);\n    }\n  }\n\n  /**\n   * @returns {Array<Element>} Direct children that are entities.\n   */\n  getChildEntities () {\n    var children = this.children;\n    var childEntities = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      if (child instanceof AEntity) {\n        childEntities.push(child);\n      }\n    }\n\n    return childEntities;\n  }\n\n  /**\n   * Initialize component.\n   *\n   * @param {string} attrName - Attribute name associated to the component.\n   * @param {object} data - Component data\n   * @param {boolean} isDependency - True if the component is a dependency.\n   */\n  initComponent (attrName, data, isDependency) {\n    var component;\n    var componentId;\n    var componentInfo;\n    var componentName;\n    var isComponentDefined;\n\n    componentInfo = utils.split(attrName, MULTIPLE_COMPONENT_DELIMITER);\n    componentName = componentInfo[0];\n    componentId = componentInfo.length > 2\n      ? componentInfo.slice(1).join('__')\n      : componentInfo[1];\n\n    // Not a registered component.\n    if (!COMPONENTS[componentName]) { return; }\n\n    // Component is not a dependency and is undefined.\n    // If a component is a dependency, then it is okay to have no data.\n    isComponentDefined = checkComponentDefined(this, attrName) ||\n                         data !== undefined;\n    if (!isComponentDefined && !isDependency) { return; }\n\n    // Component already initialized.\n    if (attrName in this.components) { return; }\n\n    // Initialize dependencies first\n    this.initComponentDependencies(componentName);\n\n    // Initialize component\n    component = new COMPONENTS[componentName].Component(this, data, componentId);\n    if (this.isPlaying) { component.play(); }\n\n    // Components are reflected in the DOM as attributes but the state is not shown\n    // hence we set the attribute to empty string.\n    // The flag justInitialized is for attributeChangedCallback to not overwrite\n    // the component with the empty string.\n    if (!this.hasAttribute(attrName)) {\n      component.justInitialized = true;\n      window.HTMLElement.prototype.setAttribute.call(this, attrName, '');\n    }\n\n    debug('Component initialized: %s', attrName);\n  }\n\n  /**\n   * Initialize dependencies of a component.\n   *\n   * @param {string} name - Root component name.\n   */\n  initComponentDependencies (name) {\n    var self = this;\n    var component = COMPONENTS[name];\n    var dependencies;\n    var i;\n\n    // Not a component.\n    if (!component) { return; }\n\n    // No dependencies.\n    dependencies = COMPONENTS[name].dependencies;\n\n    if (!dependencies) { return; }\n\n    // Initialize dependencies.\n    for (i = 0; i < dependencies.length; i++) {\n      // Call getAttribute to initialize the data from the DOM.\n      self.initComponent(\n        dependencies[i],\n        window.HTMLElement.prototype.getAttribute.call(self, dependencies[i]) || undefined,\n        true\n      );\n    }\n  }\n\n  removeComponent (name, destroy) {\n    var component;\n\n    component = this.components[name];\n    if (!component) { return; }\n\n    // Wait for component to initialize.\n    if (!component.initialized) {\n      this.addEventListener('componentinitialized', function tryRemoveLater (evt) {\n        if (evt.detail.name !== name) { return; }\n        this.removeComponent(name, destroy);\n        this.removeEventListener('componentinitialized', tryRemoveLater);\n      });\n      return;\n    }\n\n    component.pause();\n    component.remove();\n\n    // Keep component attached to entity in case of just full entity detach.\n    if (destroy) {\n      component.destroy();\n      delete this.components[name];\n      // Remove attribute from DOM, if still present\n      if (this.hasAttribute(name)) {\n        window.HTMLElement.prototype.removeAttribute.call(this, name);\n      }\n    }\n\n    this.emit('componentremoved', component.evtDetail, false);\n  }\n\n  /**\n   * Initialize or update all components.\n   * Build data using initial components, defined attributes, mixins, and defaults.\n   * Update default components before the rest.\n   *\n   * @property {function} getExtraComponents - Can be implemented to include component data\n   *   from other sources (e.g., implemented by primitives).\n   */\n  updateComponents () {\n    var data;\n    var extraComponents;\n    var i;\n    var name;\n    var componentsToUpdate = this.componentsToUpdate;\n\n    if (!this.hasLoaded && !this.isLoading) { return; }\n\n    // Gather mixin-defined components.\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (name in this.mixinEls[i].componentCache) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather from extra initial component data if defined (e.g., primitives).\n    if (this.getExtraComponents) {\n      extraComponents = this.getExtraComponents();\n      for (name in extraComponents) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather entity-defined components.\n    for (i = 0; i < this.attributes.length; ++i) {\n      name = this.attributes[i].name;\n      if (OBJECT3D_COMPONENTS.indexOf(name) !== -1) { continue; }\n      if (isComponent(name)) { componentsToUpdate[name] = true; }\n    }\n\n    // object3D components first (position, rotation, scale, visible).\n    for (i = 0; i < OBJECT3D_COMPONENTS.length; i++) {\n      name = OBJECT3D_COMPONENTS[i];\n      if (!this.hasAttribute(name)) { continue; }\n      this.updateComponent(name, this.getDOMAttribute(name));\n    }\n\n    // Initialize or update rest of components.\n    for (name in componentsToUpdate) {\n      data = mergeComponentData(this.getDOMAttribute(name),\n                                extraComponents && extraComponents[name]);\n      this.updateComponent(name, data);\n      delete componentsToUpdate[name];\n    }\n  }\n\n  /**\n   * Initialize, update, or remove a single component.\n   *\n   * When initializing, we set the component on `this.components`.\n   *\n   * @param {string} attr - Component name.\n   * @param {object} attrValue - Value of the DOM attribute.\n   * @param {boolean} clobber - If new attrValue completely replaces previous properties.\n   */\n  updateComponent (attr, attrValue, clobber) {\n    var component = this.components[attr];\n\n    if (component) {\n      // Remove component.\n      if (attrValue === null && !checkComponentDefined(this, attr)) {\n        this.removeComponent(attr, true);\n        return;\n      }\n      // Component already initialized. Update component.\n      component.updateProperties(attrValue, clobber);\n      return;\n    }\n\n    // Component not yet initialized. Initialize component.\n    this.initComponent(attr, attrValue, false);\n  }\n\n  /**\n   * If `attr` is a component name, detach the component from the entity.\n   *\n   * If `propertyName` is given, reset the component property value to its default.\n   *\n   * @param {string} attr - Attribute name, which could also be a component name.\n   * @param {string} propertyName - Component prop name, if resetting an individual prop.\n   */\n  removeAttribute (attr, propertyName) {\n    var component = this.components[attr];\n\n    // Remove component.\n    if (component && propertyName === undefined) {\n      this.removeComponent(attr, true);\n    }\n\n    // Reset component property value.\n    if (component && propertyName !== undefined) {\n      component.resetProperty(propertyName);\n      return;\n    }\n\n    // Remove mixins.\n    if (attr === 'mixin') {\n      this.mixinUpdate('');\n    }\n\n    window.HTMLElement.prototype.removeAttribute.call(this, attr);\n  }\n\n  /**\n   * Start dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also play.\n   */\n  play () {\n    var entities;\n    var i;\n    var key;\n\n    // Already playing.\n    if (this.isPlaying || (!this.hasLoaded && !this.isLoading)) { return; }\n    this.isPlaying = true;\n\n    // Wake up all components.\n    for (key in this.components) { this.components[key].play(); }\n\n    // Tell all child entities to play.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].play(); }\n\n    this.emit('play');\n  }\n\n  /**\n   * Pause dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also pause.\n   */\n  pause () {\n    var entities;\n    var i;\n    var key;\n\n    if (!this.isPlaying) { return; }\n    this.isPlaying = false;\n\n    // Sleep all components.\n    for (key in this.components) { this.components[key].pause(); }\n\n    // Tell all child entities to pause.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].pause(); }\n\n    this.emit('pause');\n  }\n\n  /**\n   * Deals with updates on entity-specific attributes (i.e., components and mixins).\n   *\n   * @param {string} attr\n   * @param {string} oldVal\n   * @param {string|object} newVal\n   */\n  setEntityAttribute (attr, oldVal, newVal) {\n    if (COMPONENTS[attr] || this.components[attr]) {\n      this.updateComponent(attr, newVal);\n      return;\n    }\n    if (attr === 'mixin') {\n      // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n      if (newVal === this.computedMixinStr) { return; }\n      this.mixinUpdate(newVal, oldVal);\n    }\n  }\n\n  /**\n   * When mixins updated, trigger init or optimized-update of relevant components.\n   */\n  mixinUpdate (newMixins, oldMixins, deferred) {\n    var componentsUpdated = AEntity.componentsUpdated;\n\n    var component;\n    var mixinEl;\n    var mixinIds;\n    var i;\n    var self = this;\n\n    if (!deferred) { oldMixins = oldMixins || this.getAttribute('mixin'); }\n\n    if (!this.hasLoaded) {\n      this.addEventListener('loaded-private', function () {\n        self.mixinUpdate(newMixins, oldMixins, true);\n      }, ONCE);\n      return;\n    }\n\n    mixinIds = this.updateMixins(newMixins, oldMixins);\n\n    // Loop over current mixins.\n    componentsUpdated.length = 0;\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (component in this.mixinEls[i].componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            // Update. Just rebuild data.\n            this.components[component].handleMixinUpdate();\n          } else {\n            // Init. buildData will gather mixin values.\n            this.initComponent(component, null);\n          }\n          componentsUpdated.push(component);\n        }\n      }\n    }\n\n    // Loop over old mixins to call for data rebuild.\n    for (i = 0; i < mixinIds.oldMixinIds.length; i++) {\n      mixinEl = document.getElementById(mixinIds.oldMixinIds[i]);\n      if (!mixinEl) { continue; }\n      for (component in mixinEl.componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            if (this.getDOMAttribute(component)) {\n              // Update component if explicitly defined.\n              this.components[component].handleMixinUpdate();\n            } else {\n              // Remove component if not explicitly defined.\n              this.removeComponent(component, true);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * setAttribute can:\n   *\n   * 1. Set a single property of a multi-property component.\n   * 2. Set multiple properties of a multi-property component.\n   * 3. Replace properties of a multi-property component.\n   * 4. Set a value for a single-property component, mixin, or normal HTML attribute.\n   *\n   * @param {string} attrName - Component or attribute name.\n   * @param {any} arg1 - Can be a value, property name, CSS-style property string, or\n   *   object of properties.\n   * @param {any} arg2 - If arg1 is a property name, this should be a value. Otherwise,\n   *   it is a boolean indicating whether to clobber previous values (defaults to false).\n   */\n  setAttribute (attrName, arg1, arg2) {\n    var singlePropUpdate = AEntity.singlePropUpdate;\n\n    var newAttrValue;\n    var clobber;\n    var componentName;\n    var delimiterIndex;\n    var isDebugMode;\n    var key;\n\n    delimiterIndex = attrName.indexOf(MULTIPLE_COMPONENT_DELIMITER);\n    componentName = delimiterIndex > 0 ? attrName.substring(0, delimiterIndex) : attrName;\n\n    // Not a component. Normal set attribute.\n    if (!COMPONENTS[componentName]) {\n      if (attrName === 'mixin') { this.mixinUpdate(arg1); }\n      super.setAttribute.call(this, attrName, arg1);\n      return;\n    }\n\n    // Initialize component first if not yet initialized.\n    if (!this.components[attrName] && this.hasAttribute(attrName)) {\n      this.updateComponent(\n        attrName,\n        window.HTMLElement.prototype.getAttribute.call(this, attrName));\n    }\n\n    // Determine new attributes from the arguments\n    if (typeof arg2 !== 'undefined' &&\n        typeof arg1 === 'string' &&\n        arg1.length > 0 &&\n        typeof utils.styleParser.parse(arg1) === 'string') {\n      // Update a single property of a multi-property component\n      for (key in singlePropUpdate) { delete singlePropUpdate[key]; }\n      newAttrValue = singlePropUpdate;\n      newAttrValue[arg1] = arg2;\n      clobber = false;\n    } else {\n      // Update with a value, object, or CSS-style property string, with the possibility\n      // of clobbering previous values.\n      newAttrValue = arg1;\n      clobber = (arg2 === true);\n    }\n\n    // Update component\n    this.updateComponent(attrName, newAttrValue, clobber);\n\n    // In debug mode, write component data up to the DOM.\n    isDebugMode = this.sceneEl && this.sceneEl.getAttribute('debug');\n    if (isDebugMode) { this.components[attrName].flushToDOM(); }\n  }\n\n  /**\n   * Reflect component data in the DOM (as seen from the browser DOM Inspector).\n   *\n   * @param {boolean} recursive - Also flushToDOM on the children.\n   **/\n  flushToDOM (recursive) {\n    var components = this.components;\n    var child;\n    var children = this.children;\n    var i;\n    var key;\n\n    // Flush entity's components to DOM.\n    for (key in components) {\n      components[key].flushToDOM();\n    }\n\n    // Recurse.\n    if (!recursive) { return; }\n    for (i = 0; i < children.length; ++i) {\n      child = children[i];\n      if (!child.flushToDOM) { continue; }\n      child.flushToDOM(recursive);\n    }\n  }\n\n  /**\n   * If `attr` is a component, returns ALL component data including applied mixins and\n   * defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getAttribute (attr) {\n    // If component, return component data.\n    var component;\n    if (attr === 'position') { return this.object3D.position; }\n    if (attr === 'rotation') { return getRotation(this); }\n    if (attr === 'scale') { return this.object3D.scale; }\n    if (attr === 'visible') { return this.object3D.visible; }\n    component = this.components[attr];\n    if (component) { return component.data; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * If `attr` is a component, returns JUST the component data defined on the entity.\n   * Like a partial version of `getComputedAttribute` as returned component data\n   * does not include applied mixins or defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getDOMAttribute (attr) {\n    // If cached value exists, return partial component data.\n    var component = this.components[attr];\n    if (component) { return component.attrValue; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  addState (state) {\n    if (this.is(state)) { return; }\n    this.states.push(state);\n    this.emit('stateadded', state);\n  }\n\n  removeState (state) {\n    var stateIndex = this.states.indexOf(state);\n    if (stateIndex === -1) { return; }\n    this.states.splice(stateIndex, 1);\n    this.emit('stateremoved', state);\n  }\n\n  /**\n   * Checks if the element is in a given state. e.g. el.is('alive');\n   *\n   * @param {string} state - Name of the state we want to check\n   */\n  is (state) {\n    return this.states.indexOf(state) !== -1;\n  }\n\n  /**\n   * Open Inspector to this entity.\n   */\n  inspect () {\n    this.sceneEl.components.inspector.openInspector(this);\n  }\n\n  /**\n   * Clean up memory and return memory to object pools.\n   */\n  destroy () {\n    var key;\n    if (this.parentNode) {\n      warn('Entity can only be destroyed if detached from scenegraph.');\n      return;\n    }\n    for (key in this.components) {\n      this.components[key].destroy();\n    }\n  }\n}\n\n/**\n * Check if a component is *defined* for an entity, including defaults and mixins.\n * Does not check whether the component has been *initialized* for an entity.\n *\n * @param {string} el - Entity.\n * @param {string} name - Component name.\n * @returns {boolean}\n */\nfunction checkComponentDefined (el, name) {\n  // Check if element contains the component.\n  if (el.components[name] && el.components[name].attrValue) { return true; }\n\n  return isComponentMixedIn(name, el.mixinEls);\n}\n\n/**\n * Check if any mixins contains a component.\n *\n * @param {string} name - Component name.\n * @param {Array<Element>} mixinEls - Array of <a-mixin>s.\n */\nfunction isComponentMixedIn (name, mixinEls) {\n  var i;\n  var inMixin = false;\n  for (i = 0; i < mixinEls.length; ++i) {\n    inMixin = mixinEls[i].hasAttribute(name);\n    if (inMixin) { break; }\n  }\n  return inMixin;\n}\n\n/**\n * Given entity defined value, merge in extra data if necessary.\n * Handle both single and multi-property components.\n *\n * @param {string} attrValue - Entity data.\n * @param extraData - Entity data from another source to merge in.\n */\nfunction mergeComponentData (attrValue, extraData) {\n  // Extra data not defined, just return attrValue.\n  if (!extraData) { return attrValue; }\n\n  // Merge multi-property data.\n  if (extraData.constructor === Object) {\n    return utils.extend(extraData, utils.styleParser.parse(attrValue || {}));\n  }\n\n  // Return data, precedence to the defined value.\n  return attrValue || extraData;\n}\n\nfunction isComponent (componentName) {\n  if (componentName.indexOf(MULTIPLE_COMPONENT_DELIMITER) !== -1) {\n    componentName = utils.split(componentName, MULTIPLE_COMPONENT_DELIMITER)[0];\n  }\n  if (!COMPONENTS[componentName]) { return false; }\n  return true;\n}\n\nfunction getRotation (entityEl) {\n  var radToDeg = THREE.MathUtils.radToDeg;\n  var rotation = entityEl.object3D.rotation;\n  var rotationObj = entityEl.rotationObj;\n  rotationObj.x = radToDeg(rotation.x);\n  rotationObj.y = radToDeg(rotation.y);\n  rotationObj.z = radToDeg(rotation.z);\n  return rotationObj;\n}\n\nAEntity.componentsUpdated = [];\nAEntity.singlePropUpdate = {};\n\ncustomElements.define('a-entity', AEntity);\n", "import { isIframed } from '../../utils/index.js';\n\n/**\n * Provides a post message API for scenes contained\n * in an iframe.\n */\nexport function initPostMessageAPI (scene) {\n  // Handles fullscreen behavior when inside an iframe.\n  if (!isIframed()) { return; }\n  // postMessage API handler\n  window.addEventListener('message', postMessageAPIHandler.bind(scene));\n}\n\nfunction postMessageAPIHandler (event) {\n  var scene = this;\n  if (!event.data) { return; }\n\n  switch (event.data.type) {\n    case 'vr': {\n      switch (event.data.data) {\n        case 'enter':\n          scene.enterVR();\n          break;\n        case 'exit':\n          scene.exitVR();\n          break;\n      }\n    }\n  }\n}\n", "import { isIOS } from './device.js';\n\n// Safari regression introduced in iOS 12 and remains in iOS 13.\n// https://stackoverflow.com/questions/62717621/white-space-at-page-bottom-after-device-rotation-in-ios-safari\nif (isIOS()) {\n  window.addEventListener('orientationchange', function () {\n    document.documentElement.style.height = 'initial';\n    setTimeout(function () {\n      document.documentElement.style.height = '100%';\n      setTimeout(function () {\n        // this line prevents the content\n        // from hiding behind the address bar\n        window.scrollTo(0, 1);\n      }, 500);\n    }, 500);\n  });\n}\n", "/* global Promise, customElements, screen */\nimport * as THREE from 'three';\nimport { inject as initMetaTags } from './metaTags.js';\nimport { initWakelock } from './wakelock.js';\nimport * as loadingScreen from './loadingScreen.js';\nimport scenes from './scenes.js';\nimport { systems } from '../system.js';\nimport { components } from '../component.js';\nimport * as utils from '../../utils/index.js';\n\n// Require after.\nimport { AEntity } from '../a-entity.js';\nimport { ANode } from '../a-node.js';\nimport { initPostMessageAPI } from './postMessage.js';\n\nimport '../../utils/ios-orientationchange-blank-bug.js';\n\nvar warn = utils.debug('core:a-scene:warn');\n\nvar isIOS = utils.device.isIOS();\nvar isMobile = utils.device.isMobile();\nvar isWebXRAvailable = utils.device.isWebXRAvailable;\n\n/**\n * Scene element, holds all entities.\n *\n * @member {Array} behaviors - Component instances that have registered themselves to be\n           updated on every tick.\n * @member {object} camera - three.js Camera object.\n * @member {object} canvas\n * @member {boolean} isScene - Differentiates as scene entity as opposed to other entities.\n * @member {boolean} isMobile - Whether browser is mobile (via UA detection).\n * @member {object} object3D - Root three.js Scene object.\n * @member {object} renderer\n * @member {boolean} renderStarted\n * @member {object} systems - Registered instantiated systems.\n * @member {number} time\n */\n\nexport class AScene extends AEntity {\n  constructor () {\n    var self;\n    super();\n    self = this;\n    self.clock = new THREE.Clock();\n    self.isIOS = isIOS;\n    self.isMobile = isMobile;\n    self.hasWebXR = isWebXRAvailable;\n    self.isAR = false;\n    self.isScene = true;\n    self.object3D = new THREE.Scene();\n    self.resize = self.resize.bind(self);\n    self.render = self.render.bind(self);\n    self.systems = {};\n    self.systemNames = [];\n    self.time = self.delta = 0;\n    self.usedOfferSession = false;\n\n    self.componentOrder = [];\n    self.behaviors = {};\n    self.hasLoaded = false;\n    self.isPlaying = false;\n    self.originalHTML = self.innerHTML;\n  }\n\n  addFullScreenStyles () {\n    document.documentElement.classList.add('a-fullscreen');\n  }\n\n  removeFullScreenStyles () {\n    document.documentElement.classList.remove('a-fullscreen');\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    var embedded = this.hasAttribute('embedded');\n\n    // Default components.\n    this.setAttribute('inspector', '');\n    this.setAttribute('keyboard-shortcuts', '');\n    this.setAttribute('screenshot', '');\n    this.setAttribute('xr-mode-ui', '');\n    this.setAttribute('device-orientation-permission-ui', '');\n    super.doConnectedCallback();\n\n    // Renderer initialization\n    setupCanvas(this);\n    this.setupRenderer();\n    loadingScreen.setup(this, getCanvasSize);\n\n    this.resize();\n    if (!embedded) { this.addFullScreenStyles(); }\n    initPostMessageAPI(this);\n\n    initMetaTags(this);\n    initWakelock(this);\n\n    // Bind functions.\n    this.enterVRBound = function () { self.enterVR(); };\n    this.exitVRBound = function () { self.exitVR(); };\n\n    window.addEventListener('sessionend', this.resize);\n    // Camera set up by camera system.\n    this.addEventListener('cameraready', function () {\n      self.attachedCallbackPostCamera();\n    });\n\n    this.initSystems();\n    // Compute component order\n    this.componentOrder = determineComponentBehaviorOrder(components, this.componentOrder);\n    this.addEventListener('componentregistered', function () {\n      // Recompute order\n      self.componentOrder = determineComponentBehaviorOrder(components, self.componentOrder);\n    });\n\n    // WebXR Immersive navigation handler.\n    if (this.hasWebXR && navigator.xr && navigator.xr.addEventListener) {\n      navigator.xr.addEventListener('sessiongranted', function () { self.enterVR(); });\n    }\n  }\n\n  attachedCallbackPostCamera () {\n    var resize;\n    var self = this;\n\n    window.addEventListener('load', resize);\n    window.addEventListener('resize', function () {\n      // Workaround for a Webkit bug (https://bugs.webkit.org/show_bug.cgi?id=170595)\n      // where the window does not contain the correct viewport size\n      // after an orientation change. The window size is correct if the operation\n      // is postponed a few milliseconds.\n      // self.resize can be called directly once the bug above is fixed.\n      if (self.isIOS) {\n        setTimeout(self.resize, 100);\n      } else {\n        self.resize();\n      }\n    });\n    this.play();\n\n    // Add to scene index.\n    scenes.push(this);\n  }\n\n  /**\n   * Initialize all systems.\n   */\n  initSystems () {\n    var name;\n\n    // Initialize camera system first.\n    this.initSystem('camera');\n\n    for (name in systems) {\n      if (name === 'camera') { continue; }\n      this.initSystem(name);\n    }\n  }\n\n  /**\n   * Initialize a system.\n   */\n  initSystem (name) {\n    if (this.systems[name]) { return; }\n    this.systems[name] = new systems[name](this);\n    this.systemNames.push(name);\n  }\n\n  /**\n   * Shut down scene on detach.\n   */\n  disconnectedCallback () {\n    // Remove from scene index.\n    var sceneIndex = scenes.indexOf(this);\n    super.disconnectedCallback();\n\n    scenes.splice(sceneIndex, 1);\n\n    window.removeEventListener('sessionend', this.resize);\n    this.removeFullScreenStyles();\n    this.renderer.dispose();\n  }\n\n  /**\n   * Add ticks and tocks.\n   *\n   * @param {object} behavior - A component.\n   */\n  addBehavior (behavior) {\n    var behaviorSet;\n    var behaviors = this.behaviors[behavior.name];\n    var behaviorType;\n\n    if (!behaviors) {\n      behaviors = this.behaviors[behavior.name] = {\n        tick: { inUse: false, array: [], markedForRemoval: [] },\n        tock: { inUse: false, array: [], markedForRemoval: [] }\n      };\n    }\n\n    // Check if behavior has tick and/or tock and add the behavior to the appropriate list.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n\n      // In case the behaviorSet is in use, make sure this behavior isn't on the removal list.\n      if (behaviorSet.inUse) {\n        var index = behaviorSet.markedForRemoval.indexOf(behavior);\n        if (index !== -1) {\n          behaviorSet.markedForRemoval.splice(index, 1);\n        }\n      }\n      // Add behavior to the set\n      if (behaviorSet.array.indexOf(behavior) === -1) {\n        behaviorSet.array.push(behavior);\n      }\n    }\n  }\n\n  /**\n   * For tests.\n   */\n  getPointerLockElement () {\n    return document.pointerLockElement;\n  }\n\n  /**\n   * For tests.\n   */\n  checkHeadsetConnected () {\n    return utils.device.checkHeadsetConnected();\n  }\n\n  enterAR () {\n    var errorMessage;\n    if (!this.hasWebXR) {\n      errorMessage = 'Failed to enter AR mode, WebXR not supported.';\n      throw new Error(errorMessage);\n    }\n    if (!utils.device.checkARSupport()) {\n      errorMessage = 'Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.';\n      throw new Error(errorMessage);\n    }\n    return this.enterVR(true);\n  }\n\n  /**\n   * Call `requestPresent` if WebVR or WebVR polyfill.\n   * Call `requestFullscreen` on desktop.\n   * Handle events, states, fullscreen styles.\n   *\n   * @param {?boolean} useAR - if true, try immersive-ar mode\n   * @returns {Promise}\n   */\n  enterVR (useAR, useOfferSession) {\n    var self = this;\n    var vrManager = self.renderer.xr;\n    var xrInit;\n\n    // Don't enter VR if already in VR.\n    if (useOfferSession && (!navigator.xr || !navigator.xr.offerSession)) { return Promise.resolve('OfferSession is not supported.'); }\n    if (self.usedOfferSession && useOfferSession) { return Promise.resolve('OfferSession was already called.'); }\n    if (this.is('vr-mode')) { return Promise.resolve('Already in VR.'); }\n\n    // Has VR.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      var rendererSystem = self.getAttribute('renderer');\n      vrManager.enabled = true;\n\n      if (this.hasWebXR) {\n        // XR API.\n        if (this.xrSession) {\n          this.xrSession.removeEventListener('end', this.exitVRBound);\n        }\n        var refspace = this.sceneEl.systems.webxr.sessionReferenceSpaceType;\n        vrManager.setReferenceSpaceType(refspace);\n        var xrMode = useAR ? 'immersive-ar' : 'immersive-vr';\n        xrInit = this.sceneEl.systems.webxr.sessionConfiguration;\n        return new Promise(function (resolve, reject) {\n          var requestSession = useOfferSession ? navigator.xr.offerSession.bind(navigator.xr) : navigator.xr.requestSession.bind(navigator.xr);\n          self.usedOfferSession |= useOfferSession;\n          requestSession(xrMode, xrInit).then(\n            function requestSuccess (xrSession) {\n              if (useOfferSession) {\n                self.usedOfferSession = false;\n              }\n\n              vrManager.layersEnabled = xrInit.requiredFeatures.indexOf('layers') !== -1;\n              vrManager.setSession(xrSession).then(function () {\n                vrManager.setFoveation(rendererSystem.foveationLevel);\n                self.xrSession = xrSession;\n                self.systems.renderer.setWebXRFrameRate(xrSession);\n                xrSession.addEventListener('end', self.exitVRBound);\n                enterVRSuccess(resolve);\n              });\n            },\n            function requestFail (error) {\n              var useAR = xrMode === 'immersive-ar';\n              var mode = useAR ? 'AR' : 'VR';\n              reject(new Error('Failed to enter ' + mode + ' mode (`requestSession`)', { cause: error }));\n            }\n          );\n        });\n      } else {\n        var mode = useAR ? 'AR' : 'VR';\n        throw new Error('Failed to enter ' + mode + ' no WebXR');\n      }\n    }\n\n    // No VR.\n    enterVRSuccess();\n    return Promise.resolve();\n\n    // Callback that happens on enter VR success or enter fullscreen (any API).\n    function enterVRSuccess (resolve) {\n      if (useAR) {\n        self.addState('ar-mode');\n      } else {\n        self.addState('vr-mode');\n      }\n      self.emit('enter-vr', {target: self});\n      // Lock to landscape orientation on mobile.\n      if (!self.hasWebXR && self.isMobile && screen.orientation && screen.orientation.lock) {\n        screen.orientation.lock('landscape');\n      }\n      self.addFullScreenStyles();\n\n      // On mobile, the polyfill handles fullscreen.\n      // TODO: 07/16 Chromium builds break when `requestFullscreen`ing on a canvas\n      // that we are also `requestPresent`ing. Until then, don't fullscreen if headset\n      // connected.\n      if (!self.isMobile && !self.checkHeadsetConnected()) {\n        requestFullscreen(self.canvas);\n      }\n\n      self.resize();\n      if (resolve) { resolve(); }\n    }\n  }\n\n  /**\n   * Call `exitPresent` if WebVR / WebXR or WebVR polyfill.\n   * Handle events, states, fullscreen styles.\n   *\n   * @returns {Promise}\n   */\n  exitVR () {\n    var self = this;\n    var vrManager = this.renderer.xr;\n\n    // Don't exit VR if not in VR.\n    if (!this.is('vr-mode') && !this.is('ar-mode')) { return Promise.resolve('Not in immersive mode.'); }\n\n    // Handle exiting VR if not yet already and in a headset or polyfill.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      vrManager.enabled = false;\n      if (this.hasWebXR) {\n        this.xrSession.removeEventListener('end', this.exitVRBound);\n        // Capture promise to avoid errors.\n        this.xrSession.end().then(function () {}, function () {});\n        this.xrSession = undefined;\n      } else {\n        throw Error('Failed to exit VR - no WebXR');\n      }\n    } else {\n      exitFullscreen();\n    }\n\n    // Handle exiting VR in all other cases (2D fullscreen, external exit VR event).\n    exitVRSuccess();\n\n    return Promise.resolve();\n\n    function exitVRSuccess () {\n      self.removeState('vr-mode');\n      self.removeState('ar-mode');\n      // Lock to landscape orientation on mobile.\n      if (self.isMobile && screen.orientation && screen.orientation.unlock) {\n        screen.orientation.unlock();\n      }\n      // Exiting VR in embedded mode, no longer need fullscreen styles.\n      if (self.hasAttribute('embedded')) { self.removeFullScreenStyles(); }\n\n      self.resize();\n      if (self.isIOS) { utils.forceCanvasResizeSafariMobile(self.canvas); }\n      self.renderer.setPixelRatio(window.devicePixelRatio);\n      self.emit('exit-vr', {target: self});\n    }\n  }\n\n  /**\n   * Wraps Entity.getAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Wraps Entity.getDOMAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getDOMAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getDOMAttribute.call(this, attr);\n  }\n\n  /**\n   * Wrap Entity.setAttribute to take into account for systems.\n   * If system exists, then skip component initialization checks and do a normal\n   * setAttribute.\n   */\n  setAttribute (attr, value, componentPropValue) {\n    // Check if system exists (i.e. is registered).\n    if (systems[attr]) {\n      ANode.prototype.setAttribute.call(this, attr, value);\n\n      // Update system instance, if initialized on the scene.\n      var system = this.systems[attr];\n      if (system) {\n        system.updateProperties(value);\n      }\n      return;\n    }\n    AEntity.prototype.setAttribute.call(this, attr, value, componentPropValue);\n  }\n\n  /**\n   * @param {object} behavior - A component.\n   */\n  removeBehavior (behavior) {\n    var behaviorSet;\n    var behaviorType;\n    var behaviors = this.behaviors[behavior.name];\n    var index;\n\n    // Check if behavior has tick and/or tock and remove the behavior from the appropriate\n    // array.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n      index = behaviorSet.array.indexOf(behavior);\n      if (index !== -1) {\n        // Check if the behavior can safely be removed.\n        if (behaviorSet.inUse) {\n          // Set is in use, so only mark for removal.\n          if (behaviorSet.markedForRemoval.indexOf(behavior) === -1) {\n            behaviorSet.markedForRemoval.push(behavior);\n          }\n        } else {\n          // Swap and remove from the end\n          behaviorSet.array[index] = behaviorSet.array[behaviorSet.array.length - 1];\n          behaviorSet.array.pop();\n        }\n      }\n    }\n  }\n\n  resize () {\n    var camera = this.camera;\n    var canvas = this.canvas;\n    var embedded;\n    var isVRPresenting;\n    var size;\n    var isPresenting = this.renderer.xr.isPresenting;\n    isVRPresenting = this.renderer.xr.enabled && isPresenting;\n\n    // Do not update renderer, if a camera or a canvas have not been injected.\n    // In VR mode, three handles canvas resize based on the dimensions returned by\n    // the getEyeParameters function of the WebVR API. These dimensions are independent of\n    // the window size, therefore should not be overwritten with the window's width and\n    // height, // except when in fullscreen mode.\n    if (!camera || !canvas || (this.is('vr-mode') && (this.isMobile || isVRPresenting))) {\n      return;\n    }\n\n    // Update camera.\n    embedded = this.getAttribute('embedded') && !this.is('vr-mode');\n    size = getCanvasSize(canvas, embedded, this.maxCanvasSize, this.is('vr-mode'));\n    camera.aspect = size.width / size.height;\n    camera.updateProjectionMatrix();\n\n    // Notify renderer of size change.\n    this.renderer.setSize(size.width, size.height, false);\n    this.emit('rendererresize', null, false);\n  }\n\n  setupRenderer () {\n    var self = this;\n    var renderer;\n    var rendererAttr;\n    var rendererAttrString;\n    var rendererConfig;\n\n    rendererConfig = {\n      alpha: true,\n      antialias: !isMobile,\n      canvas: this.canvas,\n      logarithmicDepthBuffer: false,\n      powerPreference: 'high-performance'\n    };\n\n    this.maxCanvasSize = {height: -1, width: -1};\n\n    if (this.hasAttribute('renderer')) {\n      rendererAttrString = this.getAttribute('renderer');\n      rendererAttr = utils.styleParser.parse(rendererAttrString);\n\n      if (rendererAttr.precision) {\n        rendererConfig.precision = rendererAttr.precision + 'p';\n      }\n\n      if (rendererAttr.antialias && rendererAttr.antialias !== 'auto') {\n        rendererConfig.antialias = rendererAttr.antialias === 'true';\n      }\n\n      if (rendererAttr.logarithmicDepthBuffer && rendererAttr.logarithmicDepthBuffer !== 'auto') {\n        rendererConfig.logarithmicDepthBuffer = rendererAttr.logarithmicDepthBuffer === 'true';\n      }\n\n      if (rendererAttr.alpha) {\n        rendererConfig.alpha = rendererAttr.alpha === 'true';\n      }\n\n      if (rendererAttr.stencil) {\n        rendererConfig.stencil = rendererAttr.stencil === 'true';\n      }\n\n      if (rendererAttr.multiviewStereo) {\n        rendererConfig.multiviewStereo = rendererAttr.multiviewStereo === 'true';\n      }\n\n      this.maxCanvasSize = {\n        width: rendererAttr.maxCanvasWidth\n          ? parseInt(rendererAttr.maxCanvasWidth)\n          : this.maxCanvasSize.width,\n        height: rendererAttr.maxCanvasHeight\n          ? parseInt(rendererAttr.maxCanvasHeight)\n          : this.maxCanvasSize.height\n      };\n    }\n\n    // Trick Webpack so that it can't statically determine the exact export used.\n    // Otherwise it will conclude that one of the two exports can't be found in THREE.\n    // Only one needs to exist, and this should be determined at runtime.\n    var rendererImpl = ['WebGLRenderer', 'WebGPURenderer'].find(function (x) { return THREE[x]; });\n    renderer = this.renderer = new THREE[rendererImpl](rendererConfig);\n    if (!renderer.xr.setPoseTarget) {\n      renderer.xr.setPoseTarget = function () {};\n    }\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    if (this.camera) { renderer.xr.setPoseTarget(this.camera.el.object3D); }\n    this.addEventListener('camera-set-active', function () {\n      renderer.xr.setPoseTarget(self.camera.el.object3D);\n    });\n  }\n\n  /**\n   * Handler attached to elements to help scene know when to kick off.\n   * Scene waits for all entities to load.\n   */\n  play () {\n    var self = this;\n    var sceneEl = this;\n\n    if (this.renderStarted) {\n      AEntity.prototype.play.call(this);\n      return;\n    }\n\n    this.addEventListener('loaded', function () {\n      var renderer = this.renderer;\n      AEntity.prototype.play.call(this);  // .play() *before* render.\n\n      if (sceneEl.renderStarted) { return; }\n      sceneEl.resize();\n\n      // Kick off render loop.\n      if (sceneEl.renderer) {\n        if (window.performance) { window.performance.mark('render-started'); }\n        loadingScreen.remove();\n        renderer.setAnimationLoop(this.render);\n        sceneEl.renderStarted = true;\n        sceneEl.emit('renderstart');\n      }\n    });\n\n    // setTimeout to wait for all nodes to attach and run their callbacks.\n    setTimeout(function () {\n      AEntity.prototype.load.call(self);\n    });\n  }\n\n  /**\n   * Wrap `updateComponent` to not initialize the component if the component has a system\n   * (aframevr/aframe#2365).\n   */\n  updateComponent (componentName) {\n    if (componentName in systems) { return; }\n    AEntity.prototype.updateComponent.apply(this, arguments);\n  }\n\n  /**\n   * Behavior-updater meant to be called from scene render.\n   * Abstracted to a different function to facilitate unit testing (`scene.tick()`) without\n   * needing to render.\n   */\n  tick (time, timeDelta) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tick', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tick) { continue; }\n      systems[this.systemNames[i]].tick(time, timeDelta);\n    }\n  }\n\n  /**\n   * Behavior-updater meant to be called after scene render for post processing purposes.\n   * Abstracted to a different function to facilitate unit testing (`scene.tock()`) without\n   * needing to render.\n   */\n  tock (time, timeDelta, camera) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tock', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tock) { continue; }\n      systems[this.systemNames[i]].tock(time, timeDelta, camera);\n    }\n  }\n\n  /**\n   * The render loop.\n   *\n   * Updates animations.\n   * Updates behaviors.\n   * Renders with request animation frame.\n   */\n  render (time, frame) {\n    var renderer = this.renderer;\n\n    this.frame = frame;\n    this.delta = this.clock.getDelta() * 1000;\n    this.time = this.clock.elapsedTime * 1000;\n\n    if (this.isPlaying) { this.tick(this.time, this.delta); }\n    var savedBackground = null;\n    if (this.is('ar-mode')) {\n      // In AR mode, don't render the default background. Hide it, then\n      // restore it again after rendering.\n      savedBackground = this.object3D.background;\n      this.object3D.background = null;\n    }\n    renderer.render(this.object3D, this.camera);\n    if (savedBackground) {\n      this.object3D.background = savedBackground;\n    }\n    if (this.isPlaying) {\n      var renderCamera = renderer.xr.isPresenting ? renderer.xr.getCamera() : this.camera;\n      this.tock(this.time, this.delta, renderCamera);\n    }\n  }\n\n  callComponentBehaviors (behavior, time, timeDelta) {\n    var i;\n\n    for (var c = 0; c < this.componentOrder.length; c++) {\n      var behaviors = this.behaviors[this.componentOrder[c]];\n      if (!behaviors) { continue; }\n      var behaviorSet = behaviors[behavior];\n\n      behaviorSet.inUse = true;\n      for (i = 0; i < behaviorSet.array.length; i++) {\n        if (!behaviorSet.array[i].isPlaying) { continue; }\n        behaviorSet.array[i][behavior](time, timeDelta);\n      }\n      behaviorSet.inUse = false;\n\n      // Clean up any behaviors marked for removal\n      for (i = 0; i < behaviorSet.markedForRemoval.length; i++) {\n        this.removeBehavior(behaviorSet.markedForRemoval[i]);\n      }\n      behaviorSet.markedForRemoval.length = 0;\n    }\n  }\n}\n\n/**\n * Derives an ordering from the components, taking any before and after\n * constraints into account.\n *\n * @param {object} components - The components to order\n * @param {Array} array - Optional array to use as output\n */\nexport function determineComponentBehaviorOrder (components, array) {\n  var graph = {};\n  var i;\n  var key;\n  var result = array || [];\n  result.length = 0;\n\n  // Construct graph nodes for each element\n  for (key in components) {\n    var element = components[key];\n    if (element === undefined) { continue; }\n    var before = element.before ? element.before.slice(0) : [];\n    var after = element.after ? element.after.slice(0) : [];\n    graph[key] = { before: before, after: after, visited: false, done: false };\n  }\n\n  // Normalize to after constraints, warn about missing nodes\n  for (key in graph) {\n    for (i = 0; i < graph[key].before.length; i++) {\n      var beforeName = graph[key].before[i];\n      if (!(beforeName in graph)) {\n        warn('Invalid ordering constraint, no component named `' + beforeName + '` referenced by `' + key + '`');\n        continue;\n      }\n\n      graph[beforeName].after.push(key);\n    }\n  }\n\n  // Perform topological depth-first search\n  // https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search\n  function visit (name) {\n    if (!(name in graph) || graph[name].done) {\n      return;\n    }\n\n    if (graph[name].visited) {\n      warn('Cycle detected, ignoring one or more before/after constraints. ' +\n        'The resulting order might be incorrect');\n      return;\n    }\n\n    graph[name].visited = true;\n\n    for (var i = 0; i < graph[name].after.length; i++) {\n      var afterName = graph[name].after[i];\n      if (!(afterName in graph)) {\n        warn('Invalid before/after constraint, no component named `' +\n            afterName + '` referenced in `' + name + '`');\n      }\n      visit(afterName);\n    }\n\n    graph[name].done = true;\n    result.push(name);\n  }\n\n  for (key in graph) {\n    if (graph[key].done) {\n      continue;\n    }\n    visit(key);\n  }\n  return result;\n}\n\n/**\n * Return size constrained to maxSize - maintaining aspect ratio.\n *\n * @param {object} size - size parameters (width and height).\n * @param {object} maxSize - Max size parameters (width and height).\n * @returns {object} Width and height.\n */\nfunction constrainSizeTo (size, maxSize) {\n  var aspectRatio;\n  var pixelRatio = window.devicePixelRatio;\n\n  if (!maxSize || (maxSize.width === -1 && maxSize.height === -1)) {\n    return size;\n  }\n\n  if (size.width * pixelRatio < maxSize.width &&\n    size.height * pixelRatio < maxSize.height) {\n    return size;\n  }\n\n  aspectRatio = size.width / size.height;\n\n  if ((size.width * pixelRatio) > maxSize.width && maxSize.width !== -1) {\n    size.width = Math.round(maxSize.width / pixelRatio);\n    size.height = Math.round(maxSize.width / aspectRatio / pixelRatio);\n  }\n\n  if ((size.height * pixelRatio) > maxSize.height && maxSize.height !== -1) {\n    size.height = Math.round(maxSize.height / pixelRatio);\n    size.width = Math.round(maxSize.height * aspectRatio / pixelRatio);\n  }\n\n  return size;\n}\n\ncustomElements.define('a-scene', AScene);\n\n/**\n * Return the canvas size where the scene will be rendered.\n * Will be always the window size except when the scene is embedded.\n * The parent size will be returned in that case.\n * the returned size will be constrained to the maxSize maintaining aspect ratio.\n *\n * @param {Element} canvasEl - the canvas element\n * @param {boolean} embedded - Is the scene embedded?\n * @param {object} maxSize - Max size parameters\n * @param {boolean} isVR - If in VR\n * @returns {number} Max size\n */\nfunction getCanvasSize (canvasEl, embedded, maxSize, isVR) {\n  if (!canvasEl.parentElement) { return {height: 0, width: 0}; }\n  if (embedded) {\n    var size;\n    size = {\n      height: canvasEl.parentElement.offsetHeight,\n      width: canvasEl.parentElement.offsetWidth\n    };\n    return constrainSizeTo(size, maxSize);\n  }\n  return getMaxSize(maxSize, isVR);\n}\n\n/**\n * Return the canvas size. Will be the window size unless that size is greater than the\n * maximum size (1920x1920 by default).  The constrained size will be returned in that case,\n * maintaining aspect ratio\n *\n * @param {object} maxSize - Max size parameters (width and height).\n * @param {boolean} isVR - If in VR.\n * @returns {object} Width and height.\n */\nfunction getMaxSize (maxSize, isVR) {\n  var size;\n  size = {height: document.body.offsetHeight, width: document.body.offsetWidth};\n  if (isVR) {\n    return size;\n  } else {\n    return constrainSizeTo(size, maxSize);\n  }\n}\n\nfunction requestFullscreen (canvas) {\n  var requestFullscreen =\n    canvas.requestFullscreen ||\n    canvas.webkitRequestFullscreen ||\n    canvas.mozRequestFullScreen ||  // The capitalized `S` is not a typo.\n    canvas.msRequestFullscreen;\n  // Hide navigation buttons on Android.\n  requestFullscreen.apply(canvas, [{navigationUI: 'hide'}]);\n}\n\nfunction exitFullscreen () {\n  var fullscreenEl =\n    document.fullscreenElement ||\n    document.webkitFullscreenElement ||\n    document.mozFullScreenElement;\n  if (!fullscreenEl) { return; }\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n\nexport function setupCanvas (sceneEl) {\n  var canvasEl;\n\n  canvasEl = document.createElement('canvas');\n  canvasEl.classList.add('a-canvas');\n  // Mark canvas as provided/injected by A-Frame.\n  canvasEl.dataset.aframeCanvas = true;\n  sceneEl.appendChild(canvasEl);\n\n  document.addEventListener('fullscreenchange', onFullScreenChange);\n  document.addEventListener('mozfullscreenchange', onFullScreenChange);\n  document.addEventListener('webkitfullscreenchange', onFullScreenChange);\n  document.addEventListener('MSFullscreenChange', onFullScreenChange);\n\n  // Prevent overscroll on mobile.\n  canvasEl.addEventListener('touchmove', function (event) { event.preventDefault(); }, {passive: false});\n\n  // Set canvas on scene.\n  sceneEl.canvas = canvasEl;\n  sceneEl.emit('render-target-loaded', {target: canvasEl});\n  // For unknown reasons a synchronous resize does not work on desktop when\n  // entering/exiting fullscreen.\n  setTimeout(sceneEl.resize.bind(sceneEl), 0);\n\n  function onFullScreenChange () {\n    var fullscreenEl =\n      document.fullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    // No fullscreen element === exit fullscreen\n    if (!fullscreenEl) { sceneEl.exitVR(); }\n    document.activeElement.blur();\n    document.body.focus();\n  }\n}\n", "import Wakelock from '../../../vendor/wakelock/wakelock.js';\n\nexport function initWakelock (scene) {\n  if (!scene.isMobile) { return; }\n\n  var wakelock = scene.wakelock = new Wakelock();\n  scene.addEventListener('enter-vr', function () { wakelock.request(); });\n  scene.addEventListener('exit-vr', function () { wakelock.release(); });\n}\n", "import * as schema from './schema.js';\nimport * as THREE from 'three';\n\nvar processSchema = schema.process;\nexport var geometries = {};  // Registered geometries.\nexport var geometryNames = [];  // Names of registered geometries.\n\n/**\n * Geometry class definition.\n *\n * Geometries extend the geometry component API to create and register geometry types.\n */\nexport var Geometry = function () {};\n\nGeometry.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.geometry = new THREE.BufferGeometry();\n    return this.geometry;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated geometry data changes.\n   *\n   * @param {object} data - New geometry data.\n   */\n  update: function (data) { /* no-op */ }\n};\n\n/**\n * Registers a geometry to A-Frame.\n *\n * @param {string} name - Geometry name.\n * @param {object} definition - Geometry property and methods.\n * @returns {object} Geometry.\n */\nexport function registerGeometry (name, definition) {\n  var NewGeometry;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function expandDefinition (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (geometries[name]) {\n    throw new Error('The geometry `' + name + '` has been already registered');\n  }\n  NewGeometry = function () { Geometry.call(this); };\n  NewGeometry.prototype = Object.create(Geometry.prototype, proto);\n  NewGeometry.prototype.name = name;\n  NewGeometry.prototype.constructor = NewGeometry;\n  geometries[name] = {\n    Geometry: NewGeometry,\n    schema: processSchema(NewGeometry.prototype.schema)\n  };\n  geometryNames.push(name);\n  return NewGeometry;\n}\n", "/* global customElements */\nimport { knownTags } from '../../core/a-node.js';\nimport { AEntity } from '../../core/a-entity.js';\nimport { components } from '../../core/component.js';\nimport * as utils from '../../utils/index.js';\n\nvar debug = utils.debug;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar log = debug('extras:primitives:debug');\nvar warn = debug('extras:primitives:warn');\nvar error = debug('extras:primitives:error');\n\nexport var primitives = {};\n\nexport function registerPrimitive (name, definition) {\n  name = name.toLowerCase();\n\n  if (knownTags[name]) {\n    error('Trying to register primitive ' + name + ' that has been already previously registered');\n    return;\n  }\n\n  knownTags[name] = true;\n\n  log('Registering <%s>', name);\n\n  // Deprecation warning for defaultAttributes usage.\n  if (definition.defaultAttributes) {\n    warn(\"The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.\");\n  }\n\n  var mappings = definition.mappings || {};\n  var primitiveClass = class extends AEntity {\n    constructor () {\n      super();\n      this.defaultComponentsFromPrimitive = definition.defaultComponents || definition.defaultAttributes || {};\n      this.deprecated = definition.deprecated || null;\n      this.deprecatedMappings = definition.deprecatedMappings || {};\n      this.mappings = mappings;\n\n      if (definition.deprecated) { console.warn(definition.deprecated); }\n      this.resolveMappingCollisions();\n    }\n\n    /**\n     * If a mapping collides with a registered component name\n     * it renames the mapping to componentname-property\n     */\n    resolveMappingCollisions () {\n      var mappings = this.mappings;\n      var self = this;\n      Object.keys(mappings).forEach(function resolveCollision (key) {\n        var newAttribute;\n        if (key !== key.toLowerCase()) { warn('Mapping keys should be specified in lower case. The mapping key ' + key + ' may not be recognized'); }\n        if (components[key]) {\n          newAttribute = mappings[key].replace('.', '-');\n          mappings[newAttribute] = mappings[key];\n          delete mappings[key];\n          console.warn('The primitive ' + self.tagName.toLowerCase() + ' has a mapping collision. ' +\n                       'The attribute ' + key + ' has the same name as a registered component and' +\n                       ' has been renamed to ' + newAttribute);\n        }\n      });\n    }\n\n    getExtraComponents () {\n      var attr;\n      var data;\n      var i;\n      var mapping;\n      var mixins;\n      var self = this;\n\n      // Gather component data from default components.\n      data = utils.clone(this.defaultComponentsFromPrimitive);\n\n      // Factor in mixins to overwrite default components.\n      mixins = this.getAttribute('mixin');\n      if (mixins) {\n        mixins = utils.split(mixins.trim(), /\\s+/);\n        mixins.forEach(function applyMixin (mixinId) {\n          var mixinEl = document.getElementById(mixinId);\n          if (!mixinEl) { return; }\n          var rawAttributeCache = mixinEl.rawAttributeCache;\n          var mixinComponents = mixinEl.componentCache;\n          for (var name in rawAttributeCache) {\n            // Check if the attribute matches a mapping.\n            mapping = self.mappings[name];\n            if (mapping) {\n              applyMapping(mapping, rawAttributeCache[name], data);\n              return;\n            }\n\n            // Check if the attribute belongs to a component.\n            if (name in mixinComponents) {\n              data[name] = extend(data[name], mixinComponents[name]);\n            }\n          }\n        });\n      }\n\n      // Gather component data from mappings.\n      for (i = 0; i < this.attributes.length; i++) {\n        attr = this.attributes[i];\n        mapping = this.mappings[attr.name];\n        if (mapping) {\n          applyMapping(mapping, attr.value, data);\n        }\n      }\n\n      return data;\n\n      /**\n       * For the base to be extensible, both objects must be pure JavaScript objects.\n       * The function assumes that base is undefined, or null or a pure object.\n       */\n      function extend (base, extension) {\n        if (isUndefined(base)) {\n          return copy(extension);\n        }\n        if (isUndefined(extension)) {\n          return copy(base);\n        }\n        if (isPureObject(base) && isPureObject(extension)) {\n          return utils.extendDeep(base, extension);\n        }\n        return copy(extension);\n      }\n\n      function isUndefined (value) {\n        return typeof value === 'undefined';\n      }\n\n      function copy (value) {\n        if (isPureObject(value)) {\n          return utils.extendDeep({}, value);\n        }\n        return value;\n      }\n\n      function isPureObject (value) {\n        return value !== null && value.constructor === Object;\n      }\n    }\n\n    /**\n     * Sync to attribute to component property whenever mapped attribute changes.\n     * If attribute is mapped to a component property, set the component property using\n     * the attribute value.\n     */\n    attributeChangedCallback (attr, oldVal, value) {\n      var componentName = this.mappings[attr];\n\n      if (attr in this.deprecatedMappings) {\n        console.warn(this.deprecatedMappings[attr]);\n      }\n\n      if (!attr || !componentName) {\n        super.attributeChangedCallback(attr, oldVal, value);\n        return;\n      }\n\n      // Set value.\n      setComponentProperty(this, componentName, value);\n    }\n  };\n\n  customElements.define(name, primitiveClass);\n  primitiveClass.mappings = mappings;\n\n  // Store.\n  primitives[name] = primitiveClass;\n  return primitiveClass;\n}\n\n/**\n * Sets the relevant property based on the mapping property path.\n *\n * @param {string} mapping - The mapped property path.\n * @param {string} attrValue - The (raw) attribute value.\n * @param {object} data - The data object to apply the mapping to.\n */\nfunction applyMapping (mapping, attrValue, data) {\n  var path = utils.entity.getComponentPropertyPath(mapping);\n  if (path.constructor === Array) {\n    data[path[0]] = data[path[0]] || {};\n    data[path[0]][path[1]] = attrValue.trim();\n  } else {\n    data[path] = attrValue.trim();\n  }\n}\n\n/**\n * Add component mappings using schema.\n */\nfunction addComponentMapping (componentName, mappings) {\n  var schema = components[componentName].schema;\n  Object.keys(schema).forEach(function (prop) {\n    // Hyphenate where there is camelCase.\n    var attrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    // If there is a mapping collision, prefix with component name and hyphen.\n    if (mappings[attrName] !== undefined) { attrName = componentName + '-' + prop; }\n    mappings[attrName] = componentName + '.' + prop;\n  });\n}\n\n/**\n * Helper to define a primitive, building mappings using a component schema.\n */\nexport function definePrimitive (tagName, defaultComponents, mappings) {\n  // If no initial mappings provided, start from empty map.\n  mappings = mappings || {};\n\n  // From the default components, add mapping automagically.\n  Object.keys(defaultComponents).forEach(function buildMappings (componentName) {\n    addComponentMapping(componentName, mappings);\n  });\n\n  // Register the primitive.\n  registerPrimitive(tagName, utils.extendDeep({}, null, {\n    defaultComponents: defaultComponents,\n    mappings: mappings\n  }));\n}\n", "import * as THREE from 'three';\nimport { process as processSchema } from './schema.js';\nimport * as utils from '../utils/index.js';\n\nexport var shaders = {};  // Keep track of registered shaders.\nexport var shaderNames = [];  // Keep track of the names of registered shaders.\n\n// A-Frame properties to three.js uniform types.\nvar propertyToThreeMapping = {\n  array: 'v3',\n  color: 'v3',\n  int: 'i',\n  number: 'f',\n  map: 't',\n  time: 'f',\n  vec2: 'v2',\n  vec3: 'v3',\n  vec4: 'v4'\n};\n\n/**\n * Shader class definition.\n *\n * Shaders extend the material component API so you can create your own library\n * of customized materials.\n *\n */\nexport var Shader = function () {};\n\nShader.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  vertexShader:\n    'void main() {' +\n      'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);' +\n    '}',\n\n  fragmentShader:\n    'void main() {' +\n      'gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);' +\n    '}',\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.uniforms = this.initUniforms();\n    this.material = new (this.raw ? THREE.RawShaderMaterial : THREE.ShaderMaterial)({\n      uniforms: this.uniforms,\n      glslVersion: this.raw || this.glsl3 ? THREE.GLSL3 : null,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader\n    });\n    return this.material;\n  },\n\n  initUniforms: function () {\n    var key;\n    var schema = this.schema;\n    var variables = {};\n    var varType;\n\n    for (key in schema) {\n      if (schema[key].is !== 'uniform') { continue; }\n      varType = propertyToThreeMapping[schema[key].type];\n      variables[key] = {\n        type: varType,\n        value: undefined  // Let update handle setting these.\n      };\n    }\n    return variables;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated material data changes.\n   *\n   * @param {object} data - New material data.\n   */\n  update: function (data) {\n    var key;\n    var materialKey;\n    var schema = this.schema;\n    var uniforms = this.uniforms;\n\n    for (key in data) {\n      if (!schema[key] || schema[key].is !== 'uniform') { continue; }\n\n      if (schema[key].type === 'map') {\n        // If data unchanged, get out early.\n        if (!uniforms[key] || uniforms[key].value === data[key]) { continue; }\n\n        // Special handling is needed for textures.\n        materialKey = '_texture_' + key;\n\n        // We can't actually set the variable correctly until we've loaded the texture.\n        this.setMapOnTextureLoad(uniforms, key, materialKey);\n\n        // Kick off the texture update now that handler is added.\n        utils.material.updateMapMaterialFromData(materialKey, key, this, data);\n        continue;\n      }\n      uniforms[key].value = this.parseValue(schema[key].type, data[key]);\n      uniforms[key].needsUpdate = true;\n    }\n  },\n\n  parseValue: function (type, value) {\n    var color;\n    switch (type) {\n      case 'vec2': {\n        return new THREE.Vector2(value.x, value.y);\n      }\n      case 'vec3': {\n        return new THREE.Vector3(value.x, value.y, value.z);\n      }\n      case 'vec4': {\n        return new THREE.Vector4(value.x, value.y, value.z, value.w);\n      }\n      case 'color': {\n        color = new THREE.Color(value);\n        return new THREE.Vector3(color.r, color.g, color.b);\n      }\n      default: {\n        return value;\n      }\n    }\n  },\n\n  setMapOnTextureLoad: function (uniforms, key, materialKey) {\n    var self = this;\n    this.el.addEventListener('materialtextureloaded', function () {\n      uniforms[key].value = self.material[materialKey];\n      uniforms[key].needsUpdate = true;\n    });\n  }\n};\n\n/**\n * Registers a shader to A-Frame.\n *\n * @param {string} name - shader name.\n * @param {object} definition - shader property and methods.\n * @returns {object} Shader.\n */\nexport function registerShader (name, definition) {\n  var NewShader;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (shaders[name]) {\n    throw new Error('The shader ' + name + ' has already been registered');\n  }\n  NewShader = function () { Shader.call(this); };\n  NewShader.prototype = Object.create(Shader.prototype, proto);\n  NewShader.prototype.name = name;\n  NewShader.prototype.constructor = NewShader;\n  shaders[name] = {\n    Shader: NewShader,\n    schema: processSchema(NewShader.prototype.schema)\n  };\n  shaderNames.push(name);\n  return NewShader;\n}\n", "/* global customElements */\nimport * as THREE from 'three';\nimport { ANode } from './a-node.js';\nimport { debug } from '../utils/index.js';\n\nvar fileLoader = new THREE.FileLoader();\nvar warn = debug('core:a-assets:warn');\n\n/**\n * Asset management system. Handles blocking on asset loading.\n */\nclass AAssets extends ANode {\n  constructor () {\n    super();\n    this.isAssets = true;\n    this.fileLoader = fileLoader;\n    this.timeout = null;\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    var i;\n    var loaded = [];\n    var mediaEl;\n    var mediaEls;\n    var imgEl;\n    var imgEls;\n    var timeout;\n    var children;\n\n    super.doConnectedCallback();\n\n    if (!this.parentNode.isScene) {\n      throw new Error('<a-assets> must be a child of a <a-scene>.');\n    }\n\n    // Wait for <img>s.\n    imgEls = this.querySelectorAll('img');\n    for (i = 0; i < imgEls.length; i++) {\n      imgEl = fixUpMediaElement(imgEls[i]);\n      loaded.push(new Promise(function (resolve, reject) {\n        // Set in cache because we won't be needing to call three.js loader if we have.\n        // a loaded media element.\n        THREE.Cache.add(imgEls[i].getAttribute('src'), imgEl);\n        if (imgEl.complete) {\n          resolve();\n          return;\n        }\n        imgEl.onload = resolve;\n        imgEl.onerror = reject;\n      }));\n    }\n\n    // Wait for <audio>s and <video>s.\n    mediaEls = this.querySelectorAll('audio, video');\n    for (i = 0; i < mediaEls.length; i++) {\n      mediaEl = fixUpMediaElement(mediaEls[i]);\n      if (!mediaEl.src && !mediaEl.srcObject) {\n        warn('Audio/video asset has neither `src` nor `srcObject` attributes.');\n      }\n      loaded.push(mediaElementLoaded(mediaEl));\n    }\n\n    // Wait for <a-asset-item>s\n    children = this.getChildren();\n    children.forEach(function (child) {\n      if (!child.isAssetItem || !child.hasAttribute('src')) { return; }\n\n      loaded.push(new Promise(function waitForLoaded (resolve, reject) {\n        if (child.hasLoaded) { return resolve(); }\n        child.addEventListener('loaded', resolve);\n        child.addEventListener('error', reject);\n      }));\n    });\n\n    // Trigger loaded for scene to start rendering.\n    Promise.allSettled(loaded).then(function () {\n      // Make sure the timeout didn't occur.\n      if (self.timeout === null) { return; }\n      self.load();\n    });\n\n    // Timeout to start loading anyways.\n    timeout = parseInt(this.getAttribute('timeout'), 10) || 3000;\n    this.timeout = setTimeout(function () {\n      // Make sure the loading didn't complete.\n      if (self.hasLoaded) { return; }\n      warn('Asset loading timed out in', timeout, 'ms');\n      self.timeout = null;\n      self.emit('timeout');\n      self.load();\n    }, timeout);\n  }\n\n  disconnectedCallback () {\n    super.disconnectedCallback();\n    if (this.timeout) { clearTimeout(this.timeout); }\n  }\n\n  load () {\n    // Filter out all children, as waiting already took place in doConnectedCallback.\n    super.load.call(this, null, function () { return false; });\n  }\n}\n\ncustomElements.define('a-assets', AAssets);\n\n/**\n * Preload using XHRLoader for any type of asset.\n */\nclass AAssetItem extends ANode {\n  constructor () {\n    super();\n    this.data = null;\n    this.isAssetItem = true;\n  }\n\n  connectedCallback () {\n    var self = this;\n    var src = this.getAttribute('src');\n    fileLoader.setResponseType(\n      this.getAttribute('response-type') || inferResponseType(src));\n    fileLoader.load(src, function handleOnLoad (response) {\n      self.data = response;\n      ANode.prototype.load.call(self);\n    }, function handleOnProgress (xhr) {\n      self.emit('progress', {\n        loadedBytes: xhr.loaded,\n        totalBytes: xhr.total,\n        xhr: xhr\n      });\n    }, function handleOnError (xhr) {\n      self.emit('error', {xhr: xhr}, false);\n    });\n  }\n}\n\ncustomElements.define('a-asset-item', AAssetItem);\n\n/**\n * Create a Promise that resolves once the media element has finished buffering.\n *\n * @param {Element} el - HTMLMediaElement.\n * @returns {Promise}\n */\nfunction mediaElementLoaded (el) {\n  if (!el.hasAttribute('autoplay') && el.getAttribute('preload') !== 'auto') {\n    return;\n  }\n\n  // If media specifies autoplay or preload, wait until media is completely buffered.\n  return new Promise(function (resolve, reject) {\n    if (el.readyState === 4) { return resolve(); }  // Already loaded.\n    if (el.error) { return reject(); }  // Error.\n\n    el.addEventListener('loadeddata', checkProgress, false);\n    el.addEventListener('progress', checkProgress, false);\n    el.addEventListener('error', reject, false);\n\n    function checkProgress () {\n      // Add up the seconds buffered.\n      var secondsBuffered = 0;\n      for (var i = 0; i < el.buffered.length; i++) {\n        secondsBuffered += el.buffered.end(i) - el.buffered.start(i);\n      }\n\n      // Compare seconds buffered to media duration.\n      if (secondsBuffered >= el.duration) {\n        // Set in cache because we won't be needing to call three.js loader if we have.\n        // a loaded media element.\n        // Store video elements only. three.js loader is used for audio elements.\n        // See assetParse too.\n        if (el.tagName === 'VIDEO') {\n          THREE.Cache.add(el.getAttribute('src'), el);\n        }\n        resolve();\n      }\n    }\n  });\n}\n\n/**\n * Automatically add attributes to media elements where convenient.\n * crossorigin, playsinline.\n */\nfunction fixUpMediaElement (mediaEl) {\n  // Cross-origin.\n  var newMediaEl = setCrossOrigin(mediaEl);\n\n  // Plays inline for mobile.\n  if (newMediaEl.tagName && newMediaEl.tagName.toLowerCase() === 'video') {\n    newMediaEl.setAttribute('playsinline', '');\n    newMediaEl.setAttribute('webkit-playsinline', '');\n  }\n\n  if (newMediaEl !== mediaEl) {\n    mediaEl.parentNode.appendChild(newMediaEl);\n    mediaEl.parentNode.removeChild(mediaEl);\n  }\n  return newMediaEl;\n}\n\n/**\n * Automatically set `crossorigin` if not defined on the media element.\n * If it is not defined, we must create and re-append a new media element <img> and\n * have the browser re-request it with `crossorigin` set.\n *\n * @param {Element} mediaEl - Media element (e.g., <img>, <audio>, <video>).\n * @returns {Element} Media element to be used to listen to for loaded events.\n */\nfunction setCrossOrigin (mediaEl) {\n  var newMediaEl;\n  var src;\n\n  // Already has crossorigin set.\n  if (mediaEl.hasAttribute('crossorigin')) { return mediaEl; }\n\n  src = mediaEl.getAttribute('src');\n\n  if (src !== null) {\n    // Does not have protocol.\n    if (src.indexOf('://') === -1) { return mediaEl; }\n\n    // Determine if cross origin is actually needed.\n    if (extractDomain(src) === window.location.host) { return mediaEl; }\n  }\n\n  warn('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. ' +\n       'A-Frame will re-request the asset with `crossorigin` attribute set. ' +\n       'Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)', src);\n  mediaEl.crossOrigin = 'anonymous';\n  newMediaEl = mediaEl.cloneNode(true);\n  return newMediaEl;\n}\n\n/**\n * Extract domain out of URL.\n *\n * @param {string} url\n * @returns {string}\n */\nfunction extractDomain (url) {\n  // Find and remove protocol (e.g., http, ftp, etc.) to get domain.\n  var domain = url.indexOf('://') > -1 ? url.split('/')[2] : url.split('/')[0];\n\n  // Find and remove port number.\n  return domain.substring(0, domain.indexOf(':'));\n}\n\n/**\n * Infer response-type attribute from src.\n * Default is text (default XMLHttpRequest.responseType)\n * and arraybuffer for .glb files.\n *\n * @param {string} src\n * @returns {string}\n */\nexport function inferResponseType (src) {\n  var fileName = getFileNameFromURL(src);\n  var dotLastIndex = fileName.lastIndexOf('.');\n  if (dotLastIndex >= 0) {\n    var extension = fileName.slice(dotLastIndex, src.search(/\\?|#|$/));\n    if (extension === '.glb') {\n      return 'arraybuffer';\n    }\n  }\n  return 'text';\n}\n\n/**\n * Extract filename from URL\n *\n * @param {string} url\n * @returns {string}\n */\nexport function getFileNameFromURL (url) {\n  var parser = document.createElement('a');\n  parser.href = url;\n  var query = parser.search.replace(/^\\?/, '');\n  var filePath = url.replace(query, '').replace('?', '');\n  return filePath.substring(filePath.lastIndexOf('/') + 1);\n}\n", "/* global customElements, HTMLElement */\nimport { debug } from '../utils/index.js';\n\nvar warn = debug('core:cubemap:warn');\n\n/**\n * Cubemap element that handles validation and exposes list of six image sources (URL or <img>).\n * Does not listen to updates.\n */\nclass ACubeMap extends HTMLElement {\n  /**\n   * Calculates this.srcs.\n   */\n\n  constructor (self) {\n    self = super(self);\n    return self;\n  }\n\n  onReadyStateChange () {\n    if (document.readyState === 'complete') {\n      this.doConnectedCallback();\n    }\n  }\n\n  connectedCallback () {\n    // Defer if DOM is not ready.\n    if (document.readyState !== 'complete') {\n      document.addEventListener('readystatechange', this.onReadyStateChange.bind(this));\n      return;\n    }\n    ACubeMap.prototype.doConnectedCallback.call(this);\n  }\n\n  doConnectedCallback () {\n    this.srcs = this.validate();\n  }\n\n  /**\n   * Checks for exactly six elements with [src].\n   * When <img>s are used they will be prefetched.\n   *\n   * @returns {Array<string|Element>|undefined} six URLs or <img> elements if valid, else undefined.\n   */\n  validate () {\n    var elements = this.querySelectorAll('[src]');\n    var i;\n    var srcs = [];\n    if (elements.length === 6) {\n      for (i = 0; i < elements.length; i++) {\n        if (elements[i].tagName === 'IMG') {\n          srcs.push(elements[i]);\n        } else {\n          srcs.push(elements[i].getAttribute('src'));\n        }\n      }\n      return srcs;\n    }\n    // Else if there are not six elements, throw a warning.\n    warn(\n      '<a-cubemap> did not contain exactly six elements each with a ' +\n      '`src` attribute.');\n  }\n}\n\ncustomElements.define('a-cubemap', ACubeMap);\n", "/* global customElements */\nimport { ANode } from './a-node.js';\nimport { components } from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as styleParser from '../utils/styleParser.js';\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\n\n/**\n * @property {object} componentCache - Cache of pre-parsed values. An object where the keys\n *         are component names and the values are already parsed by the component.\n * @property {object} rawAttributeCache - Cache of the raw attribute values.\n */\nclass AMixin extends ANode {\n  constructor () {\n    super();\n    this.componentCache = {};\n    this.rawAttributeCache = {};\n    this.isMixin = true;\n  }\n\n  doConnectedCallback () {\n    super.doConnectedCallback();\n\n    this.sceneEl = this.closestScene();\n    this.id = this.getAttribute('id');\n    this.cacheAttributes();\n    this.updateEntities();\n    this.load();\n  }\n\n  attributeChangedCallback (attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n    this.cacheAttribute(attr, newVal);\n    this.updateEntities();\n  }\n\n  /**\n   * setAttribute that parses and caches component values.\n   */\n  setAttribute (attr, value) {\n    window.HTMLElement.prototype.setAttribute.call(this, attr, value);\n    this.cacheAttribute(attr, value);\n  }\n\n  /**\n   * If `attr` is a component, then parse the value using the schema and store it.\n   */\n  cacheAttribute (attr, value) {\n    var component;\n    var componentName;\n\n    // Get component data.\n    componentName = utils.split(attr, MULTIPLE_COMPONENT_DELIMITER)[0];\n    component = components[componentName];\n    if (value === undefined) {\n      value = window.HTMLElement.prototype.getAttribute.call(this, attr);\n    }\n\n    this.rawAttributeCache[attr] = value;\n    if (!component) { return; }\n    this.componentCache[attr] = this.parseComponentAttrValue(component, value);\n  }\n\n  /**\n   * Given an HTML attribute value parses the string based on the component schema.\n   * To avoid double parsing of strings when mixed into the actual component,\n   * we store the original instead of the parsed one.\n   *\n   * @param {object} component - The component to parse for.\n   * @param {string} attrValue - HTML attribute value.\n   */\n  parseComponentAttrValue (component, attrValue) {\n    var parsedValue;\n    if (typeof attrValue !== 'string') { return attrValue; }\n    if (component.isSingleProperty) {\n      parsedValue = component.schema.parse(attrValue);\n      if (typeof parsedValue === 'string') { parsedValue = attrValue; }\n    } else {\n      // Use style parser as the values will be parsed once mixed in.\n      // Furthermore parsing might fail with dynamic schema's.\n      parsedValue = styleParser.parse(attrValue);\n    }\n    return parsedValue;\n  }\n\n  /**\n   * If `attr` is a component, then grab pre-parsed value from the cache.\n   * Else do a normal getAttribute.\n   */\n  getAttribute (attr) {\n    return this.componentCache[attr] ||\n      window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Parse and cache every component defined on the mixin.\n   */\n  cacheAttributes () {\n    var attributes = this.attributes;\n    var attrName;\n    var i;\n    for (i = 0; i < attributes.length; i++) {\n      attrName = attributes[i].name;\n      this.cacheAttribute(attrName);\n    }\n  }\n\n  /**\n   * For entities that already have been loaded by the time the mixin was attached, tell\n   * those entities to register the mixin and refresh their component data.\n   */\n  updateEntities () {\n    var entity;\n    var entities;\n    var i;\n\n    if (!this.sceneEl) { return; }\n\n    entities = this.sceneEl.querySelectorAll('[mixin~=' + this.id + ']');\n    for (i = 0; i < entities.length; i++) {\n      entity = entities[i];\n      if (!entity.hasLoaded || entity.isMixin) { continue; }\n      entity.mixinUpdate(this.id);\n    }\n  }\n}\n\ncustomElements.define('a-mixin', AMixin);\n", "import * as THREE from 'three';\nimport anime from 'super-animejs';\nimport { registerComponent, components } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = 'color';\nvar PROP_POSITION = 'position';\nvar PROP_ROTATION = 'rotation';\nvar PROP_SCALE = 'scale';\nvar STRING_COMPONENTS = 'components';\nvar STRING_OBJECT3D = 'object3D';\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nexport var Component = registerComponent('animation', {\n  schema: {\n    autoplay: {default: true},\n    delay: {default: 0},\n    dir: {default: ''},\n    dur: {default: 1000},\n    easing: {default: 'easeInQuad'},\n    elasticity: {default: 400},\n    enabled: {default: true},\n    from: {default: ''},\n    loop: {\n      default: 0,\n      parse: function (value) {\n        // Boolean or integer.\n        if (value === true || value === 'true') { return true; }\n        if (value === false || value === 'false') { return false; }\n        return parseInt(value, 10);\n      }\n    },\n    property: {default: ''},\n    startEvents: {type: 'array'},\n    pauseEvents: {type: 'array'},\n    resumeEvents: {type: 'array'},\n    round: {default: false},\n    to: {default: ''},\n    type: {default: ''},\n    isRawProperty: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.eventDetail = {name: this.attrName};\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function () {\n        self.animationIsPlaying = false;\n        self.el.emit('animationcomplete', self.eventDetail, false);\n        if (self.id) {\n          self.el.emit('animationcomplete__' + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function (oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) { return; }\n\n    if (!data.property) { return; }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function (t, dt) {\n    if (!this.animationIsPlaying) { return; }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function () {\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  pause: function () {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function () {\n    if (!this.paused) { return; }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function () {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n    this.animation.began = true;\n\n    this.removeEventListeners();\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || data.startEvents && data.startEvents.length) { return; }\n\n    // Delay animation.\n    if (data.delay) {\n      setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function () {\n    this.updateConfig();\n    this.animation.began = true;\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit('animationbegin', this.eventDetail, false);\n  },\n\n  pauseAnimation: function () {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function () {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function () {\n    if (!this.data.enabled) { return; }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === '' ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r &&\n            value.g === lastValue.g &&\n            value.b === lastValue.b) { return; }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === '') {\n      // Infer from.\n      from = isRawProperty(data)\n        ? getRawProperty(el, data.property)\n        : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === 'true' || data.to === 'false' ||\n                data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === 'true' || data.from === true ? 1 : 0;\n      to = data.to === 'true' || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function () {\n      var lastValue;\n\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaneously even if the value has not changed. Also better for perf\n        // anyway.\n        if (value === lastValue) { return; }\n        lastValue = value;\n\n        if (isBoolean) { value = value >= 1; }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n    var split = splitDot(data.property);\n    var property = split[0] === 'object3D' ? split[1] : split[0];\n\n    // Parse coordinates.\n    from = data.from !== ''\n      ? utils.coordinates.parse(data.from)  // If data.from defined, use that.\n      : getComponentProperty(el, property);  // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (property === PROP_POSITION || property === PROP_ROTATION ||\n        property === PROP_SCALE) {\n      config.update = (function () {\n        var lastValue = {};\n        return function (anim) {\n          var value = anim.animatables[0].target;\n\n          // For animation timeline.\n          if (value.x === lastValue.x &&\n              value.y === lastValue.y &&\n              value.z === lastValue.z) { return; }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[property].set(value.x, value.y, value.z);\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value = anim.animatables[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x &&\n            value.y === lastValue.y &&\n            value.z === lastValue.z) { return; }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function () {\n    var propType;\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === 'vec2' || propType === 'vec3' || propType === 'vec4') {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function (cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== '') { return false; }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) { return false; }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) { return false; }\n\n    el.addEventListener('componentinitialized', function wait (evt) {\n      if (evt.detail.name !== componentName) { return; }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener('componentinitialized', wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function () {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) { continue; }\n      if (component.name !== 'animation') { continue; }\n      if (!component.animationIsPlaying) { continue; }\n      if (component.data.property !== this.data.property) { continue; }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  setColorConfig: function (from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType (el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split('.');\n  // Object3D.\n  if (split[0] === 'object3D' && !split[2]) {\n    if (split[1] === 'position' ||\n        split[1] === 'rotation' ||\n        split[1] === 'scale') {\n      return 'vec3';\n    }\n  }\n\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) { return null; }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) { return null; }\n\n  // Multi-prop.\n  if (propertyName) { return component.schema[propertyName].type; }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians (obj) {\n  obj.x = THREE.MathUtils.degToRad(obj.x);\n  obj.y = THREE.MathUtils.degToRad(obj.y);\n  obj.z = THREE.MathUtils.degToRad(obj.z);\n}\n\nfunction addEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty (el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  if (value === undefined) {\n    console.log(el);\n    throw new Error('[animation] property (' + path + ') could not be found');\n  }\n  return value;\n}\n\nfunction setRawProperty (el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith('object3D.rotation')) {\n    value = THREE.MathUtils.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) { targetValue = targetValue[split[i]]; }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if ('r' in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot (path) {\n  if (path in splitCache) { return splitCache[path]; }\n  splitCache[path] = path.split('.');\n  return splitCache[path];\n}\n\nfunction isRawProperty (data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) ||\n         data.property.startsWith(STRING_OBJECT3D);\n}\n", "/* global XRRigidTransform, localStorage */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:anchored:warn');\n\n/**\n * Anchored component.\n * Feature only available in browsers that implement the WebXR anchors module.\n * Once anchored the entity remains to a fixed position in real-world space.\n * If the anchor is persistent, the anchor positioned remains across sessions or until the browser data is cleared.\n */\nexport var Component = registerComponent('anchored', {\n  schema: {\n    persistent: {default: false}\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('anchors') === -1) {\n      optionalFeaturesArray.push('anchors');\n      this.el.sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.auxQuaternion = new THREE.Quaternion();\n\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n  },\n\n  onEnterVR: function () {\n    this.anchor = undefined;\n    this.requestPersistentAnchorPending = this.data.persistent;\n    this.requestAnchorPending = !this.data.persistent;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var refSpace;\n    var pose;\n    var object3D = this.el.object3D;\n\n    if ((!sceneEl.is('ar-mode') && !sceneEl.is('vr-mode'))) { return; }\n    if (!this.anchor && this.requestPersistentAnchorPending) { this.restorePersistentAnchor(); }\n    if (!this.anchor && this.requestAnchorPending) { this.createAnchor(); }\n    if (!this.anchor) { return; }\n\n    frame = sceneEl.frame;\n    refSpace = xrManager.getReferenceSpace();\n\n    pose = frame.getPose(this.anchor.anchorSpace, refSpace);\n    // Apply position and orientation, leave scale as-is (see aframevr/aframe#5630)\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n  },\n\n  createAnchor: async function createAnchor (position, quaternion) {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var referenceSpace;\n    var anchorPose;\n    var anchor;\n    var object3D = this.el.object3D;\n\n    position = position || object3D.position;\n    quaternion = quaternion || this.auxQuaternion.setFromEuler(object3D.rotation);\n\n    if (!anchorsSupported(sceneEl)) {\n      warn('This browser doesn\\'t support the WebXR anchors module');\n      return;\n    }\n\n    if (this.anchor) { this.deleteAnchor(); }\n\n    frame = sceneEl.frame;\n    referenceSpace = xrManager.getReferenceSpace();\n    anchorPose = new XRRigidTransform(\n      {\n        x: position.x,\n        y: position.y,\n        z: position.z\n      },\n      {\n        x: quaternion.x,\n        y: quaternion.y,\n        z: quaternion.z,\n        w: quaternion.w\n      });\n\n    this.requestAnchorPending = false;\n    anchor = await frame.createAnchor(anchorPose, referenceSpace);\n    if (this.data.persistent) {\n      if (this.el.id) {\n        this.persistentHandle = await anchor.requestPersistentHandle();\n        localStorage.setItem(this.el.id, this.persistentHandle);\n      } else {\n        warn('The anchor won\\'t be persisted because the entity has no assigned id.');\n      }\n    }\n    sceneEl.object3D.attach(this.el.object3D);\n    this.anchor = anchor;\n  },\n\n  restorePersistentAnchor: async function restorePersistentAnchor () {\n    var xrManager = this.el.sceneEl.renderer.xr;\n    var session = xrManager.getSession();\n    var persistentAnchors = session.persistentAnchors;\n    var storedPersistentHandle;\n    this.requestPersistentAnchorPending = false;\n    if (!this.el.id) {\n      warn('The entity associated to the persistent anchor cannot be retrieved because it doesn\\'t have an assigned id.');\n      this.requestAnchorPending = true;\n      return;\n    }\n    if (persistentAnchors) {\n      storedPersistentHandle = localStorage.getItem(this.el.id);\n      for (var i = 0; i < persistentAnchors.length; ++i) {\n        if (storedPersistentHandle !== persistentAnchors[i]) { continue; }\n        this.anchor = await session.restorePersistentAnchor(persistentAnchors[i]);\n        if (this.anchor) { this.persistentHandle = persistentAnchors[i]; }\n        break;\n      }\n      if (!this.anchor) { this.requestAnchorPending = true; }\n    } else {\n      this.requestPersistentAnchorPending = true;\n    }\n  },\n\n  deleteAnchor: function () {\n    var xrManager;\n    var session;\n    var anchor = this.anchor;\n\n    if (!anchor) { return; }\n    xrManager = this.el.sceneEl.renderer.xr;\n    session = xrManager.getSession();\n\n    anchor.delete();\n    this.el.sceneEl.object3D.add(this.el.object3D);\n    if (this.persistentHandle) { session.deletePersistentAnchor(this.persistentHandle); }\n    this.anchor = undefined;\n  }\n});\n\nfunction anchorsSupported (sceneEl) {\n  var xrManager = sceneEl.renderer.xr;\n  var session = xrManager.getSession();\n  return (session && session.restorePersistentAnchor);\n}\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Camera component.\n * Pairs along with camera system to handle tracking the active camera.\n */\nexport var Component = registerComponent('camera', {\n  schema: {\n    active: {default: true},\n    far: {default: 10000},\n    fov: {default: 80, min: 0},\n    near: {default: 0.005, min: 0},\n    spectator: {default: false},\n    zoom: {default: 1, min: 0}\n  },\n\n  /**\n   * Initialize three.js camera and add it to the entity.\n   * Add reference from scene to this entity as the camera.\n   */\n  init: function () {\n    var camera;\n    var el = this.el;\n\n    // Create camera.\n    camera = this.camera = new THREE.PerspectiveCamera();\n    el.setObject3D('camera', camera);\n  },\n\n  /**\n   * Update three.js camera.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var camera = this.camera;\n\n    // Update properties.\n    camera.aspect = data.aspect || (window.innerWidth / window.innerHeight);\n    camera.far = data.far;\n    camera.fov = data.fov;\n    camera.near = data.near;\n    camera.zoom = data.zoom;\n    camera.updateProjectionMatrix();\n\n    this.updateActiveCamera(oldData);\n    this.updateSpectatorCamera(oldData);\n  },\n\n  updateActiveCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // Active property did not change.\n    if (oldData && oldData.active === data.active || data.spectator) { return; }\n\n    // If `active` property changes, or first update, handle active camera with system.\n    if (data.active && system.activeCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setActiveCamera(el);\n    } else if (!data.active && system.activeCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableActiveCamera();\n    }\n  },\n\n  updateSpectatorCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // spectator property did not change.\n    if (oldData && oldData.spectator === data.spectator) { return; }\n\n    // If `spectator` property changes, or first update, handle spectator camera with system.\n    if (data.spectator && system.spectatorCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setSpectatorCamera(el);\n    } else if (!data.spectator && system.spectatorCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableSpectatorCamera();\n    }\n  },\n\n  /**\n   * Remove camera on remove (callback).\n   */\n  remove: function () {\n    this.el.removeObject3D('camera');\n  }\n});\n", "/* global MouseEvent, TouchEvent */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar EVENTS = {\n  CLICK: 'click',\n  FUSING: 'fusing',\n  MOUSEENTER: 'mouseenter',\n  MOUSEDOWN: 'mousedown',\n  MOUSELEAVE: 'mouseleave',\n  MOUSEUP: 'mouseup'\n};\n\nvar STATES = {\n  FUSING: 'cursor-fusing',\n  HOVERING: 'cursor-hovering',\n  HOVERED: 'cursor-hovered'\n};\n\nvar CANVAS_EVENTS = {\n  DOWN: ['mousedown', 'touchstart'],\n  UP: ['mouseup', 'touchend']\n};\n\nvar WEBXR_EVENTS = {\n  DOWN: ['selectstart'],\n  UP: ['selectend']\n};\n\nvar CANVAS_HOVER_CLASS = 'a-mouse-cursor-hover';\n\n/**\n * Cursor component. Applies the raycaster component specifically for starting the raycaster\n * from the camera and pointing from camera's facing direction, and then only returning the\n * closest intersection. Cursor can be fine-tuned by setting raycaster properties.\n *\n * @member {object} fuseTimeout - Timeout to trigger fuse-click.\n * @member {Element} cursorDownEl - Entity that was last mousedowned during current click.\n * @member {object} intersection - Attributes of the current intersection event, including\n *         3D- and 2D-space coordinates. See: http://threejs.org/docs/api/core/Raycaster.html\n * @member {Element} intersectedEl - Currently-intersected entity. Used to keep track to\n *         emit events when unintersecting.\n */\nexport var Component = registerComponent('cursor', {\n  dependencies: ['raycaster'],\n\n  schema: {\n    downEvents: {default: []},\n    fuse: {default: utils.device.isMobile()},\n    fuseTimeout: {default: 1500, min: 0},\n    mouseCursorStylesEnabled: {default: true},\n    upEvents: {default: []},\n    rayOrigin: {default: 'entity', oneOf: ['mouse', 'entity', 'xrselect']}\n  },\n\n  after: ['tracked-controls'],\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.fuseTimeout = undefined;\n    this.cursorDownEl = null;\n    this.intersectedEl = null;\n    this.canvasBounds = document.body.getBoundingClientRect();\n    this.isCursorDown = false;\n    this.activeXRInput = null;\n\n    // Debounce.\n    this.updateCanvasBounds = utils.debounce(function updateCanvasBounds () {\n      self.canvasBounds = self.el.sceneEl.canvas.getBoundingClientRect();\n    }, 500);\n\n    this.eventDetail = {};\n    this.intersectedEventDetail = {cursorEl: this.el};\n\n    // Bind methods.\n    this.onCursorDown = this.onCursorDown.bind(this);\n    this.onCursorUp = this.onCursorUp.bind(this);\n    this.onIntersection = this.onIntersection.bind(this);\n    this.onIntersectionCleared = this.onIntersectionCleared.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  update: function (oldData) {\n    var rayOrigin = this.data.rayOrigin;\n    if (rayOrigin === oldData.rayOrigin) { return; }\n    if (rayOrigin === 'entity') { this.resetRaycaster(); }\n    this.updateMouseEventListeners();\n    // Update the WebXR event listeners if needed.\n    // This handles the cases a cursor is created or has its rayOrigin changed during an XR session.\n    // In the case the cursor is created before we have an active XR session, it does not add the WebXR event listeners here (addWebXREventListeners is a no-op without xrSession), upon onEnterVR they are added.\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n    if (oldData.rayOrigin === 'xrselect' || oldData.rayOrigin === 'entity') {\n      this.removeWebXREventListeners();\n    }\n  },\n\n  tick: function () {\n    // Update on frame to allow someone to select and mousemove\n    var frame = this.el.sceneEl.frame;\n    var inputSource = this.activeXRInput;\n    if (this.data.rayOrigin === 'xrselect' && frame && inputSource) {\n      this.onMouseMove({\n        frame: frame,\n        inputSource: inputSource,\n        type: 'fakeselectevent'\n      });\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeState(STATES.HOVERING);\n    el.removeState(STATES.FUSING);\n    clearTimeout(this.fuseTimeout);\n    if (this.intersectedEl) { this.intersectedEl.removeState(STATES.HOVERED); }\n    this.removeEventListeners();\n  },\n\n  addEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    function addCanvasListeners () {\n      canvas = el.sceneEl.canvas;\n      if (data.downEvents.length || data.upEvents.length) { return; }\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.addEventListener(downEvent, self.onCursorDown, {passive: false});\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.addEventListener(upEvent, self.onCursorUp, {passive: false});\n      });\n    }\n\n    canvas = el.sceneEl.canvas;\n    if (canvas) {\n      addCanvasListeners();\n    } else {\n      el.sceneEl.addEventListener('render-target-loaded', addCanvasListeners);\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.addEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.addEventListener(upEvent, self.onCursorUp);\n    });\n    el.addEventListener('raycaster-intersection', this.onIntersection);\n    el.addEventListener('raycaster-closest-entity-changed', this.onIntersection);\n\n    el.addEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n\n    el.sceneEl.addEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    window.addEventListener('resize', this.updateCanvasBounds);\n    window.addEventListener('scroll', this.updateCanvasBounds);\n\n    this.updateMouseEventListeners();\n  },\n\n  removeEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    canvas = el.sceneEl.canvas;\n    if (canvas && !data.downEvents.length && !data.upEvents.length) {\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.removeEventListener(downEvent, self.onCursorDown);\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.removeEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.removeEventListener(upEvent, self.onCursorUp);\n    });\n    el.removeEventListener('raycaster-intersection', this.onIntersection);\n    el.removeEventListener('raycaster-closest-entity-changed', this.onIntersection);\n    el.removeEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchstart', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n\n    el.sceneEl.removeEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    window.removeEventListener('resize', this.updateCanvasBounds);\n    window.removeEventListener('scroll', this.updateCanvasBounds);\n\n    this.removeWebXREventListeners();\n  },\n\n  updateMouseEventListeners: function () {\n    var canvas;\n    var el = this.el;\n\n    canvas = el.sceneEl.canvas;\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n    el.setAttribute('raycaster', 'useWorldCoordinates', false);\n    if (this.data.rayOrigin !== 'mouse') { return; }\n    canvas.addEventListener('mousemove', this.onMouseMove);\n    canvas.addEventListener('touchmove', this.onMouseMove, {passive: false});\n    el.setAttribute('raycaster', 'useWorldCoordinates', true);\n    this.updateCanvasBounds();\n  },\n\n  resetRaycaster: function () {\n    this.el.setAttribute('raycaster', {\n      direction: new THREE.Vector3().set(0, 0, -1),\n      origin: new THREE.Vector3()\n    });\n  },\n\n  addWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.addEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.addEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  removeWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.removeEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  onMouseMove: (function () {\n    var direction = new THREE.Vector3();\n    var mouse = new THREE.Vector2();\n    var origin = new THREE.Vector3();\n    var rayCasterConfig = {origin: origin, direction: direction};\n\n    return function (evt) {\n      var bounds = this.canvasBounds;\n      var camera = this.el.sceneEl.camera;\n      var cameraElParent;\n      var left;\n      var point;\n      var top;\n\n      var frame;\n      var inputSource;\n      var referenceSpace;\n      var pose;\n      var transform;\n\n      camera.parent.updateMatrixWorld();\n\n      // Calculate mouse position based on the canvas element\n      if (evt.type === 'touchmove' || evt.type === 'touchstart') {\n        // Track the first touch for simplicity.\n        point = evt.touches.item(0);\n      } else {\n        point = evt;\n      }\n\n      left = point.clientX - bounds.left;\n      top = point.clientY - bounds.top;\n      mouse.x = (left / bounds.width) * 2 - 1;\n      mouse.y = -(top / bounds.height) * 2 + 1;\n\n      if (this.data.rayOrigin === 'xrselect' && (evt.type === 'selectstart' || evt.type === 'fakeselectevent')) {\n        frame = evt.frame;\n        inputSource = evt.inputSource;\n        referenceSpace = this.el.sceneEl.renderer.xr.getReferenceSpace();\n        pose = frame.getPose(inputSource.targetRaySpace, referenceSpace);\n        if (pose) {\n          transform = pose.transform;\n          direction.set(0, 0, -1);\n          direction.applyQuaternion(transform.orientation);\n          origin.copy(transform.position);\n\n          // Transform XRPose into world space\n          cameraElParent = camera.el.object3D.parent;\n          cameraElParent.localToWorld(origin);\n          direction.transformDirection(cameraElParent.matrixWorld);\n        }\n      } else if (evt.type === 'fakeselectout') {\n        direction.set(0, 1, 0);\n        origin.set(0, 9999, 0);\n      } else if (camera && camera.isPerspectiveCamera) {\n        origin.setFromMatrixPosition(camera.matrixWorld);\n        direction.set(mouse.x, mouse.y, 0.5).unproject(camera).sub(origin).normalize();\n      } else if (camera && camera.isOrthographicCamera) {\n        origin.set(mouse.x, mouse.y, (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera); // set origin in plane of camera\n        direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n      } else {\n        console.error('AFRAME.Raycaster: Unsupported camera type: ' + camera.type);\n      }\n\n      this.el.setAttribute('raycaster', rayCasterConfig);\n      if (evt.type === 'touchmove') { evt.preventDefault(); }\n    };\n  })(),\n\n  /**\n   * Trigger mousedown and keep track of the mousedowned entity.\n   */\n  onCursorDown: function (evt) {\n    this.isCursorDown = true;\n    // Raycast again for touch.\n    if (this.data.rayOrigin === 'mouse' && evt.type === 'touchstart') {\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n      evt.preventDefault();\n    }\n\n    if (this.data.rayOrigin === 'xrselect' && evt.type === 'selectstart') {\n      this.activeXRInput = evt.inputSource;\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n\n      // if something was tapped on don't do ar-hit-test things\n      if (\n        this.el.components.raycaster.intersectedEls.length &&\n        this.el.sceneEl.components['ar-hit-test'] !== undefined &&\n        this.el.sceneEl.getAttribute('ar-hit-test').enabled\n      ) {\n        // Cancel the ar-hit-test behaviours and disable the ar-hit-test\n        this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', false);\n        this.reenableARHitTest = true;\n      }\n    }\n\n    this.twoWayEmit(EVENTS.MOUSEDOWN, evt);\n    this.cursorDownEl = this.intersectedEl;\n  },\n\n  /**\n   * Trigger mouseup if:\n   * - Not fusing (mobile has no mouse).\n   * - Currently intersecting an entity.\n   * - Currently-intersected entity is the same as the one when mousedown was triggered,\n   *   in case user mousedowned one entity, dragged to another, and mouseupped.\n   */\n  onCursorUp: function (evt) {\n    if (!this.isCursorDown) { return; }\n    if (this.data.rayOrigin === 'xrselect' && this.activeXRInput !== evt.inputSource) { return; }\n\n    this.isCursorDown = false;\n\n    var data = this.data;\n    this.twoWayEmit(EVENTS.MOUSEUP, evt);\n\n    if (this.reenableARHitTest === true) {\n      this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', true);\n      this.reenableARHitTest = undefined;\n    }\n\n    // If intersected entity has changed since the cursorDown, still emit mouseUp on the\n    // previously cursorUp entity.\n    if (this.cursorDownEl && this.cursorDownEl !== this.intersectedEl) {\n      this.intersectedEventDetail.intersection = null;\n      this.cursorDownEl.emit(EVENTS.MOUSEUP, this.intersectedEventDetail);\n    }\n\n    if ((!data.fuse || data.rayOrigin === 'mouse' || data.rayOrigin === 'xrselect') &&\n        this.intersectedEl && this.cursorDownEl === this.intersectedEl) {\n      this.twoWayEmit(EVENTS.CLICK, evt);\n    }\n\n    // if the current xr input stops selecting then make the ray caster point somewhere else\n    if (data.rayOrigin === 'xrselect') {\n      this.onMouseMove({\n        type: 'fakeselectout'\n      });\n    }\n\n    this.activeXRInput = null;\n    this.cursorDownEl = null;\n    if (evt.type === 'touchend') { evt.preventDefault(); }\n  },\n\n  /**\n   * Handle intersection.\n   */\n  onIntersection: function (evt) {\n    var currentIntersection;\n    var cursorEl = this.el;\n    var index;\n    var intersectedEl;\n    var intersection;\n\n    // Select closest object, excluding the cursor.\n    index = evt.detail.els[0] === cursorEl ? 1 : 0;\n    intersection = evt.detail.intersections[index];\n    intersectedEl = evt.detail.els[index];\n\n    // If cursor is the only intersected object, ignore the event.\n    if (!intersectedEl) { return; }\n\n    // Already intersecting this entity.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Ignore events further away than active intersection.\n    if (this.intersectedEl) {\n      currentIntersection = this.el.components.raycaster.getIntersection(this.intersectedEl);\n      if (currentIntersection && currentIntersection.distance <= intersection.distance) { return; }\n    }\n\n    // Unset current intersection.\n    this.clearCurrentIntersection(true);\n\n    this.setIntersection(intersectedEl, intersection);\n  },\n\n  /**\n   * Handle intersection cleared.\n   */\n  onIntersectionCleared: function (evt) {\n    var clearedEls = evt.detail.clearedEls;\n    // Check if the current intersection has ended\n    if (clearedEls.indexOf(this.intersectedEl) === -1) { return; }\n    this.clearCurrentIntersection();\n  },\n\n  onEnterVR: function () {\n    var rayOrigin = this.data.rayOrigin;\n    this.clearCurrentIntersection(true);\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n  },\n\n  setIntersection: function (intersectedEl, intersection) {\n    var cursorEl = this.el;\n    var data = this.data;\n    var self = this;\n\n    // Already intersecting.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Set new intersection.\n    this.intersectedEl = intersectedEl;\n\n    // Hovering.\n    cursorEl.addState(STATES.HOVERING);\n    intersectedEl.addState(STATES.HOVERED);\n    this.twoWayEmit(EVENTS.MOUSEENTER);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.add(CANVAS_HOVER_CLASS);\n    }\n\n    // Begin fuse if necessary.\n    if (data.fuseTimeout === 0 || !data.fuse || data.rayOrigin === 'xrselect' || data.rayOrigin === 'mouse') { return; }\n    cursorEl.addState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.FUSING);\n    this.fuseTimeout = setTimeout(function fuse () {\n      cursorEl.removeState(STATES.FUSING);\n      self.twoWayEmit(EVENTS.CLICK);\n    }, data.fuseTimeout);\n  },\n\n  clearCurrentIntersection: function (ignoreRemaining) {\n    var index;\n    var intersection;\n    var intersections;\n    var cursorEl = this.el;\n\n    // Nothing to be cleared.\n    if (!this.intersectedEl) { return; }\n\n    // No longer hovering (or fusing).\n    this.intersectedEl.removeState(STATES.HOVERED);\n    cursorEl.removeState(STATES.HOVERING);\n    cursorEl.removeState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.MOUSELEAVE);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.remove(CANVAS_HOVER_CLASS);\n    }\n\n    // Unset intersected entity (after emitting the event).\n    this.intersectedEl = null;\n\n    // Clear fuseTimeout.\n    clearTimeout(this.fuseTimeout);\n\n    // Set intersection to another raycast element if any.\n    if (ignoreRemaining === true) { return; }\n    intersections = this.el.components.raycaster.intersections;\n    if (intersections.length === 0) { return; }\n    // Exclude the cursor.\n    index = intersections[0].object.el === cursorEl ? 1 : 0;\n    intersection = intersections[index];\n    if (!intersection) { return; }\n    this.setIntersection(intersection.object.el, intersection);\n  },\n\n  /**\n   * Helper to emit on both the cursor and the intersected entity (if exists).\n   */\n  twoWayEmit: function (evtName, originalEvent) {\n    var el = this.el;\n    var intersectedEl = this.intersectedEl;\n    var intersection;\n\n    function addOriginalEvent (detail, evt) {\n      if (originalEvent instanceof MouseEvent) {\n        detail.mouseEvent = originalEvent;\n      } else if (typeof TouchEvent !== 'undefined' &&\n                 originalEvent instanceof TouchEvent) {\n        detail.touchEvent = originalEvent;\n      }\n    }\n\n    intersection = this.el.components.raycaster.getIntersection(intersectedEl);\n    this.eventDetail.intersectedEl = intersectedEl;\n    this.eventDetail.intersection = intersection;\n    addOriginalEvent(this.eventDetail, originalEvent);\n    el.emit(evtName, this.eventDetail);\n\n    if (!intersectedEl) { return; }\n\n    this.intersectedEventDetail.intersection = intersection;\n    addOriginalEvent(this.intersectedEventDetail, originalEvent);\n    intersectedEl.emit(evtName, this.intersectedEventDetail);\n  }\n});\n", "import * as THREE from 'three';\nimport { geometries, geometryNames } from '../core/geometry.js';\nimport { registerComponent } from '../core/component.js';\n\nvar dummyGeometry = new THREE.BufferGeometry();\n\n/**\n * Geometry component. Combined with material component to make a mesh in 3D object.\n * Extended with registered geometries.\n */\nexport var Component = registerComponent('geometry', {\n  schema: {\n    buffer: {default: true},\n    primitive: {default: 'box', oneOf: geometryNames, schemaChange: true},\n    skipCache: {default: false}\n  },\n\n  init: function () {\n    this.geometry = null;\n  },\n\n  /**\n   * Talk to geometry system to get or create geometry.\n   */\n  update: function (previousData) {\n    var data = this.data;\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    // Dispose old geometry if we created one.\n    if (this.geometry) {\n      system.unuseGeometry(previousData);\n      this.geometry = null;\n    }\n\n    // Create new geometry.\n    this.geometry = system.getOrCreateGeometry(data);\n\n    // Set on mesh. If mesh does not exist, create it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.geometry = this.geometry;\n    } else {\n      mesh = new THREE.Mesh();\n      mesh.geometry = this.geometry;\n      // Default material if not defined on the entity.\n      if (!this.el.getAttribute('material')) {\n        mesh.material = new THREE.MeshStandardMaterial({\n          color: Math.random() * 0xFFFFFF,\n          metalness: 0,\n          roughness: 0.5\n        });\n      }\n      el.setObject3D('mesh', mesh);\n    }\n  },\n\n  /**\n   * Tell geometry system that entity is no longer using the geometry.\n   * Unset the geometry on the mesh\n   */\n  remove: function () {\n    this.system.unuseGeometry(this.data);\n    this.el.getObject3D('mesh').geometry = dummyGeometry;\n    this.geometry = null;\n  },\n\n  /**\n   * Update geometry component schema based on geometry type.\n   */\n  updateSchema: function (data) {\n    var currentGeometryType = this.oldData && this.oldData.primitive;\n    var newGeometryType = data.primitive;\n    var schema = geometries[newGeometryType] && geometries[newGeometryType].schema;\n\n    // Geometry has no schema.\n    if (!schema) { throw new Error('Unknown geometry schema `' + newGeometryType + '`'); }\n    // Nothing has changed.\n    if (currentGeometryType && currentGeometryType === newGeometryType) { return; }\n\n    this.extendSchema(schema);\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar GAMEPAD_ID_PREFIX = 'generic';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - thumbstick\n *\n * Axis:\n * 0 - touchpad\n * 1 - thumbstick\n *\n */\nvar INPUT_MAPPING = {\n  axes: {\n    touchpad: [0, 1],\n    thumbstick: [2, 3]\n  },\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('generic-tracked-controller-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    defaultModel: {default: true},\n    defaultModelColor: {default: 'gray'},\n    disabled: {default: false}\n  },\n\n  after: ['tracked-controls'],\n\n  /**\n   * Button IDs:\n   * 0 - trackpad\n   * 1 - trigger\n   */\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.wasControllerConnected = false;\n    this.bindMethods();\n\n    // generic-tracked-controller-controls has the lowest precedence.\n    // Disable this component if there are more specialized controls components.\n    this.el.addEventListener('controllerconnected', function (evt) {\n      if (evt.detail.name === self.name) { return; }\n      self.wasControllerConnected = true;\n      self.removeEventListeners();\n      self.removeControllersUpdateListener();\n    });\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, GAMEPAD_ID_PREFIX,\n      {hand: hand, iterateControllerProfiles: true});\n  },\n\n  play: function () {\n    if (this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // Do nothing if tracked-controls already set.\n    // Generic controls have the lowest precedence.\n    if (this.el.components['tracked-controls']) {\n      this.removeEventListeners();\n      return;\n    }\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX,\n      iterateControllerProfiles: true\n    });\n    if (!this.data.defaultModel) { return; }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    if (!this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  initDefaultModel: function () {\n    var modelEl = this.modelEl = document.createElement('a-entity');\n    modelEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 0.03\n    });\n    modelEl.setAttribute('material', {color: this.data.color});\n    this.el.appendChild(modelEl);\n    this.el.emit('controllermodelready', {\n      name: 'generic-tracked-controller-controls',\n      model: this.modelEl,\n      rayOrigin: {origin: {x: 0, y: 0, z: -0.01}, direction: {x: 0, y: 0, z: -1}}\n    });\n  }\n});\n", "import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:gltf-model:warn');\n\n/**\n * glTF model loader.\n */\nexport var Component = registerComponent('gltf-model', {\n  schema: {type: 'model'},\n\n  init: function () {\n    var self = this;\n    var dracoLoader = this.system.getDRACOLoader();\n    var meshoptDecoder = this.system.getMeshoptDecoder();\n    var ktxLoader = this.system.getKTX2Loader();\n    this.model = null;\n    this.loader = new GLTFLoader();\n    if (dracoLoader) {\n      this.loader.setDRACOLoader(dracoLoader);\n    }\n    if (meshoptDecoder) {\n      this.ready = meshoptDecoder.then(function (meshoptDecoder) {\n        self.loader.setMeshoptDecoder(meshoptDecoder);\n      });\n    } else {\n      this.ready = Promise.resolve();\n    }\n    if (ktxLoader) {\n      this.loader.setKTX2Loader(ktxLoader);\n    }\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.ready.then(function () {\n      self.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene || gltfModel.scenes[0];\n        self.model.animations = gltfModel.animations;\n\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      }, undefined /* onProgress */, function gltfFailed (error) {\n        var message = (error && error.message) ? error.message : 'Failed to load glTF model';\n        warn(message);\n        el.emit('model-error', {format: 'gltf', src: src});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n", "import { registerComponent } from '../core/component.js';\n\nregisterComponent('grabbable', {\n  init: function () {\n    this.el.setAttribute('obb-collider', 'centerModel: true');\n  }\n});\n", "/* global XRHand */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AEntity } from '../core/a-entity.js';\nimport { checkControllerPresentAndSetup } from '../utils/tracked-controls.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\nvar LEFT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/left.glb';\nvar RIGHT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/right.glb';\n\nvar JOINTS = [\n  'wrist',\n  'thumb-metacarpal',\n  'thumb-phalanx-proximal',\n  'thumb-phalanx-distal',\n  'thumb-tip',\n  'index-finger-metacarpal',\n  'index-finger-phalanx-proximal',\n  'index-finger-phalanx-intermediate',\n  'index-finger-phalanx-distal',\n  'index-finger-tip',\n  'middle-finger-metacarpal',\n  'middle-finger-phalanx-proximal',\n  'middle-finger-phalanx-intermediate',\n  'middle-finger-phalanx-distal',\n  'middle-finger-tip',\n  'ring-finger-metacarpal',\n  'ring-finger-phalanx-proximal',\n  'ring-finger-phalanx-intermediate',\n  'ring-finger-phalanx-distal',\n  'ring-finger-tip',\n  'pinky-finger-metacarpal',\n  'pinky-finger-phalanx-proximal',\n  'pinky-finger-phalanx-intermediate',\n  'pinky-finger-phalanx-distal',\n  'pinky-finger-tip'\n];\n\nvar WRIST_INDEX = 0;\nvar THUMB_TIP_INDEX = 4;\nvar INDEX_TIP_INDEX = 9;\n\nvar PINCH_START_DISTANCE = 0.015;\nvar PINCH_END_DISTANCE = 0.02;\n\n/**\n * Controls for hand tracking\n */\nexport var Component = registerComponent('hand-tracking-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    modelStyle: {default: 'mesh', oneOf: ['dots', 'mesh']},\n    modelColor: {default: 'white'},\n    modelOpacity: {default: 1.0}\n  },\n\n  after: ['tracked-controls'],\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n  },\n\n  addEventListeners: function () {\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = true;\n    }\n  },\n\n  removeEventListeners: function () {\n    this.el.removeEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = false;\n    }\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('hand-tracking') === -1) {\n      optionalFeaturesArray.push('hand-tracking');\n      sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.wristObject3D = new THREE.Object3D();\n    this.el.sceneEl.object3D.add(this.wristObject3D);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onChildAttached = this.onChildAttached.bind(this);\n    this.jointEls = [];\n    this.controllerPresent = false;\n    this.isPinched = false;\n    this.pinchEventDetail = {\n      position: new THREE.Vector3(),\n      wristRotation: new THREE.Quaternion()\n    };\n    this.indexTipPosition = new THREE.Vector3();\n\n    this.hasPoses = false;\n    this.jointPoses = new Float32Array(16 * JOINTS.length);\n    this.jointRadii = new Float32Array(JOINTS.length);\n\n    this.bindMethods();\n\n    this.updateReferenceSpace = this.updateReferenceSpace.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.updateReferenceSpace);\n    this.el.sceneEl.addEventListener('exit-vr', this.updateReferenceSpace);\n    this.el.addEventListener('child-attached', this.onChildAttached);\n\n    this.wristObject3D.visible = false;\n  },\n\n  onChildAttached: function (evt) {\n    this.addChildEntity(evt.detail.el);\n  },\n\n  update: function () {\n    this.updateModelMaterial();\n  },\n\n  updateModelMaterial: function () {\n    var jointEls = this.jointEls;\n    var skinnedMesh = this.skinnedMesh;\n    var transparent = !(this.data.modelOpacity === 1.0);\n    if (skinnedMesh) {\n      this.skinnedMesh.material.color.set(this.data.modelColor);\n      this.skinnedMesh.material.transparent = transparent;\n      this.skinnedMesh.material.opacity = this.data.modelOpacity;\n    }\n\n    for (var i = 0; i < jointEls.length; i++) {\n      jointEls[i].setAttribute('material', {\n        color: this.data.modelColor,\n        transparent: transparent,\n        opacity: this.data.modelOpacity\n      });\n    }\n  },\n\n  updateReferenceSpace: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    this.referenceSpace = undefined;\n    if (!xrSession) { return; }\n    var referenceSpaceType = self.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(referenceSpaceType).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (error) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(referenceSpaceType, 'tracked-controls-webxr uses reference space ' + referenceSpaceType);\n      throw error;\n    });\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, '',\n      {hand: hand, iterateControllerProfiles: true, handTracking: true});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var frame = sceneEl.frame;\n    var trackedControlsWebXR = this.el.components['tracked-controls'];\n    var referenceSpace = this.referenceSpace;\n    if (!controller || !frame || !referenceSpace || !trackedControlsWebXR) { return; }\n    this.hasPoses = false;\n    if (controller.hand) {\n      this.el.object3D.position.set(0, 0, 0);\n      this.el.object3D.rotation.set(0, 0, 0);\n\n      this.hasPoses = frame.fillPoses(controller.hand.values(), referenceSpace, this.jointPoses) &&\n        frame.fillJointRadii(controller.hand.values(), this.jointRadii);\n\n      this.updateHandModel();\n      this.detectGesture();\n      this.updateWristObject();\n    }\n  },\n\n  updateWristObject: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var wristObject3D = this.wristObject3D;\n      if (!wristObject3D || !this.hasPoses) { return; }\n      jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16);\n      wristObject3D.position.setFromMatrixPosition(jointPose);\n      wristObject3D.quaternion.setFromRotationMatrix(jointPose);\n    };\n  })(),\n\n  updateHandModel: function () {\n    this.wristObject3D.visible = true;\n    this.el.object3D.visible = true;\n\n    if (this.data.modelStyle === 'dots') {\n      this.updateHandDotsModel();\n    }\n\n    if (this.data.modelStyle === 'mesh') {\n      this.updateHandMeshModel();\n    }\n  },\n\n  getBone: function (name) {\n    var bones = this.bones;\n    for (var i = 0; i < bones.length; i++) {\n      if (bones[i].name === name) { return bones[i]; }\n    }\n    return null;\n  },\n\n  updateHandMeshModel: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var i = 0;\n      var jointPoses = this.jointPoses;\n      var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n      if (!controller || !this.mesh) { return; }\n      this.mesh.visible = false;\n      if (!this.hasPoses) { return; }\n      for (var inputjoint of controller.hand.values()) {\n        var bone = this.getBone(inputjoint.jointName);\n        if (bone != null) {\n          this.mesh.visible = true;\n          jointPose.fromArray(jointPoses, i * 16);\n          bone.position.setFromMatrixPosition(jointPose);\n          bone.quaternion.setFromRotationMatrix(jointPose);\n        }\n        i++;\n      }\n    };\n  })(),\n\n  updateHandDotsModel: function () {\n    var jointPoses = this.jointPoses;\n    var jointRadii = this.jointRadii;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var jointEl;\n    var object3D;\n\n    for (var i = 0; i < controller.hand.size; i++) {\n      jointEl = this.jointEls[i];\n      object3D = jointEl.object3D;\n      jointEl.object3D.visible = this.hasPoses;\n      if (!this.hasPoses) { continue; }\n      object3D.matrix.fromArray(jointPoses, i * 16);\n      object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n      jointEl.setAttribute('scale', {x: jointRadii[i], y: jointRadii[i], z: jointRadii[i]});\n    }\n  },\n\n  detectGesture: function () {\n    this.detectPinch();\n  },\n\n  detectPinch: (function () {\n    var thumbTipPosition = new THREE.Vector3();\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var indexTipPosition = this.indexTipPosition;\n      var pinchEventDetail = this.pinchEventDetail;\n      if (!this.hasPoses) { return; }\n\n      thumbTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, THUMB_TIP_INDEX * 16));\n      indexTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, INDEX_TIP_INDEX * 16));\n      pinchEventDetail.wristRotation.setFromRotationMatrix(jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16));\n\n      var distance = indexTipPosition.distanceTo(thumbTipPosition);\n\n      if (distance < PINCH_START_DISTANCE && this.isPinched === false) {\n        this.isPinched = true;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchstarted', pinchEventDetail);\n      }\n\n      if (distance > PINCH_END_DISTANCE && this.isPinched === true) {\n        this.isPinched = false;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchended', pinchEventDetail);\n      }\n\n      if (this.isPinched) {\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchmoved', pinchEventDetail);\n      }\n    };\n  })(),\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      id: '',\n      hand: data.hand,\n      iterateControllerProfiles: true,\n      handTrackingEnabled: true\n    });\n\n    if (this.mesh) {\n      if (this.mesh !== el.getObject3D('mesh')) {\n        el.setObject3D('mesh', this.mesh);\n      }\n      return;\n    }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    var el = this.el;\n    var controller;\n    this.checkIfControllerPresent();\n    controller = el.components['tracked-controls'] && el.components['tracked-controls'].controller;\n    if (!this.mesh) { return; }\n    if (controller && controller.hand && (controller.hand instanceof XRHand)) {\n      el.setObject3D('mesh', this.mesh);\n    }\n  },\n\n  initDefaultModel: function () {\n    var data = this.data;\n    if (data.modelStyle === 'dots') {\n      this.initDotsModel();\n    }\n\n    if (data.modelStyle === 'mesh') {\n      this.initMeshHandModel();\n    }\n\n    this.el.object3D.visible = true;\n    this.wristObject3D.visible = true;\n  },\n\n  initDotsModel: function () {\n    // Add models just once.\n    if (this.jointEls.length !== 0) { return; }\n    for (var i = 0; i < JOINTS.length; ++i) {\n      var jointEl = this.jointEl = document.createElement('a-entity');\n      jointEl.setAttribute('geometry', {\n        primitive: 'sphere',\n        radius: 1.0\n      });\n      jointEl.object3D.visible = false;\n      this.el.appendChild(jointEl);\n      this.jointEls.push(jointEl);\n    }\n    this.updateModelMaterial();\n  },\n\n  initMeshHandModel: function () {\n    var modelURL = this.data.hand === 'left' ? LEFT_HAND_MODEL_URL : RIGHT_HAND_MODEL_URL;\n    this.el.setAttribute('gltf-model', modelURL);\n  },\n\n  onModelLoaded: function () {\n    var mesh = this.mesh = this.el.getObject3D('mesh').children[0];\n    var skinnedMesh = this.skinnedMesh = mesh.getObjectByProperty('type', 'SkinnedMesh');\n    if (!this.skinnedMesh) { return; }\n    this.bones = skinnedMesh.skeleton.bones;\n    this.el.removeObject3D('mesh');\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(0, 0, 0);\n    skinnedMesh.frustumCulled = false;\n    skinnedMesh.material = new THREE.MeshStandardMaterial();\n    this.updateModelMaterial();\n    this.setupChildrenEntities();\n    this.el.setObject3D('mesh', mesh);\n  },\n\n  setupChildrenEntities: function () {\n    var childrenEls = this.el.children;\n    for (var i = 0; i < childrenEls.length; ++i) {\n      if (!(childrenEls[i] instanceof AEntity)) { continue; }\n      this.addChildEntity(childrenEls[i]);\n    }\n  },\n\n  addChildEntity: function (childEl) {\n    if (!(childEl instanceof AEntity)) { return; }\n    this.wristObject3D.add(childEl.object3D);\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\n\nregisterComponent('hand-tracking-grab-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    color: {type: 'color', default: 'white'},\n    hoverColor: {type: 'color', default: '#538df1'},\n    hoverEnabled: {default: false}\n  },\n\n  init: function () {\n    var el = this.el;\n    var data = this.data;\n    var trackedObject3DVariable;\n\n    if (data.hand === 'right') {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.3';\n    } else {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.21';\n    }\n\n    el.setAttribute('hand-tracking-controls', {hand: data.hand});\n    el.setAttribute('obb-collider', {trackedObject3D: trackedObject3DVariable, size: 0.04});\n\n    this.auxMatrix = new THREE.Matrix4();\n\n    this.onCollisionStarted = this.onCollisionStarted.bind(this);\n    this.el.addEventListener('obbcollisionstarted', this.onCollisionStarted);\n\n    this.onCollisionEnded = this.onCollisionEnded.bind(this);\n    this.el.addEventListener('obbcollisionended', this.onCollisionEnded);\n\n    this.onPinchStarted = this.onPinchStarted.bind(this);\n    this.el.addEventListener('pinchstarted', this.onPinchStarted);\n\n    this.onPinchEnded = this.onPinchEnded.bind(this);\n    this.el.addEventListener('pinchended', this.onPinchEnded);\n  },\n\n  transferEntityOwnership: function () {\n    var grabbingElComponent;\n    var grabbingEls = this.el.sceneEl.querySelectorAll('[hand-tracking-grab-controls]');\n    for (var i = 0; i < grabbingEls.length; ++i) {\n      grabbingElComponent = grabbingEls[i].components['hand-tracking-grab-controls'];\n      if (grabbingElComponent === this) { continue; }\n      if (this.grabbedEl && this.grabbedEl === grabbingElComponent.grabbedEl) {\n        grabbingElComponent.releaseGrabbedEntity();\n      }\n    }\n    return false;\n  },\n\n  onCollisionStarted: function (evt) {\n    var withEl = evt.detail.withEl;\n    if (this.collidedEl) { return; }\n    if (!withEl.getAttribute('grabbable')) { return; }\n    this.collidedEl = withEl;\n    this.grabbingObject3D = evt.detail.trackedObject3D;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.hoverColor);\n    }\n  },\n\n  onCollisionEnded: function () {\n    this.collidedEl = undefined;\n    if (this.grabbedEl) { return; }\n    this.grabbingObject3D = undefined;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.color);\n    }\n  },\n\n  onPinchStarted: function (evt) {\n    if (!this.collidedEl) { return; }\n    this.grabbedEl = this.collidedEl;\n    this.transferEntityOwnership();\n    this.grab();\n  },\n\n  onPinchEnded: function () {\n    this.releaseGrabbedEntity();\n  },\n\n  releaseGrabbedEntity: function () {\n    var grabbedEl = this.grabbedEl;\n    if (!grabbedEl) { return; }\n\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    var newParent = this.originalParent;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabended', {grabbedEl: grabbedEl});\n    this.grabbedEl = undefined;\n    this.originalParent = undefined;\n  },\n\n  grab: function () {\n    var grabbedEl = this.grabbedEl;\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    this.originalParent = parent;\n    var newParent = this.el.components['hand-tracking-controls'].wristObject3D;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabstarted', {grabbedEl: grabbedEl});\n  }\n});\n", "import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\n// Found at https://github.com/aframevr/assets.\nvar MODEL_URLS = {\n  toonLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHand.glb',\n  toonRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHand.glb',\n  lowPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandLow.glb',\n  lowPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandLow.glb',\n  highPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandHigh.glb',\n  highPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandHigh.glb'\n};\n\n// Poses.\nvar ANIMATIONS = {\n  open: 'Open',\n  // point: grip active, trackpad surface active, trigger inactive.\n  point: 'Point',\n  // pointThumb: grip active, trigger inactive, trackpad surface inactive.\n  pointThumb: 'Point + Thumb',\n  // fist: grip active, trigger active, trackpad surface active.\n  fist: 'Fist',\n  // hold: trigger active, grip inactive.\n  hold: 'Hold',\n  // thumbUp: grip active, trigger active, trackpad surface inactive.\n  thumbUp: 'Thumb Up'\n};\n\n// Map animation to public events for the API.\nvar EVENTS = {};\nEVENTS[ANIMATIONS.fist] = 'grip';\nEVENTS[ANIMATIONS.thumbUp] = 'pistol';\nEVENTS[ANIMATIONS.point] = 'pointing';\n\n/**\n * Hand controls component that abstracts 6DoF controls:\n *   meta-touch-controls, vive-controls, windows-motion-controls.\n *\n * Originally meant to be a sample implementation of applications-specific controls that\n * abstracts multiple types of controllers.\n *\n * Auto-detect appropriate controller.\n * Handle common events coming from the detected vendor-specific controls.\n * Translate button events to semantic hand-related event names:\n *   (gripclose, gripopen, thumbup, thumbdown, pointup, pointdown)\n * Load hand model with gestures that are applied based on the button pressed.\n *\n * @property {string} Hand mapping (`left`, `right`).\n */\nexport var Component = registerComponent('hand-controls', {\n  schema: {\n    color: {default: 'white', type: 'color'},\n    hand: { default: 'left' },\n    handModelStyle: {default: 'lowPoly', oneOf: ['lowPoly', 'highPoly', 'toon']}\n  },\n\n  after: ['tracked-controls'],\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    // Active buttons populated by events provided by the attached controls.\n    this.pressedButtons = {};\n    this.touchedButtons = {};\n    this.loader = new GLTFLoader();\n    this.loader.setCrossOrigin('anonymous');\n\n    this.onGripDown = function () { self.handleButton('grip', 'down'); };\n    this.onGripUp = function () { self.handleButton('grip', 'up'); };\n    this.onTrackpadDown = function () { self.handleButton('trackpad', 'down'); };\n    this.onTrackpadUp = function () { self.handleButton('trackpad', 'up'); };\n    this.onTrackpadTouchStart = function () { self.handleButton('trackpad', 'touchstart'); };\n    this.onTrackpadTouchEnd = function () { self.handleButton('trackpad', 'touchend'); };\n    this.onTriggerDown = function () { self.handleButton('trigger', 'down'); };\n    this.onTriggerUp = function () { self.handleButton('trigger', 'up'); };\n    this.onTriggerTouchStart = function () { self.handleButton('trigger', 'touchstart'); };\n    this.onTriggerTouchEnd = function () { self.handleButton('trigger', 'touchend'); };\n    this.onGripTouchStart = function () { self.handleButton('grip', 'touchstart'); };\n    this.onGripTouchEnd = function () { self.handleButton('grip', 'touchend'); };\n    this.onThumbstickDown = function () { self.handleButton('thumbstick', 'down'); };\n    this.onThumbstickUp = function () { self.handleButton('thumbstick', 'up'); };\n    this.onAorXTouchStart = function () { self.handleButton('AorX', 'touchstart'); };\n    this.onAorXTouchEnd = function () { self.handleButton('AorX', 'touchend'); };\n    this.onBorYTouchStart = function () { self.handleButton('BorY', 'touchstart'); };\n    this.onBorYTouchEnd = function () { self.handleButton('BorY', 'touchend'); };\n    this.onSurfaceTouchStart = function () { self.handleButton('surface', 'touchstart'); };\n    this.onSurfaceTouchEnd = function () { self.handleButton('surface', 'touchend'); };\n    this.onControllerConnected = this.onControllerConnected.bind(this);\n    this.onControllerDisconnected = this.onControllerDisconnected.bind(this);\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n\n    // Hidden by default.\n    el.object3D.visible = false;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var mesh = this.el.getObject3D('mesh');\n\n    if (!mesh || !mesh.mixer) { return; }\n\n    mesh.mixer.update(delta / 1000);\n  },\n\n  onControllerConnected: function (evt) {\n    var el = this.el;\n    var hand = this.data.hand;\n    var mesh = this.el.getObject3D('mesh');\n\n    el.object3D.visible = true;\n\n    var handModelOrientationZ = hand === 'left' ? Math.PI / 2 : -Math.PI / 2;\n    // The WebXR standard defines the grip space such that a cylinder held in a closed hand points\n    // along the Z axis. The models currently have such a cylinder point along the X-Axis.\n    var handModelOrientationX = el.sceneEl.hasWebXR ? -Math.PI / 2 : 0;\n\n    // Pico4, at least on Wolvic, needs a different rotation offset\n    // for the hand model. Pico Browser claims to use oculus\n    // controllers instead; will load meta-touch-controls and does\n    // not require this adjustment.\n    if (evt.detail.name === 'pico-controls') {\n      handModelOrientationX += Math.PI / 4;\n    }\n\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(handModelOrientationX, 0, handModelOrientationZ);\n  },\n\n  onControllerDisconnected: function () {\n    this.el.object3D.visible = false;\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('gripdown', this.onGripDown);\n    el.addEventListener('gripup', this.onGripUp);\n    el.addEventListener('trackpaddown', this.onTrackpadDown);\n    el.addEventListener('trackpadup', this.onTrackpadUp);\n    el.addEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.addEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.addEventListener('triggerdown', this.onTriggerDown);\n    el.addEventListener('triggerup', this.onTriggerUp);\n    el.addEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.addEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.addEventListener('griptouchstart', this.onGripTouchStart);\n    el.addEventListener('griptouchend', this.onGripTouchEnd);\n    el.addEventListener('thumbstickdown', this.onThumbstickDown);\n    el.addEventListener('thumbstickup', this.onThumbstickUp);\n    el.addEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.addEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('gripdown', this.onGripDown);\n    el.removeEventListener('gripup', this.onGripUp);\n    el.removeEventListener('trackpaddown', this.onTrackpadDown);\n    el.removeEventListener('trackpadup', this.onTrackpadUp);\n    el.removeEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.removeEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.removeEventListener('triggerdown', this.onTriggerDown);\n    el.removeEventListener('triggerup', this.onTriggerUp);\n    el.removeEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.removeEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.removeEventListener('griptouchstart', this.onGripTouchStart);\n    el.removeEventListener('griptouchend', this.onGripTouchEnd);\n    el.removeEventListener('thumbstickdown', this.onThumbstickDown);\n    el.removeEventListener('thumbstickup', this.onThumbstickUp);\n    el.removeEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.removeEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  /**\n   * Update handler. More like the `init` handler since the only property is the hand, and\n   * that won't be changing much.\n   */\n  update: function (previousHand) {\n    var controlConfiguration;\n    var el = this.el;\n    var hand = this.data.hand;\n    var handModelStyle = this.data.handModelStyle;\n    var handColor = this.data.color;\n    var self = this;\n\n    // Get common configuration to abstract different vendor controls.\n    controlConfiguration = {\n      hand: hand,\n      model: false\n    };\n\n    // Set model.\n    if (hand !== previousHand) {\n      var handmodelUrl = MODEL_URLS[handModelStyle + hand.charAt(0).toUpperCase() + hand.slice(1)];\n      this.loader.load(handmodelUrl, function (gltf) {\n        var mesh = gltf.scene.children[0];\n        mesh.mixer = new THREE.AnimationMixer(mesh);\n        self.clips = gltf.animations;\n        el.setObject3D('mesh', mesh);\n        mesh.traverse(function (object) {\n          if (!object.isMesh) { return; }\n          object.material.color = new THREE.Color(handColor);\n        });\n        el.setAttribute('magicleap-controls', controlConfiguration);\n        el.setAttribute('vive-controls', controlConfiguration);\n        el.setAttribute('meta-touch-controls', controlConfiguration);\n        el.setAttribute('pico-controls', controlConfiguration);\n        el.setAttribute('windows-motion-controls', controlConfiguration);\n        el.setAttribute('hp-mixed-reality-controls', controlConfiguration);\n      });\n    }\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  /**\n   * Play model animation, based on which button was pressed and which kind of event.\n   *\n   * 1. Process buttons.\n   * 2. Determine gesture (this.determineGesture()).\n   * 3. Animation gesture (this.animationGesture()).\n   * 4. Emit gesture events (this.emitGestureEvents()).\n   *\n   * @param {string} button - Name of the button.\n   * @param {string} evt - Type of event for the button (i.e., down/up/touchstart/touchend).\n   */\n  handleButton: function (button, evt) {\n    var lastGesture;\n    var isPressed = evt === 'down';\n    var isTouched = evt === 'touchstart';\n\n    // Update objects.\n    if (evt.indexOf('touch') === 0) {\n      // Update touch object.\n      if (isTouched === this.touchedButtons[button]) { return; }\n      this.touchedButtons[button] = isTouched;\n    } else {\n      // Update button object.\n      if (isPressed === this.pressedButtons[button]) { return; }\n      this.pressedButtons[button] = isPressed;\n    }\n\n    // Determine the gesture.\n    lastGesture = this.gesture;\n    this.gesture = this.determineGesture();\n\n    // Same gesture.\n    if (this.gesture === lastGesture) { return; }\n    // Animate gesture.\n    this.animateGesture(this.gesture, lastGesture);\n\n    // Emit events.\n    this.emitGestureEvents(this.gesture, lastGesture);\n  },\n\n  /**\n   * Determine which pose hand should be in considering active and touched buttons.\n   */\n  determineGesture: function () {\n    var gesture;\n    var isGripActive = this.pressedButtons.grip;\n    var isSurfaceActive = this.pressedButtons.surface || this.touchedButtons.surface;\n    var isTrackpadActive = this.pressedButtons.trackpad || this.touchedButtons.trackpad;\n    var isTriggerActive = this.pressedButtons.trigger || this.touchedButtons.trigger;\n    var isABXYActive = this.touchedButtons.AorX || this.touchedButtons.BorY;\n    var isVive = isViveController(this.el.components['tracked-controls']);\n\n    // Works well with Oculus Touch and Windows Motion Controls, but Vive needs tweaks.\n    if (isVive) {\n      if (isGripActive || isTriggerActive) {\n        gesture = ANIMATIONS.fist;\n      } else if (isTrackpadActive) {\n        gesture = ANIMATIONS.point;\n      }\n    } else {\n      if (isGripActive) {\n        if (isSurfaceActive || isABXYActive || isTrackpadActive) {\n          gesture = isTriggerActive ? ANIMATIONS.fist : ANIMATIONS.point;\n        } else {\n          gesture = isTriggerActive ? ANIMATIONS.thumbUp : ANIMATIONS.pointThumb;\n        }\n      } else if (isTriggerActive) {\n        gesture = ANIMATIONS.hold;\n      }\n    }\n\n    return gesture;\n  },\n\n  /**\n   * Play corresponding clip to a gesture\n   */\n  getClip: function (gesture) {\n    var clip;\n    var i;\n    for (i = 0; i < this.clips.length; i++) {\n      clip = this.clips[i];\n      if (clip.name !== gesture) { continue; }\n      return clip;\n    }\n  },\n\n  /**\n   * Play gesture animation.\n   *\n   * @param {string} gesture - Which pose to animate to. If absent, then animate to open.\n   * @param {string} lastGesture - Previous gesture, to reverse back to open if needed.\n   */\n  animateGesture: function (gesture, lastGesture) {\n    if (gesture) {\n      this.playAnimation(gesture || ANIMATIONS.open, lastGesture, false);\n      return;\n    }\n\n    // If no gesture, then reverse the current gesture back to open pose.\n    this.playAnimation(lastGesture, lastGesture, true);\n  },\n\n  /**\n   * Emit `hand-controls`-specific events.\n   */\n  emitGestureEvents: function (gesture, lastGesture) {\n    var el = this.el;\n    var eventName;\n\n    if (lastGesture === gesture) { return; }\n\n    // Emit event for lastGesture not inactive.\n    eventName = getGestureEventName(lastGesture, false);\n    if (eventName) { el.emit(eventName); }\n\n    // Emit event for current gesture now active.\n    eventName = getGestureEventName(gesture, true);\n    if (eventName) { el.emit(eventName); }\n  },\n\n  /**\n  * Play hand animation based on button state.\n  *\n  * @param {string} gesture - Name of the animation as specified by the model.\n  * @param {string} lastGesture - Previous pose.\n  * @param {boolean} reverse - Whether animation should play in reverse.\n  */\n  playAnimation: function (gesture, lastGesture, reverse) {\n    var clip;\n    var fromAction;\n    var mesh = this.el.getObject3D('mesh');\n    var toAction;\n\n    if (!mesh) { return; }\n\n    // Grab clip action.\n    clip = this.getClip(gesture);\n    toAction = mesh.mixer.clipAction(clip);\n\n    // Reverse from gesture to no gesture.\n    if (reverse) {\n      toAction.paused = false;\n      toAction.timeScale = -1;\n      return;\n    }\n\n    toAction.clampWhenFinished = true;\n    toAction.loop = THREE.LoopOnce;\n    toAction.repetitions = 0;\n    toAction.timeScale = 1;\n    toAction.time = 0;\n    toAction.weight = 1;\n\n    // No gesture to gesture.\n    if (!lastGesture) {\n      // Play animation.\n      mesh.mixer.stopAllAction();\n      toAction.play();\n      return;\n    }\n\n    // Animate or crossfade from gesture to gesture.\n    clip = this.getClip(lastGesture);\n    toAction.reset();\n    toAction.play();\n    fromAction = mesh.mixer.clipAction(clip);\n    fromAction.crossFadeTo(toAction, 0.15, true);\n  }\n});\n\n/**\n * Suffix gestures based on toggle state (e.g., open/close, up/down, start/end).\n *\n * @param {string} gesture\n * @param {boolean} active\n */\nfunction getGestureEventName (gesture, active) {\n  var eventName;\n\n  if (!gesture) { return; }\n\n  eventName = EVENTS[gesture];\n  if (eventName === 'grip') {\n    return eventName + (active ? 'close' : 'open');\n  }\n  if (eventName === 'point') {\n    return eventName + (active ? 'up' : 'down');\n  }\n  if (eventName === 'pointing' || eventName === 'pistol') {\n    return eventName + (active ? 'start' : 'end');\n  }\n}\n\nfunction isViveController (trackedControls) {\n  var controller = trackedControls && trackedControls.controller;\n  var isVive = controller && (controller.id && controller.id.indexOf('OpenVR ') === 0 ||\n    (controller.profiles &&\n     controller.profiles[0] &&\n     controller.profiles[0] === 'htc-vive'));\n  return isVive;\n}\n", "import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-ar', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('ar-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n", "import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-vr', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('vr-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'hp-mixed-reality';\nvar HP_MIXED_REALITY_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/hp/mixed-reality/';\n\nvar HP_MIXED_REALITY_POSITION_OFFSET = {x: 0, y: 0, z: 0.06};\nvar HP_MIXED_REALITY_ROTATION_OFFSET = {_x: Math.PI / 4, _y: 0, _z: 0, _order: 'XYZ'};\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * HP Mixed Reality Controls\n */\nexport var Component = registerComponent('hp-mixed-reality-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', HP_MIXED_REALITY_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n\n    if (!this.data.model) { return; }\n\n    controllerObject3D.position.copy(HP_MIXED_REALITY_POSITION_OFFSET);\n    controllerObject3D.rotation.copy(HP_MIXED_REALITY_ROTATION_OFFSET);\n\n    this.el.emit('controllermodelready', {\n      name: 'hp-mixed-reality-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n", "/* global XRRigidTransform, XRWebGLBinding */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:layer:warn');\n\nexport var Component = registerComponent('layer', {\n  schema: {\n    type: {default: 'quad', oneOf: ['quad', 'monocubemap', 'stereocubemap']},\n    src: {type: 'map'},\n    rotateCubemap: {default: false},\n    width: {default: 0},\n    height: {default: 0}\n  },\n\n  init: function () {\n    var gl = this.el.sceneEl.renderer.getContext();\n\n    this.quaternion = new THREE.Quaternion();\n    this.position = new THREE.Vector3();\n\n    this.bindMethods();\n    this.needsRedraw = false;\n    this.frameBuffer = gl.createFramebuffer();\n\n    var webxrData = this.el.sceneEl.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    if (requiredFeaturesArray.indexOf('layers') === -1) {\n      requiredFeaturesArray.push('layers');\n      this.el.sceneEl.setAttribute('webxr', webxrData);\n    }\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    this.el.sceneEl.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  bindMethods: function () {\n    this.onRequestedReferenceSpace = this.onRequestedReferenceSpace.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n  },\n\n  update: function (oldData) {\n    if (this.data.src !== oldData.src) { this.updateSrc(); }\n  },\n\n  updateSrc: function () {\n    var type = this.data.type;\n    this.texture = undefined;\n    if (type === 'quad') {\n      this.loadQuadImage();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.loadCubeMapImages();\n      return;\n    }\n  },\n\n  loadCubeMapImages: function () {\n    var glayer;\n    var xrGLFactory = this.xrGLFactory;\n    var frame = this.el.sceneEl.frame;\n    var src = this.data.src;\n    var type = this.data.type;\n\n    this.visibilityChanged = false;\n    if (!this.layer) { return; }\n    if (type !== 'monocubemap' && type !== 'stereocubemap') { return; }\n\n    if (!src.complete) {\n      this.pendingCubeMapUpdate = true;\n    } else {\n      this.pendingCubeMapUpdate = false;\n    }\n\n    if (!this.loadingScreen) {\n      this.loadingScreen = true;\n    } else {\n      this.loadingScreen = false;\n    }\n\n    if (type === 'monocubemap') {\n      glayer = xrGLFactory.getSubImage(this.layer, frame);\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n    } else {\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'left');\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'right');\n      this.loadCubeMapImage(glayer.colorTexture, src, 6);\n    }\n  },\n\n  loadQuadImage: function () {\n    var src = this.data.src;\n    var self = this;\n    this.el.sceneEl.systems.material.loadTexture(src, {src: src}, function textureLoaded (texture) {\n      self.el.sceneEl.renderer.initTexture(texture);\n      self.texture = texture;\n      if (src.tagName === 'VIDEO') { setTimeout(function () { self.textureIsVideo = true; }, 1000); }\n      if (self.layer) {\n        self.layer.height = self.data.height / 2 || self.texture.image.height / 1000;\n        self.layer.width = self.data.width / 2 || self.texture.image.width / 1000;\n        self.needsRedraw = true;\n      }\n      self.updateQuadPanel();\n    });\n  },\n\n  preGenerateCubeMapTextures: function (src, callback) {\n    if (this.data.type === 'monocubemap') {\n      this.generateCubeMapTextures(src, 0, callback);\n    } else {\n      this.generateCubeMapTextures(src, 0, callback);\n      this.generateCubeMapTextures(src, 6, callback);\n    }\n  },\n\n  generateCubeMapTextures: function (src, faceOffset, callback) {\n    var data = this.data;\n    var cubeFaceSize = this.cubeFaceSize;\n    var textureSourceCubeFaceSize = Math.min(src.width, src.height);\n    var cubefaceTextures = [];\n    var imgTmp0;\n    var imgTmp2;\n\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n\n      if (data.rotateCubemap) {\n        if (i === 2 || i === 3) {\n          tempCanvasContext.save();\n          tempCanvasContext.translate(cubeFaceSize, cubeFaceSize);\n          tempCanvasContext.rotate(Math.PI);\n        }\n      }\n\n      // Note that this call to drawImage will not only copy the bytes to the\n      // canvas but also could resized the image if our cube face size is\n      // smaller than the source image due to GL max texture size.\n      tempCanvasContext.drawImage(\n        src,\n        (i + faceOffset) * textureSourceCubeFaceSize, // top left x coord in source\n        0, // top left y coord in source\n        textureSourceCubeFaceSize, // x pixel count from source\n        textureSourceCubeFaceSize, // y pixel count from source\n        0, // dest x offset in the canvas\n        0, // dest y offset in the canvas\n        cubeFaceSize, // x pixel count in dest\n        cubeFaceSize  // y pixel count in dest\n      );\n\n      tempCanvasContext.restore();\n\n      if (callback) { callback(); }\n      cubefaceTextures.push(tempCanvas);\n    }\n\n    if (data.rotateCubemap) {\n      imgTmp0 = cubefaceTextures[0];\n      imgTmp2 = cubefaceTextures[1];\n\n      cubefaceTextures[0] = imgTmp2;\n      cubefaceTextures[1] = imgTmp0;\n\n      imgTmp0 = cubefaceTextures[4];\n      imgTmp2 = cubefaceTextures[5];\n\n      cubefaceTextures[4] = imgTmp2;\n      cubefaceTextures[5] = imgTmp0;\n    }\n\n    if (callback) { callback(); }\n    return cubefaceTextures;\n  },\n\n  loadCubeMapImage: function (layerColorTexture, src, faceOffset) {\n    var gl = this.el.sceneEl.renderer.getContext();\n    var cubefaceTextures;\n\n    // don't flip the pixels as we load them into the texture buffer.\n    // TEXTURE_CUBE_MAP expects the Y to be flipped for the faces and it already\n    // is flipped in our texture image.\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, layerColorTexture);\n\n    if (!src.complete || this.loadingScreen) {\n      cubefaceTextures = this.loadingScreenImages;\n    } else {\n      cubefaceTextures = this.generateCubeMapTextures(src, faceOffset);\n    }\n\n    var errorCode = 0;\n    cubefaceTextures.forEach(function (canvas, i) {\n      gl.texSubImage2D(\n        gl.TEXTURE_CUBE_MAP_POSITIVE_X + i,\n        0,\n        0, 0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        canvas\n      );\n      errorCode = gl.getError();\n    });\n\n    if (errorCode !== 0) {\n      console.log('renderingError, WebGL Error Code: ' + errorCode);\n    }\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n  },\n\n  tick: function () {\n    if (!this.el.sceneEl.xrSession) { return; }\n    if (!this.referenceSpace) { return; }\n    if (!this.layer && (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode'))) { this.initLayer(); }\n    this.updateTransform();\n    if (this.data.src.complete && (this.pendingCubeMapUpdate || this.loadingScreen || this.visibilityChanged)) { this.loadCubeMapImages(); }\n    if (!this.needsRedraw && !this.layer.needsRedraw && !this.textureIsVideo) { return; }\n    if (this.data.type === 'quad') { this.draw(); }\n    this.needsRedraw = false;\n  },\n\n  initLayer: function () {\n    var self = this;\n    var type = this.data.type;\n\n    this.el.sceneEl.xrSession.onvisibilitychange = function (evt) {\n      self.visibilityChanged = evt.session.visibilityState !== 'hidden';\n    };\n\n    if (type === 'quad') {\n      this.initQuadLayer();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.initCubeMapLayer();\n      return;\n    }\n  },\n\n  initQuadLayer: function () {\n    var sceneEl = this.el.sceneEl;\n    var gl = sceneEl.renderer.getContext();\n    var xrGLFactory = this.xrGLFactory = new XRWebGLBinding(sceneEl.xrSession, gl);\n    if (!this.texture) { return; }\n    this.layer = xrGLFactory.createQuadLayer({\n      space: this.referenceSpace,\n      viewPixelHeight: 2048,\n      viewPixelWidth: 2048,\n      height: this.data.height / 2 || this.texture.image.height / 1000,\n      width: this.data.width / 2 || this.texture.image.width / 1000\n    });\n    this.initLoadingScreenImages();\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initCubeMapLayer: function () {\n    var src = this.data.src;\n    var sceneEl = this.el.sceneEl;\n    var gl = sceneEl.renderer.getContext();\n    var glSizeLimit = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    var cubeFaceSize = this.cubeFaceSize = Math.min(glSizeLimit, Math.min(src.width, src.height));\n    var xrGLFactory = this.xrGLFactory = new XRWebGLBinding(sceneEl.xrSession, gl);\n    this.layer = xrGLFactory.createCubeLayer({\n      space: this.referenceSpace,\n      viewPixelWidth: cubeFaceSize,\n      viewPixelHeight: cubeFaceSize,\n      layout: this.data.type === 'monocubemap' ? 'mono' : 'stereo',\n      isStatic: false\n    });\n\n    this.initLoadingScreenImages();\n    this.loadCubeMapImages();\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initLoadingScreenImages: function () {\n    var cubeFaceSize = this.cubeFaceSize;\n    var loadingScreenImages = this.loadingScreenImages = [];\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      tempCanvasContext.fillStyle = 'black';\n      tempCanvasContext.fillRect(0, 0, cubeFaceSize, cubeFaceSize);\n      if (i !== 2 && i !== 3) {\n        tempCanvasContext.translate(cubeFaceSize, 0);\n        tempCanvasContext.scale(-1, 1);\n        tempCanvasContext.fillStyle = 'white';\n        tempCanvasContext.font = '30px Arial';\n        tempCanvasContext.fillText('Loading', cubeFaceSize / 2, cubeFaceSize / 2);\n      }\n      loadingScreenImages.push(tempCanvas);\n    }\n  },\n\n  destroyLayer: function () {\n    if (!this.layer) { return; }\n    this.el.sceneEl.renderer.xr.removeLayer(this.layer);\n    this.layer.destroy();\n    this.layer = undefined;\n  },\n\n  toggleCompositorLayer: function () {\n    this.enableCompositorLayer(!this.layerEnabled);\n  },\n\n  enableCompositorLayer: function (enable) {\n    this.layerEnabled = enable;\n    this.quadPanelEl.object3D.visible = !this.layerEnabled;\n  },\n\n  updateQuadPanel: function () {\n    var quadPanelEl = this.quadPanelEl;\n    if (!this.quadPanelEl) {\n      quadPanelEl = this.quadPanelEl = document.createElement('a-entity');\n      this.el.appendChild(quadPanelEl);\n    }\n\n    quadPanelEl.setAttribute('material', {\n      shader: 'flat',\n      src: this.data.src,\n      transparent: true\n    });\n\n    quadPanelEl.setAttribute('geometry', {\n      primitive: 'plane',\n      height: this.data.height || this.texture.image.height / 1000,\n      width: this.data.width || this.texture.image.height / 1000\n    });\n  },\n\n  draw: function () {\n    var sceneEl = this.el.sceneEl;\n    var gl = this.el.sceneEl.renderer.getContext();\n    var glayer = this.xrGLFactory.getSubImage(this.layer, sceneEl.frame);\n    var texture = sceneEl.renderer.properties.get(this.texture).__webglTexture;\n    var previousFrameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n    gl.viewport(glayer.viewport.x, glayer.viewport.y, glayer.viewport.width, glayer.viewport.height);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, glayer.colorTexture, 0);\n\n    blitTexture(gl, texture, glayer, this.data.src);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, previousFrameBuffer);\n  },\n\n  updateTransform: function () {\n    var el = this.el;\n    var position = this.position;\n    var quaternion = this.quaternion;\n    el.object3D.updateMatrixWorld();\n    position.setFromMatrixPosition(el.object3D.matrixWorld);\n    quaternion.setFromRotationMatrix(el.object3D.matrixWorld);\n    if (!this.layerEnabled) { position.set(0, 0, 100000000); }\n    this.layer.transform = new XRRigidTransform(position, quaternion);\n  },\n\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrSession = sceneEl.xrSession;\n    if (!sceneEl.hasWebXR || !XRWebGLBinding || !xrSession) {\n      warn('The layer component requires WebXR and the layers API enabled');\n      return;\n    }\n    xrSession.requestReferenceSpace('local-floor').then(this.onRequestedReferenceSpace);\n    this.layerEnabled = true;\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = false;\n    }\n    if (this.data.src.play) { this.data.src.play(); }\n  },\n\n  onExitVR: function () {\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = true;\n    }\n    this.destroyLayer();\n  },\n\n  onRequestedReferenceSpace: function (referenceSpace) {\n    this.referenceSpace = referenceSpace;\n  }\n});\n\nfunction blitTexture (gl, texture, subImage, textureEl) {\n  var xrReadFramebuffer = gl.createFramebuffer();\n  var x1offset = subImage.viewport.x;\n  var y1offset = subImage.viewport.y;\n  var x2offset = subImage.viewport.x + subImage.viewport.width;\n  var y2offset = subImage.viewport.y + subImage.viewport.height;\n\n  // Update video texture.\n  if (textureEl.tagName === 'VIDEO') {\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, textureEl.width, textureEl.height, gl.RGB, gl.UNSIGNED_BYTE, textureEl);\n  }\n\n  // Bind texture to read framebuffer.\n  gl.bindFramebuffer(gl.READ_FRAMEBUFFER, xrReadFramebuffer);\n  gl.framebufferTexture2D(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n  // Blit into layer buffer.\n  gl.readBuffer(gl.COLOR_ATTACHMENT0);\n  gl.blitFramebuffer(0, 0, textureEl.width, textureEl.height, x1offset, y1offset, x2offset, y2offset, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n\n  gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);\n  gl.deleteFramebuffer(xrReadFramebuffer);\n}\n", "/**\n * Find the distance from a plane defined by a point on the plane and the normal of the plane to any point.\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @returns {number}\n */\nexport function distanceOfPointFromPlane (positionOnPlane, planeNormal, pointToTest) {\n  // the d value in the plane equation a*x + b*y + c*z=d\n  var d = planeNormal.dot(positionOnPlane);\n\n  // distance of point from plane\n  return (d - planeNormal.dot(pointToTest)) / planeNormal.length();\n}\n\n/**\n * Find the point on a plane that lies closest to\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @param {THREE.Vector3} resultPoint where to store the result.\n * @returns {THREE.Vector3}\n */\nexport function nearestPointInPlane (positionOnPlane, planeNormal, pointToTest, resultPoint) {\n  var t = distanceOfPointFromPlane(positionOnPlane, planeNormal, pointToTest);\n  // closest point on the plane\n  resultPoint.copy(planeNormal);\n  resultPoint.multiplyScalar(t);\n  resultPoint.add(pointToTest);\n  return resultPoint;\n}\n", "import { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nregisterComponent('laser-controls', {\n  schema: {\n    hand: {default: 'right'},\n    model: {default: true},\n    defaultModelColor: {type: 'color', default: 'grey'}\n  },\n\n  init: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n    var controlsConfiguration = {hand: data.hand, model: data.model};\n\n    // Set all controller models.\n    el.setAttribute('hp-mixed-reality-controls', controlsConfiguration);\n    el.setAttribute('magicleap-controls', controlsConfiguration);\n    el.setAttribute('oculus-go-controls', controlsConfiguration);\n    el.setAttribute('meta-touch-controls', controlsConfiguration);\n    el.setAttribute('pico-controls', controlsConfiguration);\n    el.setAttribute('valve-index-controls', controlsConfiguration);\n    el.setAttribute('vive-controls', controlsConfiguration);\n    el.setAttribute('vive-focus-controls', controlsConfiguration);\n    el.setAttribute('windows-motion-controls', controlsConfiguration);\n    el.setAttribute('generic-tracked-controller-controls', {hand: controlsConfiguration.hand});\n\n    // Wait for controller to connect, or have a valid pointing pose, before creating ray\n    el.addEventListener('controllerconnected', createRay);\n    el.addEventListener('controllerdisconnected', hideRay);\n    el.addEventListener('controllermodelready', function (evt) {\n      createRay(evt);\n      self.modelReady = true;\n    });\n\n    function createRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n\n      if (!controllerConfig) { return; }\n\n      // Show the line unless a particular config opts to hide it, until a controllermodelready\n      // event comes through.\n      var raycasterConfig = utils.extend({\n        showLine: true\n      }, controllerConfig.raycaster || {});\n\n      // The controllermodelready event contains a rayOrigin that takes into account\n      // offsets specific to the loaded model.\n      if (evt.detail.rayOrigin) {\n        raycasterConfig.origin = evt.detail.rayOrigin.origin;\n        raycasterConfig.direction = evt.detail.rayOrigin.direction;\n        raycasterConfig.showLine = true;\n      }\n\n      // Only apply a default raycaster if it does not yet exist. This prevents it overwriting\n      // config applied from a controllermodelready event.\n      if (evt.detail.rayOrigin || !self.modelReady) {\n        el.setAttribute('raycaster', raycasterConfig);\n      } else {\n        el.setAttribute('raycaster', 'showLine', true);\n      }\n\n      el.setAttribute('cursor', utils.extend({\n        fuse: false\n      }, controllerConfig.cursor));\n    }\n\n    function hideRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n      if (!controllerConfig) { return; }\n      el.setAttribute('raycaster', 'showLine', false);\n    }\n  },\n\n  config: {\n    'generic-tracked-controller-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'hp-mixed-reality-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'magicleap-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'oculus-go-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0.0005, z: 0}}\n    },\n\n    'meta-touch-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'pico-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'valve-index-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-focus-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'windows-motion-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {showLine: false}\n    }\n  }\n});\n", "import * as THREE from 'three';\nimport { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\nimport { diff, debug, srcLoader } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport * as mathUtils from '../utils/math.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\nvar warn = debug('components:light:warn');\nvar CubeLoader = new THREE.CubeTextureLoader();\n\nvar probeCache = {};\n\n/**\n * Light component.\n */\nexport var Component = registerComponent('light', {\n  schema: {\n    angle: {default: 60, if: {type: ['spot']}},\n    color: {type: 'color', if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot']}},\n    envMap: {default: '', if: {type: ['probe']}},\n    groundColor: {type: 'color', if: {type: ['hemisphere']}},\n    decay: {default: 1, if: {type: ['point', 'spot']}},\n    distance: {default: 0.0, min: 0, if: {type: ['point', 'spot']}},\n    intensity: {default: 3.14, min: 0, if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe']}},\n    penumbra: {default: 0, min: 0, max: 1, if: {type: ['spot']}},\n    type: {\n      default: 'directional',\n      oneOf: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe'],\n      schemaChange: true\n    },\n    target: {type: 'selector', if: {type: ['spot', 'directional']}},\n\n    // Shadows.\n    castShadow: {default: false, if: {type: ['point', 'spot', 'directional']}},\n    shadowBias: {default: 0, if: {castShadow: true}},\n    shadowCameraFar: {default: 500, if: {castShadow: true}},\n    shadowCameraFov: {default: 90, if: {castShadow: true}},\n    shadowCameraNear: {default: 0.5, if: {castShadow: true}},\n    shadowCameraTop: {default: 5, if: {castShadow: true}},\n    shadowCameraRight: {default: 5, if: {castShadow: true}},\n    shadowCameraBottom: {default: -5, if: {castShadow: true}},\n    shadowCameraLeft: {default: -5, if: {castShadow: true}},\n    shadowCameraVisible: {default: false, if: {castShadow: true}},\n    shadowCameraAutomatic: {default: '', if: {type: ['directional']}},\n    shadowMapHeight: {default: 512, if: {castShadow: true}},\n    shadowMapWidth: {default: 512, if: {castShadow: true}},\n    shadowRadius: {default: 1, if: {castShadow: true}}\n  },\n\n  /**\n   * Notifies scene a light has been added to remove default lighting.\n   */\n  init: function () {\n    var el = this.el;\n    this.light = null;\n    this.defaultTarget = null;\n    this.system.registerLight(el);\n  },\n\n  /**\n   * (Re)create or update light.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var diffData = diff(data, oldData);\n    var light = this.light;\n    var self = this;\n\n    // Existing light.\n    if (light && !('type' in diffData)) {\n      var shadowsLoaded = false;\n      // Light type has not changed. Update light.\n      Object.keys(diffData).forEach(function (key) {\n        var value = data[key];\n\n        switch (key) {\n          case 'color': {\n            light.color.set(value);\n            break;\n          }\n\n          case 'groundColor': {\n            light.groundColor.set(value);\n            break;\n          }\n\n          case 'angle': {\n            light.angle = degToRad(value);\n            break;\n          }\n\n          case 'target': {\n            // Reset target if selector is null.\n            if (value === null) {\n              if (data.type === 'spot' || data.type === 'directional') {\n                light.target = self.defaultTarget;\n              }\n            } else {\n              // Target specified, set target to entity's `object3D` when it is loaded.\n              if (value.hasLoaded) {\n                self.onSetTarget(value, light);\n              } else {\n                value.addEventListener('loaded', self.onSetTarget.bind(self, value, light));\n              }\n            }\n            break;\n          }\n\n          case 'envMap':\n            self.updateProbeMap(data, light);\n            break;\n\n          case 'castShadow':\n          case 'shadowBias':\n          case 'shadowCameraFar':\n          case 'shadowCameraFov':\n          case 'shadowCameraNear':\n          case 'shadowCameraTop':\n          case 'shadowCameraRight':\n          case 'shadowCameraBottom':\n          case 'shadowCameraLeft':\n          case 'shadowCameraVisible':\n          case 'shadowMapHeight':\n          case 'shadowMapWidth':\n          case 'shadowRadius':\n            if (!shadowsLoaded) {\n              self.updateShadow();\n              shadowsLoaded = true;\n            }\n            break;\n\n          case 'shadowCameraAutomatic':\n            if (data.shadowCameraAutomatic) {\n              self.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n            } else {\n              self.shadowCameraAutomaticEls = [];\n            }\n            break;\n\n          default: {\n            light[key] = value;\n          }\n        }\n      });\n      return;\n    }\n\n    // No light yet or light type has changed. Create and add light.\n    this.setLight(this.data);\n    this.updateShadow();\n  },\n\n  tick: (function () {\n    var bbox = new THREE.Box3();\n    var normal = new THREE.Vector3();\n    var cameraWorldPosition = new THREE.Vector3();\n    var tempMat = new THREE.Matrix4();\n    var sphere = new THREE.Sphere();\n    var tempVector = new THREE.Vector3();\n\n    return function () {\n      if (!(\n        this.data.type === 'directional' &&\n        this.light.shadow &&\n        this.light.shadow.camera instanceof THREE.OrthographicCamera &&\n        this.shadowCameraAutomaticEls.length\n      )) return;\n\n      var camera = this.light.shadow.camera;\n      camera.getWorldDirection(normal);\n      camera.getWorldPosition(cameraWorldPosition);\n      tempMat.copy(camera.matrixWorld);\n      tempMat.invert();\n\n      camera.near = 1;\n      camera.left = 100000;\n      camera.right = -100000;\n      camera.top = -100000;\n      camera.bottom = 100000;\n      this.shadowCameraAutomaticEls.forEach(function (el) {\n        bbox.setFromObject(el.object3D);\n        bbox.getBoundingSphere(sphere);\n        var distanceToPlane = mathUtils.distanceOfPointFromPlane(cameraWorldPosition, normal, sphere.center);\n        var pointOnCameraPlane = mathUtils.nearestPointInPlane(cameraWorldPosition, normal, sphere.center, tempVector);\n\n        var pointInXYPlane = pointOnCameraPlane.applyMatrix4(tempMat);\n        camera.near = Math.min(-distanceToPlane - sphere.radius - 1, camera.near);\n        camera.left = Math.min(-sphere.radius + pointInXYPlane.x, camera.left);\n        camera.right = Math.max(sphere.radius + pointInXYPlane.x, camera.right);\n        camera.top = Math.max(sphere.radius + pointInXYPlane.y, camera.top);\n        camera.bottom = Math.min(-sphere.radius + pointInXYPlane.y, camera.bottom);\n      });\n      camera.updateProjectionMatrix();\n    };\n  }()),\n\n  setLight: function (data) {\n    var el = this.el;\n    var newLight = this.getLight(data);\n    if (newLight) {\n      if (this.light) {\n        el.removeObject3D('light');\n      }\n\n      this.light = newLight;\n      this.light.el = el;\n      el.setObject3D('light', this.light);\n\n      // HACK solution for issue #1624\n      if (data.type === 'spot' || data.type === 'directional' || data.type === 'hemisphere') {\n        el.getObject3D('light').translateY(-1);\n      }\n\n      // set and position default lighttarget as a child to enable spotlight orientation\n      if (data.type === 'spot') {\n        el.setObject3D('light-target', this.defaultTarget);\n        el.getObject3D('light-target').position.set(0, 0, -1);\n      }\n\n      if (data.shadowCameraAutomatic) {\n        this.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n      } else {\n        this.shadowCameraAutomaticEls = [];\n      }\n    }\n  },\n\n  /**\n   * Updates shadow-related properties on the current light.\n   */\n  updateShadow: function () {\n    var el = this.el;\n    var data = this.data;\n    var light = this.light;\n\n    light.castShadow = data.castShadow;\n\n    // Shadow camera helper.\n    var cameraHelper = el.getObject3D('cameraHelper');\n    if (data.shadowCameraVisible && !cameraHelper) {\n      cameraHelper = new THREE.CameraHelper(light.shadow.camera);\n      el.setObject3D('cameraHelper', cameraHelper);\n    } else if (!data.shadowCameraVisible && cameraHelper) {\n      el.removeObject3D('cameraHelper');\n    }\n\n    if (!data.castShadow) { return light; }\n\n    // Shadow appearance.\n    light.shadow.bias = data.shadowBias;\n    light.shadow.radius = data.shadowRadius;\n    light.shadow.mapSize.height = data.shadowMapHeight;\n    light.shadow.mapSize.width = data.shadowMapWidth;\n\n    // Shadow camera.\n    light.shadow.camera.near = data.shadowCameraNear;\n    light.shadow.camera.far = data.shadowCameraFar;\n    if (light.shadow.camera instanceof THREE.OrthographicCamera) {\n      light.shadow.camera.top = data.shadowCameraTop;\n      light.shadow.camera.right = data.shadowCameraRight;\n      light.shadow.camera.bottom = data.shadowCameraBottom;\n      light.shadow.camera.left = data.shadowCameraLeft;\n    } else {\n      light.shadow.camera.fov = data.shadowCameraFov;\n    }\n    light.shadow.camera.updateProjectionMatrix();\n\n    if (cameraHelper) { cameraHelper.update(); }\n  },\n\n  /**\n   * Creates a new three.js light object given data object defining the light.\n   *\n   * @param {object} data\n   */\n  getLight: function (data) {\n    var angle = data.angle;\n    var color = new THREE.Color(data.color);\n    color = color.getHex();\n    var decay = data.decay;\n    var distance = data.distance;\n    var groundColor = new THREE.Color(data.groundColor);\n    groundColor = groundColor.getHex();\n    var intensity = data.intensity;\n    var type = data.type;\n    var target = data.target;\n    var light = null;\n\n    switch (type.toLowerCase()) {\n      case 'ambient': {\n        return new THREE.AmbientLight(color, intensity);\n      }\n\n      case 'directional': {\n        light = new THREE.DirectionalLight(color, intensity);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'hemisphere': {\n        return new THREE.HemisphereLight(color, groundColor, intensity);\n      }\n\n      case 'point': {\n        return new THREE.PointLight(color, intensity, distance, decay);\n      }\n\n      case 'spot': {\n        light = new THREE.SpotLight(color, intensity, distance, degToRad(angle), data.penumbra, decay);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'probe': {\n        light = new THREE.LightProbe();\n        this.updateProbeMap(data, light);\n        return light;\n      }\n\n      default: {\n        warn('%s is not a valid light type. ' +\n           'Choose from ambient, directional, hemisphere, point, spot.', type);\n      }\n    }\n  },\n\n  /**\n   * Generate the spherical harmonics for the LightProbe from a cube map\n   */\n  updateProbeMap: function (data, light) {\n    if (!data.envMap) {\n      // reset parameters if no map\n      light.copy(new THREE.LightProbe());\n      return;\n    }\n\n    // Populate the cache if not done for this envMap yet\n    if (probeCache[data.envMap] === undefined) {\n      probeCache[data.envMap] = new window.Promise(function (resolve) {\n        srcLoader.validateCubemapSrc(data.envMap, function loadEnvMap (urls) {\n          CubeLoader.load(urls, function (cube) {\n            var tempLightProbe = LightProbeGenerator.fromCubeTexture(cube);\n            probeCache[data.envMap] = tempLightProbe;\n            resolve(tempLightProbe);\n          });\n        });\n      });\n    }\n\n    // Copy over light probe properties\n    if (probeCache[data.envMap] instanceof window.Promise) {\n      probeCache[data.envMap].then(function (tempLightProbe) {\n        light.copy(tempLightProbe);\n      });\n    } else if (probeCache[data.envMap] instanceof THREE.LightProbe) {\n      light.copy(probeCache[data.envMap]);\n    }\n  },\n\n  onSetTarget: function (targetEl, light) {\n    light.target = targetEl.object3D;\n  },\n\n  /**\n   * Remove light on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    el.removeObject3D('light');\n    if (el.getObject3D('cameraHelper')) {\n      el.removeObject3D('cameraHelper');\n    }\n  }\n});\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { registerShader } from '../core/shader.js';\nvar DEFAULT_PREVIEW_DISTANCE = 15.0;\n\n/**\n * Link component. Connect experiences and traverse between them in VR\n *\n * @member {object} hiddenEls - Store the hidden elements during peek mode.\n */\nexport var Component = registerComponent('link', {\n  schema: {\n    backgroundColor: {default: 'red', type: 'color'},\n    borderColor: {default: 'white', type: 'color'},\n    highlighted: {default: false},\n    highlightedColor: {default: '#24CAFF', type: 'color'},\n    href: {default: ''},\n    image: {type: 'asset'},\n    on: {default: 'click'},\n    peekMode: {default: false},\n    title: {default: ''},\n    titleColor: {default: 'white', type: 'color'},\n    visualAspectEnabled: {default: false}\n  },\n\n  init: function () {\n    this.navigate = this.navigate.bind(this);\n    this.previousQuaternion = undefined;\n    this.quaternionClone = new THREE.Quaternion();\n    // Store hidden elements during peek mode so we can show them again later.\n    this.hiddenEls = [];\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var backgroundColor;\n    var strokeColor;\n\n    if (!data.visualAspectEnabled) { return; }\n\n    var elScale = this.el.getAttribute('scale');\n    this.previewDistance = DEFAULT_PREVIEW_DISTANCE * (elScale.x + elScale.y) / 2;\n\n    this.initVisualAspect();\n\n    backgroundColor = data.highlighted ? data.highlightedColor : data.backgroundColor;\n    strokeColor = data.highlighted ? data.highlightedColor : data.borderColor;\n    el.setAttribute('material', 'backgroundColor', backgroundColor);\n    el.setAttribute('material', 'strokeColor', strokeColor);\n\n    if (data.on !== oldData.on) { this.updateEventListener(); }\n\n    if (oldData.peekMode !== undefined &&\n        data.peekMode !== oldData.peekMode) { this.updatePeekMode(); }\n\n    if (!data.image || oldData.image === data.image) { return; }\n\n    el.setAttribute('material', 'pano',\n                    typeof data.image === 'string' ? data.image : data.image.src);\n  },\n\n  /*\n   * Toggle all elements and full 360 preview of the linked page.\n   */\n  updatePeekMode: function () {\n    var el = this.el;\n    var sphereEl = this.sphereEl;\n    if (this.data.peekMode) {\n      this.hideAll();\n      el.getObject3D('mesh').visible = false;\n      sphereEl.setAttribute('visible', true);\n    } else {\n      this.showAll();\n      el.getObject3D('mesh').visible = true;\n      sphereEl.setAttribute('visible', false);\n    }\n  },\n\n  play: function () {\n    this.updateEventListener();\n  },\n\n  pause: function () {\n    this.removeEventListener();\n  },\n\n  updateEventListener: function () {\n    var el = this.el;\n    if (!el.isPlaying) { return; }\n    this.removeEventListener();\n    el.addEventListener(this.data.on, this.navigate);\n  },\n\n  removeEventListener: function () {\n    var on = this.data.on;\n    if (!on) { return; }\n    this.el.removeEventListener(on, this.navigate);\n  },\n\n  initVisualAspect: function () {\n    var el = this.el;\n    var semiSphereEl;\n    var sphereEl;\n    var textEl;\n\n    if (!this.data.visualAspectEnabled || this.visualAspectInitialized) { return; }\n\n    textEl = this.textEl = this.textEl || document.createElement('a-entity');\n    sphereEl = this.sphereEl = this.sphereEl || document.createElement('a-entity');\n    semiSphereEl = this.semiSphereEl = this.semiSphereEl || document.createElement('a-entity');\n\n    // Set portal.\n    el.setAttribute('geometry', {primitive: 'circle', radius: 1.0, segments: 64});\n    el.setAttribute('material', {shader: 'portal', pano: this.data.image, side: 'double', previewDistance: this.previewDistance});\n\n    // Set text that displays the link title and URL.\n    textEl.setAttribute('text', {\n      color: this.data.titleColor,\n      align: 'center',\n      font: 'kelsonsans',\n      value: this.data.title || this.data.href,\n      width: 4\n    });\n    textEl.setAttribute('position', '0 1.5 0');\n    el.appendChild(textEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    semiSphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 1.0,\n      phiStart: 0,\n      segmentsWidth: 64,\n      segmentsHeight: 64,\n      phiLength: 180,\n      thetaStart: 0,\n      thetaLength: 360\n    });\n    semiSphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    semiSphereEl.setAttribute('rotation', '0 180 0');\n    semiSphereEl.setAttribute('position', '0 0 0');\n    semiSphereEl.setAttribute('visible', false);\n    el.appendChild(semiSphereEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    sphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 10,\n      segmentsWidth: 64,\n      segmentsHeight: 64\n    });\n    sphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    sphereEl.setAttribute('visible', false);\n    el.appendChild(sphereEl);\n\n    this.visualAspectInitialized = true;\n  },\n\n  navigate: function () {\n    window.location = this.data.href;\n  },\n\n  /**\n   * 1. Swap plane that represents portal with sphere with a hole when the camera is close\n   * so user can peek inside portal. Sphere is rendered on opposite side of portal\n   * from where user enters.\n   * 2. Place the url/title above or inside portal depending on distance to camera.\n   * 3. Face portal to camera when far away from user.\n   */\n  tick: (function () {\n    var cameraWorldPosition = new THREE.Vector3();\n    var elWorldPosition = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n    var scale = new THREE.Vector3();\n\n    return function () {\n      var el = this.el;\n      var object3D = el.object3D;\n      var camera = el.sceneEl.camera;\n      var cameraPortalOrientation;\n      var distance;\n      var textEl = this.textEl;\n\n      if (!this.data.visualAspectEnabled) { return; }\n\n      // Update matrices\n      object3D.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n\n      object3D.matrix.decompose(elWorldPosition, quaternion, scale);\n      elWorldPosition.setFromMatrixPosition(object3D.matrixWorld);\n      cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n      distance = elWorldPosition.distanceTo(cameraWorldPosition);\n\n      if (distance > this.previewDistance * 1.33333) {\n        // Store original orientation to be restored when the portal stops facing the camera.\n        if (!this.previousQuaternion) {\n          this.quaternionClone.copy(quaternion);\n          this.previousQuaternion = this.quaternionClone;\n        }\n        // If the portal is far away from the user, face portal to camera.\n        object3D.lookAt(cameraWorldPosition);\n      } else {\n        // When portal is close to the user/camera.\n        cameraPortalOrientation = this.calculateCameraPortalOrientation();\n        // If user gets very close to portal, replace with holed sphere they can peek in.\n        if (distance < 0.5) {\n          // Configure text size and sphere orientation depending side user approaches portal.\n          if (this.semiSphereEl.getAttribute('visible') === true) { return; }\n          textEl.setAttribute('text', 'width', 1.5);\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('position', '0 0 0.75');\n            textEl.setAttribute('rotation', '0 180 0');\n            this.semiSphereEl.setAttribute('rotation', '0 0 0');\n          } else {\n            textEl.setAttribute('position', '0 0 -0.75');\n            textEl.setAttribute('rotation', '0 0 0');\n            this.semiSphereEl.setAttribute('rotation', '0 180 0');\n          }\n          el.getObject3D('mesh').visible = false;\n          this.semiSphereEl.setAttribute('visible', true);\n          this.peekCameraPortalOrientation = cameraPortalOrientation;\n        } else {\n          // Calculate which side the camera is approaching the camera (back / front).\n          // Adjust text orientation based on camera position.\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('rotation', '0 180 0');\n          } else {\n            textEl.setAttribute('rotation', '0 0 0');\n          }\n          textEl.setAttribute('text', 'width', 5);\n          textEl.setAttribute('position', '0 1.5 0');\n          el.getObject3D('mesh').visible = true;\n          this.semiSphereEl.setAttribute('visible', false);\n          this.peekCameraPortalOrientation = undefined;\n        }\n        if (this.previousQuaternion) {\n          object3D.quaternion.copy(this.previousQuaternion);\n          this.previousQuaternion = undefined;\n        }\n      }\n    };\n  })(),\n\n  hideAll: function () {\n    var el = this.el;\n    var hiddenEls = this.hiddenEls;\n    var self = this;\n    if (hiddenEls.length > 0) { return; }\n    el.sceneEl.object3D.traverse(function (object) {\n      if (object && object.el && object.el.hasAttribute('link-controls')) { return; }\n      if (!object.el || object === el.sceneEl.object3D || object.el === el ||\n          object.el === self.sphereEl || object.el === el.sceneEl.cameraEl ||\n          object.el.getAttribute('visible') === false || object.el === self.textEl ||\n          object.el === self.semiSphereEl) {\n        return;\n      }\n      object.el.setAttribute('visible', false);\n      hiddenEls.push(object.el);\n    });\n  },\n\n  showAll: function () {\n    this.hiddenEls.forEach(function (el) { el.setAttribute('visible', true); });\n    this.hiddenEls = [];\n  },\n\n  /**\n   * Calculate whether the camera faces the front or back face of the portal.\n   * @returns {number} > 0 if camera faces front of portal, < 0 if it faces back of portal.\n   */\n  calculateCameraPortalOrientation: (function () {\n    var mat4 = new THREE.Matrix4();\n    var cameraPosition = new THREE.Vector3();\n    var portalNormal = new THREE.Vector3(0, 0, 1);\n    var portalPosition = new THREE.Vector3(0, 0, 0);\n\n    return function () {\n      var el = this.el;\n      var camera = el.sceneEl.camera;\n\n      // Reset tmp variables.\n      cameraPosition.set(0, 0, 0);\n      portalNormal.set(0, 0, 1);\n      portalPosition.set(0, 0, 0);\n\n      // Apply portal orientation to the normal.\n      el.object3D.matrixWorld.extractRotation(mat4);\n      portalNormal.applyMatrix4(mat4);\n\n      // Calculate portal world position.\n      el.object3D.updateMatrixWorld();\n      el.object3D.localToWorld(portalPosition);\n\n      // Calculate camera world position.\n      camera.parent.parent.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n      camera.localToWorld(cameraPosition);\n\n      // Calculate vector from portal to camera.\n      // (portal) -------> (camera)\n      cameraPosition.sub(portalPosition).normalize();\n      portalNormal.normalize();\n\n      // Side where camera approaches portal is given by sign of dot product of portal normal\n      // and portal to camera vectors.\n      return Math.sign(portalNormal.dot(cameraPosition));\n    };\n  })(),\n\n  remove: function () {\n    this.removeEventListener();\n  }\n});\n\n/* eslint-disable */\nregisterShader('portal', {\n  schema: {\n    borderEnabled: {default: 1.0, type: 'int', is: 'uniform'},\n    backgroundColor: {default: 'red', type: 'color', is: 'uniform'},\n    pano: {type: 'map', is: 'uniform'},\n    strokeColor: {default: 'white', type: 'color', is: 'uniform'},\n    previewDistance: {default: DEFAULT_PREVIEW_DISTANCE, type: 'float', is: 'uniform'}\n  },\n\n  vertexShader: [\n    'vec3 portalPosition;',\n    'varying vec3 vWorldPosition;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'void main() {',\n    'vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);',\n    'portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;',\n    'vDistance = length(portalPosition - cameraPosition);',\n    'vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    '#define RECIPROCAL_PI2 0.15915494',\n    'uniform sampler2D pano;',\n    'uniform vec3 strokeColor;',\n    'uniform vec3 backgroundColor;',\n    'uniform float borderEnabled;',\n    'uniform float previewDistance;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    'vec3 direction = normalize(vWorldPosition - cameraPosition);',\n    'vec2 sampleUV;',\n    'float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);',\n    'sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);',\n    'sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;',\n    'if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {',\n    'gl_FragColor = vec4(strokeColor, 1.0);',\n    '} else {',\n    'gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));',\n    '}',\n    '}'\n  ].join('\\n')\n});\n/* eslint-enable */\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('line', {\n  schema: {\n    start: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    end: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    color: {type: 'color', default: '#74BEC1'},\n    opacity: {type: 'number', default: 1},\n    visible: {default: true}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var data = this.data;\n    var geometry;\n    var material;\n    material = this.material = new THREE.LineBasicMaterial({\n      color: data.color,\n      opacity: data.opacity,\n      transparent: data.opacity < 1,\n      visible: data.visible\n    });\n    geometry = this.geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(geometry, material);\n    this.el.setObject3D(this.attrName, this.line);\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var geometry = this.geometry;\n    var geoNeedsUpdate = false;\n    var material = this.material;\n    var positionArray = geometry.attributes.position.array;\n\n    // Update geometry.\n    if (!isEqualVec3(data.start, oldData.start)) {\n      positionArray[0] = data.start.x;\n      positionArray[1] = data.start.y;\n      positionArray[2] = data.start.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (!isEqualVec3(data.end, oldData.end)) {\n      positionArray[3] = data.end.x;\n      positionArray[4] = data.end.y;\n      positionArray[5] = data.end.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (geoNeedsUpdate) {\n      geometry.attributes.position.needsUpdate = true;\n      geometry.computeBoundingSphere();\n    }\n\n    material.color.setStyle(data.color);\n    material.opacity = data.opacity;\n    material.transparent = data.opacity < 1;\n    material.visible = data.visible;\n  },\n\n  remove: function () {\n    this.el.removeObject3D(this.attrName, this.line);\n  }\n});\n\nfunction isEqualVec3 (a, b) {\n  if (!a || !b) { return false; }\n  return (a.x === b.x && a.y === b.y && a.z === b.z);\n}\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'logitech-mx-ink';\nvar LOGITECH_MX_INK_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/logitech/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 5 - touchpad\n * 6 - tip\n * 7 - dock\n *\n*/\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  },\n  right: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  }\n};\n\n/**\n * Logitech MX Ink Controls\n */\nexport var Component = registerComponent('logitech-mx-ink-controls', {\n  schema: {\n    hand: {default: 'left'},\n    model: {default: true},\n    orientationOffset: {type: 'vec3'}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    el.sceneEl.removeEventListener('exit-vr', this.onExitVR);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    var id = GAMEPAD_ID;\n    el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true,\n      orientationOffset: data.orientationOffset\n    });\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (!this.data.model) { return; }\n    if (controllerObject3D) {\n      controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n      this.el.setObject3D('mesh', controllerObject3D);\n      return;\n    }\n    this.el.setAttribute('gltf-model', LOGITECH_MX_INK_MODEL_GLB_BASE_URL + 'logitech-mx-ink.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'logitech-mx-ink-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n\n    this.controllerObject3D = this.el.getObject3D('mesh');\n    this.controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n", "/* global DeviceOrientationEvent  */\nimport * as THREE from 'three';\nimport { DeviceOrientationControls } from '../../vendor/DeviceOrientationControls.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\n// To avoid recalculation at every mouse movement tick\nvar PI_2 = Math.PI / 2;\n\n/**\n * look-controls. Update entity pose, factoring mouse, touch.\n */\nexport var Component = registerComponent('look-controls', {\n  dependencies: ['position', 'rotation'],\n\n  schema: {\n    enabled: {default: true},\n    magicWindowTrackingEnabled: {default: true},\n    pointerLockEnabled: {default: false},\n    reverseMouseDrag: {default: false},\n    reverseTouchDrag: {default: false},\n    touchEnabled: {default: true},\n    mouseEnabled: {default: true}\n  },\n\n  init: function () {\n    this.deltaYaw = 0;\n    this.previousHMDPosition = new THREE.Vector3();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.magicWindowAbsoluteEuler = new THREE.Euler();\n    this.magicWindowDeltaEuler = new THREE.Euler();\n    this.position = new THREE.Vector3();\n    this.magicWindowObject = new THREE.Object3D();\n    this.rotation = {};\n    this.deltaRotation = {};\n    this.savedPose = null;\n    this.pointerLocked = false;\n    this.setupMouseControls();\n    this.bindMethods();\n    this.previousMouseEvent = {};\n\n    this.setupMagicWindowControls();\n\n    // To save / restore camera pose\n    this.savedPose = {\n      position: new THREE.Vector3(),\n      rotation: new THREE.Euler()\n    };\n\n    // Call enter VR handler if the scene has entered VR before the event listeners attached.\n    if (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode')) { this.onEnterVR(); }\n  },\n\n  setupMagicWindowControls: function () {\n    var magicWindowControls;\n    var data = this.data;\n\n    // Only on mobile devices and only enabled if DeviceOrientation permission has been granted.\n    if (utils.device.isMobile() || utils.device.isMobileDeviceRequestingDesktopSite()) {\n      magicWindowControls = this.magicWindowControls = new DeviceOrientationControls(this.magicWindowObject);\n      if (typeof DeviceOrientationEvent !== 'undefined' && DeviceOrientationEvent.requestPermission) {\n        magicWindowControls.enabled = false;\n        if (this.el.sceneEl.components['device-orientation-permission-ui'].permissionGranted) {\n          magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n        } else {\n          this.el.sceneEl.addEventListener('deviceorientationpermissiongranted', function () {\n            magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n          });\n        }\n      }\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n\n    // Disable grab cursor classes if no longer enabled.\n    if (data.enabled !== oldData.enabled) {\n      this.updateGrabCursor(data.enabled);\n    }\n\n    // Reset magic window eulers if tracking is disabled.\n    if (oldData && !data.magicWindowTrackingEnabled && oldData.magicWindowTrackingEnabled) {\n      this.magicWindowAbsoluteEuler.set(0, 0, 0);\n      this.magicWindowDeltaEuler.set(0, 0, 0);\n    }\n\n    // Pass on magic window tracking setting to magicWindowControls.\n    if (this.magicWindowControls) {\n      this.magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n    }\n\n    if (oldData && !data.pointerLockEnabled !== oldData.pointerLockEnabled) {\n      this.removeEventListeners();\n      this.addEventListeners();\n      if (this.pointerLocked) { this.exitPointerLock(); }\n    }\n  },\n\n  tick: function (t) {\n    var data = this.data;\n    if (!data.enabled) { return; }\n    this.updateOrientation();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  bindMethods: function () {\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n    this.onPointerLockChange = this.onPointerLockChange.bind(this);\n    this.onPointerLockError = this.onPointerLockError.bind(this);\n  },\n\n /**\n  * Set up states and Object3Ds needed to store rotation data.\n  */\n  setupMouseControls: function () {\n    this.mouseDown = false;\n    this.pitchObject = new THREE.Object3D();\n    this.yawObject = new THREE.Object3D();\n    this.yawObject.position.y = 10;\n    this.yawObject.add(this.pitchObject);\n  },\n\n  /**\n   * Add mouse and touch event listeners to canvas.\n   */\n  addEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    // Wait for canvas to load.\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    // Mouse events.\n    canvasEl.addEventListener('mousedown', this.onMouseDown, false);\n    window.addEventListener('mousemove', this.onMouseMove, false);\n    window.addEventListener('mouseup', this.onMouseUp, false);\n\n    // Touch events.\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\n    window.addEventListener('touchmove', this.onTouchMove, {passive: true});\n    window.addEventListener('touchend', this.onTouchEnd, {passive: true});\n\n    // sceneEl events.\n    sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    sceneEl.addEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    if (this.data.pointerLockEnabled) {\n      document.addEventListener('pointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('pointerlockerror', this.onPointerLockError, false);\n    }\n  },\n\n  /**\n   * Remove mouse and touch event listeners from canvas.\n   */\n  removeEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    if (!canvasEl) { return; }\n\n    // Mouse events.\n    canvasEl.removeEventListener('mousedown', this.onMouseDown);\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n\n    // Touch events.\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    // sceneEl events.\n    sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    sceneEl.removeEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    document.removeEventListener('pointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('pointerlockerror', this.onPointerLockError, false);\n  },\n\n  /**\n   * Update orientation for mobile, mouse drag, and headset.\n   * Mouse-drag only enabled if HMD is not active.\n   */\n  updateOrientation: function () {\n    var object3D = this.el.object3D;\n    var pitchObject = this.pitchObject;\n    var yawObject = this.yawObject;\n    var sceneEl = this.el.sceneEl;\n\n    // In VR or AR mode, THREE is in charge of updating the camera pose.\n    if ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected()) {\n      // With WebXR THREE applies headset pose to the object3D internally.\n      return;\n    }\n\n    this.updateMagicWindowOrientation();\n\n    // On mobile, do camera rotation with touch events and sensors.\n    object3D.rotation.x = this.magicWindowDeltaEuler.x + pitchObject.rotation.x;\n    object3D.rotation.y = this.magicWindowDeltaEuler.y + yawObject.rotation.y;\n    object3D.rotation.z = this.magicWindowDeltaEuler.z;\n  },\n\n  updateMagicWindowOrientation: function () {\n    var magicWindowAbsoluteEuler = this.magicWindowAbsoluteEuler;\n    var magicWindowDeltaEuler = this.magicWindowDeltaEuler;\n    // Calculate magic window HMD quaternion.\n    if (this.magicWindowControls && this.magicWindowControls.enabled) {\n      this.magicWindowControls.update();\n      magicWindowAbsoluteEuler.setFromQuaternion(this.magicWindowObject.quaternion, 'YXZ');\n      if (!this.previousMagicWindowYaw && magicWindowAbsoluteEuler.y !== 0) {\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n      if (this.previousMagicWindowYaw) {\n        magicWindowDeltaEuler.x = magicWindowAbsoluteEuler.x;\n        magicWindowDeltaEuler.y += magicWindowAbsoluteEuler.y - this.previousMagicWindowYaw;\n        magicWindowDeltaEuler.z = magicWindowAbsoluteEuler.z;\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n    }\n  },\n\n  /**\n   * Translate mouse drag into rotation.\n   *\n   * Dragging up and down rotates the camera around the X-axis (yaw).\n   * Dragging left and right rotates the camera around the Y-axis (pitch).\n   */\n  onMouseMove: function (evt) {\n    var direction;\n    var movementX;\n    var movementY;\n    var pitchObject = this.pitchObject;\n    var previousMouseEvent = this.previousMouseEvent;\n    var yawObject = this.yawObject;\n\n    // Not dragging or not enabled.\n    if (!this.data.enabled || (!this.mouseDown && !this.pointerLocked)) { return; }\n\n    // Calculate delta.\n    if (this.pointerLocked) {\n      movementX = evt.movementX || evt.mozMovementX || 0;\n      movementY = evt.movementY || evt.mozMovementY || 0;\n    } else {\n      movementX = evt.screenX - previousMouseEvent.screenX;\n      movementY = evt.screenY - previousMouseEvent.screenY;\n    }\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n\n    // Calculate rotation.\n    direction = this.data.reverseMouseDrag ? 1 : -1;\n    yawObject.rotation.y += movementX * 0.002 * direction;\n    pitchObject.rotation.x += movementY * 0.002 * direction;\n    pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\n  },\n\n  /**\n   * Register mouse down to detect mouse drag.\n   */\n  onMouseDown: function (evt) {\n    var sceneEl = this.el.sceneEl;\n    if (!this.data.enabled || !this.data.mouseEnabled || ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected())) { return; }\n    // Handle only primary button.\n    if (evt.button !== 0) { return; }\n\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    this.mouseDown = true;\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n    this.showGrabbingCursor();\n\n    if (this.data.pointerLockEnabled && !this.pointerLocked) {\n      if (canvasEl.requestPointerLock) {\n        canvasEl.requestPointerLock();\n      } else if (canvasEl.mozRequestPointerLock) {\n        canvasEl.mozRequestPointerLock();\n      }\n    }\n  },\n\n  /**\n   * Shows grabbing cursor on scene\n   */\n  showGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = 'grabbing';\n  },\n\n  /**\n   * Hides grabbing cursor on scene\n   */\n  hideGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = '';\n  },\n\n  /**\n   * Register mouse up to detect release of mouse drag.\n   */\n  onMouseUp: function () {\n    this.mouseDown = false;\n    this.hideGrabbingCursor();\n  },\n\n  /**\n   * Register touch down to detect touch drag.\n   */\n  onTouchStart: function (evt) {\n    if (evt.touches.length !== 1 ||\n        !this.data.touchEnabled ||\n        this.el.sceneEl.is('vr-mode') ||\n        this.el.sceneEl.is('ar-mode')) { return; }\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n    this.touchStarted = true;\n  },\n\n  /**\n   * Translate touch move to Y-axis rotation.\n   */\n  onTouchMove: function (evt) {\n    var direction;\n    var canvas = this.el.sceneEl.canvas;\n    var deltaY;\n    var yawObject = this.yawObject;\n\n    if (!this.touchStarted || !this.data.touchEnabled) { return; }\n\n    deltaY = 2 * Math.PI * (evt.touches[0].pageX - this.touchStart.x) / canvas.clientWidth;\n\n    direction = this.data.reverseTouchDrag ? 1 : -1;\n    // Limit touch orientation to to yaw (y axis).\n    yawObject.rotation.y -= deltaY * 0.5 * direction;\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n  },\n\n  /**\n   * Register touch end to detect release of touch drag.\n   */\n  onTouchEnd: function () {\n    this.touchStarted = false;\n  },\n\n  /**\n   * Save pose.\n   */\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    if (!sceneEl.checkHeadsetConnected()) { return; }\n    this.saveCameraPose();\n    this.el.object3D.position.set(0, 0, 0);\n    this.el.object3D.rotation.set(0, 0, 0);\n    if (sceneEl.hasWebXR) {\n      this.el.object3D.matrixAutoUpdate = false;\n      this.el.object3D.updateMatrix();\n    }\n  },\n\n  /**\n   * Restore the pose.\n   */\n  onExitVR: function () {\n    if (!this.el.sceneEl.checkHeadsetConnected()) { return; }\n    this.restoreCameraPose();\n    this.previousHMDPosition.set(0, 0, 0);\n    this.el.object3D.matrixAutoUpdate = true;\n  },\n\n  /**\n   * Update Pointer Lock state.\n   */\n  onPointerLockChange: function () {\n    this.pointerLocked = !!(document.pointerLockElement || document.mozPointerLockElement);\n  },\n\n  /**\n   * Recover from Pointer Lock error.\n   */\n  onPointerLockError: function () {\n    this.pointerLocked = false;\n  },\n\n  // Exits pointer-locked mode.\n  exitPointerLock: function () {\n    document.exitPointerLock();\n    this.pointerLocked = false;\n  },\n\n  /**\n   * Toggle the feature of showing/hiding the grab cursor.\n   */\n  updateGrabCursor: function (enabled) {\n    var sceneEl = this.el.sceneEl;\n\n    function enableGrabCursor () { sceneEl.canvas.classList.add('a-grab-cursor'); }\n    function disableGrabCursor () { sceneEl.canvas.classList.remove('a-grab-cursor'); }\n\n    if (!sceneEl.canvas) {\n      if (enabled) {\n        sceneEl.addEventListener('render-target-loaded', enableGrabCursor);\n      } else {\n        sceneEl.addEventListener('render-target-loaded', disableGrabCursor);\n      }\n      return;\n    }\n\n    if (enabled) {\n      enableGrabCursor();\n      return;\n    }\n    disableGrabCursor();\n  },\n\n  /**\n   * Save camera pose before entering VR to restore later if exiting.\n   */\n  saveCameraPose: function () {\n    var el = this.el;\n\n    this.savedPose.position.copy(el.object3D.position);\n    this.savedPose.rotation.copy(el.object3D.rotation);\n    this.hasSavedPose = true;\n  },\n\n  /**\n   * Reset camera pose to before entering VR.\n   */\n  restoreCameraPose: function () {\n    var el = this.el;\n    var savedPose = this.savedPose;\n\n    if (!this.hasSavedPose) { return; }\n\n    // Reset camera orientation.\n    el.object3D.position.copy(savedPose.position);\n    el.object3D.rotation.copy(savedPose.rotation);\n    this.hasSavedPose = false;\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID_PREFIX = 'magicleap';\nvar GAMEPAD_ID_SUFFIX = '-one';\nvar GAMEPAD_ID_COMPOSITE = GAMEPAD_ID_PREFIX + GAMEPAD_ID_SUFFIX;\nvar MAGICLEAP_CONTROLLER_MODEL_GLB_URL = AFRAME_CDN_ROOT + 'controllers/magicleap/magicleap-one-controller.glb';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 2 - touchpad\n * 3 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'menu']\n};\n\n/**\n * Magic Leap Controls\n * Interface with Magic Leap control and map Gamepad events to controller\n * buttons: trigger, grip, touchpad, and menu.\n * Load a controller model.\n */\nexport var Component = registerComponent('magicleap-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_COMPOSITE,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID_COMPOSITE,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', MAGICLEAP_CONTROLLER_MODEL_GLB_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    // our glb scale is too large.\n    controllerObject3D.scale.set(0.01, 0.01, 0.01);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {},\n\n  setButtonColor: function (buttonName, color) {}\n\n});\n", "import * as THREE from 'three';\nimport * as utils from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport { shaders, shaderNames } from '../core/shader.js';\n\nvar error = utils.debug('components:material:error');\n\n/**\n * Material component.\n *\n * @member {object} shader - Determines how material is shaded. Defaults to `standard`,\n *         three.js's implementation of PBR. Another standard shading model is `flat` which\n *         uses MeshBasicMaterial.\n */\nexport var Component = registerComponent('material', {\n  schema: {\n    alphaTest: {default: 0.0, min: 0.0, max: 1.0},\n    depthTest: {default: true},\n    depthWrite: {default: true},\n    flatShading: {default: false},\n    npot: {default: false},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    opacity: {default: 1.0, min: 0.0, max: 1.0},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    shader: {default: 'standard', oneOf: shaderNames, schemaChange: true},\n    side: {default: 'front', oneOf: ['front', 'back', 'double']},\n    transparent: {default: false},\n    vertexColorsEnabled: {default: false},\n    visible: {default: true},\n    blending: {default: 'normal', oneOf: ['none', 'normal', 'additive', 'subtractive', 'multiply']},\n    dithering: {default: true},\n    anisotropy: {default: 0, min: 0}\n  },\n\n  init: function () {\n    this.material = null;\n  },\n\n  /**\n   * Update or create material.\n   *\n   * @param {object|null} oldData\n   */\n  update: function (oldData) {\n    var data = this.data;\n    if (!this.shader || data.shader !== oldData.shader) {\n      this.updateShader(data.shader);\n    }\n    this.shader.update(this.data);\n    this.updateMaterial(oldData);\n  },\n\n  updateSchema: function (data) {\n    var currentShader;\n    var newShader;\n    var schema;\n    var shader;\n\n    newShader = data && data.shader;\n    currentShader = this.oldData && this.oldData.shader;\n    shader = newShader || currentShader;\n    schema = shaders[shader] && shaders[shader].schema;\n\n    if (!schema) { error('Unknown shader schema ' + shader); }\n    if (currentShader && newShader === currentShader) { return; }\n    this.extendSchema(schema);\n    this.updateBehavior();\n  },\n\n  updateBehavior: function () {\n    var key;\n    var sceneEl = this.el.sceneEl;\n    var schema = this.schema;\n    var self = this;\n    var tickProperties;\n\n    function tickTime (time, delta) {\n      var key;\n      for (key in tickProperties) {\n        tickProperties[key] = time;\n      }\n      self.shader.update(tickProperties);\n    }\n\n    this.tick = undefined;\n\n    tickProperties = {};\n    for (key in schema) {\n      if (schema[key].type === 'time') {\n        this.tick = tickTime;\n        tickProperties[key] = true;\n      }\n    }\n\n    if (!sceneEl) { return; }\n    if (this.tick) {\n      sceneEl.addBehavior(this);\n    } else {\n      sceneEl.removeBehavior(this);\n    }\n  },\n\n  updateShader: function (shaderName) {\n    var data = this.data;\n    var Shader = shaders[shaderName] && shaders[shaderName].Shader;\n    var shaderInstance;\n\n    if (!Shader) { throw new Error('Unknown shader ' + shaderName); }\n\n    // Get material from A-Frame shader.\n    shaderInstance = this.shader = new Shader();\n    shaderInstance.el = this.el;\n    shaderInstance.init(data);\n    this.setMaterial(shaderInstance.material);\n    this.updateSchema(data);\n  },\n\n  /**\n   * Set and update base material properties.\n   * Set `needsUpdate` when needed.\n   */\n  updateMaterial: function (oldData) {\n    var data = this.data;\n    var material = this.material;\n    var oldDataHasKeys;\n\n    // Base material properties.\n    material.alphaTest = data.alphaTest;\n    material.depthTest = data.depthTest !== false;\n    material.depthWrite = data.depthWrite !== false;\n    material.opacity = data.opacity;\n    material.flatShading = data.flatShading;\n    material.side = parseSide(data.side);\n    material.transparent = data.transparent !== false || data.opacity < 1.0;\n    material.vertexColors = data.vertexColorsEnabled;\n    material.visible = data.visible;\n    material.blending = parseBlending(data.blending);\n    material.dithering = data.dithering;\n\n    // Check if material needs update.\n    for (oldDataHasKeys in oldData) { break; }\n    if (oldDataHasKeys &&\n        (oldData.alphaTest !== data.alphaTest ||\n         oldData.side !== data.side ||\n         oldData.vertexColorsEnabled !== data.vertexColorsEnabled)) {\n      material.needsUpdate = true;\n    }\n  },\n\n  /**\n   * Remove material on remove (callback).\n   * Dispose of it from memory and unsubscribe from scene updates.\n   */\n  remove: function () {\n    var defaultMaterial = new THREE.MeshBasicMaterial();\n    var material = this.material;\n    var object3D = this.el.getObject3D('mesh');\n    if (object3D) { object3D.material = defaultMaterial; }\n    disposeMaterial(material, this.system);\n  },\n\n  /**\n   * (Re)create new material. Has side-effects of setting `this.material` and updating\n   * material registration in scene.\n   *\n   * @param {THREE.Material} material - Material to register.\n   */\n  setMaterial: function (material) {\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    if (this.material) { disposeMaterial(this.material, system); }\n\n    this.material = material;\n    system.registerMaterial(material);\n\n    // Set on mesh. If mesh does not exist, wait for it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.material = material;\n    } else {\n      el.addEventListener('object3dset', function waitForMesh (evt) {\n        if (evt.detail.type !== 'mesh' || evt.target !== el) { return; }\n        el.getObject3D('mesh').material = material;\n        el.removeEventListener('object3dset', waitForMesh);\n      });\n    }\n  }\n});\n\n/**\n * Return a three.js constant determining which material face sides to render\n * based on the side parameter (passed as a component property).\n *\n * @param {string} [side=front] - `front`, `back`, or `double`.\n * @returns {number} THREE.FrontSide, THREE.BackSide, or THREE.DoubleSide.\n */\nfunction parseSide (side) {\n  switch (side) {\n    case 'back': {\n      return THREE.BackSide;\n    }\n    case 'double': {\n      return THREE.DoubleSide;\n    }\n    default: {\n      // Including case `front`.\n      return THREE.FrontSide;\n    }\n  }\n}\n\n/**\n * Return a three.js constant determining blending\n *\n * @param {string} [blending=normal] - `none`, additive`, `subtractive`,`multiply` or `normal`.\n * @returns {number}\n */\nfunction parseBlending (blending) {\n  switch (blending) {\n    case 'none': {\n      return THREE.NoBlending;\n    }\n    case 'additive': {\n      return THREE.AdditiveBlending;\n    }\n    case 'subtractive': {\n      return THREE.SubtractiveBlending;\n    }\n    case 'multiply': {\n      return THREE.MultiplyBlending;\n    }\n    default: {\n      return THREE.NormalBlending;\n    }\n  }\n}\n\n/**\n * Dispose of material from memory and unsubscribe material from scene updates like fog.\n */\nfunction disposeMaterial (material, system) {\n  material.dispose();\n  system.unregisterMaterial(material);\n\n  // Dispose textures on this material\n  Object.keys(material)\n    .filter(function (propName) {\n      return material[propName] && material[propName].isTexture;\n    })\n    .forEach(function (mapName) {\n      material[mapName].dispose();\n    });\n}\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-touch';\n\n// First generation model URL.\nvar TOUCH_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/oculus/oculus-touch-controller-';\nvar META_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/meta/';\n\nvar OCULUS_TOUCH_CONFIG = {\n  left: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'left.gltf',\n    rayOrigin: {origin: {x: 0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(-0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  },\n  right: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'right.gltf',\n    rayOrigin: {origin: {x: -0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  }\n};\n\nvar CONTROLLER_DEFAULT = 'oculus-touch';\nvar CONTROLLER_PROPERTIES = {\n  'oculus-touch': OCULUS_TOUCH_CONFIG,\n  'oculus-touch-v2': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-left.gltf',\n      rayOrigin: {origin: {x: -0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-right.gltf',\n      rayOrigin: {origin: {x: 0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    }\n  },\n  'oculus-touch-v3': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-pro': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-plus': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  }\n};\n\nvar INPUT_MAPPING = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton', 'surface']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton', 'surface']\n  }\n};\n\n/**\n * Meta Touch controls (formerly Oculus Touch)\n * Interface with Meta Touch controllers and map Gamepad events to\n * controller buttons: thumbstick, trigger, grip, xbutton, ybutton, surface\n * Load a controller model and highlight the pressed buttons.\n */\nvar componentConfig = {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#999'},  // Off-white.\n    buttonTouchColor: {type: 'color', default: '#8AB'},\n    buttonHighlightColor: {type: 'color', default: '#2DF'},  // Light blue.\n    model: {default: true},\n    controllerType: {default: 'auto', oneOf: ['auto', 'oculus-touch', 'oculus-touch-v2', 'oculus-touch-v3']}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onThumbstickMoved = this.onThumbstickMoved.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n    this.triggerEuler = new THREE.Euler();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  loadModel: function (controller) {\n    var data = this.data;\n    var controllerId;\n    if (!data.model) { return; }\n\n    // If model has been already loaded\n    if (this.controllerObject3D) {\n      this.controllerObject3D.visible = true;\n      this.el.setObject3D('mesh', this.controllerObject3D);\n      return;\n    }\n\n    // Set the controller display model based on the data passed in.\n    this.displayModel = CONTROLLER_PROPERTIES[data.controllerType] || CONTROLLER_PROPERTIES[CONTROLLER_DEFAULT];\n    // If the developer is asking for auto-detection, use the retrieved displayName to identify the specific unit.\n    if (data.controllerType === 'auto') {\n      controllerId = CONTROLLER_DEFAULT;\n      var controllersPropertiesIds = Object.keys(CONTROLLER_PROPERTIES);\n      for (var i = 0; i < controller.profiles.length; i++) {\n        if (controllersPropertiesIds.indexOf(controller.profiles[i]) !== -1) {\n          controllerId = controller.profiles[i];\n          break;\n        }\n      }\n      this.displayModel = CONTROLLER_PROPERTIES[controllerId];\n    }\n    var modelUrl = this.displayModel[data.hand].modelUrl;\n    this.isTouchV3orPROorPlus =\n      this.displayModel === CONTROLLER_PROPERTIES['oculus-touch-v3'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-pro'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-plus'];\n    this.el.setAttribute('gltf-model', modelUrl);\n  },\n\n  injectTrackedControls: function (controller) {\n    var data = this.data;\n    var id = GAMEPAD_ID_PREFIX;\n    this.el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true\n    });\n    this.loadModel(controller);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    if (!button) { return; }\n    // move the button meshes\n    if (this.isTouchV3orPROorPlus) {\n      this.onButtonChangedV3orPROorPlus(evt);\n    } else {\n      var buttonMeshes = this.buttonMeshes;\n      var analogValue;\n\n      if (button === 'trigger' || button === 'grip') { analogValue = evt.detail.state.value; }\n\n      if (buttonMeshes) {\n        if (button === 'trigger' && buttonMeshes.trigger) {\n          buttonMeshes.trigger.rotation.x = this.originalXRotationTrigger - analogValue * (Math.PI / 26);\n        }\n        if (button === 'grip' && buttonMeshes.grip) {\n          analogValue *= this.data.hand === 'left' ? -1 : 1;\n          buttonMeshes.grip.position.x = this.originalXPositionGrip + analogValue * 0.004;\n        }\n      }\n    }\n    // Pass along changed event with button state, using the button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onButtonChangedV3orPROorPlus: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var buttonObjects = this.buttonObjects;\n    var analogValue;\n    if (!buttonObjects || !buttonObjects[button]) { return; }\n    analogValue = evt.detail.state.value;\n    buttonObjects[button].quaternion.slerpQuaternions(\n      this.buttonRanges[button].min.quaternion,\n      this.buttonRanges[button].max.quaternion,\n      analogValue\n    );\n\n    buttonObjects[button].position.lerpVectors(\n      this.buttonRanges[button].min.position,\n      this.buttonRanges[button].max.position,\n      analogValue\n    );\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.onTouchV3orPROorPlusModelLoaded(evt);\n    } else {\n      // All oculus headset controller models prior to the Quest 2 (i.e., Oculus Touch V3)\n      // used a consistent format that is handled here\n      var controllerObject3D = this.controllerObject3D = evt.detail.model;\n      var buttonMeshes;\n\n      buttonMeshes = this.buttonMeshes = {};\n\n      buttonMeshes.grip = controllerObject3D.getObjectByName('buttonHand');\n      this.originalXPositionGrip = buttonMeshes.grip && buttonMeshes.grip.position.x;\n      buttonMeshes.trigger = controllerObject3D.getObjectByName('buttonTrigger');\n      this.originalXRotationTrigger = buttonMeshes.trigger && buttonMeshes.trigger.rotation.x;\n      buttonMeshes.thumbstick = controllerObject3D.getObjectByName('stick');\n      buttonMeshes.xbutton = controllerObject3D.getObjectByName('buttonX');\n      buttonMeshes.abutton = controllerObject3D.getObjectByName('buttonA');\n      buttonMeshes.ybutton = controllerObject3D.getObjectByName('buttonY');\n      buttonMeshes.bbutton = controllerObject3D.getObjectByName('buttonB');\n    }\n\n    for (var button in this.buttonMeshes) {\n      if (this.buttonMeshes[button]) {\n        cloneMeshMaterial(this.buttonMeshes[button]);\n      }\n    }\n\n    this.applyOffset(evt.detail.model);\n\n    this.el.emit('controllermodelready', {\n      name: 'meta-touch-controls',\n      model: this.data.model,\n      rayOrigin: this.displayModel[this.data.hand].rayOrigin\n    });\n  },\n\n  applyOffset: function (model) {\n    model.position.copy(this.displayModel[this.data.hand].modelPivotOffset);\n    model.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation);\n  },\n\n  onTouchV3orPROorPlusModelLoaded: function (evt) {\n    var controllerObject3D = this.controllerObject3D = evt.detail.model;\n\n    var buttonObjects = this.buttonObjects = {};\n    var buttonMeshes = this.buttonMeshes = {};\n    var buttonRanges = this.buttonRanges = {};\n\n    buttonMeshes.grip = controllerObject3D.getObjectByName('squeeze');\n    buttonObjects.grip = controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_value');\n    buttonRanges.grip = {\n      min: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_max')\n    };\n    buttonObjects.grip.minX = buttonObjects.grip.position.x;\n\n    buttonMeshes.thumbstick = controllerObject3D.getObjectByName('thumbstick');\n    buttonObjects.thumbstick = controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_value');\n    buttonRanges.thumbstick = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_max')\n    };\n\n    buttonObjects.thumbstickXAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_value');\n    buttonRanges.thumbstickXAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_max')\n    };\n\n    buttonObjects.thumbstickYAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_value');\n    buttonRanges.thumbstickYAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_max')\n    };\n\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    buttonObjects.trigger = controllerObject3D.getObjectByName('xr_standard_trigger_pressed_value');\n    buttonRanges.trigger = {\n      min: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_max')\n    };\n    buttonRanges.trigger.diff = {\n      x: Math.abs(buttonRanges.trigger.max.rotation.x) - Math.abs(buttonRanges.trigger.min.rotation.x),\n      y: Math.abs(buttonRanges.trigger.max.rotation.y) - Math.abs(buttonRanges.trigger.min.rotation.y),\n      z: Math.abs(buttonRanges.trigger.max.rotation.z) - Math.abs(buttonRanges.trigger.min.rotation.z)\n    };\n\n    var button1 = this.data.hand === 'left' ? 'x' : 'a';\n    var button2 = this.data.hand === 'left' ? 'y' : 'b';\n    var button1id = button1 + 'button';\n    var button2id = button2 + 'button';\n\n    buttonMeshes[button1id] = controllerObject3D.getObjectByName(button1 + '_button');\n    buttonObjects[button1id] = controllerObject3D.getObjectByName(button1 + '_button_pressed_value');\n    buttonRanges[button1id] = {\n      min: controllerObject3D.getObjectByName(button1 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button1 + '_button_pressed_max')\n    };\n\n    buttonMeshes[button2id] = controllerObject3D.getObjectByName(button2 + '_button');\n    buttonObjects[button2id] = controllerObject3D.getObjectByName(button2 + '_button_pressed_value');\n    buttonRanges[button2id] = {\n      min: controllerObject3D.getObjectByName(button2 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button2 + '_button_pressed_max')\n    };\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  },\n\n  onThumbstickMoved: function (evt) {\n    if (!this.buttonMeshes || !this.buttonMeshes.thumbstick) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.updateThumbstickTouchV3orPROorPlus(evt);\n      return;\n    }\n    for (var axis in evt.detail) {\n      this.buttonObjects.thumbstick.rotation[this.axisMap[axis]] =\n        this.buttonRanges.thumbstick.originalRotation[this.axisMap[axis]] -\n        (Math.PI / 8) *\n        evt.detail[axis] *\n        (axis === 'y' || this.data.hand === 'right' ? -1 : 1);\n    }\n  },\n  axisMap: {\n    y: 'x',\n    x: 'z'\n  },\n\n  updateThumbstickTouchV3orPROorPlus: function (evt) {\n    var normalizedXAxis = (evt.detail.x + 1.0) / 2.0;\n    this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickXAxis.min.quaternion,\n      this.buttonRanges.thumbstickXAxis.max.quaternion,\n      normalizedXAxis\n    );\n\n    var normalizedYAxis = (evt.detail.y + 1.0) / 2.0;\n    this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickYAxis.min.quaternion,\n      this.buttonRanges.thumbstickYAxis.max.quaternion,\n      normalizedYAxis\n    );\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    // update the button mesh colors\n    var buttonMeshes = this.buttonMeshes;\n    var button;\n    var color;\n\n    if (!buttonMeshes) { return; }\n    if (buttonMeshes[buttonName]) {\n      color = (state === 'up' || state === 'touchend') ? buttonMeshes[buttonName].originalColor || this.data.buttonColor : state === 'touchstart' ? this.data.buttonTouchColor : this.data.buttonHighlightColor;\n      button = buttonMeshes[buttonName];\n      button.material.color.set(color);\n    }\n  }\n};\nregisterComponent('oculus-touch-controls', componentConfig);\nexport var Component = registerComponent('meta-touch-controls', componentConfig);\n\n/**\n * Some of the controller models share the same material for different parts (buttons, triggers...).\n * In order to change their color independently we have to create separate materials.\n */\nfunction cloneMeshMaterial (object3d) {\n  object3d.traverse(function (node) {\n    var newMaterial;\n    if (node.type !== 'Mesh') return;\n    newMaterial = node.material.clone();\n    object3d.originalColor = node.material.color;\n    node.material.dispose();\n    node.material = newMaterial;\n  });\n}\n", "import * as THREE from 'three';\nimport { OBB } from 'three/addons/math/OBB.js';\nimport { registerComponent } from '../core/component.js';\n\nregisterComponent('obb-collider', {\n  schema: {\n    size: {default: 0},\n    trackedObject3D: {default: ''},\n    minimumColliderDimension: {default: 0.02},\n    centerModel: {default: false}\n  },\n\n  init: function () {\n    this.previousScale = new THREE.Vector3().copy(this.el.object3D.scale);\n    this.auxEuler = new THREE.Euler();\n\n    this.boundingBox = new THREE.Box3();\n    this.boundingBoxSize = new THREE.Vector3();\n    this.updateCollider = this.updateCollider.bind(this);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.updateBoundingBox = this.updateBoundingBox.bind(this);\n\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    this.updateCollider();\n\n    this.system.addCollider(this.el);\n  },\n\n  remove: function () {\n    this.system.removeCollider(this.el);\n  },\n\n  update: function () {\n    if (this.data.trackedObject3D) {\n      this.trackedObject3DPath = this.data.trackedObject3D.split('.');\n    }\n  },\n\n  onModelLoaded: function () {\n    if (this.data.centerModel) { this.centerModel(); }\n    this.updateCollider();\n  },\n\n  centerModel: function () {\n    var el = this.el;\n    var model = el.components['gltf-model'] && el.components['gltf-model'].model;\n    var box;\n    var center;\n\n    if (!model) { return; }\n    this.el.removeObject3D('mesh');\n    box = new THREE.Box3().setFromObject(model);\n    center = box.getCenter(new THREE.Vector3());\n    model.position.x += (model.position.x - center.x);\n    model.position.y += (model.position.y - center.y);\n    model.position.z += (model.position.z - center.z);\n    this.el.setObject3D('mesh', model);\n  },\n\n  updateCollider: function () {\n    var el = this.el;\n    var boundingBoxSize = this.boundingBoxSize;\n    var aabb = this.aabb = this.aabb || new OBB();\n    this.obb = this.obb || new OBB();\n\n    // Defer if entity has not yet loaded.\n    if (!el.hasLoaded) {\n      el.addEventListener('loaded', this.updateCollider);\n      return;\n    }\n\n    this.updateBoundingBox();\n    aabb.halfSize.copy(boundingBoxSize).multiplyScalar(0.5);\n\n    if (this.el.sceneEl.systems['obb-collider'].data.showColliders) {\n      this.showCollider();\n    }\n  },\n\n  showCollider: function () {\n    this.updateColliderMesh();\n    this.renderColliderMesh.visible = true;\n  },\n\n  updateColliderMesh: function () {\n    var renderColliderMesh = this.renderColliderMesh;\n    var boundingBoxSize = this.boundingBoxSize;\n    if (!renderColliderMesh) {\n      this.initColliderMesh();\n      return;\n    }\n\n    // Destroy current geometry.\n    renderColliderMesh.geometry.dispose();\n    renderColliderMesh.geometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n  },\n\n  hideCollider: function () {\n    if (!this.renderColliderMesh) { return; }\n    this.renderColliderMesh.visible = false;\n  },\n\n  initColliderMesh: function () {\n    var boundingBoxSize;\n    var renderColliderGeometry;\n    var renderColliderMesh;\n\n    boundingBoxSize = this.boundingBoxSize;\n    renderColliderGeometry = this.renderColliderGeometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n    renderColliderMesh = this.renderColliderMesh = new THREE.Mesh(renderColliderGeometry, new THREE.MeshLambertMaterial({color: 0x00ff00, side: THREE.DoubleSide}));\n    renderColliderMesh.matrixAutoUpdate = false;\n    renderColliderMesh.matrixWorldAutoUpdate = false;\n    // THREE scene forces matrix world update even if matrixWorldAutoUpdate set to false.\n    renderColliderMesh.updateMatrixWorld = function () { /* no op */ };\n    this.el.sceneEl.object3D.add(renderColliderMesh);\n  },\n\n  updateBoundingBox: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var identityQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var auxEuler = this.auxEuler;\n      var boundingBox = this.boundingBox;\n      var size = this.data.size;\n      var trackedObject3D = this.trackedObject3D || this.el.object3D;\n      var boundingBoxSize = this.boundingBoxSize;\n      var minimumColliderDimension = this.data.minimumColliderDimension;\n\n      // user defined size takes precedence.\n      if (size) {\n        this.boundingBoxSize.x = size;\n        this.boundingBoxSize.y = size;\n        this.boundingBoxSize.z = size;\n        return;\n      }\n\n      // Bounding box is created axis-aligned AABB.\n      // If there's any rotation the box will have the wrong size.\n      // It undoes the local entity rotation and then restores so box has the expected size.\n      // We also undo the parent world rotation.\n      auxEuler.copy(trackedObject3D.rotation);\n      trackedObject3D.rotation.set(0, 0, 0);\n\n      trackedObject3D.parent.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n      auxMatrix.compose(auxPosition, identityQuaternion, auxScale);\n      trackedObject3D.parent.matrixWorld.copy(auxMatrix);\n\n      // Calculate bounding box size.\n      boundingBox.setFromObject(trackedObject3D, true);\n      boundingBox.getSize(boundingBoxSize);\n\n      // Enforce minimum dimensions.\n      boundingBoxSize.x = boundingBoxSize.x < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.x;\n      boundingBoxSize.y = boundingBoxSize.y < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.y;\n      boundingBoxSize.z = boundingBoxSize.z < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.z;\n\n      // Restore rotations.\n      trackedObject3D.parent.matrixWorld.compose(auxPosition, auxQuaternion, auxScale);\n      this.el.object3D.rotation.copy(auxEuler);\n    };\n  })(),\n\n  checkTrackedObject: function () {\n    var trackedObject3DPath = this.trackedObject3DPath;\n    var trackedObject3D;\n\n    if (trackedObject3DPath &&\n        trackedObject3DPath.length &&\n        !this.trackedObject3D) {\n      trackedObject3D = this.el;\n      for (var i = 0; i < trackedObject3DPath.length; i++) {\n        trackedObject3D = trackedObject3D[trackedObject3DPath[i]];\n        if (!trackedObject3D) { break; }\n      }\n      if (trackedObject3D) {\n        this.trackedObject3D = trackedObject3D;\n        this.updateCollider();\n      }\n    }\n    return this.trackedObject3D;\n  },\n\n  tick: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var obb = this.obb;\n      var renderColliderMesh = this.renderColliderMesh;\n      var trackedObject3D = this.checkTrackedObject() || this.el.object3D;\n\n      if (!trackedObject3D) { return; }\n\n      trackedObject3D.updateMatrix();\n      trackedObject3D.updateMatrixWorld(true);\n      trackedObject3D.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n\n      // Recalculate collider if scale has changed.\n      if ((Math.abs(auxScale.x - this.previousScale.x) > 0.0001)  ||\n          (Math.abs(auxScale.y - this.previousScale.y) > 0.0001) ||\n          (Math.abs(auxScale.z - this.previousScale.z) > 0.0001)) {\n        this.updateCollider();\n      }\n\n      this.previousScale.copy(auxScale);\n\n      // reset scale, keep position and rotation\n      auxScale.set(1, 1, 1);\n      auxMatrix.compose(auxPosition, auxQuaternion, auxScale);\n      // Update OBB visual representation.\n      if (renderColliderMesh) { renderColliderMesh.matrixWorld.copy(auxMatrix); }\n\n      // Reset OBB with AABB and apply entity matrix. applyMatrix4 changes OBB internal state.\n      obb.copy(this.aabb);\n      obb.applyMatrix4(auxMatrix);\n    };\n  })()\n});\n", "import * as THREE from 'three';\nimport { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\nimport { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\nimport { debug } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\n\nvar warn = debug('components:obj-model:warn');\n\nexport var Component = registerComponent('obj-model', {\n  schema: {\n    mtl: {type: 'model'},\n    obj: {type: 'model'}\n  },\n\n  init: function () {\n    var self = this;\n\n    this.model = null;\n    this.objLoader = new OBJLoader();\n    this.mtlLoader = new MTLLoader(this.objLoader.manager);\n    // Allow cross-origin images to be loaded.\n    this.mtlLoader.crossOrigin = '';\n\n    this.el.addEventListener('componentinitialized', function (evt) {\n      if (!self.model) { return; }\n      if (evt.detail.name !== 'material') { return; }\n      self.applyMaterial();\n    });\n  },\n\n  update: function () {\n    var data = this.data;\n    if (!data.obj) { return; }\n    this.resetMesh();\n    this.loadObj(data.obj, data.mtl);\n  },\n\n  remove: function () {\n    this.resetMesh();\n  },\n\n  resetMesh: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  },\n\n  loadObj: function (objUrl, mtlUrl) {\n    var self = this;\n    var el = this.el;\n    var mtlLoader = this.mtlLoader;\n    var objLoader = this.objLoader;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n    var BASE_PATH = mtlUrl.substr(0, mtlUrl.lastIndexOf('/') + 1);\n\n    if (mtlUrl) {\n      // .OBJ with an .MTL.\n      if (el.hasAttribute('material')) {\n        warn('Material component properties are ignored when a .MTL is provided');\n      }\n      mtlLoader.setResourcePath(BASE_PATH);\n      mtlLoader.load(mtlUrl, function (materials) {\n        materials.preload();\n        objLoader.setMaterials(materials);\n        objLoader.load(objUrl, function (objModel) {\n          self.model = objModel;\n          self.model.traverse(function (object) {\n            if (object.isMesh) {\n              var material = object.material;\n              if (material.map) rendererSystem.applyColorCorrection(material.map);\n              if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n            }\n          });\n          el.setObject3D('mesh', objModel);\n          el.emit('model-loaded', {format: 'obj', model: objModel});\n        });\n      });\n      return;\n    }\n\n    // .OBJ only.\n    objLoader.load(objUrl, function loadObjOnly (objModel) {\n      self.model = objModel;\n      self.applyMaterial();\n      el.setObject3D('mesh', objModel);\n      el.emit('model-loaded', {format: 'obj', model: objModel});\n    });\n  },\n\n  /**\n   * Apply material from material component recursively.\n   */\n  applyMaterial: function () {\n    var material = this.el.components.material;\n    if (!material) { return; }\n    this.model.traverse(function (child) {\n      if (child instanceof THREE.Mesh) {\n        child.material = material.material;\n      }\n    });\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar OCULUS_GO_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus/go/oculus-go-controller.gltf';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-go';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - none\n * 2 - touchpad\n *\n * Axis:\n * 0 - touchpad x\n * 1 - touchpad y\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/oculus/oculus-go.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trigger, touchpad\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('oculus-go-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonColor: {type: 'color', default: '#FFFFFF'},\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                   this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', OCULUS_GO_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  // No need for onButtonChanged, since Oculus Go controller has no analog buttons.\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('oculus_go_button_trigger');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    if (!buttonMeshes || !buttonMeshes[buttonName]) { return; }\n    var color;\n    var button;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n      default:\n        color = this.data.buttonColor;\n    }\n    button = buttonMeshes[buttonName];\n    button.material.color.set(color);\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'pico-4';\nvar PICO_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/pico/pico4/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * Pico Controls\n */\nexport var Component = registerComponent('pico-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', PICO_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'pico-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  }\n});\n", "/* global MutationObserver */\n\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('components:raycaster:warn');\n\n// Defines selectors that should be 'safe' for the MutationObserver used to\n// refresh the whitelist. Matches classnames, IDs, and presence of attributes.\n// Selectors for the value of an attribute, like [position=0 2 0], cannot be\n// reliably detected and are therefore disallowed.\nvar OBSERVER_SELECTOR_RE = /^[\\w\\s-.,[\\]#]*$/;\n\n// Configuration for the MutationObserver used to refresh the whitelist.\n// Listens for addition/removal of elements and attributes within the scene.\nvar OBSERVER_CONFIG = {\n  childList: true,\n  attributes: true,\n  subtree: true\n};\n\nvar EVENTS = {\n  INTERSECT: 'raycaster-intersected',\n  INTERSECTION: 'raycaster-intersection',\n  INTERSECT_CLEAR: 'raycaster-intersected-cleared',\n  INTERSECTION_CLEAR: 'raycaster-intersection-cleared',\n  INTERSECTION_CLOSEST_ENTITY_CHANGED: 'raycaster-closest-entity-changed'\n};\n\n/**\n * Raycaster component.\n *\n * Pass options to three.js Raycaster including which objects to test.\n * Poll for intersections.\n * Emit event on origin entity and on target entity on intersect.\n *\n * @member {array} intersectedEls - List of currently intersected entities.\n * @member {array} objects - Cached list of meshes to intersect.\n * @member {number} prevCheckTime - Previous time intersection was checked. To help interval.\n * @member {object} raycaster - three.js Raycaster.\n */\nexport var Component = registerComponent('raycaster', {\n  schema: {\n    autoRefresh: {default: true},\n    direction: {type: 'vec3', default: {x: 0, y: 0, z: -1}},\n    enabled: {default: true},\n    far: {default: 1000},\n    interval: {default: 0},\n    near: {default: 0},\n    objects: {default: ''},\n    origin: {type: 'vec3'},\n    showLine: {default: false},\n    lineColor: {default: 'white'},\n    lineOpacity: {default: 1},\n    useWorldCoordinates: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    this.clearedIntersectedEls = [];\n    this.unitLineEndVec3 = new THREE.Vector3();\n    this.intersectedEls = [];\n    this.intersections = [];\n    this.newIntersectedEls = [];\n    this.newIntersections = [];\n    this.objects = [];\n    this.prevCheckTime = undefined;\n    this.prevIntersectedEls = [];\n    this.rawIntersections = [];\n    this.raycaster = new THREE.Raycaster();\n    this.updateOriginDirection();\n    this.setDirty = this.setDirty.bind(this);\n    this.updateLine = this.updateLine.bind(this);\n    this.observer = new MutationObserver(this.setDirty);\n    this.dirty = true;\n    this.lineEndVec3 = new THREE.Vector3();\n    this.otherLineEndVec3 = new THREE.Vector3();\n    this.lineData = {end: this.lineEndVec3};\n\n    this.getIntersection = this.getIntersection.bind(this);\n    this.intersectedDetail = {el: this.el, getIntersection: this.getIntersection};\n    this.intersectedClearedDetail = {el: this.el};\n    this.intersectionClearedDetail = {clearedEls: this.clearedIntersectedEls};\n    this.intersectionDetail = {};\n  },\n\n  /**\n   * Create or update raycaster object.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var raycaster = this.raycaster;\n\n    // Set raycaster properties.\n    raycaster.far = data.far;\n    raycaster.near = data.near;\n\n    // Draw line.\n    if (data.showLine &&\n        (data.far !== oldData.far || data.origin !== oldData.origin ||\n         data.direction !== oldData.direction || !oldData.showLine)) {\n      // Calculate unit vector for line direction. Can be multiplied via scalar and added\n      // to origin to adjust line length.\n      this.unitLineEndVec3.copy(data.direction).normalize();\n      this.drawLine();\n    }\n\n    if (!data.showLine && oldData.showLine) {\n      el.removeAttribute('line');\n    }\n\n    if (data.objects !== oldData.objects && !OBSERVER_SELECTOR_RE.test(data.objects)) {\n      warn('[raycaster] Selector \"' + data.objects +\n           '\" may not update automatically with DOM changes.');\n    }\n\n    if (!data.objects) {\n      warn('[raycaster] For performance, please define raycaster.objects when using ' +\n           'raycaster or cursor components to whitelist which entities to intersect with. ' +\n           'e.g., raycaster=\"objects: [data-raycastable]\".');\n    }\n\n    if (data.autoRefresh !== oldData.autoRefresh && el.isPlaying) {\n      data.autoRefresh\n        ? this.addEventListeners()\n        : this.removeEventListeners();\n    }\n\n    if (oldData.enabled && !data.enabled) { this.clearAllIntersections(); }\n\n    if (data.objects !== oldData.objects) {\n      this.setDirty();\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    if (this.data.showLine) {\n      this.el.removeAttribute('line');\n    }\n    this.clearAllIntersections();\n  },\n\n  addEventListeners: function () {\n    if (!this.data.autoRefresh) { return; }\n    this.observer.observe(this.el.sceneEl, OBSERVER_CONFIG);\n    this.el.sceneEl.addEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.addEventListener('object3dremove', this.setDirty);\n  },\n\n  removeEventListeners: function () {\n    this.observer.disconnect();\n    this.el.sceneEl.removeEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.removeEventListener('object3dremove', this.setDirty);\n  },\n\n  /**\n   * Mark the object list as dirty, to be refreshed before next raycast.\n   */\n  setDirty: function () {\n    this.dirty = true;\n  },\n\n  /**\n   * Update list of objects to test for intersection.\n   */\n  refreshObjects: function () {\n    var data = this.data;\n    var els;\n\n    // If objects not defined, intersect with everything.\n    els = data.objects\n      ? this.el.sceneEl.querySelectorAll(data.objects)\n      : this.el.sceneEl.querySelectorAll('*');\n    this.objects = this.flattenObject3DMaps(els);\n    this.dirty = false;\n  },\n\n  /**\n   * Check for intersections and cleared intersections on an interval.\n   */\n  tock: function (time) {\n    var data = this.data;\n    var prevCheckTime = this.prevCheckTime;\n\n    if (!data.enabled) { return; }\n\n    // Only check for intersection if interval time has passed.\n    if (prevCheckTime && (time - prevCheckTime < data.interval)) { return; }\n\n    // Update check time.\n    this.prevCheckTime = time;\n    this.checkIntersections();\n  },\n\n  /**\n   * Raycast for intersections and emit events for current and cleared intersections.\n   */\n  checkIntersections: function () {\n    var clearedIntersectedEls = this.clearedIntersectedEls;\n    var el = this.el;\n    var data = this.data;\n    var i;\n    var intersectedEls = this.intersectedEls;\n    var intersection;\n    var intersections = this.intersections;\n    var newIntersectedEls = this.newIntersectedEls;\n    var newIntersections = this.newIntersections;\n    var prevIntersectedEls = this.prevIntersectedEls;\n    var rawIntersections = this.rawIntersections;\n\n    // Refresh the object whitelist if needed.\n    if (this.dirty) { this.refreshObjects(); }\n\n    // Store old previously intersected entities.\n    copyArray(this.prevIntersectedEls, this.intersectedEls);\n\n    // Raycast.\n    this.updateOriginDirection();\n    rawIntersections.length = 0;\n    this.raycaster.intersectObjects(this.objects, true, rawIntersections);\n\n    // Only keep intersections against objects that have a reference to an entity.\n    intersections.length = 0;\n    intersectedEls.length = 0;\n    for (i = 0; i < rawIntersections.length; i++) {\n      intersection = rawIntersections[i];\n      // Don't intersect with own line.\n      if (data.showLine && intersection.object === el.getObject3D('line')) {\n        continue;\n      }\n      if (intersection.object.el) {\n        intersections.push(intersection);\n        intersectedEls.push(intersection.object.el);\n      }\n    }\n\n    // Get newly intersected entities.\n    newIntersections.length = 0;\n    newIntersectedEls.length = 0;\n    for (i = 0; i < intersections.length; i++) {\n      if (prevIntersectedEls.indexOf(intersections[i].object.el) === -1) {\n        newIntersections.push(intersections[i]);\n        newIntersectedEls.push(intersections[i].object.el);\n      }\n    }\n\n    // Emit intersection cleared on both entities per formerly intersected entity.\n    clearedIntersectedEls.length = 0;\n    for (i = 0; i < prevIntersectedEls.length; i++) {\n      if (intersectedEls.indexOf(prevIntersectedEls[i]) !== -1) { continue; }\n      prevIntersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                 this.intersectedClearedDetail);\n      clearedIntersectedEls.push(prevIntersectedEls[i]);\n    }\n    if (clearedIntersectedEls.length) {\n      el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n    }\n\n    // Emit intersected on intersected entity per intersected entity.\n    for (i = 0; i < newIntersectedEls.length; i++) {\n      newIntersectedEls[i].emit(EVENTS.INTERSECT, this.intersectedDetail);\n    }\n\n    // Emit all intersections at once on raycasting entity.\n    if (newIntersections.length) {\n      this.intersectionDetail.els = newIntersectedEls;\n      this.intersectionDetail.intersections = newIntersections;\n      el.emit(EVENTS.INTERSECTION, this.intersectionDetail);\n    }\n\n    // Emit event when the closest intersected entity has changed.\n    if (prevIntersectedEls.length === 0 && intersections.length > 0 ||\n        prevIntersectedEls.length > 0 && intersections.length === 0 ||\n        (prevIntersectedEls.length && intersections.length &&\n        prevIntersectedEls[0] !== intersections[0].object.el)) {\n      this.intersectionDetail.els = this.intersectedEls;\n      this.intersectionDetail.intersections = intersections;\n      el.emit(EVENTS.INTERSECTION_CLOSEST_ENTITY_CHANGED, this.intersectionDetail);\n    }\n\n    // Update line length.\n    if (data.showLine) { setTimeout(this.updateLine); }\n  },\n\n  updateLine: function () {\n    var el = this.el;\n    var intersections = this.intersections;\n    var lineLength;\n\n    if (intersections.length) {\n      if (intersections[0].object.el === el && intersections[1]) {\n        lineLength = intersections[1].distance;\n      } else {\n        lineLength = intersections[0].distance;\n      }\n    }\n    this.drawLine(lineLength);\n  },\n\n  /**\n   * Return the most recent intersection details for a given entity, if any.\n   * @param {AEntity} el\n   * @returns {object|null}\n   */\n  getIntersection: function (el) {\n    var i;\n    var intersection;\n    for (i = 0; i < this.intersections.length; i++) {\n      intersection = this.intersections[i];\n      if (intersection.object.el === el) { return intersection; }\n    }\n    return null;\n  },\n\n  /**\n   * Update origin and direction of raycaster using entity transforms and supplied origin or\n   * direction offsets.\n   */\n  updateOriginDirection: (function () {\n    var direction = new THREE.Vector3();\n    var originVec3 = new THREE.Vector3();\n\n    // Closure to make quaternion/vector3 objects private.\n    return function updateOriginDirection () {\n      var el = this.el;\n      var data = this.data;\n\n      if (data.useWorldCoordinates) {\n        this.raycaster.set(data.origin, data.direction);\n        return;\n      }\n\n      el.object3D.updateMatrixWorld();\n      originVec3.setFromMatrixPosition(el.object3D.matrixWorld);\n\n      // If non-zero origin, translate the origin into world space.\n      if (data.origin.x !== 0 || data.origin.y !== 0 || data.origin.z !== 0) {\n        originVec3 = el.object3D.localToWorld(originVec3.copy(data.origin));\n      }\n\n      // three.js raycaster direction is relative to 0, 0, 0 NOT the origin / offset we\n      // provide. Apply the offset to the direction, then rotation from the object,\n      // and normalize.\n      direction.copy(data.direction).transformDirection(el.object3D.matrixWorld).normalize();\n\n      // Apply offset and direction, in world coordinates.\n      this.raycaster.set(originVec3, direction);\n    };\n  })(),\n\n  /**\n   * Create or update line to give raycaster visual representation.\n   * Customize the line through through line component.\n   * We draw the line in the raycaster component to customize the line to the\n   * raycaster's origin, direction, and far.\n   *\n   * Unlike the raycaster, we create the line as a child of the object. The line will\n   * be affected by the transforms of the objects, so we don't have to calculate transforms\n   * like we do with the raycaster.\n   *\n   * @param {number} length - Length of line. Pass in to shorten the line to the intersection\n   *   point. If not provided, length will default to the max length, `raycaster.far`.\n   */\n  drawLine: function (length) {\n    var data = this.data;\n    var el = this.el;\n    var endVec3;\n\n    // Switch each time vector so line update triggered and to avoid unnecessary vector clone.\n    endVec3 = this.lineData.end === this.lineEndVec3\n      ? this.otherLineEndVec3\n      : this.lineEndVec3;\n\n    // Treat Infinity as 1000m for the line.\n    if (length === undefined) {\n      length = data.far === Infinity ? 1000 : data.far;\n    }\n\n    // Update the length of the line if given. `unitLineEndVec3` is the direction\n    // given by data.direction, then we apply a scalar to give it a length and the\n    // origin point to offset it.\n    this.lineData.start = data.origin;\n    this.lineData.end = endVec3.copy(this.unitLineEndVec3).multiplyScalar(length).add(data.origin);\n    this.lineData.color = data.lineColor;\n    this.lineData.opacity = data.lineOpacity;\n    el.setAttribute('line', this.lineData);\n  },\n\n  /**\n   * Return A-Frame attachments of each element's object3D group (e.g., mesh).\n   * Children are flattened by one level, removing the THREE.Group wrapper,\n   * so that non-recursive raycasting remains useful.\n   *\n   * Only push children defined as component attachments (e.g., setObject3D),\n   * NOT actual children in the scene graph hierarchy.\n   *\n   * @param {Array<Element>} els\n   * @returns {Array<THREE.Object3D>}\n   */\n  flattenObject3DMaps: function (els) {\n    var key;\n    var i;\n    var objects = this.objects;\n    var scene = this.el.sceneEl.object3D;\n\n    function isAttachedToScene (object) {\n      if (object.parent) {\n        return isAttachedToScene(object.parent);\n      } else {\n        return (object === scene);\n      }\n    }\n\n    // Push meshes and other attachments onto list of objects to intersect.\n    objects.length = 0;\n    for (i = 0; i < els.length; i++) {\n      var el = els[i];\n      if (el.isEntity && el.object3D && isAttachedToScene(el.object3D)) {\n        for (key in el.object3DMap) {\n          objects.push(el.getObject3D(key));\n        }\n      }\n    }\n\n    return objects;\n  },\n\n  clearAllIntersections: function () {\n    var i;\n    for (i = 0; i < this.intersectedEls.length; i++) {\n      this.intersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                  this.intersectedClearedDetail);\n    }\n    copyArray(this.clearedIntersectedEls, this.intersectedEls);\n    this.intersectedEls.length = 0;\n    this.intersections.length = 0;\n    this.el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n  }\n});\n\n/**\n * Copy contents of one array to another without allocating new array.\n */\nfunction copyArray (a, b) {\n  var i;\n  a.length = b.length;\n  for (i = 0; i < b.length; i++) {\n    a[i] = b[i];\n  }\n}\n", "import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('position', {\n  schema: {type: 'vec3'},\n\n  update: function () {\n    var object3D = this.el.object3D;\n    var data = this.data;\n    object3D.position.set(data.x, data.y, data.z);\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.position.set(0, 0, 0);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nvar degToRad = THREE.MathUtils.degToRad;\n\nexport var Component = registerComponent('rotation', {\n  schema: {type: 'vec3'},\n\n  /**\n   * Updates object3D rotation.\n   */\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.rotation.set(degToRad(data.x), degToRad(data.y), degToRad(data.z), 'YXZ');\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.rotation.set(0, 0, 0);\n  }\n});\n", "import createTextGeometry from 'three-bmfont-text';\nimport loadBMFont from 'load-bmfont';\n\nimport { registerComponent } from '../core/component.js';\nimport { shaders } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\nvar error = utils.debug('components:text:error');\nvar warn = utils.debug('components:text:warn');\n\n// 1 to match other A-Frame default widths.\nvar DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nvar MAX_ANISOTROPY = 16;\n\nvar FONT_BASE_URL = AFRAME_CDN_ROOT + 'fonts/';\nexport var FONTS = {\n  aileronsemibold: FONT_BASE_URL + 'Aileron-Semibold.fnt',\n  dejavu: FONT_BASE_URL + 'DejaVu-sdf.fnt',\n  exo2bold: FONT_BASE_URL + 'Exo2Bold.fnt',\n  exo2semibold: FONT_BASE_URL + 'Exo2SemiBold.fnt',\n  kelsonsans: FONT_BASE_URL + 'KelsonSans.fnt',\n  monoid: FONT_BASE_URL + 'Monoid.fnt',\n  mozillavr: FONT_BASE_URL + 'mozillavr.fnt',\n  roboto: FONT_BASE_URL + 'Roboto-msdf.json',\n  sourcecodepro: FONT_BASE_URL + 'SourceCodePro.fnt'\n};\nvar MSDF_FONTS = ['roboto'];\nvar DEFAULT_FONT = 'roboto';\n\nvar cache = new PromiseCache();\nvar fontWidthFactors = {};\nvar textures = {};\n\n// Regular expression for detecting a URLs with a protocol prefix.\nvar protocolRe = /^\\w+:/;\n\n/**\n * SDF-based text component.\n * Based on https://github.com/Jam3/three-bmfont-text.\n *\n * All the stock fonts are for the `sdf` registered shader, an improved version of jam3's\n * original `sdf` shader.\n */\nexport var Component = registerComponent('text', {\n  multiple: true,\n\n  schema: {\n    align: {type: 'string', default: 'left', oneOf: ['left', 'right', 'center']},\n    alphaTest: {default: 0.5},\n    // `anchor` defaults to center to match geometries.\n    anchor: {default: 'center', oneOf: ['left', 'right', 'center', 'align']},\n    baseline: {default: 'center', oneOf: ['top', 'center', 'bottom']},\n    color: {type: 'color', default: '#FFF'},\n    font: {type: 'string', default: DEFAULT_FONT},\n    // `fontImage` defaults to the font name as a .png (e.g., mozillavr.fnt -> mozillavr.png).\n    fontImage: {type: 'string'},\n    // `height` has no default, will be populated at layout.\n    height: {type: 'number'},\n    letterSpacing: {type: 'number', default: 0},\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: {type: 'number'},\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: {type: 'boolean', default: true},\n    opacity: {type: 'number', default: 1.0},\n    shader: {default: 'sdf', oneOf: shaders},\n    side: {default: 'front', oneOf: ['front', 'back', 'double']},\n    tabSize: {default: 4},\n    transparent: {default: true},\n    value: {type: 'string'},\n    whiteSpace: {default: 'normal', oneOf: ['normal', 'pre', 'nowrap']},\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: {type: 'number'},\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: {type: 'number', default: 40},\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: {type: 'number'},\n    // `xOffset` to add padding.\n    xOffset: {type: 'number', default: 0},\n    // `yOffset` to adjust generated fonts from tools that may have incorrect metrics.\n    yOffset: {type: 'number', default: 0},\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: {type: 'number', default: 0.001}\n  },\n\n  init: function () {\n    this.shaderData = {};\n    this.geometry = createTextGeometry();\n    this.createOrUpdateMaterial();\n    this.explicitGeoDimensionsChecked = false;\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var font = this.currentFont;\n    if (textures[data.font]) {\n      this.texture = textures[data.font];\n    } else {\n      // Create texture per font.\n      this.texture = textures[data.font] = new THREE.Texture();\n      this.texture.anisotropy = MAX_ANISOTROPY;\n    }\n\n    // Update material.\n    this.createOrUpdateMaterial();\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont();\n      return;\n    }\n\n    // Update geometry and layout.\n    if (font) {\n      this.updateGeometry(this.geometry, font);\n      this.updateLayout();\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function () {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.material.dispose();\n    this.material = null;\n    this.texture.dispose();\n    this.texture = null;\n    if (this.shaderObject) { delete this.shaderObject; }\n  },\n\n  /**\n   * Update the shader of the material.\n   */\n  createOrUpdateMaterial: function () {\n    var data = this.data;\n    var hasChangedShader;\n    var material = this.material;\n    var NewShader;\n    var shaderData = this.shaderData;\n    var shaderName;\n\n    // Infer shader if using a stock font (or from `-msdf` filename convention).\n    shaderName = data.shader;\n    if (MSDF_FONTS.indexOf(data.font) !== -1 || data.font.indexOf('-msdf.') >= 0) {\n      shaderName = 'msdf';\n    } else if (data.font in FONTS && MSDF_FONTS.indexOf(data.font) === -1) {\n      shaderName = 'sdf';\n    }\n\n    hasChangedShader = (this.shaderObject && this.shaderObject.name) !== shaderName;\n\n    shaderData.alphaTest = data.alphaTest;\n    shaderData.color = data.color;\n    shaderData.map = this.texture;\n    shaderData.opacity = data.opacity;\n    shaderData.side = parseSide(data.side);\n    shaderData.transparent = data.transparent;\n    shaderData.negate = data.negate;\n\n    // Shader has not changed, do an update.\n    if (!hasChangedShader) {\n      // Update shader material.\n      this.shaderObject.update(shaderData);\n      // Apparently, was not set on `init` nor `update`.\n      material.transparent = shaderData.transparent;\n      material.side = shaderData.side;\n      return;\n    }\n\n    // Shader has changed. Create a shader material.\n    NewShader = createShader(this.el, shaderName, shaderData);\n    this.material = NewShader.material;\n    this.shaderObject = NewShader.shader;\n\n    // Set new shader material.\n    this.material.side = shaderData.side;\n    if (this.mesh) { this.mesh.material = this.material; }\n  },\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function () {\n    var data = this.data;\n    var el = this.el;\n    var fontSrc;\n    var geometry = this.geometry;\n    var self = this;\n\n    if (!data.font) { warn('No font specified. Using the default font.'); }\n\n    // Make invisible during font swap.\n    if (this.mesh) { this.mesh.visible = false; }\n\n    // Look up font URL to use, and perform cached load.\n    fontSrc = this.lookupFont(data.font || DEFAULT_FONT) || data.font;\n    cache.get(fontSrc, function doLoadFont () {\n      return loadFont(fontSrc, data.yOffset);\n    }).then(function setFont (font) {\n      var fontImgSrc;\n\n      if (font.pages.length !== 1) {\n        throw new Error('Currently only single-page bitmap fonts are supported.');\n      }\n\n      if (!fontWidthFactors[fontSrc]) {\n        font.widthFactor = fontWidthFactors[font] = computeFontWidthFactor(font);\n      }\n      self.currentFont = font;\n      // Look up font image URL to use, and perform cached load.\n      fontImgSrc = self.getFontImageSrc();\n      cache.get(fontImgSrc, function () {\n        return loadTexture(fontImgSrc);\n      }).then(function (image) {\n        // Make mesh visible and apply font image as texture.\n        var texture = self.texture;\n        // The component may have been removed at this point and texture will\n        // be null. This happens mainly while executing the tests,\n        // in this case we just return.\n        if (!texture) return;\n        texture.image = image;\n        texture.needsUpdate = true;\n        textures[data.font] = texture;\n        self.texture = texture;\n        self.initMesh();\n        self.currentFont = font;\n        // Update geometry given font metrics.\n        self.updateGeometry(geometry, font);\n        self.updateLayout();\n        self.mesh.visible = true;\n        el.emit('textfontset', {font: data.font, fontObj: font});\n      }).catch(function (err) {\n        error(err.message);\n        error(err.stack);\n      });\n    }).catch(function (err) {\n      error(err.message);\n      error(err.stack);\n    });\n  },\n\n  initMesh: function () {\n    if (this.mesh) { return; }\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  getFontImageSrc: function () {\n    if (this.data.fontImage) { return this.data.fontImage; }\n    var fontSrc = this.lookupFont(this.data.font || DEFAULT_FONT) || this.data.font;\n    var imageSrc = this.currentFont.pages[0];\n    // If the image URL contains a non-HTTP(S) protocol, assume it's an absolute\n    // path on disk and try to infer the path from the font source instead.\n    if (imageSrc.match(protocolRe) && imageSrc.indexOf('http') !== 0) {\n      return fontSrc.replace(/(\\.fnt)|(\\.json)/, '.png');\n    }\n    return THREE.LoaderUtils.extractUrlBase(fontSrc) + imageSrc;\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function () {\n    var anchor;\n    var baseline;\n    var el = this.el;\n    var data = this.data;\n    var geometry = this.geometry;\n    var geometryComponent;\n    var height;\n    var layout;\n    var mesh = this.mesh;\n    var textRenderWidth;\n    var textScale;\n    var width;\n    var x;\n    var y;\n\n    if (!mesh || !geometry.layout) { return; }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    geometryComponent = el.getAttribute('geometry');\n    width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount,\n                                   this.currentFont.widthFactor);\n    textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    layout = geometry.layout;\n    height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === 'plane') {\n      if (!this.explicitGeoDimensionsChecked) {\n        this.explicitGeoDimensionsChecked = true;\n        this.hasExplicitGeoWidth = !!geometryComponent.width;\n        this.hasExplicitGeoHeight = !!geometryComponent.height;\n      }\n      if (!this.hasExplicitGeoWidth) { el.setAttribute('geometry', 'width', width); }\n      if (!this.hasExplicitGeoHeight) { el.setAttribute('geometry', 'height', height); }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    anchor = data.anchor === 'align' ? data.align : data.anchor;\n    if (anchor === 'left') {\n      x = 0;\n    } else if (anchor === 'right') {\n      x = -1 * layout.width;\n    } else if (anchor === 'center') {\n      x = -1 * layout.width / 2;\n    } else {\n      throw new TypeError('Invalid text.anchor property value', anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    baseline = data.baseline;\n    if (baseline === 'bottom') {\n      y = 0;\n    } else if (baseline === 'top') {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === 'center') {\n      y = -1 * layout.height / 2;\n    } else {\n      throw new TypeError('Invalid text.baseline property value', baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n  },\n\n  /**\n   * Grab font from the constant.\n   * Set as a method for test stubbing purposes.\n   */\n  lookupFont: function (key) {\n    return FONTS[key];\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function () {\n    var geometryUpdateBase = {};\n    var geometryUpdateData = {};\n    var newLineRegex = /\\\\n/g;\n    var tabRegex = /\\\\t/g;\n\n    return function (geometry, font) {\n      var data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight = data.lineHeight && isFinite(data.lineHeight)\n        ? data.lineHeight\n        : font.common.lineHeight;\n      geometryUpdateData.text = data.value.toString().replace(newLineRegex, '\\n')\n        .replace(tabRegex, '\\t');\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount,\n                                              font.widthFactor);\n      geometry.update(utils.extend(geometryUpdateBase, data, geometryUpdateData));\n    };\n  })()\n});\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide (side) {\n  switch (side) {\n    case 'back': {\n      return THREE.FrontSide;\n    }\n    case 'double': {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * @returns {Promise}\n */\nfunction loadFont (src, yOffset) {\n  return new Promise(function (resolve, reject) {\n    loadBMFont(src, function (err, font) {\n      if (err) {\n        error('Error loading font', src);\n        reject(err);\n        return;\n      }\n\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf('/Roboto-msdf.json') >= 0) { yOffset = 30; }\n      if (yOffset) { font.chars.forEach(function doOffset (ch) { ch.yoffset += yOffset; }); }\n\n      resolve(font);\n    });\n  });\n}\n\n/**\n * @returns {Promise}\n */\nfunction loadTexture (src) {\n  return new Promise(function (resolve, reject) {\n    new THREE.ImageLoader().load(src, function (image) {\n      resolve(image);\n    }, undefined, function () {\n      error('Error loading font image', src);\n      reject(null);\n    });\n  });\n}\n\nfunction createShader (el, shaderName, data) {\n  var shader;\n  var shaderObject;\n\n  // Set up Shader.\n  shaderObject = new shaders[shaderName].Shader();\n  shaderObject.el = el;\n  shaderObject.init(data);\n  shaderObject.update(data);\n\n  // Get material.\n  shader = shaderObject.material;\n  // Apparently, was not set on `init` nor `update`.\n  shader.transparent = data.transparent;\n\n  return {\n    material: shader,\n    shader: shaderObject\n  };\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth (wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || ((0.5 + wrapCount) * widthFactor);\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor (font) {\n  var sum = 0;\n  var digitsum = 0;\n  var digits = 0;\n  font.chars.forEach(function (ch) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  });\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\n/**\n * Get or create a promise given a key and promise generator.\n * @todo Move to a utility and use in other parts of A-Frame.\n */\nfunction PromiseCache () {\n  var cache = this.cache = {};\n\n  this.get = function (key, promiseGenerator) {\n    if (key in cache) {\n      return cache[key];\n    }\n    cache[key] = promiseGenerator();\n    return cache[key];\n  };\n}\n", "import { registerComponent } from '../core/component.js';\nimport { debug } from '../utils/index.js';\nimport * as THREE from 'three';\n\nvar warn = debug('components:sound:warn');\n\n/**\n * Sound component.\n */\nexport var Component = registerComponent('sound', {\n  schema: {\n    autoplay: {default: false},\n    distanceModel: {default: 'inverse', oneOf: ['linear', 'inverse', 'exponential']},\n    loop: {default: false},\n    loopStart: {default: 0},\n    loopEnd: {default: 0},\n    maxDistance: {default: 10000},\n    on: {default: ''},\n    poolSize: {default: 1},\n    positional: {default: true},\n    refDistance: {default: 1},\n    rolloffFactor: {default: 1},\n    src: {type: 'audio'},\n    volume: {default: 1}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.listener = null;\n    this.audioLoader = new THREE.AudioLoader();\n    this.pool = new THREE.Group();\n    this.loaded = false;\n    this.mustPlay = false;\n\n    // Don't pass evt because playSound takes a function as parameter.\n    this.playSoundBound = function () { self.playSound(); };\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var i;\n    var sound;\n    var srcChanged = data.src !== oldData.src;\n\n    // Create new sound if not yet created or changing `src`.\n    if (srcChanged) {\n      if (!data.src) { return; }\n      this.setupSound();\n    }\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (data.positional) {\n        sound.setDistanceModel(data.distanceModel);\n        sound.setMaxDistance(data.maxDistance);\n        sound.setRefDistance(data.refDistance);\n        sound.setRolloffFactor(data.rolloffFactor);\n      }\n      sound.setLoop(data.loop);\n      sound.setLoopStart(data.loopStart);\n\n      // With a loop start specified without a specified loop end, the end of the loop should be the end of the file\n      if (data.loopStart !== 0 && data.loopEnd === 0) {\n        sound.setLoopEnd(sound.buffer.duration);\n      } else {\n        sound.setLoopEnd(data.loopEnd);\n      }\n\n      sound.setVolume(data.volume);\n      sound.isPaused = false;\n    }\n\n    if (data.on !== oldData.on) {\n      this.updateEventListener(oldData.on);\n    }\n\n    // All sound values set. Load in `src`.\n    if (srcChanged) {\n      var self = this;\n\n      this.loaded = false;\n      this.audioLoader.load(data.src, function (buffer) {\n        for (i = 0; i < self.pool.children.length; i++) {\n          sound = self.pool.children[i];\n          sound.setBuffer(buffer);\n        }\n        self.loaded = true;\n\n        // Remove this key from cache, otherwise we can't play it again\n        THREE.Cache.remove(data.src);\n        if (self.data.autoplay || self.mustPlay) { self.playSound(self.processSound); }\n        self.el.emit('sound-loaded', self.evtDetail, false);\n      });\n    }\n  },\n\n  pause: function () {\n    this.stopSound();\n    this.removeEventListener();\n  },\n\n  play: function () {\n    if (this.data.autoplay) { this.playSound(); }\n    this.updateEventListener();\n  },\n\n  remove: function () {\n    var i;\n    var sound;\n\n    this.removeEventListener();\n\n    if (this.el.getObject3D(this.attrName)) {\n      this.el.removeObject3D(this.attrName);\n    }\n\n    try {\n      for (i = 0; i < this.pool.children.length; i++) {\n        sound = this.pool.children[i];\n        sound.disconnect();\n      }\n    } catch (e) {\n      // disconnect() will throw if it was never connected initially.\n      warn('Audio source not properly disconnected');\n    }\n  },\n\n  /**\n  *  Update listener attached to the user defined on event.\n  */\n  updateEventListener: function (oldEvt) {\n    var el = this.el;\n    if (oldEvt) { el.removeEventListener(oldEvt, this.playSoundBound); }\n    el.addEventListener(this.data.on, this.playSoundBound);\n  },\n\n  removeEventListener: function () {\n    this.el.removeEventListener(this.data.on, this.playSoundBound);\n  },\n\n  /**\n   * Removes current sound object, creates new sound object, adds to entity.\n   */\n  setupSound: function () {\n    var el = this.el;\n    var i;\n    var sceneEl = el.sceneEl;\n    var self = this;\n    var sound;\n\n    if (this.pool.children.length > 0) {\n      this.stopSound();\n      el.removeObject3D('sound');\n    }\n\n    // Only want one AudioListener. Cache it on the scene.\n    var listener = this.listener = sceneEl.audioListener || new THREE.AudioListener();\n    sceneEl.audioListener = listener;\n\n    if (sceneEl.camera) {\n      sceneEl.camera.add(listener);\n    }\n\n    // Wait for camera if necessary.\n    sceneEl.addEventListener('camera-set-active', function (evt) {\n      evt.detail.cameraEl.getObject3D('camera').add(listener);\n    });\n\n    // Create [poolSize] audio instances and attach them to pool\n    this.pool = new THREE.Group();\n    for (i = 0; i < this.data.poolSize; i++) {\n      sound = this.data.positional\n        ? new THREE.PositionalAudio(listener)\n        : new THREE.Audio(listener);\n      this.pool.add(sound);\n    }\n    el.setObject3D(this.attrName, this.pool);\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      sound.onEnded = function () {\n        this.isPlaying = false;\n        self.el.emit('sound-ended', self.evtDetail, false);\n      };\n    }\n  },\n\n  /**\n   * Pause all the sounds in the pool.\n   */\n  pauseSound: function () {\n    var i;\n    var sound;\n\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer || !sound.isPlaying || sound.isPaused) {\n        continue;\n      }\n      sound.isPaused = true;\n      sound.pause();\n    }\n  },\n\n  /**\n   * Look for an unused sound in the pool and play it if found.\n   */\n  playSound: function (processSound) {\n    var found;\n    var i;\n    var sound;\n\n    if (!this.loaded) {\n      warn('Sound not loaded yet. It will be played once it finished loading');\n      this.mustPlay = true;\n      this.processSound = processSound;\n      return;\n    }\n\n    found = false;\n    this.isPlaying = true;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.isPlaying && sound.buffer && !found) {\n        if (processSound) { processSound(sound); }\n        sound.play();\n        sound.isPaused = false;\n        found = true;\n        continue;\n      }\n    }\n\n    if (!found) {\n      warn('All the sounds are playing. If you need to play more sounds simultaneously ' +\n           'consider increasing the size of pool with the `poolSize` attribute.', this.el);\n      return;\n    }\n\n    this.mustPlay = false;\n    this.processSound = undefined;\n  },\n\n  /**\n   * Stop all the sounds in the pool.\n   */\n  stopSound: function () {\n    var i;\n    var sound;\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer) { return; }\n      sound.stop();\n    }\n  }\n});\n", "import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('scale', {\n  schema: {\n    type: 'vec3',\n    default: {x: 1, y: 1, z: 1}\n  },\n\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.scale.set(data.x, data.y, data.z);\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.scale.set(1, 1, 1);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Shadow component.\n *\n * When applied to an entity, that entity's geometry and any descendants will cast or receive\n * shadows as specified by the `cast` and `receive` properties.\n */\nexport var Component = registerComponent('shadow', {\n  schema: {\n    cast: {default: true},\n    receive: {default: true}\n  },\n\n  init: function () {\n    this.onMeshChanged = this.update.bind(this);\n    this.el.addEventListener('object3dset', this.onMeshChanged);\n    this.system.setShadowMapEnabled(true);\n  },\n\n  update: function () {\n    var data = this.data;\n    this.updateDescendants(data.cast, data.receive);\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeEventListener('object3dset', this.onMeshChanged);\n    this.updateDescendants(false, false);\n  },\n\n  updateDescendants: function (cast, receive) {\n    var sceneEl = this.el.sceneEl;\n    this.el.object3D.traverse(function (node) {\n      if (!(node instanceof THREE.Mesh)) { return; }\n\n      node.castShadow = cast;\n      node.receiveShadow = receive;\n\n      // If scene has already rendered, materials must be updated.\n      if (sceneEl.hasLoaded && node.material) {\n        var materials = Array.isArray(node.material) ? node.material : [node.material];\n        for (var i = 0; i < materials.length; i++) {\n          materials[i].needsUpdate = true;\n        }\n      }\n    });\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport * as controllerUtils from '../utils/tracked-controls.js';\n\nvar EVENTS = {\n  AXISMOVE: 'axismove',\n  BUTTONCHANGED: 'buttonchanged',\n  BUTTONDOWN: 'buttondown',\n  BUTTONUP: 'buttonup',\n  TOUCHSTART: 'touchstart',\n  TOUCHEND: 'touchend'\n};\n\n/**\n * Tracked controls.\n * Abstract controls to support 6DOF tracked input controllers.\n *\n * @property {string} id - String corresponding to the WebXR controller input profile ids.\n * @property {number} controller - Index of controller in array returned by Gamepad API.\n *  Only used if hand property is not set.\n * @property {boolean} autoHide - shows / hides the entity automatically when the controller is\n * connected or desconneted.\n * @property {number} hand - If multiple controllers found with id, choose the one with the\n *  given value for hand. If set, we ignore 'controller' property\n * @property {boolean} handTrackingEnabled - Assumes a controller exposed via the WebXR Hand Input Module.\n * @property {boolean} iterateControllerProfiles - Iterates over all of the WebXR controller input profiles.\n */\nexport var Component = registerComponent('tracked-controls', {\n  schema: {\n    id: {type: 'string', default: ''},\n    controller: {default: -1},\n    autoHide: {default: true},\n    hand: {type: 'string', default: ''},\n    handTrackingEnabled: {default: false},\n    iterateControllerProfiles: {default: false}\n  },\n\n  init: function () {\n    this.buttonEventDetails = {};\n    this.buttonStates = this.el.components['tracked-controls'].buttonStates = {};\n    this.axis = this.el.components['tracked-controls'].axis = [0, 0, 0];\n    this.changedAxes = [];\n    this.axisMoveEventDetail = {axis: this.axis, changed: this.changedAxes};\n\n    this.updateController = this.updateController.bind(this);\n  },\n\n  update: function () {\n    this.updateController();\n  },\n\n  play: function () {\n    var sceneEl = this.el.sceneEl;\n    this.updateController();\n    sceneEl.addEventListener('controllersupdated', this.updateController);\n  },\n\n  pause: function () {\n    var sceneEl = this.el.sceneEl;\n    sceneEl.removeEventListener('controllersupdated', this.updateController);\n  },\n\n  isControllerPresent: function (evt) {\n    if (!this.controller || this.controller.gamepad) { return false; }\n    if (evt.inputSource.handedness !== 'none' &&\n        evt.inputSource.handedness !== this.data.hand) {\n      return false;\n    }\n    return true;\n  },\n\n  /**\n   * Handle update controller match criteria (such as `id`, `idPrefix`, `hand`, `controller`)\n   */\n  updateController: function () {\n    this.controller = controllerUtils.findMatchingControllerWebXR(\n      this.system.controllers,\n      this.data.id,\n      this.data.hand,\n      this.data.controller,\n      this.data.iterateControllerProfiles,\n      this.data.handTrackingEnabled\n    );\n    // Legacy handle to the controller for old components.\n    this.el.components['tracked-controls'].controller = this.controller;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.controller;\n    var frame = sceneEl.frame;\n    if (this.data.autoHide) { this.el.object3D.visible = !!controller; }\n    if (!controller || !sceneEl.frame || !this.system.referenceSpace) { return; }\n    if (!controller.hand) {\n      this.pose = frame.getPose(controller.gripSpace, this.system.referenceSpace);\n      this.updatePose();\n      this.updateButtons();\n    }\n  },\n\n  updatePose: function () {\n    var object3D = this.el.object3D;\n    var pose = this.pose;\n    if (!pose) { return; }\n    object3D.matrix.elements = pose.transform.matrix;\n    object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n  },\n\n  /**\n   * Handle button changes including axes, presses, touches, values.\n   */\n  updateButtons: function () {\n    var buttonState;\n    var id;\n    var controller = this.controller;\n    var gamepad;\n    if (!controller || !controller.gamepad) { return; }\n\n    gamepad = controller.gamepad;\n    // Check every button.\n    for (id = 0; id < gamepad.buttons.length; ++id) {\n      // Initialize button state.\n      if (!this.buttonStates[id]) {\n        this.buttonStates[id] = {pressed: false, touched: false, value: 0};\n      }\n      if (!this.buttonEventDetails[id]) {\n        this.buttonEventDetails[id] = {id: id, state: this.buttonStates[id]};\n      }\n\n      buttonState = gamepad.buttons[id];\n      this.handleButton(id, buttonState);\n    }\n    // Check axes.\n    this.handleAxes();\n  },\n\n  /**\n   * Handle presses and touches for a single button.\n   *\n   * @param {number} id - Index of button in Gamepad button array.\n   * @param {number} buttonState - Value of button state from 0 to 1.\n   * @returns {boolean} Whether button has changed in any way.\n   */\n  handleButton: function (id, buttonState) {\n    var changed;\n    changed = this.handlePress(id, buttonState) |\n              this.handleTouch(id, buttonState) |\n              this.handleValue(id, buttonState);\n    if (!changed) { return false; }\n    this.el.emit(EVENTS.BUTTONCHANGED, this.buttonEventDetails[id], false);\n    return true;\n  },\n\n  /**\n   * An axis is an array of values from -1 (up, left) to 1 (down, right).\n   * Compare each component of the axis to the previous value to determine change.\n   *\n   * @returns {boolean} Whether axes changed.\n   */\n  handleAxes: function () {\n    var changed = false;\n    var controllerAxes = this.controller.gamepad.axes;\n    var i;\n    var previousAxis = this.axis;\n    var changedAxes = this.changedAxes;\n\n    // Check if axis changed.\n    this.changedAxes.splice(0, this.changedAxes.length);\n    for (i = 0; i < controllerAxes.length; ++i) {\n      changedAxes.push(previousAxis[i] !== controllerAxes[i]);\n      if (changedAxes[i]) { changed = true; }\n    }\n    if (!changed) { return false; }\n\n    this.axis.splice(0, this.axis.length);\n    for (i = 0; i < controllerAxes.length; i++) {\n      this.axis.push(controllerAxes[i]);\n    }\n    this.el.emit(EVENTS.AXISMOVE, this.axisMoveEventDetail, false);\n    return true;\n  },\n\n  /**\n   * Determine whether a button press has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button press state changed.\n   */\n  handlePress: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.pressed === previousButtonState.pressed) { return false; }\n\n    evtName = buttonState.pressed ? EVENTS.BUTTONDOWN : EVENTS.BUTTONUP;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.pressed = buttonState.pressed;\n    return true;\n  },\n\n  /**\n   * Determine whether a button touch has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button touch state changed.\n   */\n  handleTouch: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.touched === previousButtonState.touched) { return false; }\n\n    evtName = buttonState.touched ? EVENTS.TOUCHSTART : EVENTS.TOUCHEND;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.touched = buttonState.touched;\n    return true;\n  },\n\n  /**\n   * Determine whether a button value has changed.\n   *\n   * @param {string} id - Id of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button value changed.\n   */\n  handleValue: function (id, buttonState) {\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.value === previousButtonState.value) { return false; }\n\n    previousButtonState.value = buttonState.value;\n    return true;\n  }\n});\n", "import * as THREE from 'three';\nimport { KEYCODE_TO_CODE } from '../constants/keyboardevent.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar shouldCaptureKeyEvent = utils.shouldCaptureKeyEvent;\n\nvar CLAMP_VELOCITY = 0.00001;\nvar MAX_DELTA = 0.2;\nvar KEYS = [\n  'KeyW', 'KeyA', 'KeyS', 'KeyD',\n  'ArrowUp', 'ArrowLeft', 'ArrowRight', 'ArrowDown'\n];\n\n/**\n * WASD component to control entities using WASD keys.\n */\nexport var Component = registerComponent('wasd-controls', {\n  schema: {\n    acceleration: {default: 65},\n    adAxis: {default: 'x', oneOf: ['x', 'y', 'z']},\n    adEnabled: {default: true},\n    adInverted: {default: false},\n    enabled: {default: true},\n    fly: {default: false},\n    wsAxis: {default: 'z', oneOf: ['x', 'y', 'z']},\n    wsEnabled: {default: true},\n    wsInverted: {default: false}\n  },\n  after: ['look-controls'],\n\n  init: function () {\n    // To keep track of the pressed keys.\n    this.keys = {};\n    this.easing = 1.1;\n\n    this.velocity = new THREE.Vector3();\n\n    // Bind methods and add event listeners.\n    this.onBlur = this.onBlur.bind(this);\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.attachVisibilityEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var data = this.data;\n    var el = this.el;\n    var velocity = this.velocity;\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis] &&\n        isEmptyObject(this.keys)) { return; }\n\n    // Update velocity.\n    delta = delta / 1000;\n    this.updateVelocity(delta);\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) { return; }\n\n    // Get movement vector and translate position.\n    el.object3D.position.add(this.getMovementVector(delta));\n  },\n\n  update: function (oldData) {\n    // Reset velocity if axis have changed.\n    if (oldData.adAxis !== this.data.adAxis) { this.velocity[oldData.adAxis] = 0; }\n    if (oldData.wsAxis !== this.data.wsAxis) { this.velocity[oldData.wsAxis] = 0; }\n  },\n\n  remove: function () {\n    this.removeKeyEventListeners();\n    this.removeVisibilityEventListeners();\n  },\n\n  play: function () {\n    this.attachKeyEventListeners();\n  },\n\n  pause: function () {\n    this.keys = {};\n    this.removeKeyEventListeners();\n  },\n\n  updateVelocity: function (delta) {\n    var acceleration;\n    var adAxis;\n    var adSign;\n    var data = this.data;\n    var keys = this.keys;\n    var velocity = this.velocity;\n    var wsAxis;\n    var wsSign;\n\n    adAxis = data.adAxis;\n    wsAxis = data.wsAxis;\n\n    // If FPS too low, reset velocity.\n    if (delta > MAX_DELTA) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // https://gamedev.stackexchange.com/questions/151383/frame-rate-independant-movement-with-acceleration\n    var scaledEasing = Math.pow(1 / this.easing, delta * 60);\n    // Velocity Easing.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] = velocity[adAxis] * scaledEasing;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] = velocity[wsAxis] * scaledEasing;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) { velocity[adAxis] = 0; }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) { velocity[wsAxis] = 0; }\n\n    if (!data.enabled) { return; }\n\n    // Update velocity using keys pressed.\n    acceleration = data.acceleration;\n    if (data.adEnabled) {\n      adSign = data.adInverted ? -1 : 1;\n      if (keys.KeyA || keys.ArrowLeft) { velocity[adAxis] -= adSign * acceleration * delta; }\n      if (keys.KeyD || keys.ArrowRight) { velocity[adAxis] += adSign * acceleration * delta; }\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      if (keys.KeyW || keys.ArrowUp) { velocity[wsAxis] -= wsSign * acceleration * delta; }\n      if (keys.KeyS || keys.ArrowDown) { velocity[wsAxis] += wsSign * acceleration * delta; }\n    }\n  },\n\n  getMovementVector: (function () {\n    var directionVector = new THREE.Vector3(0, 0, 0);\n    var rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n\n    return function (delta) {\n      var rotation = this.el.getAttribute('rotation');\n      var velocity = this.velocity;\n      var xRotation;\n\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n\n      // Absolute.\n      if (!rotation) { return directionVector; }\n\n      xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(THREE.MathUtils.degToRad(xRotation), THREE.MathUtils.degToRad(rotation.y), 0);\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  })(),\n\n  attachVisibilityEventListeners: function () {\n    window.oncontextmenu = this.onContextMenu;\n    window.addEventListener('blur', this.onBlur);\n    window.addEventListener('focus', this.onFocus);\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  removeVisibilityEventListeners: function () {\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('focus', this.onFocus);\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  attachKeyEventListeners: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  },\n\n  removeKeyEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  },\n\n  onContextMenu: function () {\n    var keys = Object.keys(this.keys);\n    for (var i = 0; i < keys.length; i++) {\n      delete this.keys[keys[i]];\n    }\n  },\n\n  onBlur: function () {\n    this.pause();\n  },\n\n  onFocus: function () {\n    this.play();\n  },\n\n  onVisibilityChange: function () {\n    if (document.hidden) {\n      this.onBlur();\n    } else {\n      this.onFocus();\n    }\n  },\n\n  onKeyDown: function (event) {\n    var code;\n    if (!shouldCaptureKeyEvent(event)) { return; }\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    if (KEYS.indexOf(code) !== -1) { this.keys[code] = true; }\n  },\n\n  onKeyUp: function (event) {\n    var code;\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    delete this.keys[code];\n  }\n});\n\nfunction isEmptyObject (keys) {\n  var key;\n  for (key in keys) { return false; }\n  return true;\n}\n", "import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar INDEX_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/valve/index/valve-index-';\nvar INDEX_CONTROLLER_MODEL_URL = {\n  left: INDEX_CONTROLLER_MODEL_BASE_URL + 'left.glb',\n  right: INDEX_CONTROLLER_MODEL_BASE_URL + 'right.glb'\n};\n\nvar GAMEPAD_ID_PREFIX = 'valve';\n\nvar INDEX_CONTROLLER_ROTATION_OFFSET = {\n  left: {x: 0, y: -0.05, z: 0.06},\n  right: {x: 0, y: -0.05, z: 0.06}\n};\n\nvar INDEX_CONTROLLER_POSITION_OFFSET = {\n  left: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'},\n  right: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'}\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * trackpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('valve-index-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: {\n    axes: {\n      trackpad: [0, 1],\n      thumbstick: [2, 3]\n    },\n    buttons: ['trigger', 'grip', 'trackpad', 'thumbstick', 'abutton']\n  },\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: controllerIndex, iterateControllerProfiles: true, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      // Hand IDs: 1 = right, 0 = left, 2 = anything else.\n      controller: data.hand === 'right' ? 1 : data.hand === 'left' ? 0 : 2,\n      hand: data.hand\n    });\n\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var data = this.data;\n    if (!data.model) { return; }\n    this.el.setAttribute('gltf-model', '' + INDEX_CONTROLLER_MODEL_URL[data.hand] + '');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = this.triggerOriginalRotationX - analogValue * (Math.PI / 40);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    this.triggerOriginalRotationX = buttonMeshes.trigger.rotation.x;\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.copy(INDEX_CONTROLLER_POSITION_OFFSET[this.data.hand]);\n    controllerObject3D.rotation.copy(INDEX_CONTROLLER_ROTATION_OFFSET[this.data.hand]);\n\n    this.el.emit('controllermodelready', {\n      name: 'valve-index-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n  setButtonColor: function (buttonName, color) {\n    // TODO: The meshes aren't set up correctly now, skipping for the moment\n    return;\n  }\n});\n", "import { registerComponent } from '../core/component.js';\n\n/**\n * Visibility component.\n */\nexport var Component = registerComponent('visible', {\n  schema: {default: true},\n\n  update: function () {\n    this.el.object3D.visible = this.data;\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_CONTROLLER_MODEL_OBJ_URL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.obj';\nvar VIVE_CONTROLLER_MODEL_OBJ_MTL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.mtl';\n\n// Prefix for HTC Vive controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - none (dispatch but better for menu options)\n * 4 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/htc/htc-vive.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'none']\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * touchpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('obj-model', {\n      obj: VIVE_CONTROLLER_MODEL_OBJ_URL,\n      mtl: VIVE_CONTROLLER_MODEL_OBJ_MTL\n    });\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = -analogValue * (Math.PI / 12);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.set(0, -0.015, 0.04);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n\n  setButtonColor: function (buttonName, color) {\n    var buttonMeshes = this.buttonMeshes;\n\n    if (!buttonMeshes) { return; }\n\n    // Need to do both left and right sides for grip.\n    if (buttonName === 'grip') {\n      buttonMeshes.grip.left.material.color.set(color);\n      buttonMeshes.grip.right.material.color.set(color);\n      return;\n    }\n    buttonMeshes[buttonName].material.color.set(color);\n  }\n});\n", "import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_FOCUS_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/vive/focus-controller/focus-controller.gltf';\n\n// Prefix for HTC Vive Focus Controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive-focus';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 2 - touchpad\n * 4 - menu\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad', 'none', 'menu']\n};\n\n/**\n * Vive Focus controls.\n * Interface with Vive Focus controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-focus-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n    this.addControllersUpdateListener();\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n    this.removeControllersUpdateListener();\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                   this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', VIVE_FOCUS_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('BumperKey');\n    buttonMeshes.triggerPressed = controllerObject3D.getObjectByName('BumperKey_Press');\n    if (buttonMeshes.triggerPressed) {\n      buttonMeshes.triggerPressed.visible = false;\n    }\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.touchpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.trackpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    if (buttonMeshes.trackpadPressed) {\n      buttonMeshes.trackpadPressed.visible = false;\n    }\n  },\n\n  // No analog buttons, only emits 0/1 values\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    var pressedName = buttonName + 'Pressed';\n    if (!buttonMeshes || !buttonMeshes[buttonName] || !buttonMeshes[pressedName]) {\n      return;\n    }\n    var color;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n    }\n    if (color) {\n      buttonMeshes[pressedName].material.color.set(color);\n    }\n    buttonMeshes[pressedName].visible = !!color;\n    buttonMeshes[buttonName].visible = !color;\n  }\n});\n", "// Tiny KeyboardEvent.code polyfill.\nexport var KEYCODE_TO_CODE = {\n  '38': 'ArrowUp',\n  '37': 'ArrowLeft',\n  '40': 'ArrowDown',\n  '39': 'ArrowRight',\n  '87': 'KeyW',\n  '65': 'KeyA',\n  '83': 'KeyS',\n  '68': 'KeyD'\n};\n", "import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nimport { DEFAULT_HANDEDNESS, AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar debug = utils.debug('components:windows-motion-controls:debug');\nvar warn = utils.debug('components:windows-motion-controls:warn');\n\nvar MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/microsoft/';\nvar MODEL_FILENAMES = { left: 'left.glb', right: 'right.glb', default: 'universal.glb' };\n\nvar GAMEPAD_ID_PREFIX = 'windows-mixed-reality';\n\nvar INPUT_MAPPING = {\n  // A-Frame specific semantic axis names\n  axes: {'touchpad': [0, 1], 'thumbstick': [2, 3]},\n  // A-Frame specific semantic button names\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick', 'menu'],\n  // A mapping of the semantic name to node name in the glTF model file,\n  // that should be transformed by axis value.\n  // This array mirrors the browser Gamepad.axes array, such that\n  // the mesh corresponding to axis 0 is in this array index 0.\n  axisMeshNames: [\n    'TOUCHPAD_TOUCH_X',\n    'TOUCHPAD_TOUCH_X',\n    'THUMBSTICK_X',\n    'THUMBSTICK_Y'\n  ],\n  // A mapping of the semantic name to button node name in the glTF model file,\n  // that should be transformed by button value.\n  buttonMeshNames: {\n    'trigger': 'SELECT',\n    'menu': 'MENU',\n    'squeeze': 'GRASP',\n    'thumbstick': 'THUMBSTICK_PRESS',\n    'touchpad': 'TOUCHPAD_PRESS'\n  },\n  pointingPoseMeshName: 'POINTING_POSE'\n};\n\n/**\n * Windows Motion Controller controls.\n * Interface with Windows Motion Controller controllers and map Gamepad events to\n * controller buttons: trackpad, trigger, grip, menu, thumbstick\n * Load a controller model and transform the pressed buttons.\n */\nexport var Component = registerComponent('windows-motion-controls', {\n  schema: {\n    hand: {default: DEFAULT_HANDEDNESS},\n    // It is possible to have multiple pairs of controllers attached (a pair has both left and right).\n    // Set this to 1 to use a controller from the second pair, 2 from the third pair, etc.\n    pair: {default: 0},\n    // If true, loads the controller glTF asset.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelError = this.onModelError.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onControllerConnected = function () { self.setModelVisibility(true); };\n    this.onControllerDisconnected = function () { self.setModelVisibility(false); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n\n    // Cache for submeshes that we have looked up by name.\n    this.loadedMeshInfo = {\n      buttonMeshes: null,\n      axisMeshes: null\n    };\n\n    // Pointing poses\n    this.rayOrigin = {\n      origin: new THREE.Vector3(),\n      direction: new THREE.Vector3(0, 0, -1),\n      createdFromMesh: false\n    };\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-error', this.onModelError);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-error', this.onModelError);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      index: this.data.pair,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  updateControllerModel: function () {\n    // If we do not want to load a model, or, have already loaded the model, emit the controllermodelready event.\n    if (!this.data.model || this.rayOrigin.createdFromMesh) {\n      this.modelReady();\n      return;\n    }\n\n    var sourceUrl = this.createControllerModelUrl();\n    this.loadModel(sourceUrl);\n  },\n\n  /**\n   * Helper function that constructs a URL from the controller ID suffix, for future proofed\n   * art assets.\n   */\n  createControllerModelUrl: function (forceDefault) {\n    // Determine the device specific folder based on the ID suffix\n    var device = 'default';\n    var hand = this.data.hand;\n    var filename;\n\n    // Hand\n    filename = MODEL_FILENAMES[hand] || MODEL_FILENAMES.default;\n\n    // Final url\n    return MODEL_BASE_URL + device + '/' + filename;\n  },\n\n  injectTrackedControls: function () {\n    var data = this.data;\n    this.el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      controller: data.pair,\n      hand: data.hand\n    });\n\n    this.updateControllerModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelError: function (evt) {\n    var defaultUrl = this.createControllerModelUrl(true);\n    if (evt.detail.src !== defaultUrl) {\n      warn('Failed to load controller model for device, attempting to load default.');\n      this.loadModel(defaultUrl);\n    } else {\n      warn('Failed to load default controller model.');\n    }\n  },\n\n  loadModel: function (url) {\n    // The model is loaded by the gltf-model component when this attribute is initially set,\n    // removed and re-loaded if the given url changes.\n    this.el.setAttribute('gltf-model', 'url(' + url + ')');\n  },\n\n  onModelLoaded: function (evt) {\n    var rootNode = this.controllerModel = evt.detail.model;\n    var loadedMeshInfo = this.loadedMeshInfo;\n    var i;\n    var meshName;\n    var mesh;\n    var meshInfo;\n\n    if (evt.target !== this.el) { return; }\n\n    debug('Processing model');\n\n    // Reset the caches\n    loadedMeshInfo.buttonMeshes = {};\n    loadedMeshInfo.axisMeshes = {};\n\n    // Cache our meshes so we aren't traversing the hierarchy per frame\n    if (rootNode) {\n      // Button Meshes\n      for (i = 0; i < this.mapping.buttons.length; i++) {\n        meshName = this.mapping.buttonMeshNames[this.mapping.buttons[i]];\n        if (!meshName) {\n          debug('Skipping unknown button at index: ' + i + ' with mapped name: ' + this.mapping.buttons[i]);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing button mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          pressed: getImmediateChildByName(mesh, 'PRESSED'),\n          unpressed: getImmediateChildByName(mesh, 'UNPRESSED')\n        };\n        if (meshInfo.value && meshInfo.pressed && meshInfo.unpressed) {\n          loadedMeshInfo.buttonMeshes[this.mapping.buttons[i]] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this button won't have transforms applied as mapped button value changes.\n          warn('Missing button submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', PRESSED: ' + !!meshInfo.pressed +\n            ', UNPRESSED:' + !!meshInfo.unpressed +\n            ')');\n        }\n      }\n\n      // Axis Meshes\n      for (i = 0; i < this.mapping.axisMeshNames.length; i++) {\n        meshName = this.mapping.axisMeshNames[i];\n        if (!meshName) {\n          debug('Skipping unknown axis at index: ' + i);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing axis mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          min: getImmediateChildByName(mesh, 'MIN'),\n          max: getImmediateChildByName(mesh, 'MAX')\n        };\n        if (meshInfo.value && meshInfo.min && meshInfo.max) {\n          loadedMeshInfo.axisMeshes[i] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this axis won't have transforms applied as mapped axis values change.\n          warn('Missing axis submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', MIN: ' + !!meshInfo.min +\n            ', MAX:' + !!meshInfo.max +\n            ')');\n        }\n      }\n\n      this.calculateRayOriginFromMesh(rootNode);\n      // Determine if the model has to be visible or not.\n      this.setModelVisibility();\n    }\n\n    debug('Model load complete.');\n\n    // Look through only immediate children. This will return null if no mesh exists with the given name.\n    function getImmediateChildByName (object3d, value) {\n      for (var i = 0, l = object3d.children.length; i < l; i++) {\n        var obj = object3d.children[i];\n        if (obj && obj['name'] === value) {\n          return obj;\n        }\n      }\n      return undefined;\n    }\n  },\n\n  calculateRayOriginFromMesh: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (rootNode) {\n      var mesh;\n\n      // Calculate the pointer pose (used for rays), by applying the world transform of th POINTER_POSE node\n      // in the glTF (assumes that root node is at world origin)\n      this.rayOrigin.origin.set(0, 0, 0);\n      this.rayOrigin.direction.set(0, 0, -1);\n      this.rayOrigin.createdFromMesh = true;\n\n      // Try to read Pointing pose from the source model\n      mesh = rootNode.getObjectByName(this.mapping.pointingPoseMeshName);\n      if (mesh) {\n        var parent = rootNode.parent;\n\n        // We need to read pose transforms accumulated from the root of the glTF, not the scene.\n        if (parent) {\n          rootNode.parent = null;\n          rootNode.updateMatrixWorld(true);\n          rootNode.parent = parent;\n        }\n\n        mesh.getWorldPosition(this.rayOrigin.origin);\n        mesh.getWorldQuaternion(quaternion);\n        this.rayOrigin.direction.applyQuaternion(quaternion);\n\n        // Recalculate the world matrices now that the rootNode is re-attached to the parent.\n        if (parent) {\n          rootNode.updateMatrixWorld(true);\n        }\n      } else {\n        debug('Mesh does not contain pointing origin data, defaulting to none.');\n      }\n\n      // Emit event stating that our pointing ray is now accurate.\n      this.modelReady();\n    };\n  })(),\n\n  lerpAxisTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (axis, axisValue) {\n      var axisMeshInfo = this.loadedMeshInfo.axisMeshes[axis];\n      if (!axisMeshInfo) return;\n\n      var min = axisMeshInfo.min;\n      var max = axisMeshInfo.max;\n      var target = axisMeshInfo.value;\n\n      // Convert from gamepad value range (-1 to +1) to lerp range (0 to 1)\n      var lerpValue = axisValue * 0.5 + 0.5;\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, lerpValue));\n      target.position.lerpVectors(min.position, max.position, lerpValue);\n    };\n  })(),\n\n  lerpButtonTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (buttonName, buttonValue) {\n      var buttonMeshInfo = this.loadedMeshInfo.buttonMeshes[buttonName];\n      if (!buttonMeshInfo) return;\n\n      var min = buttonMeshInfo.unpressed;\n      var max = buttonMeshInfo.pressed;\n      var target = buttonMeshInfo.value;\n\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, buttonValue));\n      target.position.lerpVectors(min.position, max.position, buttonValue);\n    };\n  })(),\n\n  modelReady: function () {\n    this.el.emit('controllermodelready', {\n      name: 'windows-motion-controls',\n      model: this.data.model,\n      rayOrigin: this.rayOrigin\n    });\n  },\n\n  onButtonChanged: function (evt) {\n    var buttonName = this.mapping.buttons[evt.detail.id];\n\n    if (buttonName) {\n      // Update the button mesh transform\n      if (this.loadedMeshInfo && this.loadedMeshInfo.buttonMeshes) {\n        this.lerpButtonTransform(buttonName, evt.detail.state.value);\n      }\n\n      // Only emit events for buttons that we know how to map from index to name\n      this.el.emit(buttonName + 'changed', evt.detail.state);\n    }\n  },\n\n  onAxisMoved: function (evt) {\n    var numAxes = this.mapping.axisMeshNames.length;\n\n    // Only attempt to update meshes if we have valid data.\n    if (this.loadedMeshInfo && this.loadedMeshInfo.axisMeshes) {\n      for (var axis = 0; axis < numAxes; axis++) {\n        // Update the button mesh transform\n        this.lerpAxisTransform(axis, evt.detail.axis[axis] || 0.0);\n      }\n    }\n\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  setModelVisibility: function (visible) {\n    var model = this.el.getObject3D('mesh');\n    if (!this.controllerPresent) { return; }\n    visible = visible !== undefined ? visible : this.modelVisible;\n    this.modelVisible = visible;\n    if (!model) { return; }\n    model.visible = visible;\n  }\n});\n", "/* global ImageData, Map, Set */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\nvar arrowURL = 'data:image/webp;base64,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';\nvar CAM_LAYER = 21;\n\nvar applyPose = (function () {\n  var tempQuaternion = new THREE.Quaternion();\n  var tempVec3 = new THREE.Vector3();\n  function applyPose (pose, object3D, offset) {\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n\n    tempVec3.copy(offset);\n    tempQuaternion.copy(pose.transform.orientation);\n    tempVec3.applyQuaternion(tempQuaternion);\n    object3D.position.sub(tempVec3);\n  }\n  return applyPose;\n}());\n\napplyPose.tempFakePose = {\n  transform: {\n    orientation: new THREE.Quaternion(),\n    position: new THREE.Vector3()\n  }\n};\n\n/**\n * Class to handle hit-test from a single source\n *\n * For a normal space provide it as a space option\n * new HitTest(renderer, {\n *   space: viewerSpace\n * });\n *\n * this is also useful for the targetRaySpace of an XRInputSource\n *\n * It can also describe a transient input source like so:\n *\n * var profileToSupport = 'generic-touchscreen';\n * var transientHitTest = new HitTest(renderer, {\n *   profile: profileToSupport\n * });\n *\n * Where the profile matches an item in a type of controller, profiles matching 'generic-touchscreen'\n * will always be a transient input and as of 08/2021 all transient inputs are 'generic-touchscreen'\n *\n * @param {WebGLRenderer} renderer THREE.JS Renderer\n * @param {object} hitTestSourceDetails The source information either as the information for a transient hit-test or a regular hit-test\n */\nfunction HitTest (renderer, hitTestSourceDetails) {\n  this.renderer = renderer;\n  this.xrHitTestSource = null;\n\n  renderer.xr.addEventListener('sessionend', function () {\n    this.xrHitTestSource = null;\n  }.bind(this));\n  renderer.xr.addEventListener('sessionstart', function () {\n    this.sessionStart(hitTestSourceDetails);\n  }.bind(this));\n\n  if (this.renderer.xr.isPresenting) {\n    this.sessionStart(hitTestSourceDetails);\n  }\n}\n\nHitTest.prototype.previousFrameAnchors = new Set();\nHitTest.prototype.anchorToObject3D = new Map();\n\nfunction warnAboutHitTest (e) {\n  console.warn(e.message);\n  console.warn('Cannot requestHitTestSource Are you missing: webxr=\"optionalFeatures: hit-test;\" from <a-scene>?');\n}\n\nHitTest.prototype.sessionStart = function sessionStart (hitTestSourceDetails) {\n  this.session = this.renderer.xr.getSession();\n  if (!('requestHitTestSource' in this.session)) {\n    warnAboutHitTest({message: 'No requestHitTestSource on the session.'});\n    return;\n  }\n  if (hitTestSourceDetails.space) {\n    this.session.requestHitTestSource(hitTestSourceDetails)\n      .then(function (xrHitTestSource) {\n        this.xrHitTestSource = xrHitTestSource;\n      }.bind(this))\n      .catch(warnAboutHitTest);\n  } else if (hitTestSourceDetails.profile) {\n    this.session.requestHitTestSourceForTransientInput(hitTestSourceDetails)\n      .then(function (xrHitTestSource) {\n        this.xrHitTestSource = xrHitTestSource;\n        this.transient = true;\n      }.bind(this))\n      .catch(warnAboutHitTest);\n  }\n};\n\n/**\n * Turns the last hit test into an anchor, the provided Object3D will have its\n * position update to track the anchor.\n *\n * @param {Object3D} object3D object to track\n * @param {Vector3} offset offset of the object from the origin that gets subtracted\n */\nHitTest.prototype.anchorFromLastHitTestResult = function (object3D, offset) {\n  var hitTest = this.lastHitTest;\n\n  if (!hitTest) { return; }\n\n  var object3DOptions = {\n    object3D: object3D,\n    offset: offset\n  };\n\n  Array.from(this.anchorToObject3D.entries())\n    .forEach(function (entry) {\n      var entryObject = entry[1].object3D;\n      var anchor = entry[0];\n      if (entryObject === object3D) {\n        this.anchorToObject3D.delete(anchor);\n        anchor.delete();\n      }\n    }.bind(this));\n\n  if (hitTest.createAnchor) {\n    hitTest.createAnchor()\n      .then(function (anchor) {\n        this.anchorToObject3D.set(anchor, object3DOptions);\n      }.bind(this))\n      .catch(function (e) {\n        console.warn(e.message);\n        console.warn('Cannot create anchor, are you missing: webxr=\"optionalFeatures: anchors;\" from <a-scene>?');\n      });\n  }\n};\n\nHitTest.prototype.doHit = function doHit (frame) {\n  if (!this.renderer.xr.isPresenting) { return; }\n  var refSpace = this.renderer.xr.getReferenceSpace();\n  var xrViewerPose = frame.getViewerPose(refSpace);\n  var hitTestResults;\n  var results;\n\n  if (this.xrHitTestSource && xrViewerPose) {\n    if (this.transient) {\n      hitTestResults = frame.getHitTestResultsForTransientInput(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        results = hitTestResults[0].results;\n        if (results.length > 0) {\n          this.lastHitTest = results[0];\n          return results[0].getPose(refSpace);\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    } else {\n      hitTestResults = frame.getHitTestResults(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        this.lastHitTest = hitTestResults[0];\n        return hitTestResults[0].getPose(refSpace);\n      } else {\n        return false;\n      }\n    }\n  }\n};\n\n// static function\nHitTest.updateAnchorPoses = function (frame, refSpace) {\n  // If tracked anchors isn't defined because it's not supported then just use the empty set\n  var trackedAnchors = frame.trackedAnchors || HitTest.prototype.previousFrameAnchors;\n\n  HitTest.prototype.previousFrameAnchors.forEach(function (anchor) {\n    // Handle anchor tracking loss - `anchor` was present\n    // in the present frame but is no longer tracked.\n    if (!trackedAnchors.has(anchor)) {\n      HitTest.prototype.anchorToObject3D.delete(anchor);\n    }\n  });\n\n  trackedAnchors.forEach(function (anchor) {\n    var anchorPose;\n    var object3DOptions;\n    var offset;\n    var object3D;\n\n    try {\n      // Query most recent pose of the anchor relative to some reference space:\n      anchorPose = frame.getPose(anchor.anchorSpace, refSpace);\n      if (anchorPose) {\n        object3DOptions = HitTest.prototype.anchorToObject3D.get(anchor);\n        if (!object3DOptions) { return; }\n        offset = object3DOptions.offset;\n        object3D = object3DOptions.object3D;\n        applyPose(anchorPose, object3D, offset);\n      }\n    } catch (e) {\n      console.error('while updating anchor poses:', e);\n    }\n  });\n  HitTest.prototype.previousFrameAnchors = trackedAnchors;\n};\n\nvar hitTestCache;\nexport var Component = register('ar-hit-test', {\n  schema: {\n    target: { type: 'selector' },\n    enabled: { default: true },\n    src: {\n      default: arrowURL,\n      type: 'map'\n    },\n    type: {\n      default: 'footprint',\n      oneOf: ['footprint', 'map']\n    },\n    footprintDepth: {\n      default: 0.1\n    },\n    mapSize: {\n      type: 'vec2',\n      default: {\n        x: 0.5,\n        y: 0.5\n      }\n    }\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.hitTest = null;\n    this.imageDataArray = new Uint8ClampedArray(512 * 512 * 4);\n    this.imageData = new ImageData(this.imageDataArray, 512, 512);\n\n    this.textureCache = new Map();\n\n    this.orthoCam = new THREE.OrthographicCamera();\n    this.orthoCam.layers.set(CAM_LAYER);\n    this.textureTarget = new THREE.WebGLRenderTarget(512, 512, {});\n    this.basicMaterial = new THREE.MeshBasicMaterial({\n      color: 0x000000,\n      side: THREE.DoubleSide\n    });\n    this.canvas = document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.context.imageSmoothingEnabled = false;\n    this.canvas.width = 512;\n    this.canvas.height = 512;\n    this.canvasTexture = new THREE.CanvasTexture(this.canvas, {\n      alpha: true\n    });\n    this.canvasTexture.flipY = false;\n\n    // Update WebXR to support hit-test and anchors\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (\n      !optionalFeaturesArray.includes('hit-test') ||\n      !optionalFeaturesArray.includes('anchors')\n    ) {\n      optionalFeaturesArray.push('hit-test');\n      optionalFeaturesArray.push('anchors');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.sceneEl.renderer.xr.addEventListener('sessionend', function () {\n      this.hitTest = null;\n    }.bind(this));\n\n    this.el.sceneEl.renderer.xr.addEventListener('sessionstart', function () {\n      // Don't request Hit Test unless AR (breaks WebXR Emulator)\n      if (!this.el.is('ar-mode')) { return; }\n\n      var renderer = this.el.sceneEl.renderer;\n      var session = this.session = renderer.xr.getSession();\n      this.hasPosedOnce = false;\n      this.bboxMesh.visible = false;\n\n      if (!hitTestCache) { hitTestCache = new Map(); }\n\n      // Default to selecting through the face\n      session.requestReferenceSpace('viewer')\n        .then(function (viewerSpace) {\n          this.viewerHitTest = this.hitTest = new HitTest(renderer, {\n            space: viewerSpace\n          });\n\n          this.el.emit('ar-hit-test-start');\n        }.bind(this));\n\n      // If a tracked controller is available, selects via that instead of the headset\n      var arHitTestComp = this;\n      this.el.sceneEl.addEventListener('controllersupdated', function () {\n        var sceneEl = this;\n        var inputSources = sceneEl.xrSession && sceneEl.xrSession.inputSources;\n        if (!inputSources) { return; }\n        for (var i = 0; i < inputSources.length; ++i) {\n          if (inputSources[i].targetRayMode === 'tracked-pointer') {\n            arHitTestComp.hitTest = new HitTest(renderer, {\n              space: inputSources[i].targetRaySpace\n            });\n            hitTestCache.set(inputSources[i], arHitTestComp.hitTest);\n\n            if (arHitTestComp.viewerHitTest && typeof arHitTestComp.viewerHitTest.cancel === 'function') {\n              arHitTestComp.viewerHitTest.cancel();\n              arHitTestComp.viewerHitTest = null;\n            }\n\n            break;   // only uses first tracked controller\n          }\n        }\n      });\n\n      // These are transient inputs so need to be handled separately\n      var profileToSupport = 'generic-touchscreen';\n      var transientHitTest = new HitTest(renderer, {\n        profile: profileToSupport\n      });\n\n      session.addEventListener('selectstart', function (e) {\n        if (this.data.enabled !== true) { return; }\n\n        var inputSource = e.inputSource;\n\n        this.bboxMesh.visible = true;\n\n        if (this.hasPosedOnce === true) {\n          this.el.emit('ar-hit-test-select-start', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          if (inputSource.profiles[0] === profileToSupport) {\n            this.hitTest = transientHitTest;\n          } else {\n            this.hitTest = hitTestCache.get(inputSource) || new HitTest(renderer, {\n              space: inputSource.targetRaySpace\n            });\n            hitTestCache.set(inputSource, this.hitTest);\n          }\n        }\n      }.bind(this));\n\n      session.addEventListener('selectend', function (e) {\n        if (!this.hitTest || this.data.enabled !== true) {\n          this.hitTest = null;\n          return;\n        }\n\n        var inputSource = e.inputSource;\n        var object;\n\n        if (this.hasPosedOnce === true) {\n          this.bboxMesh.visible = false;\n\n          // if we have a target with a 3D object then automatically generate an anchor for it.\n          if (this.data.target) {\n            object = this.data.target.object3D;\n\n            if (object) {\n              applyPose.tempFakePose.transform.position.copy(this.bboxMesh.position);\n              applyPose.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion);\n              applyPose(applyPose.tempFakePose, object, this.bboxOffset);\n              object.visible = true;\n\n              // create an anchor attached to the object\n              this.hitTest.anchorFromLastHitTestResult(object, this.bboxOffset);\n            }\n          }\n\n          this.el.emit('ar-hit-test-select', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          this.hitTest = null;\n        }\n      }.bind(this));\n    }.bind(this));\n\n    this.bboxOffset = new THREE.Vector3();\n    this.update = this.update.bind(this);\n    this.makeBBox();\n  },\n\n  update: function () {\n    // If it is disabled it's cleaned up\n    if (this.data.enabled === false) {\n      this.hitTest = null;\n      this.bboxMesh.visible = false;\n    }\n    if (this.data.target) {\n      if (this.data.target.object3D) {\n        this.data.target.addEventListener('model-loaded', this.update);\n        this.data.target.object3D.layers.enable(CAM_LAYER);\n        this.data.target.object3D.traverse(function (child) {\n          child.layers.enable(CAM_LAYER);\n        });\n      } else {\n        this.data.target.addEventListener('loaded', this.update, {once: true});\n      }\n    }\n    this.bboxNeedsUpdate = true;\n  },\n\n  makeBBox: function () {\n    var geometry = new THREE.PlaneGeometry(1, 1);\n    var material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      color: 0xffffff\n    });\n    geometry.rotateX(-Math.PI / 2);\n    geometry.rotateY(-Math.PI / 2);\n    this.bbox = new THREE.Box3();\n    this.bboxMesh = new THREE.Mesh(geometry, material);\n    this.el.setObject3D('ar-hit-test', this.bboxMesh);\n    this.bboxMesh.visible = false;\n  },\n\n  updateFootprint: function () {\n    var tempImageData;\n    var renderer = this.el.sceneEl.renderer;\n    var oldRenderTarget, oldBackground;\n    var isXREnabled = renderer.xr.enabled;\n    this.bboxMesh.material.map = this.canvasTexture;\n    this.bboxMesh.material.needsUpdate = true;\n    this.orthoCam.rotation.set(-Math.PI / 2, 0, -Math.PI / 2);\n    this.orthoCam.position.copy(this.bboxMesh.position);\n    this.orthoCam.position.y -= this.bboxMesh.scale.y / 2;\n    this.orthoCam.near = 0.1;\n    this.orthoCam.far = this.orthoCam.near + (this.data.footprintDepth * this.bboxMesh.scale.y);\n    this.orthoCam.position.y += this.orthoCam.far;\n    this.orthoCam.right = this.bboxMesh.scale.z / 2;\n    this.orthoCam.left = -this.bboxMesh.scale.z / 2;\n    this.orthoCam.top = this.bboxMesh.scale.x / 2;\n    this.orthoCam.bottom = -this.bboxMesh.scale.x / 2;\n    this.orthoCam.updateProjectionMatrix();\n\n    oldRenderTarget = renderer.getRenderTarget();\n    renderer.setRenderTarget(this.textureTarget);\n    renderer.xr.enabled = false;\n    oldBackground = this.el.object3D.background;\n    this.el.object3D.overrideMaterial = this.basicMaterial;\n    this.el.object3D.background = null;\n    renderer.render(this.el.object3D, this.orthoCam);\n    this.el.object3D.background = oldBackground;\n    this.el.object3D.overrideMaterial = null;\n    renderer.xr.enabled = isXREnabled;\n    renderer.setRenderTarget(oldRenderTarget);\n    renderer.readRenderTargetPixels(this.textureTarget, 0, 0, 512, 512, this.imageDataArray);\n\n    this.context.putImageData(this.imageData, 0, 0);\n    this.context.shadowColor = 'white';\n    this.context.shadowBlur = 10;\n    this.context.drawImage(this.canvas, 0, 0);\n    tempImageData = this.context.getImageData(0, 0, 512, 512);\n    for (var i = 0; i < 512 * 512; i++) {\n      // if it's a little bit transparent but not opaque make it middle transparent\n      if (tempImageData.data[i * 4 + 3] !== 0 && tempImageData.data[i * 4 + 3] !== 255) {\n        tempImageData.data[i * 4 + 3] = 128;\n      }\n    }\n    this.context.putImageData(tempImageData, 0, 0);\n    this.canvasTexture.needsUpdate = true;\n  },\n  tick: function () {\n    var pose;\n    var frame = this.el.sceneEl.frame;\n    var renderer = this.el.sceneEl.renderer;\n\n    if (frame) {\n      // if we are in XR then update the positions of the objects attached to anchors\n      HitTest.updateAnchorPoses(frame, renderer.xr.getReferenceSpace());\n    }\n    if (this.bboxNeedsUpdate) {\n      this.bboxNeedsUpdate = false;\n\n      if (!this.data.target || this.data.type === 'map') {\n        var texture;\n        if (this.textureCache.has(this.data.src)) {\n          texture = this.textureCache.get(this.data.src);\n        } else {\n          texture = new THREE.TextureLoader().load(this.data.src);\n          this.textureCache.set(this.data.src, texture);\n        }\n        this.bboxMesh.material.map = texture;\n        this.bboxMesh.material.needsUpdate = true;\n      }\n\n      if (this.data.target && this.data.target.object3D) {\n        this.bbox.setFromObject(this.data.target.object3D);\n        this.bbox.getCenter(this.bboxMesh.position);\n        this.bbox.getSize(this.bboxMesh.scale);\n\n        if (this.data.type === 'footprint') {\n          // Add a little buffer for the footprint border\n          this.bboxMesh.scale.x *= 1.04;\n          this.bboxMesh.scale.z *= 1.04;\n          this.updateFootprint();\n        }\n\n        this.bboxMesh.position.y -= this.bboxMesh.scale.y / 2;\n        this.bboxOffset.copy(this.bboxMesh.position);\n        this.bboxOffset.sub(this.data.target.object3D.position);\n      } else {\n        this.bboxMesh.scale.set(this.data.mapSize.x, 1, this.data.mapSize.y);\n      }\n    }\n\n    if (this.hitTest) {\n      pose = this.hitTest.doHit(frame);\n      if (pose) {\n        if (this.hasPosedOnce !== true) {\n          this.hasPosedOnce = true;\n          this.el.emit('ar-hit-test-achieved');\n        }\n        this.bboxMesh.visible = true;\n        this.bboxMesh.position.copy(pose.transform.position);\n        this.bboxMesh.quaternion.copy(pose.transform.orientation);\n      }\n    }\n  }\n});\n", "import * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('background', {\n  schema: {\n    color: { type: 'color', default: 'black' },\n    transparent: { default: false }\n  },\n  sceneOnly: true,\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n\n    if (data.transparent) {\n      object3D.background = null;\n    } else {\n      object3D.background = new THREE.Color(data.color);\n    }\n  },\n\n  remove: function () {\n    var object3D = this.el.object3D;\n    object3D.background = null;\n  }\n});\n", "import { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('debug', {\n  schema: {default: true},\n  sceneOnly: true\n});\n", "/* global DeviceOrientationEvent */\nimport { registerComponent } from '../../core/component.js';\nimport { AFRAME_INJECTED } from '../../constants/index.js';\n\nvar MODAL_CLASS = 'a-modal';\nvar DIALOG_CLASS = 'a-dialog';\nvar DIALOG_TEXT_CLASS = 'a-dialog-text';\nvar DIALOG_TEXT_CONTAINER_CLASS = 'a-dialog-text-container';\nvar DIALOG_BUTTONS_CONTAINER_CLASS = 'a-dialog-buttons-container';\nvar DIALOG_BUTTON_CLASS = 'a-dialog-button';\nvar DIALOG_ALLOW_BUTTON_CLASS = 'a-dialog-allow-button';\nvar DIALOG_DENY_BUTTON_CLASS = 'a-dialog-deny-button';\nvar DIALOG_OK_BUTTON_CLASS = 'a-dialog-ok-button';\n\n/**\n * UI for enabling device motion permission\n */\nexport var Component = registerComponent('device-orientation-permission-ui', {\n  schema: {\n    enabled: {default: true},\n    deviceMotionMessage: {\n      default: 'This immersive website requires access to your device motion sensors.'\n    },\n    httpsMessage: {\n      default: 'Access this site over HTTPS to enter VR mode and grant access to the device sensors.'\n    },\n    denyButtonText: {default: 'Deny'},\n    allowButtonText: {default: 'Allow'},\n    cancelButtonText: {default: 'Cancel'}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n\n    if (!this.data.enabled) { return; }\n\n    if (!window.isSecureContext) {\n      this.showHTTPAlert();\n    }\n\n    // Browser doesn't support or doesn't require permission to DeviceOrientationEvent API.\n    if (typeof DeviceOrientationEvent === 'undefined' || !DeviceOrientationEvent.requestPermission) {\n      this.permissionGranted = true;\n      return;\n    }\n\n    this.onDeviceMotionDialogAllowClicked = this.onDeviceMotionDialogAllowClicked.bind(this);\n    this.onDeviceMotionDialogDenyClicked = this.onDeviceMotionDialogDenyClicked.bind(this);\n    // Show dialog only if permission has not yet been granted.\n    DeviceOrientationEvent.requestPermission().then(function () {\n      self.el.emit('deviceorientationpermissiongranted');\n      self.permissionGranted = true;\n    }).catch(function () {\n      self.devicePermissionDialogEl = createPermissionDialog(\n        self.data.denyButtonText,\n        self.data.allowButtonText,\n        self.data.deviceMotionMessage,\n        self.onDeviceMotionDialogAllowClicked,\n        self.onDeviceMotionDialogDenyClicked);\n      self.el.appendChild(self.devicePermissionDialogEl);\n    });\n  },\n\n  remove: function () {\n    // This removes the modal screen\n    if (this.devicePermissionDialogEl) { this.el.removeChild(this.devicePermissionDialogEl); }\n  },\n\n  onDeviceMotionDialogDenyClicked: function () {\n    this.remove();\n  },\n\n  showHTTPAlert: function () {\n    var self = this;\n    var httpAlertEl = createAlertDialog(\n      self.data.cancelButtonText,\n      self.data.httpsMessage,\n      function () { self.el.removeChild(httpAlertEl); });\n    this.el.appendChild(httpAlertEl);\n  },\n\n  /**\n   * Enable device motion permission when clicked.\n   */\n  onDeviceMotionDialogAllowClicked: function () {\n    var self = this;\n    this.el.emit('deviceorientationpermissionrequested');\n    DeviceOrientationEvent.requestPermission().then(function (response) {\n      if (response === 'granted') {\n        self.el.emit('deviceorientationpermissiongranted');\n        self.permissionGranted = true;\n      } else {\n        self.el.emit('deviceorientationpermissionrejected');\n      }\n      self.remove();\n    }).catch(console.error);\n  }\n});\n\n/**\n * Create a modal dialog that request users permission to access the Device Motion API.\n *\n * @param {string} denyText\n * @param {string} allowText\n * @param {string} dialogText\n * @param {function} onAllowClicked - click event handler\n * @param {function} onDenyClicked - click event handler\n *\n * @returns {Element} Wrapper <div>.\n */\nfunction createPermissionDialog (\n  denyText, allowText, dialogText, onAllowClicked, onDenyClicked) {\n  var buttonsContainer;\n  var denyButton;\n  var acceptButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  denyButton = document.createElement('button');\n  denyButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_DENY_BUTTON_CLASS);\n  denyButton.setAttribute(AFRAME_INJECTED, '');\n  denyButton.innerHTML = denyText;\n  buttonsContainer.appendChild(denyButton);\n\n  acceptButton = document.createElement('button');\n  acceptButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_ALLOW_BUTTON_CLASS);\n  acceptButton.setAttribute(AFRAME_INJECTED, '');\n  acceptButton.innerHTML = allowText;\n  buttonsContainer.appendChild(acceptButton);\n\n  // Ask for sensor events to be used\n  acceptButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onAllowClicked();\n  });\n\n  denyButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onDenyClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createAlertDialog (closeText, dialogText, onOkClicked) {\n  var buttonsContainer;\n  var okButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  okButton = document.createElement('button');\n  okButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_OK_BUTTON_CLASS);\n  okButton.setAttribute(AFRAME_INJECTED, '');\n  okButton.innerHTML = closeText;\n  buttonsContainer.appendChild(okButton);\n\n  // Ask for sensor events to be used\n  okButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onOkClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createDialog (text, buttonsContainerEl) {\n  var modalContainer;\n  var dialog;\n  var dialogTextContainer;\n  var dialogText;\n\n  modalContainer = document.createElement('div');\n  modalContainer.classList.add(MODAL_CLASS);\n  modalContainer.setAttribute(AFRAME_INJECTED, '');\n\n  dialog = document.createElement('div');\n  dialog.className = DIALOG_CLASS;\n  dialog.setAttribute(AFRAME_INJECTED, '');\n  modalContainer.appendChild(dialog);\n\n  dialogTextContainer = document.createElement('div');\n  dialogTextContainer.classList.add(DIALOG_TEXT_CONTAINER_CLASS);\n  dialog.appendChild(dialogTextContainer);\n\n  dialogText = document.createElement('div');\n  dialogText.classList.add(DIALOG_TEXT_CLASS);\n  dialogText.innerHTML = text;\n  dialogTextContainer.appendChild(dialogText);\n\n  dialog.appendChild(buttonsContainerEl);\n\n  return modalContainer;\n}\n", "import { registerComponent } from '../../core/component.js';\n\n/**\n * Component to embed an a-frame scene within the layout of a 2D page.\n */\nexport var Component = registerComponent('embedded', {\n  dependencies: ['xr-mode-ui'],\n\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  update: function () {\n    var sceneEl = this.el;\n    var enterVREl = sceneEl.querySelector('.a-enter-vr');\n    if (this.data === true) {\n      if (enterVREl) { enterVREl.classList.add('embedded'); }\n      sceneEl.removeFullScreenStyles();\n    } else {\n      if (enterVREl) { enterVREl.classList.remove('embedded'); }\n      sceneEl.addFullScreenStyles();\n    }\n  }\n\n});\n", "/* global AFRAME, INSPECTOR_VERSION */\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport { registerComponent } from '../../core/component.js';\nimport pkg from '../../../package.json';\nimport * as utils from '../../utils/index.js';\n\n/**\n * 0.4.2 to 0.4.x\n * Will need to update this when A-Frame goes to 1.x.x.\n */\nfunction getFuzzyPatchVersion (version) {\n  var split = version.split('.');\n  split[2] = 'x';\n  return split.join('.');\n}\n\nvar INSPECTOR_DEV_URL = 'https://aframe.io/aframe-inspector/dist/aframe-inspector.js';\nvar INSPECTOR_RELEASE_URL = 'https://unpkg.com/aframe-inspector@' + getFuzzyPatchVersion(pkg.version) + '/dist/aframe-inspector.min.js';\nvar INSPECTOR_URL = typeof INSPECTOR_VERSION !== 'undefined' && INSPECTOR_VERSION === 'dev' ? INSPECTOR_DEV_URL : INSPECTOR_RELEASE_URL;\nvar LOADING_MESSAGE = 'Loading Inspector';\nvar LOADING_ERROR_MESSAGE = 'Error loading Inspector';\n\nexport var Component = registerComponent('inspector', {\n  schema: {\n    url: {default: INSPECTOR_URL}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.firstPlay = true;\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n    this.initOverlay();\n    window.addEventListener('keydown', this.onKeydown);\n    window.addEventListener('message', this.onMessage);\n  },\n\n  play: function () {\n    var urlParam;\n    if (!this.firstPlay) { return; }\n    urlParam = utils.getUrlParameter('inspector');\n    if (urlParam !== 'false' && !!urlParam) {\n      this.openInspector();\n      this.firstPlay = false;\n    }\n  },\n\n  initOverlay: function () {\n    var dotsHTML = '<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>';\n    this.loadingMessageEl = document.createElement('div');\n    this.loadingMessageEl.classList.add('a-inspector-loader');\n    this.loadingMessageEl.innerHTML = LOADING_MESSAGE + dotsHTML;\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n  },\n\n  /**\n   * <ctrl> + <alt> + i keyboard shortcut.\n   */\n  onKeydown: function (evt) {\n    var shortcutPressed = evt.keyCode === 73 && (evt.ctrlKey && evt.altKey || evt.getModifierState('AltGraph'));\n    if (!shortcutPressed) { return; }\n    this.openInspector();\n  },\n\n  showLoader: function () {\n    document.body.appendChild(this.loadingMessageEl);\n  },\n\n  hideLoader: function () {\n    document.body.removeChild(this.loadingMessageEl);\n  },\n\n  /**\n   * postMessage. aframe.io uses this to create a button on examples to open Inspector.\n   */\n  onMessage: function (evt) {\n    if (evt.data === 'INJECT_AFRAME_INSPECTOR') { this.openInspector(); }\n  },\n\n  openInspector: function (focusEl) {\n    var self = this;\n    var script;\n\n    // Already injected. Open.\n    if (AFRAME.INSPECTOR || AFRAME.inspectorInjected) {\n      AFRAME.INSPECTOR.open(focusEl);\n      return;\n    }\n\n    this.showLoader();\n\n    // Inject.\n    script = document.createElement('script');\n    script.src = this.data.url;\n    script.setAttribute('data-name', 'aframe-inspector');\n    script.setAttribute(AFRAME_INJECTED, '');\n    script.onload = function () {\n      AFRAME.INSPECTOR.open(focusEl);\n      self.hideLoader();\n      self.removeEventListeners();\n    };\n    script.onerror = function () {\n      self.loadingMessageEl.innerHTML = LOADING_ERROR_MESSAGE;\n    };\n    document.head.appendChild(script);\n    AFRAME.inspectorInjected = true;\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeydown);\n    window.removeEventListener('message', this.onMessage);\n  }\n});\n", "import { registerComponent as register } from '../../core/component.js';\nimport * as THREE from 'three';\n\n/**\n * Fog component.\n * Applies only to the scene entity.\n */\nexport var Component = register('fog', {\n  schema: {\n    color: {type: 'color', default: '#000'},\n    density: {default: 0.00025},\n    far: {default: 1000, min: 0},\n    near: {default: 1, min: 0},\n    type: {default: 'linear', oneOf: ['linear', 'exponential']}\n  },\n\n  sceneOnly: true,\n\n  update: function () {\n    var data = this.data;\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n\n    // (Re)create fog if fog doesn't exist or fog type changed.\n    if (!fog || data.type !== fog.name) {\n      el.object3D.fog = getFog(data);\n      return;\n    }\n\n    // Fog data changed. Update fog.\n    Object.keys(this.schema).forEach(function (key) {\n      var value = data[key];\n      if (key === 'color') { value = new THREE.Color(value); }\n      fog[key] = value;\n    });\n  },\n\n  /**\n   * Remove fog on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n    if (!fog) { return; }\n\n    el.object3D.fog = null;\n  }\n});\n\n/**\n * Creates a fog object. Sets fog.name to be able to detect fog type changes.\n *\n * @param {object} data - Fog data.\n * @returns {object} fog\n */\nfunction getFog (data) {\n  var fog;\n  if (data.type === 'exponential') {\n    fog = new THREE.FogExp2(data.color, data.density);\n  } else {\n    fog = new THREE.Fog(data.color, data.near, data.far);\n  }\n  fog.name = data.type;\n  return fog;\n}\n", "import { registerComponent } from '../../core/component.js';\nimport { shouldCaptureKeyEvent } from '../../utils/index.js';\n\nexport var Component = registerComponent('keyboard-shortcuts', {\n  schema: {\n    enterVR: {default: true},\n    exitVR: {default: true}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.onKeyup = this.onKeyup.bind(this);\n  },\n\n  play: function () {\n    window.addEventListener('keyup', this.onKeyup, false);\n  },\n\n  pause: function () {\n    window.removeEventListener('keyup', this.onKeyup);\n  },\n\n  onKeyup: function (evt) {\n    var scene = this.el;\n    if (!shouldCaptureKeyEvent(evt)) { return; }\n    if (this.data.enterVR && evt.keyCode === 70) {  // f.\n      scene.enterVR();\n    }\n    if (this.data.exitVR && evt.keyCode === 27) {   // escape.\n      scene.exitVR();\n    }\n  }\n});\n", "import { debug } from '../../utils/index.js';\nimport { registerComponent } from '../../core/component.js';\n\nvar warn = debug('components:pool:warn');\n\n/**\n * Pool component to reuse entities.\n * Avoids creating and destroying the same kind of entities.\n * Helps reduce GC pauses. For example in a game to reuse enemies entities.\n *\n * @member {array} availableEls - Available entities in the pool.\n * @member {array} usedEls - Entities of the pool in use.\n */\nexport var Component = registerComponent('pool', {\n  schema: {\n    container: {default: ''},\n    mixin: {default: ''},\n    size: {default: 0},\n    dynamic: {default: false}\n  },\n\n  sceneOnly: true,\n\n  multiple: true,\n\n  initPool: function () {\n    var i;\n\n    this.availableEls = [];\n    this.usedEls = [];\n\n    if (!this.data.mixin) {\n      warn('No mixin provided for pool component.');\n    }\n\n    if (this.data.container) {\n      this.container = document.querySelector(this.data.container);\n      if (!this.container) {\n        warn('Container ' + this.data.container + ' not found.');\n      }\n    }\n    this.container = this.container || this.el;\n\n    for (i = 0; i < this.data.size; ++i) {\n      this.createEntity();\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    if (oldData.mixin !== data.mixin || oldData.size !== data.size) {\n      this.initPool();\n    }\n  },\n\n  /**\n   * Add a new entity to the list of available entities.\n   */\n  createEntity: function () {\n    var el;\n    el = document.createElement('a-entity');\n    el.play = this.wrapPlay(el.play);\n    el.setAttribute('mixin', this.data.mixin);\n    el.object3D.visible = false;\n    el.pause();\n    this.container.appendChild(el);\n    this.availableEls.push(el);\n\n    var usedEls = this.usedEls;\n    el.addEventListener('loaded', function () {\n      if (usedEls.indexOf(el) !== -1) { return; }\n      el.object3DParent = el.object3D.parent;\n      el.object3D.parent.remove(el.object3D);\n    });\n  },\n\n  /**\n   * Play wrapper for pooled entities. When pausing and playing a scene, don't want to play\n   * entities that are not in use.\n   */\n  wrapPlay: function (playMethod) {\n    var usedEls = this.usedEls;\n    return function () {\n      if (usedEls.indexOf(this) === -1) { return; }\n      playMethod.call(this);\n    };\n  },\n\n  /**\n   * Used to request one of the available entities of the pool.\n   */\n  requestEntity: function () {\n    var el;\n    if (this.availableEls.length === 0) {\n      if (this.data.dynamic === false) {\n        warn('Requested entity from empty pool: ' + this.attrName);\n        return;\n      } else {\n        warn('Requested entity from empty pool. This pool is dynamic and will resize ' +\n             'automatically. You might want to increase its initial size: ' + this.attrName);\n      }\n      this.createEntity();\n    }\n    el = this.availableEls.shift();\n    this.usedEls.push(el);\n    if (el.object3DParent) {\n      el.object3DParent.add(el.object3D);\n      this.updateRaycasters();\n    }\n    el.object3D.visible = true;\n    return el;\n  },\n\n  /**\n   * Used to return a used entity to the pool.\n   */\n  returnEntity: function (el) {\n    var index = this.usedEls.indexOf(el);\n    if (index === -1) {\n      warn('The returned entity was not previously pooled from ' + this.attrName);\n      return;\n    }\n    this.usedEls.splice(index, 1);\n    this.availableEls.push(el);\n    el.object3DParent = el.object3D.parent;\n    el.object3D.parent.remove(el.object3D);\n    this.updateRaycasters();\n    el.object3D.visible = false;\n    el.pause();\n    return el;\n  },\n\n  updateRaycasters: function () {\n    var raycasterEls = document.querySelectorAll('[raycaster]');\n\n    raycasterEls.forEach(function (el) {\n      el.components['raycaster'].setDirty();\n    });\n  }\n});\n", "/* global XRPlane */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\n/**\n * Real World Meshing.\n *\n * Create entities with meshes corresponding to 3D surfaces detected in user's environment.\n * It requires a browser with support for the WebXR Mesh and Plane detection modules.\n *\n */\nexport var Component = register('real-world-meshing', {\n  schema: {\n    filterLabels: {type: 'array'},\n    meshesEnabled: {default: true},\n    meshMixin: {default: true},\n    planesEnabled: {default: true},\n    planeMixin: {default: ''}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var webxrData = this.el.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    if (requiredFeaturesArray.indexOf('mesh-detection') === -1) {\n      requiredFeaturesArray.push('mesh-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    if (requiredFeaturesArray.indexOf('plane-detection') === -1) {\n      requiredFeaturesArray.push('plane-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    this.meshEntities = [];\n    this.initWorldMeshEntity = this.initWorldMeshEntity.bind(this);\n  },\n\n  tick: function () {\n    if (!this.el.is('ar-mode')) { return; }\n    this.detectMeshes();\n    this.updateMeshes();\n  },\n\n  detectMeshes: function () {\n    var data = this.data;\n    var detectedMeshes;\n    var detectedPlanes;\n    var sceneEl = this.el;\n    var frame;\n    var meshEntities = this.meshEntities;\n    var present = false;\n    var newMeshes = [];\n    var filterLabels = this.data.filterLabels;\n\n    frame = sceneEl.frame;\n    detectedMeshes = frame.detectedMeshes;\n    detectedPlanes = frame.detectedPlanes;\n\n    for (var i = 0; i < meshEntities.length; i++) {\n      meshEntities[i].present = false;\n    }\n\n    if (data.meshesEnabled) {\n      for (var mesh of detectedMeshes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    if (data.planesEnabled) {\n      for (mesh of detectedPlanes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    this.deleteMeshes();\n    this.createNewMeshes(newMeshes);\n  },\n\n  updateMeshes: (function () {\n    var auxMatrix = new THREE.Matrix4();\n    return function () {\n      var meshPose;\n      var sceneEl = this.el;\n      var meshEl;\n      var frame = sceneEl.frame;\n      var meshEntities = this.meshEntities;\n      var referenceSpace = sceneEl.renderer.xr.getReferenceSpace();\n      var meshSpace;\n      for (var i = 0; i < meshEntities.length; i++) {\n        meshSpace = meshEntities[i].mesh.meshSpace || meshEntities[i].mesh.planeSpace;\n        meshPose = frame.getPose(meshSpace, referenceSpace);\n        meshEl = meshEntities[i].el;\n        if (!meshEl.hasLoaded) { continue; }\n        auxMatrix.fromArray(meshPose.transform.matrix);\n        auxMatrix.decompose(meshEl.object3D.position, meshEl.object3D.quaternion, meshEl.object3D.scale);\n      }\n    };\n  })(),\n\n  deleteMeshes: function () {\n    var meshEntities = this.meshEntities;\n    var newMeshEntities = [];\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (!meshEntities[i].present) {\n        this.el.removeChild(meshEntities[i]);\n      } else {\n        newMeshEntities.push(meshEntities[i]);\n      }\n    }\n    this.meshEntities = newMeshEntities;\n  },\n\n  createNewMeshes: function (newMeshes) {\n    var meshEl;\n    for (var i = 0; i < newMeshes.length; i++) {\n      meshEl = document.createElement('a-entity');\n      this.meshEntities.push({\n        mesh: newMeshes[i],\n        el: meshEl\n      });\n      meshEl.addEventListener('loaded', this.initWorldMeshEntity);\n      this.el.appendChild(meshEl);\n    }\n  },\n\n  initMeshGeometry: function (mesh) {\n    var geometry;\n    var shape;\n    var polygon;\n\n    if (mesh instanceof XRPlane) {\n      shape = new THREE.Shape();\n      polygon = mesh.polygon;\n      for (var i = 0; i < polygon.length; ++i) {\n        if (i === 0) {\n          shape.moveTo(polygon[i].x, polygon[i].z);\n        } else {\n          shape.lineTo(polygon[i].x, polygon[i].z);\n        }\n      }\n      geometry = new THREE.ShapeGeometry(shape);\n      geometry.rotateX(Math.PI / 2);\n      return geometry;\n    }\n\n    geometry = new THREE.BufferGeometry();\n    geometry.setAttribute(\n      'position',\n      new THREE.BufferAttribute(mesh.vertices, 3)\n    );\n    geometry.setIndex(new THREE.BufferAttribute(mesh.indices, 1));\n    return geometry;\n  },\n\n  initWorldMeshEntity: function (evt) {\n    var el = evt.target;\n    var geometry;\n    var mesh;\n    var meshEntity;\n    var meshEntities = this.meshEntities;\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (meshEntities[i].el === el) {\n        meshEntity = meshEntities[i];\n        break;\n      }\n    }\n    geometry = this.initMeshGeometry(meshEntity.mesh);\n    mesh = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({color: Math.random() * 0xFFFFFF, side: THREE.DoubleSide}));\n    el.setObject3D('mesh', mesh);\n    if (meshEntity.mesh instanceof XRPlane && this.data.planeMixin) {\n      el.setAttribute('mixin', this.data.planeMixin);\n    } else {\n      if (this.data.meshMixin) {\n        el.setAttribute('mixin', this.data.meshMixin);\n      }\n    }\n    el.setAttribute('data-world-mesh', meshEntity.mesh.semanticLabel);\n  },\n\n  updateMeshGeometry: function (entityEl, mesh) {\n    var entityMesh = entityEl.getObject3D('mesh');\n    entityMesh.geometry.dispose();\n    entityMesh.geometry = this.initMeshGeometry(mesh);\n  }\n});\n", "/* global XRWebGLBinding */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\n// source: view-source:https://storage.googleapis.com/chromium-webxr-test/r886480/proposals/lighting-estimation.html\nfunction updateLights (estimate, probeLight, directionalLight, directionalLightPosition) {\n  var intensityScalar =\n    Math.max(estimate.primaryLightIntensity.x,\n             Math.max(estimate.primaryLightIntensity.y,\n                      estimate.primaryLightIntensity.z));\n\n  probeLight.sh.fromArray(estimate.sphericalHarmonicsCoefficients);\n  probeLight.intensity = 3.14;\n\n  if (directionalLight) {\n    directionalLight.color.setRGB(\n      estimate.primaryLightIntensity.x / intensityScalar,\n      estimate.primaryLightIntensity.y / intensityScalar,\n      estimate.primaryLightIntensity.z / intensityScalar);\n\n    directionalLight.intensity = intensityScalar;\n    directionalLightPosition.copy(estimate.primaryLightDirection);\n  }\n}\n\nexport var Component = register('reflection', {\n  schema: {\n    directionalLight: { type: 'selector' }\n  },\n  sceneOnly: true,\n  init: function () {\n    var self = this;\n    this.cubeRenderTarget = new THREE.WebGLCubeRenderTarget(16);\n    this.cubeCamera = new THREE.CubeCamera(0.1, 1000, this.cubeRenderTarget);\n    this.lightingEstimationTexture = (new THREE.WebGLCubeRenderTarget(16)).texture;\n    this.needsVREnvironmentUpdate = true;\n\n    // Update WebXR to support light-estimation\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (!optionalFeaturesArray.includes('light-estimation')) {\n      optionalFeaturesArray.push('light-estimation');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.addEventListener('enter-vr', function () {\n      if (!self.el.is('ar-mode')) { return; }\n      var renderer = self.el.renderer;\n      var session = renderer.xr.getSession();\n      if (session.requestLightProbe) {\n        self.startLightProbe();\n      }\n    });\n\n    this.el.addEventListener('exit-vr', function () {\n      if (self.xrLightProbe) { self.stopLightProbe(); }\n    });\n\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  stopLightProbe: function () {\n    this.xrLightProbe = null;\n    if (this.probeLight) {\n      this.probeLight.components.light.light.intensity = 0;\n    }\n    this.needsVREnvironmentUpdate = true;\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  startLightProbe: function () {\n    this.needsLightProbeUpdate = true;\n  },\n  setupLightProbe: function () {\n    var renderer = this.el.renderer;\n    var xrSession = renderer.xr.getSession();\n    var self = this;\n    var gl = renderer.getContext();\n\n    if (!this.probeLight) {\n      var probeLight = document.createElement('a-light');\n      probeLight.setAttribute('type', 'probe');\n      probeLight.setAttribute('intensity', 0);\n      this.el.appendChild(probeLight);\n      this.probeLight = probeLight;\n    }\n\n    // Ensure that we have any extensions needed to use the preferred cube map format.\n    switch (xrSession.preferredReflectionFormat) {\n      case 'srgba8':\n        gl.getExtension('EXT_sRGB');\n        break;\n\n      case 'rgba16f':\n        gl.getExtension('OES_texture_half_float');\n        break;\n    }\n\n    this.glBinding = new XRWebGLBinding(xrSession, gl);\n    gl.getExtension('EXT_sRGB');\n    gl.getExtension('OES_texture_half_float');\n\n    xrSession.requestLightProbe()\n      .then(function (lightProbe) {\n        self.xrLightProbe = lightProbe;\n        lightProbe.addEventListener('reflectionchange', self.updateXRCubeMap.bind(self));\n      })\n      .catch(function (err) {\n        console.warn('Lighting estimation not supported: ' + err.message);\n        console.warn('Are you missing: webxr=\"optionalFeatures: light-estimation;\" from <a-scene>?');\n      });\n  },\n  updateXRCubeMap: function () {\n    // Update Cube Map, cubeMap maybe some unavailable on some hardware\n    var renderer = this.el.renderer;\n    var cubeMap = this.glBinding.getReflectionCubeMap(this.xrLightProbe);\n    if (cubeMap) {\n      var rendererProps = renderer.properties.get(this.lightingEstimationTexture);\n      rendererProps.__webglTexture = cubeMap;\n      this.lightingEstimationTexture.needsPMREMUpdate = true;\n      this.el.object3D.environment = this.lightingEstimationTexture;\n    }\n  },\n  tick: function () {\n    var scene = this.el.object3D;\n    var renderer = this.el.renderer;\n    var frame = this.el.frame;\n\n    if (frame && this.xrLightProbe) {\n      // light estimate may not yet be available, it takes a few frames to start working\n      var estimate = frame.getLightEstimate(this.xrLightProbe);\n\n      if (estimate) {\n        updateLights(\n          estimate,\n          this.probeLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.object3D.position\n        );\n      }\n    }\n\n    if (this.needsVREnvironmentUpdate) {\n      scene.environment = null;\n      this.needsVREnvironmentUpdate = false;\n      this.cubeCamera.position.set(0, 1.6, 0);\n      this.cubeCamera.update(renderer, scene);\n      scene.environment = this.cubeRenderTarget.texture;\n    }\n\n    if (this.needsLightProbeUpdate && frame) {\n      // wait until the XR Session has started before trying to make\n      // the light probe\n      this.setupLightProbe();\n      this.needsLightProbeUpdate = false;\n    }\n  },\n\n  remove: function () {\n    this.el.object3D.environment = null;\n    if (this.probeLight) {\n      this.el.removeChild(this.probeLight);\n    }\n  }\n});\n", "/* global ImageData, URL */\nimport { registerComponent } from '../../core/component.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  'attribute vec3 position;',\n  'attribute vec2 uv;',\n  'uniform mat4 projectionMatrix;',\n  'uniform mat4 modelViewMatrix;',\n  'varying vec2 vUv;',\n  'void main()  {',\n  '  vUv = vec2( 1.- uv.x, uv.y );',\n  '  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  'precision mediump float;',\n  'uniform samplerCube map;',\n  'varying vec2 vUv;',\n  '#define M_PI 3.141592653589793238462643383279',\n  'void main() {',\n  '  vec2 uv = vUv;',\n  '  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;',\n  '  float latitude = uv.y * M_PI;',\n  '  vec3 dir = vec3(',\n  '    - sin( longitude ) * sin( latitude ),',\n  '    cos( latitude ),',\n  '    - cos( longitude ) * sin( latitude )',\n  '  );',\n  '  normalize( dir );',\n  '  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );',\n  '}'\n].join('\\n');\n\n/**\n * Component to take screenshots of the scene using a keyboard shortcut (alt+s).\n * It can be configured to either take 360&deg; captures (`equirectangular`)\n * or regular screenshots (`projection`)\n *\n * This is based on https://github.com/spite/THREE.CubemapToEquirectangular\n * To capture an equirectangular projection of the scene a THREE.CubeCamera is used\n * The cube map produced by the CubeCamera is projected on a quad and then rendered to\n * WebGLRenderTarget with an orthographic camera.\n */\nexport var Component = registerComponent('screenshot', {\n  schema: {\n    width: {default: 4096},\n    height: {default: 2048},\n    camera: {type: 'selector'}\n  },\n\n  sceneOnly: true,\n\n  setup: function () {\n    var el = this.el;\n    if (this.canvas) { return; }\n    var gl = el.renderer.getContext();\n    if (!gl) { return; }\n    this.cubeMapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    this.material = new THREE.RawShaderMaterial({\n      uniforms: {map: {type: 't', value: null}},\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      side: THREE.DoubleSide\n    });\n    this.quad = new THREE.Mesh(\n      new THREE.PlaneGeometry(1, 1),\n      this.material\n    );\n    this.quad.visible = false;\n    this.camera = new THREE.OrthographicCamera(-1 / 2, 1 / 2, 1 / 2, -1 / 2, -10000, 10000);\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    el.object3D.add(this.quad);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  },\n\n  getRenderTarget: function (width, height) {\n    return new THREE.WebGLRenderTarget(width, height, {\n      colorSpace: this.el.sceneEl.renderer.outputColorSpace,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.LinearFilter,\n      wrapS: THREE.ClampToEdgeWrapping,\n      wrapT: THREE.ClampToEdgeWrapping,\n      format: THREE.RGBAFormat,\n      type: THREE.UnsignedByteType\n    });\n  },\n\n  resize: function (width, height) {\n    // Resize quad.\n    this.quad.scale.set(width, height, 1);\n\n    // Resize camera.\n    this.camera.left = -1 * width / 2;\n    this.camera.right = width / 2;\n    this.camera.top = height / 2;\n    this.camera.bottom = -1 * height / 2;\n    this.camera.updateProjectionMatrix();\n\n    // Resize canvas.\n    this.canvas.width = width;\n    this.canvas.height = height;\n  },\n\n  play: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n  },\n\n  /**\n   * <ctrl> + <alt> + s = Regular screenshot.\n   * <ctrl> + <alt> + <shift> + s = Equirectangular screenshot.\n  */\n  onKeyDown: function (evt) {\n    var shortcutPressed = evt.keyCode === 83 && evt.ctrlKey && evt.altKey;\n    if (!this.data || !shortcutPressed) { return; }\n    var projection = evt.shiftKey ? 'equirectangular' : 'perspective';\n    this.capture(projection);\n  },\n\n  /**\n   * Capture a screenshot of the scene.\n   *\n   * @param {string} projection - Screenshot projection (equirectangular or perspective).\n   */\n  setCapture: function (projection) {\n    var el = this.el;\n    var size;\n    var camera;\n    var cubeCamera;\n    var cubeRenderTarget;\n    // Configure camera.\n    if (projection === 'perspective') {\n      // Quad is only used in equirectangular mode. Hide it in this case.\n      this.quad.visible = false;\n      // Use scene camera.\n      camera = (this.data.camera && this.data.camera.components.camera.camera) || el.camera;\n      size = {width: this.data.width, height: this.data.height};\n    } else {\n      // Use ortho camera.\n      camera = this.camera;\n      cubeRenderTarget = new THREE.WebGLCubeRenderTarget(\n        Math.min(this.cubeMapSize, 2048),\n        {\n          format: THREE.RGBFormat,\n          generateMipmaps: true,\n          minFilter: THREE.LinearMipmapLinearFilter,\n          colorSpace: THREE.SRGBColorSpace\n        });\n      // Create cube camera and copy position from scene camera.\n      cubeCamera = new THREE.CubeCamera(el.camera.near, el.camera.far, cubeRenderTarget);\n      // Copy camera position into cube camera;\n      el.camera.getWorldPosition(cubeCamera.position);\n      el.camera.getWorldQuaternion(cubeCamera.quaternion);\n      // Render scene with cube camera.\n      cubeCamera.update(el.renderer, el.object3D);\n      this.quad.material.uniforms.map.value = cubeCamera.renderTarget.texture;\n      size = {width: this.data.width, height: this.data.height};\n      // Use quad to project image taken by the cube camera.\n      this.quad.visible = true;\n    }\n    return {\n      camera: camera,\n      size: size,\n      projection: projection\n    };\n  },\n\n  /**\n   * Maintained for backwards compatibility.\n   */\n  capture: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    var params;\n    this.setup();\n    // Disable VR.\n    renderer.xr.enabled = false;\n    params = this.setCapture(projection);\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Trigger file download.\n    this.saveCapture();\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n  },\n\n  /**\n   * Return canvas instead of triggering download (e.g., for uploading blob to server).\n   */\n  getCanvas: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    this.setup();\n    // Disable VR.\n    var params = this.setCapture(projection);\n    renderer.xr.enabled = false;\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n    return this.canvas;\n  },\n\n  renderCapture: function (camera, size, projection) {\n    var autoClear = this.el.renderer.autoClear;\n    var el = this.el;\n    var imageData;\n    var output;\n    var pixels;\n    var renderer = el.renderer;\n    // Create rendering target and buffer to store the read pixels.\n    output = this.getRenderTarget(size.width, size.height);\n    pixels = new Uint8Array(4 * size.width * size.height);\n    // Resize quad, camera, and canvas.\n    this.resize(size.width, size.height);\n    // Render scene to render target.\n    renderer.autoClear = true;\n    renderer.clear();\n    renderer.setRenderTarget(output);\n    renderer.render(el.object3D, camera);\n    renderer.autoClear = autoClear;\n    // Read image pixels back.\n    renderer.readRenderTargetPixels(output, 0, 0, size.width, size.height, pixels);\n    renderer.setRenderTarget(null);\n    if (projection === 'perspective') {\n      pixels = this.flipPixelsVertically(pixels, size.width, size.height);\n    }\n    imageData = new ImageData(new Uint8ClampedArray(pixels), size.width, size.height);\n    // Hide quad after projecting the image.\n    this.quad.visible = false;\n    // Copy pixels into canvas.\n    this.ctx.putImageData(imageData, 0, 0);\n  },\n\n  flipPixelsVertically: function (pixels, width, height) {\n    var flippedPixels = pixels.slice(0);\n    for (var x = 0; x < width; ++x) {\n      for (var y = 0; y < height; ++y) {\n        flippedPixels[x * 4 + y * width * 4] = pixels[x * 4 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 1 + y * width * 4] = pixels[x * 4 + 1 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 2 + y * width * 4] = pixels[x * 4 + 2 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 3 + y * width * 4] = pixels[x * 4 + 3 + (height - y) * width * 4];\n      }\n    }\n    return flippedPixels;\n  },\n\n  /**\n   * Download capture to file.\n   */\n  saveCapture: function () {\n    this.canvas.toBlob(function (blob) {\n      var fileName = 'screenshot-' + document.title.toLowerCase() + '-' + Date.now() + '.png';\n      var linkEl = document.createElement('a');\n      var url = URL.createObjectURL(blob);\n      linkEl.href = url;\n      linkEl.setAttribute('download', fileName);\n      linkEl.innerHTML = 'downloading...';\n      linkEl.style.display = 'none';\n      document.body.appendChild(linkEl);\n      setTimeout(function () {\n        linkEl.click();\n        document.body.removeChild(linkEl);\n      }, 1);\n    }, 'image/png');\n  }\n});\n", "import { registerComponent } from '../../core/component.js';\nimport RStats from '../../../vendor/rStats.js';\nimport * as utils from '../../utils/index.js';\nimport '../../../vendor/rStats.extras.js';\nimport '../../lib/rStatsAframe.js';\n\nvar AFrameStats = window.aframeStats;\nvar HIDDEN_CLASS = 'a-hidden';\nvar ThreeStats = window.threeStats;\n\n/**\n * Stats appended to document.body by RStats.\n */\nexport var Component = registerComponent('stats', {\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  init: function () {\n    var scene = this.el;\n\n    if (utils.getUrlParameter('stats') === 'false') { return; }\n\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector('.rs-base');\n\n    this.hideBound = this.hide.bind(this);\n    this.showBound = this.show.bind(this);\n\n    scene.addEventListener('enter-vr', this.hideBound);\n    scene.addEventListener('exit-vr', this.showBound);\n  },\n\n  update: function () {\n    if (!this.stats) { return; }\n    return (!this.data) ? this.hide() : this.show();\n  },\n\n  remove: function () {\n    this.el.removeEventListener('enter-vr', this.hideBound);\n    this.el.removeEventListener('exit-vr', this.showBound);\n    if (!this.statsEl) { return; }  // Scene detached.\n    this.statsEl.parentNode.removeChild(this.statsEl);\n  },\n\n  tick: function () {\n    var stats = this.stats;\n\n    if (!stats) { return; }\n\n    stats('rAF').tick();\n    stats('FPS').frame();\n    stats().update();\n  },\n\n  hide: function () {\n    this.statsEl.classList.add(HIDDEN_CLASS);\n  },\n\n  show: function () {\n    this.statsEl.classList.remove(HIDDEN_CLASS);\n  }\n});\n\nfunction createStats (scene) {\n  var threeStats = new ThreeStats(scene.renderer);\n  var aframeStats = new AFrameStats(scene);\n  var plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new RStats({\n    css: [],  // Our stylesheet is injected from `src/index.js`.\n    values: {\n      fps: {caption: 'fps', below: 30}\n    },\n    groups: [\n      {caption: 'Framerate', values: ['fps', 'raf']}\n    ],\n    plugins: plugins\n  });\n}\n", "import { registerComponent } from '../../core/component.js';\nimport * as constants from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\n\nvar ENTER_VR_CLASS = 'a-enter-vr';\nvar ENTER_AR_CLASS = 'a-enter-ar';\n\nvar ENTER_VR_BTN_CLASS = 'a-enter-vr-button';\nvar ENTER_AR_BTN_CLASS = 'a-enter-ar-button';\nvar HIDDEN_CLASS = 'a-hidden';\nvar ORIENTATION_MODAL_CLASS = 'a-orientation-modal';\n\n/**\n * UI for entering VR mode.\n */\nexport var Component = registerComponent('xr-mode-ui', {\n  dependencies: ['canvas'],\n\n  schema: {\n    enabled: {default: true},\n    enterVRButton: {default: ''},\n    enterVREnabled: {default: true},\n    enterARButton: {default: ''},\n    enterAREnabled: {default: true},\n    XRMode: {default: 'vr', oneOf: ['vr', 'ar', 'xr']}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n    var sceneEl = this.el;\n\n    if (utils.getUrlParameter('ui') === 'false') { return; }\n\n    this.insideLoader = false;\n    this.enterVREl = null;\n    this.enterAREl = null;\n\n    this.orientationModalEl = null;\n    this.bindMethods();\n\n    // Hide/show VR UI when entering/exiting VR mode.\n    sceneEl.addEventListener('enter-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('exit-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('update-vr-devices', this.updateEnterInterfaces);\n\n    window.addEventListener('message', function (event) {\n      if (event.data.type === 'loaderReady') {\n        self.insideLoader = true;\n        self.remove();\n      }\n    });\n\n    // Modal that tells the user to change orientation if in portrait.\n    window.addEventListener('orientationchange', this.toggleOrientationModalIfNeeded);\n  },\n\n  bindMethods: function () {\n    this.onEnterVRButtonClick = this.onEnterVRButtonClick.bind(this);\n    this.onEnterARButtonClick = this.onEnterARButtonClick.bind(this);\n    this.onModalClick = this.onModalClick.bind(this);\n    this.toggleOrientationModalIfNeeded = this.toggleOrientationModalIfNeeded.bind(this);\n    this.updateEnterInterfaces = this.updateEnterInterfaces.bind(this);\n  },\n\n  /**\n   * Exit VR when modal clicked.\n   */\n  onModalClick: function () {\n    this.el.exitVR();\n  },\n\n  /**\n   * Enter VR when clicked.\n   */\n  onEnterVRButtonClick: function () {\n    this.el.enterVR();\n  },\n\n  /**\n   * Enter AR when clicked.\n   */\n  onEnterARButtonClick: function () {\n    this.el.enterAR();\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n\n    if (!data.enabled || this.insideLoader || utils.getUrlParameter('ui') === 'false') {\n      return this.remove();\n    }\n\n    if (this.enterVREl || this.enterAREl || this.orientationModalEl) { return; }\n\n    // Add UI if enabled and not already present.\n    if (!this.enterVREl && data.enterVREnabled && (data.XRMode === 'xr' || data.XRMode === 'vr')) {\n      if (data.enterVRButton) {\n        // Custom button.\n        this.enterVREl = document.querySelector(data.enterVRButton);\n        this.enterVREl.addEventListener('click', this.onEnterVRButtonClick);\n      } else {\n        this.enterVREl = createEnterVRButton(this.onEnterVRButtonClick);\n        sceneEl.appendChild(this.enterVREl);\n      }\n    }\n\n    if (!this.enterAREl && data.enterAREnabled && (data.XRMode === 'xr' || data.XRMode === 'ar')) {\n      if (data.enterARButton) {\n        // Custom button.\n        this.enterAREl = document.querySelector(data.enterARButton);\n        this.enterAREl.addEventListener('click', this.onEnterARButtonClick);\n      } else {\n        this.enterAREl = createEnterARButton(this.onEnterARButtonClick, data.XRMode === 'xr');\n        sceneEl.appendChild(this.enterAREl);\n      }\n    }\n\n    this.orientationModalEl = createOrientationModal(this.onModalClick);\n    sceneEl.appendChild(this.orientationModalEl);\n\n    this.updateEnterInterfaces();\n  },\n\n  remove: function () {\n    [this.enterVREl, this.enterAREl, this.orientationModalEl].forEach(function (uiElement) {\n      if (uiElement && uiElement.parentNode) {\n        uiElement.parentNode.removeChild(uiElement);\n      }\n    });\n    this.enterVREl = undefined;\n    this.enterAREl = undefined;\n    this.orientationModalEl = undefined;\n  },\n\n  updateEnterInterfaces: function () {\n    this.toggleEnterVRButtonIfNeeded();\n    this.toggleEnterARButtonIfNeeded();\n    this.toggleOrientationModalIfNeeded();\n  },\n\n  toggleEnterVRButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterVREl) { return; }\n    if (sceneEl.is('vr-mode') ||\n       ((sceneEl.isMobile || utils.device.isMobileDeviceRequestingDesktopSite()) && !utils.device.checkVRSupport())) {\n      this.enterVREl.classList.add(HIDDEN_CLASS);\n    } else {\n      if (!utils.device.checkVRSupport()) { this.enterVREl.classList.add('fullscreen'); }\n      this.enterVREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(false, true);\n    }\n  },\n\n  toggleEnterARButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterAREl) { return; }\n    // Hide the button while in a session, or if AR is not supported.\n    if (sceneEl.is('vr-mode') || !utils.device.checkARSupport()) {\n      this.enterAREl.classList.add(HIDDEN_CLASS);\n    } else {\n      this.enterAREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(true, true);\n    }\n  },\n\n  toggleOrientationModalIfNeeded: function () {\n    var sceneEl = this.el;\n    var orientationModalEl = this.orientationModalEl;\n    if (!orientationModalEl || !sceneEl.isMobile) { return; }\n    if (!utils.device.isLandscape() && sceneEl.is('vr-mode')) {\n      // Show if in VR mode on portrait.\n      orientationModalEl.classList.remove(HIDDEN_CLASS);\n    } else {\n      orientationModalEl.classList.add(HIDDEN_CLASS);\n    }\n  }\n});\n\n/**\n * Create a button that when clicked will enter into stereo-rendering mode for VR.\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterVRButton (onClick) {\n  var vrButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_VR_CLASS);\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  vrButton = document.createElement('button');\n  vrButton.className = ENTER_VR_BTN_CLASS;\n  vrButton.setAttribute('title',\n                        'Enter VR mode with a headset or fullscreen without');\n  vrButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(vrButton); }\n  // Insert elements.\n  wrapper.appendChild(vrButton);\n  vrButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Create a button that when clicked will enter into AR mode\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterARButton (onClick, xrMode) {\n  var arButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_AR_CLASS);\n  if (xrMode) { wrapper.classList.add('xr'); }\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  arButton = document.createElement('button');\n  arButton.className = ENTER_AR_BTN_CLASS;\n  arButton.setAttribute('title',\n                        'Enter AR mode with a headset or handheld device.');\n  arButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(arButton); }\n  // Insert elements.\n  wrapper.appendChild(arButton);\n  arButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Creates a modal dialog to request the user to switch to landscape orientation.\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createOrientationModal (onClick) {\n  var modal = document.createElement('div');\n  modal.className = ORIENTATION_MODAL_CLASS;\n  modal.classList.add(HIDDEN_CLASS);\n  modal.setAttribute(constants.AFRAME_INJECTED, '');\n\n  var exit = document.createElement('button');\n  exit.setAttribute(constants.AFRAME_INJECTED, '');\n  exit.innerHTML = 'Exit VR';\n\n  // Exit VR on close.\n  exit.addEventListener('click', onClick);\n\n  modal.appendChild(exit);\n\n  return modal;\n}\n\n/**\n * CSS hover state is sticky in iOS (as in 12/18/2019)\n * They are not removed on mouseleave and this function applies a class\n * to resets the style.\n *\n * @param {function} buttonEl - Button element\n */\nfunction applyStickyHoverFix (buttonEl) {\n  buttonEl.addEventListener('touchstart', function () {\n    buttonEl.classList.remove('resethover');\n  }, {passive: true});\n  buttonEl.addEventListener('touchend', function () {\n    buttonEl.classList.add('resethover');\n  }, {passive: true});\n}\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('box', {\n  schema: {\n    depth: {default: 1, min: 0},\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsDepth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.BoxGeometry(\n      data.width, data.height, data.depth,\n      data.segmentsWidth, data.segmentsHeight, data.segmentsDepth);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('circle', {\n  schema: {\n    radius: {default: 1, min: 0},\n    segments: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CircleGeometry(\n      data.radius, data.segments, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cone', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radiusBottom: {default: 1, min: 0},\n    radiusTop: {default: 0.01, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n      data.radiusTop, data.radiusBottom, data.height, data.segmentsRadial,\n      data.segmentsHeight, data.openEnded, degToRad(data.thetaStart),\n      degToRad(data.thetaLength));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cylinder', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radius: {default: 1, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n      data.radius, data.radius, data.height, data.segmentsRadial, data.segmentsHeight,\n      data.openEnded, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('dodecahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.DodecahedronGeometry(data.radius, data.detail);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('icosahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.IcosahedronGeometry(data.radius, data.detail);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('octahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.OctahedronGeometry(data.radius, data.detail);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('plane', {\n  schema: {\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.PlaneGeometry(data.width, data.height, data.segmentsWidth, data.segmentsHeight);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('ring', {\n  schema: {\n    radiusInner: {default: 0.8, min: 0},\n    radiusOuter: {default: 1.2, min: 0},\n    segmentsPhi: {default: 10, min: 1, type: 'int'},\n    segmentsTheta: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.RingGeometry(\n      data.radiusInner, data.radiusOuter, data.segmentsTheta, data.segmentsPhi,\n      degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('sphere', {\n  schema: {\n    radius: {default: 1, min: 0},\n    phiLength: {default: 360},\n    phiStart: {default: 0, min: 0},\n    thetaLength: {default: 180, min: 0},\n    thetaStart: {default: 0},\n    segmentsHeight: {default: 18, min: 2, type: 'int'},\n    segmentsWidth: {default: 36, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.SphereGeometry(\n      data.radius, data.segmentsWidth, data.segmentsHeight, degToRad(data.phiStart),\n      degToRad(data.phiLength), degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('tetrahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TetrahedronGeometry(data.radius, data.detail);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('torus', {\n  schema: {\n    arc: {default: 360},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 36, min: 2, type: 'int'},\n    segmentsTubular: {default: 32, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsRadial, data.segmentsTubular,\n      degToRad(data.arc));\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('torusKnot', {\n  schema: {\n    p: {default: 2, min: 1},\n    q: {default: 3, min: 1},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 8, min: 3, type: 'int'},\n    segmentsTubular: {default: 100, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusKnotGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsTubular, data.segmentsRadial,\n      data.p, data.q);\n  }\n});\n", "import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar quaternion = new THREE.Quaternion();\nvar rotateVector = new THREE.Vector3(0, 0, 1);\nvar uvMinVector = new THREE.Vector2();\nvar uvMaxVector = new THREE.Vector2();\nvar uvScaleVector = new THREE.Vector2();\n\nregisterGeometry('triangle', {\n  schema: {\n    vertexA: {type: 'vec3', default: {x: 0, y: 0.5, z: 0}},\n    vertexB: {type: 'vec3', default: {x: -0.5, y: -0.5, z: 0}},\n    vertexC: {type: 'vec3', default: {x: 0.5, y: -0.5, z: 0}}\n  },\n\n  init: function (data) {\n    var geometry;\n    var normal;\n    var triangle;\n    var uvA;\n    var uvB;\n    var uvC;\n\n    var vertices;\n    var normals;\n    var uvs;\n\n    triangle = new THREE.Triangle();\n    triangle.a.set(data.vertexA.x, data.vertexA.y, data.vertexA.z);\n    triangle.b.set(data.vertexB.x, data.vertexB.y, data.vertexB.z);\n    triangle.c.set(data.vertexC.x, data.vertexC.y, data.vertexC.z);\n    normal = triangle.getNormal(new THREE.Vector3());\n\n    // Rotate the 3D triangle to be parallel to XY plane.\n    quaternion.setFromUnitVectors(normal, rotateVector);\n    uvA = triangle.a.clone().applyQuaternion(quaternion);\n    uvB = triangle.b.clone().applyQuaternion(quaternion);\n    uvC = triangle.c.clone().applyQuaternion(quaternion);\n\n    // Compute UVs.\n    // Normalize x/y values of UV so they are within 0 to 1.\n    uvMinVector.set(Math.min(uvA.x, uvB.x, uvC.x), Math.min(uvA.y, uvB.y, uvC.y));\n    uvMaxVector.set(Math.max(uvA.x, uvB.x, uvC.x), Math.max(uvA.y, uvB.y, uvC.y));\n    uvScaleVector.set(0, 0).subVectors(uvMaxVector, uvMinVector);\n    uvA = new THREE.Vector2().subVectors(uvA, uvMinVector).divide(uvScaleVector);\n    uvB = new THREE.Vector2().subVectors(uvB, uvMinVector).divide(uvScaleVector);\n    uvC = new THREE.Vector2().subVectors(uvC, uvMinVector).divide(uvScaleVector);\n\n    geometry = this.geometry = new THREE.BufferGeometry();\n    vertices = [\n      triangle.a.x, triangle.a.y, triangle.a.z,\n      triangle.b.x, triangle.b.y, triangle.b.z,\n      triangle.c.x, triangle.c.y, triangle.c.z\n    ];\n    normals = [\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z\n    ];\n    uvs = [\n      uvA.x, uvA.y,\n      uvB.x, uvB.y,\n      uvC.x, uvC.y\n    ];\n\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));\n    geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n  }\n});\n", "import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\n\n/**\n * Flat shader using THREE.MeshBasicMaterial.\n */\nexport var Shader = registerShader('flat', {\n  schema: {\n    color: {type: 'color'},\n    fog: {default: true},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2},\n    toneMapped: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshBasicMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to reuse.\n * @returns {object} Updated material data.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.fog = data.fog;\n  materialData.wireframe = data.wireframe;\n  materialData.toneMapped = data.toneMapped;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  return materialData;\n}\n", "import * as THREE from 'three';\nimport { registerShader } from '../core/shader.js';\nimport * as utils from '../utils/index.js';\n\n/**\n * Standard (physically-based) shader using THREE.MeshStandardMaterial.\n */\nexport var Shader = registerShader('standard', {\n  schema: {\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n    ambientOcclusionTextureOffset: {type: 'vec2'},\n    ambientOcclusionTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    color: {type: 'color'},\n\n    displacementMap: {type: 'map'},\n    displacementScale: {default: 1},\n    displacementBias: {default: 0.5},\n    displacementTextureOffset: {type: 'vec2'},\n    displacementTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    emissive: {type: 'color', default: '#000'},\n    emissiveIntensity: {default: 1},\n\n    envMap: {default: ''},\n\n    fog: {default: true},\n\n    metalness: {default: 0.0, min: 0.0, max: 1.0},\n    metalnessMap: {type: 'map'},\n    metalnessTextureOffset: {type: 'vec2'},\n    metalnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    normalMap: {type: 'map'},\n    normalScale: {type: 'vec2', default: {x: 1, y: 1}},\n    normalTextureOffset: {type: 'vec2'},\n    normalTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    roughness: {default: 0.5, min: 0.0, max: 1.0},\n    roughnessMap: {type: 'map'},\n    roughnessTextureOffset: {type: 'vec2'},\n    roughnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    sphericalEnvMap: {type: 'map'},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color(), emissive: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshStandardMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('metalness', this, data);\n    utils.material.updateDistortionMap('roughness', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    var material = this.material;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.metalness = data.metalness;\n  materialData.roughness = data.roughness;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n\n  if (data.normalMap) { materialData.normalScale = data.normalScale; }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n", "import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\n\n/**\n * Phong shader using THREE.MeshPhongMaterial.\n */\nexport var Shader = registerShader('phong', {\n  schema: {\n    color: { type: 'color' },\n    emissive: { type: 'color', default: 'black' },\n    emissiveIntensity: { default: 1 },\n    specular: { type: 'color', default: '#111111' },\n    transparent: { default: false },\n    fog: { default: true },\n    offset: { type: 'vec2', default: { x: 0, y: 0 } },\n    repeat: { type: 'vec2', default: { x: 1, y: 1 } },\n    src: { type: 'map' },\n    envMap: { default: '' },\n    sphericalEnvMap: { type: 'map' },\n    shininess: { default: 30 },\n    flatShading: { default: false },\n    wireframe: { default: false },\n    wireframeLinewidth: { default: 2 },\n    combine: { oneOF: ['multiply', 'mix', 'add'], default: 'mix' },\n    reflectivity: { default: 0.9 },\n    refractionRatio: { default: 0.98 },\n    refract: { default: false },\n\n    normalMap: { type: 'map' },\n    normalScale: { type: 'vec2', default: { x: 1, y: 1 } },\n    normalTextureOffset: { type: 'vec2' },\n    normalTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n\n    displacementMap: { type: 'map' },\n    displacementScale: { default: 1 },\n    displacementBias: { default: 0.5 },\n    displacementTextureOffset: { type: 'vec2' },\n    displacementTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    bumpMap: { type: 'map' },\n    bumpMapScale: { default: 1 },\n    bumpTextureOffset: { type: 'vec2' },\n    bumpTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } }\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = { color: new THREE.Color(), specular: new THREE.Color(), emissive: new THREE.Color() };\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshPhongMaterial(this.materialData);\n    var sceneEl = this.el.sceneEl;\n    // Fallback to scene environment when no envMap is defined (matching behaviour of standard material)\n    Object.defineProperty(this.material, 'envMap', {\n      get: function () {\n        return this._envMap || sceneEl.object3D.environment;\n      },\n      set: function (value) {\n        this._envMap = value;\n      }\n    });\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('bump', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.specular.set(data.specular);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.transparent = data.transparent;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.shininess = data.shininess;\n  materialData.flatShading = data.flatShading;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.reflectivity = data.reflectivity;\n  materialData.refractionRatio = data.refractionRatio;\n\n  switch (data.combine) {\n    case 'mix':\n      materialData.combine = THREE.MixOperation;\n      break;\n    case 'multiply':\n      materialData.combine = THREE.MultiplyOperation;\n      break;\n    case 'add':\n      materialData.combine = THREE.AddOperation;\n      break;\n  }\n\n  if (data.normalMap) {\n    materialData.normalScale = data.normalScale;\n  }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.bumpMap) {\n    materialData.bumpScale = data.bumpMapScale;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n", "import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float contour(float width, float value) {',\n  '  return smoothstep(0.5 - value, 0.5 + value, width);',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec2 uv = vUV;',\n  '  vec4 texColor = texture(map, uv);',\n  '  float dist = texColor.a;',\n  '  float width = fwidth(dist);',\n  '  float alpha = contour(dist, width);',\n  '  float dscale = 0.353505;',\n\n  '  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n     // When texel is too small, blend raw alpha value rather than supersampling.\n     // FIXME: experimentally determined constant\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * dist;',\n  '  }',\n\n     // Otherwise do weighted supersampling.\n     // FIXME: why this weighting?\n  '  if (isBigEnough <= BIG_ENOUGH) {',\n  '    vec4 box = vec4 (uv - duv, uv + duv);',\n  '    alpha = (alpha + 0.5 * (',\n  '      contour(texture(map, box.xy).a, width)',\n  '      + contour(texture(map, box.zw).a, width)',\n  '      + contour(texture(map, box.xw).a, width)',\n  '      + contour(texture(map, box.zy).a, width)',\n  '    )) / 3.0;',\n  '  }',\n\n       // Do modified alpha test.\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n\n  '  gl_FragColor = vec4(color, opacity * alpha);',\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('sdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n    this.uniforms = this.initUniforms();\n    // When using the WebGPURenderer there is no UniformsLib or UniformsUtils.\n    if (THREE.UniformsUtils) {\n      this.uniforms = THREE.UniformsUtils.merge([\n        THREE.UniformsLib.fog,\n        this.uniforms\n      ]);\n    }\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      fog: true\n    });\n    return this.material;\n  }\n});\n", "import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform bool negate;',\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float median(float r, float g, float b) {',\n  '  return max(min(r, g), min(max(r, g), b));',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec3 sampleColor = texture(map, vUV).rgb;',\n  '  if (negate) { sampleColor = 1.0 - sampleColor; }',\n\n  '  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;',\n  '  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);',\n  '  float dscale = 0.353505;',\n  '  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n  // When texel is too small, blend raw alpha value rather than supersampling.\n  // FIXME: Experimentally determined constant.\n  '  // Do modified alpha test.',\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);',\n  '  }',\n\n  '  // Do modified alpha test.',\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n  '  gl_FragColor = vec4(color.xyz, alpha * opacity);',\n\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Multi-channel signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('msdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    negate: {type: 'boolean', is: 'uniform', default: true},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n    this.uniforms = this.initUniforms();\n    // When using the WebGPURenderer there is no UniformsLib or UniformsUtils.\n    if (THREE.UniformsUtils) {\n      this.uniforms = THREE.UniformsUtils.merge([\n        THREE.UniformsLib.fog,\n        this.uniforms\n      ]);\n    }\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      fog: true\n    });\n    return this.material;\n  }\n});\n", "import * as THREE from 'three';\nimport { registerShader } from '../core/shader.js';\n\n/**\n * Flat shader using THREE.ShadowMaterial.\n */\nexport var Shader = registerShader('shadow', {\n  schema: {\n    opacity: {default: 0.5},\n    transparent: {default: true},\n    alphaToCoverage: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.material = new THREE.ShadowMaterial();\n  },\n\n  update: function (data) {\n    this.material.opacity = data.opacity;\n    this.material.alphaToCoverage = data.alphaToCoverage;\n    this.material.transparent = data.transparent;\n  }\n});\n", "import * as constants from '../constants/index.js';\nimport { registerSystem } from '../core/system.js';\n\nvar DEFAULT_CAMERA_ATTR = 'data-aframe-default-camera';\n\n/**\n * Camera system. Manages which camera is active among multiple cameras in scene.\n *\n * @member {object} activeCameraEl - Active camera entity.\n */\nexport var System = registerSystem('camera', {\n  init: function () {\n    this.activeCameraEl = null;\n\n    this.render = this.render.bind(this);\n    this.unwrapRender = this.unwrapRender.bind(this);\n    this.wrapRender = this.wrapRender.bind(this);\n\n    this.initialCameraFound = false;\n    this.numUserCameras = 0;\n    this.numUserCamerasChecked = 0;\n    this.setupInitialCamera();\n  },\n\n  /**\n   * Setup initial camera, either searching for camera or\n   * creating a default camera if user has not added one during the initial scene traversal.\n   * We want sceneEl.camera to be ready, set, and initialized before the rest of the scene\n   * loads.\n   *\n   * Default camera offset height is at average eye level (~1.6m).\n   */\n  setupInitialCamera: function () {\n    var cameraEls;\n    var i;\n    var sceneEl = this.sceneEl;\n    var self = this;\n\n    // Camera already defined or the one defined it is an spectator one.\n    if (sceneEl.camera && !sceneEl.camera.el.getAttribute('camera').spectator) {\n      sceneEl.emit('cameraready', {cameraEl: sceneEl.camera.el});\n      return;\n    }\n\n    // Search for initial user-defined camera.\n    cameraEls = sceneEl.querySelectorAll('a-camera, :not(a-mixin)[camera]');\n\n    // No user cameras, create default one.\n    if (!cameraEls.length) {\n      this.createDefaultCamera();\n      return;\n    }\n\n    this.numUserCameras = cameraEls.length;\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEls[i].addEventListener('object3dset', function (evt) {\n        if (evt.detail.type !== 'camera') { return; }\n        self.checkUserCamera(this);\n      });\n\n      // Load camera and wait for camera to initialize.\n      if (cameraEls[i].isANode) {\n        cameraEls[i].load();\n      } else {\n        cameraEls[i].addEventListener('nodeready', function () {\n          this.load();\n        });\n      }\n    }\n  },\n\n  /**\n   * Check if a user-defined camera entity is appropriate to be initial camera.\n   * (active + non-spectator).\n   *\n   * Keep track of the number of cameras we checked and whether we found one.\n   */\n  checkUserCamera: function (cameraEl) {\n    var cameraData;\n    var sceneEl = this.el.sceneEl;\n    this.numUserCamerasChecked++;\n\n    // Already found one.\n    if (this.initialCameraFound) { return; }\n\n    // Check if camera is appropriate for being the initial camera.\n    cameraData = cameraEl.getAttribute('camera');\n    if (!cameraData.active || cameraData.spectator) {\n      // No user cameras eligible, create default camera.\n      if (this.numUserCamerasChecked === this.numUserCameras) {\n        this.createDefaultCamera();\n      }\n      return;\n    }\n\n    this.initialCameraFound = true;\n    sceneEl.camera = cameraEl.getObject3D('camera');\n    sceneEl.emit('cameraready', {cameraEl: cameraEl});\n  },\n\n  createDefaultCamera: function () {\n    var defaultCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Set up default camera.\n    defaultCameraEl = document.createElement('a-entity');\n    defaultCameraEl.setAttribute('camera', {active: true});\n    defaultCameraEl.setAttribute('position', {\n      x: 0,\n      y: constants.DEFAULT_CAMERA_HEIGHT,\n      z: 0\n    });\n    defaultCameraEl.setAttribute('wasd-controls', '');\n    defaultCameraEl.setAttribute('look-controls', '');\n    defaultCameraEl.setAttribute(constants.AFRAME_INJECTED, '');\n\n    defaultCameraEl.addEventListener('object3dset', function (evt) {\n      if (evt.detail.type !== 'camera') { return; }\n      sceneEl.camera = evt.detail.object;\n      sceneEl.emit('cameraready', {cameraEl: defaultCameraEl});\n    });\n\n    sceneEl.appendChild(defaultCameraEl);\n  },\n\n  /**\n   * Set a different active camera.\n   * When we choose a (sort of) random scene camera as the replacement, set its `active` to\n   * true. The camera component will call `setActiveCamera` and handle passing the torch to\n   * the new camera.\n   */\n  disableActiveCamera: function () {\n    var cameraEls;\n    var newActiveCameraEl;\n    cameraEls = this.sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    newActiveCameraEl = cameraEls[cameraEls.length - 1];\n    newActiveCameraEl.setAttribute('camera', 'active', true);\n  },\n\n  /**\n   * Set active camera to be used by renderer.\n   * Removes the default camera (if present).\n   * Disables all other cameras in the scene.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setActiveCamera: function (newCameraEl) {\n    var cameraEl;\n    var cameraEls;\n    var i;\n    var newCamera;\n    var previousCamera = this.activeCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.activeCameraEl) { return; }\n\n    // Grab the default camera.\n    var defaultCameraWrapper = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n    var defaultCameraEl = defaultCameraWrapper &&\n                          defaultCameraWrapper.querySelector(':not(a-mixin)[camera]');\n\n    // Remove default camera if new camera is not the default camera.\n    if (newCameraEl !== defaultCameraEl) { removeDefaultCamera(sceneEl); }\n\n    // Make new camera active.\n    this.activeCameraEl = newCameraEl;\n    this.activeCameraEl.play();\n    sceneEl.camera = newCamera;\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'active', false);\n    }\n\n    // Disable other cameras in the scene\n    cameraEls = sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEl = cameraEls[i];\n      if (!cameraEl.isEntity || newCameraEl === cameraEl) { continue; }\n      cameraEl.setAttribute('camera', 'active', false);\n      cameraEl.pause();\n    }\n    sceneEl.emit('camera-set-active', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Set spectator camera to render the scene on a 2D display.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setSpectatorCamera: function (newCameraEl) {\n    var newCamera;\n    var previousCamera = this.spectatorCameraEl;\n    var sceneEl = this.sceneEl;\n    var spectatorCameraEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.spectatorCameraEl) { return; }\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'spectator', false);\n    }\n\n    spectatorCameraEl = this.spectatorCameraEl = newCameraEl;\n\n    sceneEl.addEventListener('enter-vr', this.wrapRender);\n    sceneEl.addEventListener('exit-vr', this.unwrapRender);\n\n    spectatorCameraEl.setAttribute('camera', 'active', false);\n    spectatorCameraEl.play();\n\n    sceneEl.emit('camera-set-spectator', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Disables current spectator camera.\n   */\n  disableSpectatorCamera: function () {\n    this.spectatorCameraEl = undefined;\n  },\n\n  /**\n   * Wrap the render method of the renderer to render\n   * the spectator camera.\n   */\n  wrapRender: function () {\n    if (!this.spectatorCameraEl || this.originalRender) { return; }\n    this.originalRender = this.sceneEl.renderer.render;\n    this.sceneEl.renderer.render = this.render;\n  },\n\n  unwrapRender: function () {\n    if (!this.originalRender) { return; }\n    this.sceneEl.renderer.render = this.originalRender;\n    this.originalRender = undefined;\n  },\n\n  render: function (scene, camera) {\n    var isVREnabled;\n    var sceneEl = this.sceneEl;\n    var spectatorCamera;\n\n    isVREnabled = sceneEl.renderer.xr.enabled;\n    this.originalRender.call(sceneEl.renderer, scene, camera);\n    if (!this.spectatorCameraEl || sceneEl.isMobile || !isVREnabled) { return; }\n    spectatorCamera = this.spectatorCameraEl.components.camera.camera;\n    sceneEl.renderer.xr.enabled = false;\n    this.originalRender.call(sceneEl.renderer, scene, spectatorCamera);\n    sceneEl.renderer.xr.enabled = isVREnabled;\n  }\n});\n\n/**\n * Remove injected default camera from scene, if present.\n *\n * @param {Element} sceneEl\n */\nfunction removeDefaultCamera (sceneEl) {\n  var defaultCamera;\n  var camera = sceneEl.camera;\n  if (!camera) { return; }\n\n  // Remove default camera if present.\n  defaultCamera = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n  if (!defaultCamera) { return; }\n  sceneEl.removeChild(defaultCamera);\n}\n", "import { geometries } from '../core/geometry.js';\nimport { registerSystem } from '../core/system.js';\n\n/**\n * System for geometry component.\n * Handle geometry caching.\n *\n * @member {object} cache - Mapping of stringified component data to THREE.BufferGeometry objects.\n * @member {object} cacheCount - Keep track of number of entities using a geometry to\n *         know whether to dispose on removal.\n */\nexport var System = registerSystem('geometry', {\n  init: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Reset cache. Mainly for testing.\n   */\n  clearCache: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Attempt to retrieve from cache.\n   *\n   * @returns {object|null} A geometry if it exists, else null.\n   */\n  getOrCreateGeometry: function (data) {\n    var cache = this.cache;\n    var cachedGeometry;\n    var hash;\n\n    // Skip all caching logic.\n    if (data.skipCache) { return createGeometry(data); }\n\n    // Try to retrieve from cache first.\n    hash = this.hash(data);\n    cachedGeometry = cache[hash];\n    incrementCacheCount(this.cacheCount, hash);\n\n    if (cachedGeometry) { return cachedGeometry; }\n\n    // Create geometry.\n    cachedGeometry = createGeometry(data);\n\n    // Cache and return geometry.\n    cache[hash] = cachedGeometry;\n    return cachedGeometry;\n  },\n\n  /**\n   * Let system know that an entity is no longer using a geometry.\n   */\n  unuseGeometry: function (data) {\n    var cache = this.cache;\n    var cacheCount = this.cacheCount;\n    var geometry;\n    var hash;\n\n    if (data.skipCache) { return; }\n\n    hash = this.hash(data);\n\n    if (!cache[hash]) { return; }\n\n    decrementCacheCount(cacheCount, hash);\n\n    // Another entity is still using this geometry. No need to do anything.\n    if (cacheCount[hash] > 0) { return; }\n\n    // No more entities are using this geometry. Dispose.\n    geometry = cache[hash];\n    geometry.dispose();\n    delete cache[hash];\n    delete cacheCount[hash];\n  },\n\n  /**\n   * Use JSON.stringify to turn component data into hash.\n   * Should be deterministic within a single browser engine.\n   * If not, then look into json-stable-stringify.\n   */\n  hash: function (data) {\n    return JSON.stringify(data);\n  }\n});\n\n/**\n * Create geometry using component data.\n *\n * @param {object} data - Component data.\n * @returns {object} Geometry.\n */\nfunction createGeometry (data) {\n  var geometryType = data.primitive;\n  var GeometryClass = geometries[geometryType] && geometries[geometryType].Geometry;\n  var geometryInstance = new GeometryClass();\n\n  if (!GeometryClass) { throw new Error('Unknown geometry `' + geometryType + '`'); }\n\n  geometryInstance.init(data);\n  return geometryInstance.geometry;\n}\n\n/**\n * Decrease count of entity using a geometry.\n */\nfunction decrementCacheCount (cacheCount, hash) {\n  cacheCount[hash]--;\n}\n\n/**\n * Increase count of entity using a geometry.\n */\nfunction incrementCacheCount (cacheCount, hash) {\n  cacheCount[hash] = cacheCount[hash] === undefined ? 1 : cacheCount[hash] + 1;\n}\n", "import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\nimport { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\nimport { registerSystem } from '../core/system.js';\n\nfunction fetchScript (src) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = src;\n  });\n}\n\n/**\n * glTF model system.\n *\n * Configures glTF loading options. Models using glTF compression require that a Draco decoder be\n * provided externally.\n *\n * @param {string} dracoDecoderPath - Base path from which to load Draco decoder library.\n * @param {string} basisTranscoderPath - Base path from which to load Basis transcoder library.\n * @param {string} meshoptDecoderPath - Full path from which to load Meshopt decoder.\n */\nexport var System = registerSystem('gltf-model', {\n  schema: {\n    dracoDecoderPath: {default: 'https://www.gstatic.com/draco/versioned/decoders/1.5.7/'},\n    basisTranscoderPath: {default: ''},\n    meshoptDecoderPath: {default: ''}\n  },\n\n  init: function () {\n    this.update();\n  },\n\n  update: function () {\n    var dracoDecoderPath = this.data.dracoDecoderPath;\n    var basisTranscoderPath = this.data.basisTranscoderPath;\n    var meshoptDecoderPath = this.data.meshoptDecoderPath;\n    if (!this.dracoLoader && dracoDecoderPath) {\n      this.dracoLoader = new DRACOLoader();\n      this.dracoLoader.setDecoderPath(dracoDecoderPath);\n    }\n    if (!this.ktx2Loader && basisTranscoderPath) {\n      this.ktx2Loader = new KTX2Loader();\n      this.ktx2Loader.setTranscoderPath(basisTranscoderPath).detectSupport(this.el.renderer);\n    }\n    if (!this.meshoptDecoder && meshoptDecoderPath) {\n      this.meshoptDecoder = fetchScript(meshoptDecoderPath)\n        .then(function () { return window.MeshoptDecoder.ready; })\n        .then(function () { return window.MeshoptDecoder; });\n    }\n  },\n\n  getDRACOLoader: function () {\n    return this.dracoLoader;\n  },\n\n  getKTX2Loader: function () {\n    return this.ktx2Loader;\n  },\n\n  getMeshoptDecoder: function () {\n    return this.meshoptDecoder;\n  }\n});\n", "import { registerSystem } from '../core/system.js';\nimport * as constants from '../constants/index.js';\n\nvar DEFAULT_LIGHT_ATTR = 'data-aframe-default-light';\n\n/**\n * Light system.\n *\n * Prescribes default lighting if not specified (one ambient, one directional).\n * Removes default lighting from the scene when a new light is added.\n *\n * @param {boolean} defaultLights - Whether default lighting are defined.\n * @param {boolean} userDefinedLights - Whether user lighting is defined.\n */\nexport var System = registerSystem('light', {\n  schema: {\n    defaultLightsEnabled: {default: true}\n  },\n\n  init: function () {\n    this.defaultLights = false;\n    this.userDefinedLights = false;\n    // Wait for all entities to fully load before checking for existence of lights.\n    // Since entities wait for <a-assets> to load, any lights attaching to the scene\n    // will do so asynchronously.\n    this.sceneEl.addEventListener('loaded', this.setupDefaultLights.bind(this));\n  },\n\n  /**\n   * Notify scene that light has been added and to remove the default.\n   *\n   * @param {object} el - element holding the light component.\n   */\n  registerLight: function (el) {\n    if (!el.hasAttribute(DEFAULT_LIGHT_ATTR)) {\n      // User added a light, remove default lights through DOM.\n      this.removeDefaultLights();\n      this.userDefinedLights = true;\n    }\n  },\n\n  removeDefaultLights: function () {\n    var defaultLights;\n    var sceneEl = this.sceneEl;\n\n    if (!this.defaultLights) { return; }\n    defaultLights = document.querySelectorAll('[' + DEFAULT_LIGHT_ATTR + ']');\n    for (var i = 0; i < defaultLights.length; i++) {\n      sceneEl.removeChild(defaultLights[i]);\n    }\n    this.defaultLights = false;\n  },\n\n  /**\n   * Prescribe default lights to the scene.\n   * Does so by injecting markup such that this state is not invisible.\n   * These lights are removed if the user adds any lights.\n   */\n  setupDefaultLights: function () {\n    var sceneEl = this.sceneEl;\n    var ambientLight;\n    var directionalLight;\n\n    if (this.userDefinedLights || this.defaultLights || !this.data.defaultLightsEnabled) {\n      return;\n    }\n\n    ambientLight = document.createElement('a-entity');\n    ambientLight.setAttribute('light', {color: '#BBB', type: 'ambient'});\n    ambientLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    ambientLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(ambientLight);\n\n    directionalLight = document.createElement('a-entity');\n    directionalLight.setAttribute('light', {color: '#FFF', intensity: 1.884, castShadow: true});\n    directionalLight.setAttribute('position', {x: -0.5, y: 1, z: 1});\n    directionalLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    directionalLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(directionalLight);\n\n    this.defaultLights = true;\n  }\n});\n", "import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\nimport { setTextureProperties, createCompatibleTexture } from '../utils/material.js';\n\nvar debug = utils.debug;\nvar error = debug('components:texture:error');\nvar warn = debug('components:texture:warn');\nvar ImageLoader = new THREE.ImageLoader();\n\n/**\n * System for material component.\n * Handle material registration, updates (for fog), and texture caching.\n *\n * @member {object} materials - Registered materials.\n * @member {object} sourceCache - Texture source cache for, Image, Video and Canvas sources\n */\nexport var System = registerSystem('material', {\n  init: function () {\n    this.materials = {};\n    this.sourceCache = {};\n  },\n\n  clearTextureSourceCache: function () {\n    this.sourceCache = {};\n  },\n\n  /**\n   * Loads and creates a texture for a given `src`.\n   *\n   * @param {string|Element} src - URL or element\n   * @param {object} data - Relevant texture properties\n   * @param {function} cb - Callback to pass texture to\n   */\n  loadTexture: function (src, data, cb) {\n    this.loadTextureSource(src, function sourceLoaded (source) {\n      var texture = createCompatibleTexture(source);\n      setTextureProperties(texture, data);\n      cb(texture);\n    });\n  },\n\n  /**\n   * Determine whether `src` is an image or video. Then try to load the asset, then call back.\n   *\n   * @param {string|Element} src - URL or element.\n   * @param {function} cb - Callback to pass texture source to.\n   */\n  loadTextureSource: function (src, cb) {\n    var self = this;\n    var sourceCache = this.sourceCache;\n\n    var hash = this.hash(src);\n    if (sourceCache[hash]) {\n      sourceCache[hash].then(cb);\n      return;\n    }\n\n    // Canvas.\n    if (src.tagName === 'CANVAS') {\n      sourceLoaded(new THREE.Source(src));\n      return;\n    }\n\n    sourceLoaded(new Promise(doSourceLoad));\n    function doSourceLoad (resolve, reject) {\n      utils.srcLoader.validateSrc(src, loadImageCb, loadVideoCb);\n      function loadImageCb (src) { self.loadImage(src, resolve); }\n      function loadVideoCb (src) { self.loadVideo(src, resolve); }\n    }\n\n    function sourceLoaded (sourcePromise) {\n      sourceCache[hash] = Promise.resolve(sourcePromise);\n      sourceCache[hash].then(cb);\n    }\n  },\n\n  /**\n   * Load the six individual sides and construct a cube texture, then call back.\n   *\n   * @param {Array<string|Element>} srcs - Array of six texture URLs or elements.\n   * @param {function} cb - Callback to pass cube texture to.\n   */\n  loadCubeMapTexture: function (srcs, cb) {\n    var self = this;\n    var loaded = 0;\n    var cube = new THREE.CubeTexture();\n    cube.colorSpace = THREE.SRGBColorSpace;\n\n    function loadSide (index) {\n      self.loadTextureSource(srcs[index], function (source) {\n        cube.images[index] = source.data;\n        loaded++;\n        if (loaded === 6) {\n          cube.needsUpdate = true;\n          cb(cube);\n        }\n      });\n    }\n\n    if (srcs.length !== 6) {\n      warn('Cube map texture requires exactly 6 sources, got only %s sources', srcs.length);\n      return;\n    }\n\n    for (var i = 0; i < srcs.length; i++) {\n      loadSide(i);\n    }\n  },\n\n  /**\n   * High-level function for loading image textures (THREE.Texture).\n   *\n   * @param {string|Element} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadImage: function (src, cb) {\n    // Image element provided\n    if (typeof src !== 'string') {\n      cb(new THREE.Source(src));\n      return;\n    }\n\n    cb(loadImageUrl(src));\n  },\n\n  /**\n   * Load video texture (THREE.VideoTexture).\n   * Which is just an image texture that RAFs + needsUpdate.\n   * Note that creating a video texture is synchronous unlike loading an image texture.\n   * Made asynchronous to be consistent with image textures.\n   *\n   * @param {string|Element} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadVideo: function (src, cb) {\n    var videoEl;\n\n    // Video element provided.\n    if (typeof src !== 'string') {\n      // Check cache before creating texture.\n      videoEl = src;\n\n      // Fix up the attributes then start to create the texture.\n      fixVideoAttributes(videoEl);\n    }\n\n    // Only URL provided. Use video element to create texture.\n    videoEl = videoEl || createVideoEl(src);\n\n    cb(new THREE.Source(videoEl));\n  },\n\n  /**\n   * Create a hash for a given source.\n   */\n  hash: function (src) {\n    if (src.tagName) {\n      // Prefer element's ID or source, otherwise fallback to the element itself\n      return src.id || src.src || src;\n    }\n    return src;\n  },\n\n  /**\n   * Keep track of material in case an update trigger is needed (e.g., fog).\n   *\n   * @param {object} material\n   */\n  registerMaterial: function (material) {\n    this.materials[material.uuid] = material;\n  },\n\n  /**\n   * Stop tracking material, and dispose of any textures not being used by\n   * another material component.\n   *\n   * @param {object} material\n   */\n  unregisterMaterial: function (material) {\n    delete this.materials[material.uuid];\n  }\n});\n\n/**\n * Load image from a given URL.\n *\n * @private\n * @param {string} src - An url to an image file.\n * @returns {Promise} Resolves once texture is loaded.\n */\nfunction loadImageUrl (src) {\n  return new Promise(doLoadImageUrl);\n\n  function doLoadImageUrl (resolve, reject) {\n    // Request and load texture from src string. THREE will create underlying element.\n    ImageLoader.load(\n      src,\n      resolveSource,\n      function () { /* no-op */ },\n      function (xhr) {\n        error('`$s` could not be fetched (Error code: %s; Response: %s)', xhr.status,\n              xhr.statusText);\n      }\n    );\n\n    function resolveSource (data) {\n      resolve(new THREE.Source(data));\n    }\n  }\n}\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nfunction createVideoEl (src) {\n  var videoEl = document.createElement('video');\n  // Support inline videos for iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  videoEl.autoplay = true;\n  videoEl.loop = true;\n  videoEl.crossOrigin = 'anonymous';\n  videoEl.addEventListener('error', function () {\n    warn('`%s` is not a valid video', src);\n  }, true);\n  videoEl.src = src;\n  return videoEl;\n}\n\n/**\n * Fixes a video element's attributes to prevent developers from accidentally passing the\n * wrong attribute values to commonly misused video attributes.\n *\n * <video> does not treat `autoplay`, `controls`, `crossorigin`, `loop`, and `preload` as\n * as booleans. Existence of those attributes will mean truthy.\n *\n * For example, translates <video loop=\"false\"> to <video>.\n *\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/video#Attributes\n * @param {Element} videoEl - Video element.\n * @returns {Element} Video element with the correct properties updated.\n */\nfunction fixVideoAttributes (videoEl) {\n  videoEl.autoplay = videoEl.hasAttribute('autoplay') && videoEl.getAttribute('autoplay') !== 'false';\n  videoEl.controls = videoEl.hasAttribute('controls') && videoEl.getAttribute('controls') !== 'false';\n  if (videoEl.getAttribute('loop') === 'false') {\n    videoEl.removeAttribute('loop');\n  }\n  if (videoEl.getAttribute('preload') === 'false') {\n    videoEl.preload = 'none';\n  }\n  videoEl.crossOrigin = videoEl.crossOrigin || 'anonymous';\n  // To support inline videos in iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  return videoEl;\n}\n", "import { registerSystem } from '../core/system.js';\n\nregisterSystem('obb-collider', {\n  schema: {\n    showColliders: {default: false}\n  },\n\n  init: function () {\n    this.collisions = [];\n    this.colliderEls = [];\n  },\n\n  addCollider: function (colliderEl) {\n    this.colliderEls.push(colliderEl);\n    if (this.data.showColliders) {\n      colliderEl.components['obb-collider'].showCollider();\n    } else {\n      colliderEl.components['obb-collider'].hideCollider();\n    }\n    this.tick = this.detectCollisions;\n  },\n\n  removeCollider: function (colliderEl) {\n    var colliderEls = this.colliderEls;\n    var elIndex = colliderEls.indexOf(colliderEl);\n    colliderEl.components['obb-collider'].hideCollider();\n    if (elIndex > -1) { colliderEls.splice(elIndex, 1); }\n    if (colliderEls.length === 0) { this.tick = undefined; }\n  },\n\n  registerCollision: function (componentA, componentB) {\n    var collisions = this.collisions;\n    var existingCollision = false;\n    var boundingBoxA = componentA.obb;\n    var boundingBoxB = componentB.obb;\n    var collisionMeshA = componentA.renderColliderMesh;\n    var collisionMeshB = componentB.renderColliderMesh;\n    if (collisionMeshA) { collisionMeshA.material.color.set(0xff0000); }\n    if (collisionMeshB) { collisionMeshB.material.color.set(0xff0000); }\n    for (var i = 0; i < collisions.length; i++) {\n      if (collisions[i].componentA.obb === boundingBoxA && collisions[i].componentB.obb === boundingBoxB ||\n          collisions[i].componentA.obb === boundingBoxB && collisions[i].componentB.obb === boundingBoxA) {\n        existingCollision = true;\n        collisions[i].detected = true;\n        break;\n      }\n    }\n    if (!existingCollision) {\n      collisions.push({\n        componentA: componentA,\n        componentB: componentB,\n        detected: true\n      });\n      componentA.el.emit('obbcollisionstarted', {trackedObject3D: componentA.trackedObject3D, withEl: componentB.el});\n      componentB.el.emit('obbcollisionstarted', {trackedObject3D: componentB.trackedObject3D, withEl: componentA.el});\n    }\n  },\n\n  resetCollisions: function () {\n    var collisions = this.collisions;\n    for (var i = 0; i < collisions.length; i++) {\n      collisions[i].detected = false;\n    }\n  },\n\n  clearCollisions: function () {\n    var collisions = this.collisions;\n    var detectedCollisions = [];\n    var componentA;\n    var componentB;\n    var collisionMeshA;\n    var collisionMeshB;\n    for (var i = 0; i < collisions.length; i++) {\n      if (!collisions[i].detected) {\n        componentA = collisions[i].componentA;\n        componentB = collisions[i].componentB;\n        collisionMeshA = componentA.renderColliderMesh;\n        collisionMeshB = componentB.renderColliderMesh;\n\n        if (collisionMeshA) { collisionMeshA.material.color.set(0x00ff00); }\n        componentA.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentB.el});\n\n        if (collisionMeshB) { collisionMeshB.material.color.set(0x00ff00); }\n        componentB.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentA.el});\n      } else {\n        detectedCollisions.push(collisions[i]);\n      }\n    }\n    this.collisions = detectedCollisions;\n  },\n\n  detectCollisions: function () {\n    var boxA;\n    var boxB;\n    var componentA;\n    var componentB;\n    var colliderEls = this.colliderEls;\n    if (colliderEls.length < 2) { return; }\n    this.resetCollisions();\n    for (var i = 0; i < colliderEls.length; i++) {\n      componentA = colliderEls[i].components['obb-collider'];\n      boxA = colliderEls[i].components['obb-collider'].obb;\n      // ignore bounding box with 0 volume.\n      if (boxA.halfSize.x === 0 || boxA.halfSize.y === 0 || boxA.halfSize.z === 0) {\n        continue;\n      }\n      for (var j = i + 1; j < colliderEls.length; j++) {\n        componentB = colliderEls[j].components['obb-collider'];\n        boxB = componentB.obb;\n        // ignore bounding box with 0 volume.\n        if (boxB.halfSize.x === 0 || boxB.halfSize.y === 0 || boxB.halfSize.z === 0) {\n          continue;\n        }\n        if (boxA.intersectsOBB(boxB)) {\n          this.registerCollision(componentA, componentB);\n        }\n      }\n    }\n    this.clearCollisions();\n  }\n});\n", "import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug;\nvar warn = debug('components:renderer:warn');\n\n/**\n * Determines state of various renderer properties.\n */\nexport var System = registerSystem('renderer', {\n  schema: {\n    antialias: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    highRefreshRate: {default: utils.device.isOculusBrowser()},\n    logarithmicDepthBuffer: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    maxCanvasWidth: {default: -1},\n    maxCanvasHeight: {default: -1},\n    multiviewStereo: {default: false},\n    exposure: {default: 1, if: {toneMapping: ['ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']}},\n    toneMapping: {default: 'no', oneOf: ['no', 'ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']},\n    precision: {default: 'high', oneOf: ['high', 'medium', 'low']},\n    anisotropy: {default: 1},\n    sortTransparentObjects: {default: false},\n    colorManagement: {default: true},\n    alpha: {default: true},\n    stencil: {default: false},\n    foveationLevel: {default: 1}\n  },\n\n  init: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    // This is the rendering engine, such as THREE.js so copy over any persistent properties from the rendering system.\n    var renderer = sceneEl.renderer;\n\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    THREE.Texture.DEFAULT_ANISOTROPY = data.anisotropy;\n\n    THREE.ColorManagement.enabled = data.colorManagement;\n    renderer.outputColorSpace = data.colorManagement ? THREE.SRGBColorSpace : THREE.LinearSRGBColorSpace;\n\n    if (sceneEl.hasAttribute('antialias')) {\n      warn('Component `antialias` is deprecated. Use `renderer=\"antialias: true\"` instead.');\n    }\n\n    if (sceneEl.hasAttribute('logarithmicDepthBuffer')) {\n      warn('Component `logarithmicDepthBuffer` is deprecated. Use `renderer=\"logarithmicDepthBuffer: true\"` instead.');\n    }\n\n    // These properties are always the same, regardless of rendered configuration\n    renderer.sortObjects = true;\n    renderer.setOpaqueSort(sortFrontToBack);\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var renderer = sceneEl.renderer;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    renderer.toneMappingExposure = data.exposure;\n    renderer.xr.setFoveation(data.foveationLevel);\n\n    if (data.sortObjects) {\n      warn('`sortObjects` property is deprecated. Use `renderer=\"sortTransparentObjects: true\"` instead.');\n    }\n    if (data.sortTransparentObjects) {\n      renderer.setTransparentSort(sortBackToFront);\n    } else {\n      renderer.setTransparentSort(sortRenderOrderOnly);\n    }\n  },\n\n  applyColorCorrection: function (texture) {\n    if (!this.data.colorManagement || !texture) {\n      return;\n    }\n\n    if (texture.isTexture && texture.colorSpace !== THREE.SRGBColorSpace) {\n      texture.colorSpace = THREE.SRGBColorSpace;\n      texture.needsUpdate = true;\n    }\n  },\n\n  setWebXRFrameRate: function (xrSession) {\n    var data = this.data;\n    var rates = xrSession.supportedFrameRates;\n    if (rates && xrSession.updateTargetFrameRate) {\n      var targetRate;\n      if (rates.includes(90)) {\n        targetRate = data.highRefreshRate ? 90 : 72;\n      } else {\n        targetRate = data.highRefreshRate ? 72 : 60;\n      }\n      xrSession.updateTargetFrameRate(targetRate).catch(function (error) {\n        console.warn('failed to set target frame rate of ' + targetRate + '. Error info: ' + error);\n      });\n    }\n  }\n});\n\n// Custom A-Frame sort functions.\n// Variations of Three.js default sort orders here:\n// https://github.com/mrdoob/three.js/blob/ebbaecf9acacf259ea9abdcba7b6fb25cfcea2ab/src/renderers/webgl/WebGLRenderLists.js#L1\n// See: https://github.com/aframevr/aframe/issues/5332\n\n// Default sort for opaque objects:\n// - respect groupOrder & renderOrder settings\n// - sort front-to-back by z-depth from camera (this should minimize overdraw)\n// - otherwise leave objects in default order (object tree order)\n\nexport function sortFrontToBack (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return a.z - b.z;\n}\n\n// Default sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - otherwise leave objects in default order (object tree order)\nexport function sortRenderOrderOnly (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  return a.renderOrder - b.renderOrder;\n}\n\n// Spatial sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - sort back-to-front by z-depth from camera\n// - otherwise leave objects in default order (object tree order)\nexport function sortBackToFront (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return b.z - a.z;\n}\n", "import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\n\nvar SHADOW_MAP_TYPE_MAP = {\n  basic: THREE.BasicShadowMap,\n  pcf: THREE.PCFShadowMap,\n  pcfsoft: THREE.PCFSoftShadowMap\n};\n\n/**\n * Shadow system.\n *\n * Enabled automatically when one or more shadow components are added to the scene, the system sets\n * options on the WebGLRenderer for configuring shadow appearance.\n */\nexport var System = registerSystem('shadow', {\n  schema: {\n    enabled: {default: true},\n    autoUpdate: {default: true},\n    type: {default: 'pcf', oneOf: ['basic', 'pcf', 'pcfsoft']}\n  },\n\n  init: function () {\n    var sceneEl = this.sceneEl;\n    var data = this.data;\n\n    this.shadowMapEnabled = false;\n\n    sceneEl.renderer.shadowMap.type = SHADOW_MAP_TYPE_MAP[data.type];\n    sceneEl.renderer.shadowMap.autoUpdate = data.autoUpdate;\n  },\n\n  update: function (prevData) {\n    if (prevData.enabled !== this.data.enabled) {\n      this.setShadowMapEnabled(this.shadowMapEnabled);\n    }\n  },\n\n  /**\n   * Enables/disables the renderer shadow map.\n   * @param {boolean} enabled\n   */\n  setShadowMapEnabled: function (enabled) {\n    var sceneEl = this.sceneEl;\n    var renderer = this.sceneEl.renderer;\n\n    this.shadowMapEnabled = enabled;\n    var newEnabledState = this.data.enabled && this.shadowMapEnabled;\n    if (renderer && newEnabledState !== renderer.shadowMap.enabled) {\n      renderer.shadowMap.enabled = newEnabledState;\n\n      // Materials must be updated for the change to take effect.\n      updateAllMaterials(sceneEl);\n    }\n  }\n});\n\nfunction updateAllMaterials (sceneEl) {\n  if (!sceneEl.hasLoaded) { return; }\n\n  sceneEl.object3D.traverse(function (node) {\n    if (node.material) {\n      var materials = Array.isArray(node.material) ? node.material : [node.material];\n      for (var i = 0; i < materials.length; i++) {\n        materials[i].needsUpdate = true;\n      }\n    }\n  });\n}\n", "import { registerSystem } from '../core/system.js';\n\n/**\n * Tracked controls system.\n * Maintain list with available tracked controllers.\n */\nexport var System = registerSystem('tracked-controls', {\n  init: function () {\n    this.controllers = [];\n    this.onInputSourcesChange = this.onInputSourcesChange.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.addEventListener('enter-vr', this.onEnterVR);\n\n    this.onExitVR = this.onExitVR.bind(this);\n    this.el.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  onEnterVR: function () {\n    var xrSession = this.el.xrSession;\n    if (!xrSession) { return; }\n    this.el.xrSession.addEventListener('inputsourceschange', this.onInputSourcesChange);\n  },\n\n  onExitVR: function () {\n    this.referenceSpace = undefined;\n    this.controllers = [];\n    this.el.emit('controllersupdated', undefined, false);\n  },\n\n  onInputSourcesChange: function () {\n    var self = this;\n    var xrSession = this.el.xrSession;\n    var refspace = this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(refspace).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (err) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(\n        refspace,\n        'tracked-controls uses reference space \"' + refspace + '\".');\n      throw err;\n    });\n\n    this.controllers = xrSession.inputSources;\n    this.el.emit('controllersupdated', undefined, false);\n  }\n});\n", "import { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('systems:webxr:warn');\n\n/**\n * WebXR session initialization and XR module support.\n */\nexport var System = registerSystem('webxr', {\n  schema: {\n    referenceSpaceType: {type: 'string', default: 'local-floor'},\n    requiredFeatures: {type: 'array', default: ['local-floor']},\n    optionalFeatures: {type: 'array', default: ['bounded-floor']},\n    overlayElement: {type: 'selector'}\n  },\n\n  update: function () {\n    var data = this.data;\n    this.sessionConfiguration = {\n      requiredFeatures: data.requiredFeatures,\n      optionalFeatures: data.optionalFeatures\n    };\n    this.sessionReferenceSpaceType = data.referenceSpaceType;\n\n    if (data.overlayElement) {\n      // Update WebXR to support light-estimation\n      data.overlayElement.classList.remove('a-dom-overlay');\n      if (!data.optionalFeatures.includes('dom-overlay')) {\n        data.optionalFeatures.push('dom-overlay');\n        this.el.setAttribute('webxr', data);\n      }\n      this.warnIfFeatureNotRequested('dom-overlay');\n      this.sessionConfiguration.domOverlay = {root: data.overlayElement};\n      data.overlayElement.classList.add('a-dom-overlay');\n    }\n  },\n\n  wasFeatureRequested: function (feature) {\n    // Features available by default for immersive sessions don't need to\n    // be requested explicitly.\n    if (feature === 'viewer' || feature === 'local') { return true; }\n\n    if (this.sessionConfiguration.requiredFeatures.includes(feature) ||\n        this.sessionConfiguration.optionalFeatures.includes(feature)) {\n      return true;\n    }\n\n    return false;\n  },\n\n  warnIfFeatureNotRequested: function (feature, optIntro) {\n    if (!this.wasFeatureRequested(feature)) {\n      var msg = 'Please add the feature \"' + feature + '\" to a-scene\\'s ' +\n          'webxr system options in requiredFeatures/optionalFeatures.';\n      warn((optIntro ? optIntro + ' ' : '') + msg);\n    }\n  }\n});\n", "/**\n * Common mesh defaults, mappings, and transforms.\n */\nimport { components } from '../../core/component.js';\nimport { shaders } from '../../core/shader.js';\nimport * as utils from '../../utils/index.js';\n\nvar materialMappings = {};\nObject.keys(components.material.schema).forEach(addMapping);\nObject.keys(shaders.standard.schema).forEach(addMapping);\n\nfunction addMapping (prop) {\n  // To hyphenated.\n  var htmlAttrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  if (prop === 'fog') { htmlAttrName = 'material-fog'; }\n  if (prop === 'visible') { htmlAttrName = 'material-visible'; }\n  materialMappings[htmlAttrName] = 'material.' + prop;\n}\n\nexport default function getMeshMixin () {\n  return {\n    defaultComponents: {material: {}},\n    mappings: utils.extend({}, materialMappings)\n  };\n}\n", "import * as THREE from 'three';\nimport { registerComponent } from '../../core/component.js';\n\nvar originalPosition = new THREE.Vector3();\nvar originalRotation = new THREE.Vector3();\n\n/**\n * Wrap el.object3D within an outer group. Apply pivot to el.object3D as position.\n */\nregisterComponent('pivot', {\n  dependencies: ['position'],\n\n  schema: {type: 'vec3'},\n\n  init: function () {\n    var data = this.data;\n    var el = this.el;\n    var originalParent = el.object3D.parent;\n    var originalGroup = el.object3D;\n    var outerGroup = new THREE.Group();\n\n    originalPosition.copy(originalGroup.position);\n    originalRotation.copy(originalGroup.rotation);\n\n    // Detach current group from parent.\n    originalParent.remove(originalGroup);\n    outerGroup.add(originalGroup);\n\n    // Set new group as the outer group.\n    originalParent.add(outerGroup);\n\n    // Set outer group as new object3D.\n    el.object3D = outerGroup;\n\n    // Apply pivot to original group.\n    originalGroup.position.set(-1 * data.x, -1 * data.y, -1 * data.z);\n\n    // Offset the pivot so that world position not affected.\n    // And restore position onto outer group.\n    outerGroup.position.set(data.x + originalPosition.x, data.y + originalPosition.y,\n                            data.z + originalPosition.z);\n\n    // Transfer rotation to outer group.\n    outerGroup.rotation.copy(originalGroup.rotation);\n    originalGroup.rotation.set(0, 0, 0);\n  }\n});\n", "import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-camera', {\n  defaultComponents: {\n    'camera': {},\n    'look-controls': {},\n    'wasd-controls': {},\n    'position': {x: 0, y: 1.6, z: 0}\n  },\n\n  mappings: {\n    active: 'camera.active',\n    far: 'camera.far',\n    fov: 'camera.fov',\n    'look-controls-enabled': 'look-controls.enabled',\n    near: 'camera.near',\n    'pointer-lock-enabled': 'look-controls.pointerLockEnabled',\n    'wasd-controls-enabled': 'wasd-controls.enabled',\n    'reverse-mouse-drag': 'look-controls.reverseMouseDrag',\n    zoom: 'camera.zoom'\n  }\n});\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-cursor', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    cursor: {},\n    geometry: {\n      primitive: 'ring',\n      radiusOuter: 0.016,\n      radiusInner: 0.01,\n      segmentsTheta: 32\n    },\n    material: {\n      color: '#000',\n      shader: 'flat',\n      opacity: 0.8\n    },\n    position: {\n      x: 0,\n      y: 0,\n      z: -1\n    }\n  },\n\n  mappings: {\n    far: 'raycaster.far',\n    fuse: 'cursor.fuse',\n    'fuse-timeout': 'cursor.fuseTimeout',\n    interval: 'raycaster.interval',\n    objects: 'raycaster.objects'\n  }\n}));\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-curvedimage', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      height: 1,\n      primitive: 'cylinder',\n      radius: 2,\n      segmentsRadial: 48,\n      thetaLength: 270,\n      openEnded: true,\n      thetaStart: 0\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true,\n      repeat: '-1 1'\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    'open-ended': 'geometry.openEnded',\n    radius: 'geometry.radius',\n    segments: 'geometry.segmentsRadial',\n    start: 'geometry.thetaStart',\n    'theta-length': 'geometry.thetaLength',\n    'theta-start': 'geometry.thetaStart',\n    'width': 'geometry.thetaLength'\n  }\n}));\n", "import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-gltf-model', {\n  mappings: {\n    src: 'gltf-model'\n  }\n});\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-image', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n", "import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-light', {\n  defaultComponents: {\n    light: {}\n  },\n\n  mappings: {\n    angle: 'light.angle',\n    color: 'light.color',\n    'ground-color': 'light.groundColor',\n    decay: 'light.decay',\n    distance: 'light.distance',\n    intensity: 'light.intensity',\n    penumbra: 'light.penumbra',\n    type: 'light.type',\n    target: 'light.target',\n    envmap: 'light.envMap',\n    'shadow-camera-automatic': 'light.shadowCameraAutomatic'\n  }\n});\n", "import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-link', {\n  defaultComponents: {\n    link: {\n      visualAspectEnabled: true\n    }\n  },\n\n  mappings: {\n    href: 'link.href',\n    image: 'link.image',\n    title: 'link.title'\n  }\n});\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-obj-model', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    'obj-model': {}\n  },\n\n  mappings: {\n    src: 'obj-model.obj',\n    mtl: 'obj-model.mtl'\n  }\n}));\n", "/**\n * Automated mesh primitive registration.\n */\nimport getMeshMixin from '../getMeshMixin.js';\nimport { geometries, geometryNames } from '../../../core/geometry.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\n// For testing.\nconst meshPrimitives = {};\nexport default meshPrimitives;\n\n// Generate primitive for each geometry type.\ngeometryNames.forEach(function registerMeshPrimitive (geometryName) {\n  var geometry = geometries[geometryName];\n  var geometryHyphened = unCamelCase(geometryName);\n\n  // Generate mappings.\n  var mappings = {};\n  Object.keys(geometry.schema).forEach(function createMapping (property) {\n    mappings[unCamelCase(property)] = 'geometry.' + property;\n  });\n\n  // Register.\n  var tagName = 'a-' + geometryHyphened;\n  var primitive = registerPrimitive(tagName, utils.extendDeep({}, getMeshMixin(), {\n    defaultComponents: {geometry: {primitive: geometryName}},\n    mappings: mappings\n  }));\n  meshPrimitives[tagName] = primitive;\n});\n\n/**\n * camelCase to hyphened-string.\n */\nfunction unCamelCase (str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\nimport meshPrimitives from './meshPrimitives.js';\n\nregisterPrimitive('a-sky', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      side: 'back',\n      shader: 'flat',\n      npot: true\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: utils.extendDeep({}, meshPrimitives['a-sphere'].mappings)\n}));\n", "import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-sound', {\n  defaultComponents: {\n    sound: {}\n  },\n\n  mappings: {\n    src: 'sound.src',\n    on: 'sound.on',\n    autoplay: 'sound.autoplay',\n    loop: 'sound.loop',\n    volume: 'sound.volume'\n  }\n});\n", "// <a-text> using `definePrimitive` helper.\nimport { definePrimitive } from '../primitives.js';\ndefinePrimitive('a-text', {text: {anchor: 'align', width: 5}});\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-video', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n", "import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-videosphere', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'back',\n      npot: true\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: {\n    radius: 'geometry.radius',\n    'segments-height': 'geometry.segmentsHeight',\n    'segments-width': 'geometry.segmentsWidth'\n  }\n}));\n", "import ANIME from 'super-animejs';\nimport THREE from './lib/three.js';\n\nimport { AScene } from './core/scene/a-scene.js';\nimport scenes from './core/scene/scenes.js';\nimport { ANode } from './core/a-node.js';\nimport { AEntity } from './core/a-entity.js'; // Depends on ANode and core components.\nimport { registerComponent, components, Component } from './core/component.js';\nimport { registerGeometry, geometries } from './core/geometry.js';\nimport { registerPrimitive, primitives } from './extras/primitives/primitives.js';\nimport { registerShader, shaders } from './core/shader.js';\nimport { registerSystem, systems } from './core/system.js';\nimport * as schema from './core/schema.js';\nimport * as readyState from './core/readyState.js';\n\nimport './core/a-assets.js';\nimport './core/a-cubemap.js';\nimport './core/a-mixin.js';\n\nimport * as utils from './utils/index.js';\nimport pkg from '../package.json';\n\nimport './components/index.js'; // Register standard components.\nimport './geometries/index.js'; // Register standard geometries.\nimport './shaders/index.js'; // Register standard shaders.\nimport './systems/index.js'; // Register standard systems.\n\n// Depends on material component and standard shader\nimport getMeshMixin from './extras/primitives/getMeshMixin.js';\n\n// Extras.\nimport './extras/components/index.js';\nimport './extras/primitives/index.js';\n\nvar debug = utils.debug;\nvar error = debug('A-Frame:error');\nvar warn = debug('A-Frame:warn');\n\nif (window.document.currentScript && window.document.currentScript.parentNode !==\n    window.document.head && !window.debug) {\n  warn('Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ' +\n       'ensure everything for A-Frame is properly registered before they are used from ' +\n       'HTML.');\n}\n\n// Error if not using a server.\nif (!window.cordova && window.location.protocol === 'file:') {\n  error(\n    'This HTML file is currently being served via the file:// protocol. ' +\n    'Assets, textures, and models WILL NOT WORK due to cross-origin policy! ' +\n    'Please use a local or hosted server: ' +\n    'https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server.');\n}\n\n// CSS.\nif (utils.device.isBrowserEnvironment) {\n  window.logs = debug;\n  require('./style/aframe.css');\n  require('./style/rStats.css');\n}\n\nconsole.log('A-Frame Version: 1.7.0 (Date 2025-02-20, Commit #ad5cef10)');\nconsole.log('THREE Version (https://github.com/supermedium/three.js):',\n            THREE.REVISION);\n\n// Wait for ready state, unless user asynchronously initializes A-Frame.\nif (!window.AFRAME_ASYNC) {\n  readyState.waitForDocumentReadyState();\n}\n\nvar AFRAME = globalThis.AFRAME = {\n  AComponent: Component,\n  AEntity: AEntity,\n  ANode: ANode,\n  ANIME: ANIME,\n  AScene: AScene,\n  components: components,\n  coreComponents: Object.keys(components),\n  geometries: geometries,\n  registerComponent: registerComponent,\n  registerGeometry: registerGeometry,\n  registerPrimitive: registerPrimitive,\n  registerShader: registerShader,\n  registerSystem: registerSystem,\n  primitives: {\n    getMeshMixin: getMeshMixin,\n    primitives: primitives\n  },\n  scenes: scenes,\n  schema: schema,\n  shaders: shaders,\n  systems: systems,\n  emitReady: readyState.emitReady,\n  THREE: THREE,\n  utils: utils,\n  version: pkg.version\n};\nexport default AFRAME;\n"],
  "mappings": "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",
  "names": ["str", "Object", "prototype", "toString", "module", "exports", "arr", "BYTES_PER_ELEMENT", "call", "buffer", "Array", "isArray", "e", "num", "def", "t", "byteLength", "b64", "lens", "getLens", "validLen", "placeHoldersLen", "toByteArray", "tmp", "i", "Arr", "curByte", "len", "revLookup", "charCodeAt", "fromByteArray", "uint8", "length", "extraBytes", "parts", "maxChunkLength", "len2", "push", "encodeChunk", "lookup", "join", "Uint8Array", "code", "Error", "indexOf", "start", "end", "output", "n", "Buffer", "require", "a", "b", "isBuffer", "equals", "base64", "ieee754", "customInspectSymbol", "Symbol", "K_MAX_LENGTH", "createBuffer", "RangeError", "buf", "setPrototypeOf", "arg", "encodingOrOffset", "TypeError", "allocUnsafe", "from", "value", "string", "encoding", "isEncoding", "actual", "write", "slice", "ArrayBuffer", "isView", "arrayView", "isInstance", "copy", "fromArrayBuffer", "byteOffset", "fromArrayLike", "SharedArrayBuffer", "valueOf", "obj", "checked", "numberIsNaN", "type", "data", "toPrimitive", "assertSize", "size", "array", "mustMatch", "arguments", "loweredCase", "utf8ToBytes", "base64ToBytes", "toLowerCase", "slowToString", "this", "hexSlice", "utf8Slice", "asciiSlice", "latin1Slice", "base64Slice", "utf16leSlice", "swap", "m", "bidirectionalIndexOf", "val", "dir", "arrayIndexOf", "lastIndexOf", "indexSize", "arrLength", "valLength", "String", "read", "readUInt16BE", "foundIndex", "found", "j", "hexWrite", "offset", "Number", "remaining", "strLen", "parsed", "parseInt", "substr", "utf8Write", "blitBuffer", "asciiWrite", "byteArray", "base64Write", "ucs2Write", "units", "c", "hi", "lo", "Math", "min", "res", "firstByte", "codePoint", "bytesPerSequence", "secondByte", "thirdByte", "fourthByte", "tempCodePoint", "codePoints", "MAX_ARGUMENTS_LENGTH", "fromCharCode", "apply", "TYPED_ARRAY_SUPPORT", "proto", "foo", "typedArraySupport", "console", "error", "defineProperty", "enumerable", "get", "poolSize", "alloc", "fill", "allocUnsafeSlow", "_isBuffer", "compare", "x", "y", "concat", "list", "pos", "set", "swap16", "swap32", "swap64", "toLocaleString", "inspect", "max", "replace", "trim", "target", "thisStart", "thisEnd", "thisCopy", "targetCopy", "includes", "isFinite", "toJSON", "_arr", "ret", "out", "hexSliceLookupTable", "bytes", "checkOffset", "ext", "checkInt", "wrtBigUInt64LE", "checkIntBI", "BigInt", "wrtBigUInt64BE", "checkIEEE754", "writeFloat", "littleEndian", "noAssert", "writeDouble", "newBuf", "subarray", "readUintLE", "readUIntLE", "mul", "readUintBE", "readUIntBE", "readUint8", "readUInt8", "readUint16LE", "readUInt16LE", "readUint16BE", "readUint32LE", "readUInt32LE", "readUint32BE", "readUInt32BE", "readBigUInt64LE", "defineBigIntMethod", "validateNumber", "first", "last", "boundsError", "readBigUInt64BE", "readIntLE", "pow", "readIntBE", "readInt8", "readInt16LE", "readInt16BE", "readInt32LE", "readInt32BE", "readBigInt64LE", "readBigInt64BE", "readFloatLE", "readFloatBE", "readDoubleLE", "readDoubleBE", "writeUintLE", "writeUIntLE", "writeUintBE", "writeUIntBE", "writeUint8", "writeUInt8", "writeUint16LE", "writeUInt16LE", "writeUint16BE", "writeUInt16BE", "writeUint32LE", "writeUInt32LE", "writeUint32BE", "writeUInt32BE", "writeBigUInt64LE", "writeBigUInt64BE", "writeIntLE", "limit", "sub", "writeIntBE", "writeInt8", "writeInt16LE", "writeInt16BE", "writeInt32LE", "writeInt32BE", "writeBigInt64LE", "writeBigInt64BE", "writeFloatLE", "writeFloatBE", "writeDoubleLE", "writeDoubleBE", "targetStart", "copyWithin", "errors", "E", "sym", "getMessage", "Base", "constructor", "super", "writable", "configurable", "name", "stack", "message", "addNumericalSeparator", "range", "ERR_OUT_OF_RANGE", "ERR_INVALID_ARG_TYPE", "floor", "ERR_BUFFER_OUT_OF_BOUNDS", "input", "msg", "received", "isInteger", "abs", "INVALID_BASE64_RE", "Infinity", "leadSurrogate", "split", "src", "dst", "alphabet", "table", "i16", "fn", "BufferBigIntNotDefined", "cssWithMappingToString", "map", "item", "content", "needLayer", "modules", "media", "dedupe", "supports", "layer", "undefined", "alreadyImportedModules", "k", "id", "_k", "url", "options", "__esModule", "default", "test", "hash", "needQuotes", "cssMapping", "btoa", "unescape", "encodeURIComponent", "JSON", "stringify", "sourceMapping", "formatArgs", "args", "useColors", "namespace", "humanize", "diff", "color", "splice", "index", "lastC", "match", "save", "namespaces", "storage", "setItem", "removeItem", "load", "r", "getItem", "process", "env", "DEBUG", "window", "__nwjs", "navigator", "userAgent", "document", "documentElement", "style", "WebkitAppearance", "firebug", "exception", "localStorage", "localstorage", "destroy", "warned", "warn", "colors", "log", "debug", "formatters", "v", "createDebug", "prevTime", "namespacesCache", "enabledCache", "enableOverride", "enabled", "self", "curr", "Date", "ms", "prev", "coerce", "unshift", "format", "formatter", "selectColor", "extend", "init", "delimiter", "newDebug", "toNamespace", "regexp", "substring", "disable", "names", "skips", "enable", "RegExp", "keys", "forEach", "key", "isObj", "hasOwnProperty", "propIsEnumerable", "propertyIsEnumerable", "assignKey", "to", "assign", "getOwnPropertySymbols", "symbols", "s", "dtype", "Int8Array", "Int16Array", "Int32Array", "Uint16Array", "Uint32Array", "Float32Array", "Float64Array", "Uint8ClampedArray", "win", "global", "isLE", "mLen", "nBytes", "eLen", "eMax", "eBias", "nBits", "d", "NaN", "rt", "isNaN", "LN2", "setTimeout", "alert", "confirm", "prompt", "wordWrap", "xtend", "number", "X_HEIGHTS", "M_WIDTHS", "CAP_HEIGHTS", "TAB_ID", "SPACE_ID", "TextLayout", "opt", "glyphs", "_measure", "computeMetrics", "bind", "update", "wrapper", "Function", "getGlyphById", "font", "chars", "glyphIdx", "findChar", "getKerning", "left", "right", "kernings", "kern", "second", "amount", "measure", "_opt", "tabSize", "text", "_setupSpaceGlyphs", "lines", "minWidth", "width", "maxLineWidth", "reduce", "line", "lineHeight", "common", "baseline", "base", "descender", "letterSpacing", "height", "align", "_width", "_height", "_descender", "_baseline", "_xHeight", "idx", "_capHeight", "_lineHeight", "_ascender", "lineIndex", "lastGlyph", "lineWidth", "glyph", "getGlyph", "tx", "position", "xadvance", "_linesTotal", "_fallbackSpaceGlyph", "_fallbackTabGlyph", "space", "tabWidth", "xoffset", "yoffset", "curPen", "curWidth", "count", "nextPen", "nextWidth", "xhr", "noop", "parseASCII", "parseXML", "readBinary", "isBinaryFormat", "xml2", "XMLHttpRequest", "cb", "uri", "binary", "responseType", "req", "overrideMimeType", "err", "body", "statusCode", "result", "headers", "charAt", "parse", "equal", "HEADER", "h", "w", "plural", "msAbs", "isPlural", "round", "exec", "parseFloat", "long", "splitLine", "dt", "parseData", "pages", "lineData", "file", "readBlock", "blockID", "blockSize", "info", "bitField", "smooth", "unicode", "italic", "bold", "fixedHeight", "charset", "stretchH", "aa", "padding", "spacing", "outline", "face", "readNameNT", "scaleW", "scaleH", "packed", "alphaChnl", "redChnl", "greenChnl", "blueChnl", "char", "off", "page", "chnl", "header", "every", "byte", "parseAttributes", "parseFromString", "NAME_MAP", "scaleh", "scalew", "stretchh", "lineheight", "alphachnl", "redchnl", "greenchnl", "bluechnl", "getAttribs", "element", "attribs", "attributes", "dict", "attrib", "nodeName", "nodeValue", "xmlRoot", "getElementsByTagName", "pageRoot", "p", "getAttribute", "childTag", "children", "child", "GLYPH_DESIGNER_ERROR", "headersArr", "row", "anArray", "CW", "CCW", "clockwise", "numIndices", "indices", "createLayout", "createIndices", "vertices", "utils", "TextGeometry", "THREE", "BufferGeometry", "layout", "flipY", "texWidth", "texHeight", "filter", "bitmap", "visibleGlyphs", "positions", "uvs", "setIndex", "setAttribute", "BufferAttribute", "multipage", "removeAttribute", "boundingBox", "computeBoundingBox", "boundingSphere", "computeBoundingSphere", "Sphere", "itemSize", "radius", "center", "computeSphere", "Box3", "bbox", "makeEmpty", "computeBox", "box", "bounds", "minX", "minY", "sqrt", "bw", "bh", "u0", "v1", "u1", "v0", "newline", "whitespace", "idxOf", "chr", "isWhitespace", "monospace", "mode", "MAX_VALUE", "lineStart", "isNewline", "measured", "testWidth", "newLine", "lineEnd", "nextStart", "newlineChar", "isFunction", "parseHeaders", "initParams", "callback", "params", "createXHR", "_createXHR", "called", "response", "getBody", "responseText", "responseXML", "firefoxBugTakenEffect", "isJson", "errorFunc", "evt", "clearTimeout", "timeoutTimer", "failureResponse", "loadFunc", "aborted", "status", "useXDR", "method", "rawRequest", "getAllResponseHeaders", "cors", "XDomainRequest", "sync", "json", "onreadystatechange", "readyState", "onload", "onerror", "onprogress", "onabort", "ontimeout", "open", "username", "password", "withCredentials", "timeout", "abort", "setRequestHeader", "beforeSend", "send", "iterator", "toUpperCase", "DOMParser", "ActiveXObject", "xmlDoc", "async", "loadXML", "div", "createElement", "innerHTML", "source", "aframeStats", "scene", "_rS", "_scene", "elements", "querySelectorAll", "el", "isEntity", "performance", "getEntriesByName", "startTime", "toFixed", "attach", "values", "te", "caption", "lt", "groups", "fractions", "glStats", "_totalDrawArraysCalls", "_totalDrawElementsCalls", "_totalUseProgramCalls", "_totalFaces", "_totalVertices", "_totalPoints", "_totalBindTexures", "_h", "f", "WebGLRenderingContext", "drawArrays", "POINTS", "drawElements", "useProgram", "bindTexture", "allcalls", "over", "drawelements", "drawarrays", "steps", "threeStats", "renderer", "memory", "geometries", "programs", "textures", "render", "calls", "triangles", "points", "BrowserStats", "_usedJSHeapSize", "_totalJSHeapSize", "usedJSHeapSize", "totalJSHeapSize", "log1024", "_size", "average", "avgMs", "total", "nowOffset", "now", "timing", "navigationStart", "mark", "rStats", "settings", "iterateKeys", "l", "_settings", "_colours", "colours", "_cssRStats", "CSSPath", "css", "href", "rel", "appendChild", "_base", "_div", "_elHeight", "_elWidth", "_perfCounters", "Graph", "_dom", "_id", "_defArg", "_def", "_canvas", "_ctx", "getContext", "_max", "_current", "_dotCanvas", "_dotCtx", "fillStyle", "fillRect", "globalAlpha", "_alarmCanvas", "_alarmCtx", "className", "draw", "alarm", "drawImage", "StackGraph", "_num", "th", "PerfCounter", "group", "_time", "_value", "_total", "_averageValue", "_accumValue", "_accumStart", "_accumSamples", "_spanId", "_spanValue", "_spanValueText", "createTextNode", "_graph", "_started", "_average", "_start", "userTimingAPI", "_end", "textContent", "tick", "frame", "interpolate", "below", "_perf", "idArg", "g", "_update", "plugins", "graph", "h1", "addEventListener", "classList", "toggle", "preventDefault", "legend", "_init", "Util", "mimeType", "check", "vendor", "opera", "top", "results", "location", "search", "decodeURIComponent", "orientation", "timer", "request", "setInterval", "stop", "release", "clearInterval", "video", "play", "paused", "pause", "o", "A", "___CSS_LOADER_URL_IMPORT_0___", "URL", "___CSS_LOADER_URL_IMPORT_1___", "___CSS_LOADER_URL_IMPORT_2___", "___CSS_LOADER_URL_IMPORT_3___", "___CSS_LOADER_URL_IMPORT_4___", "___CSS_LOADER_EXPORT___", "___CSS_LOADER_URL_REPLACEMENT_0___", "___CSS_LOADER_URL_REPLACEMENT_1___", "___CSS_LOADER_URL_REPLACEMENT_2___", "___CSS_LOADER_URL_REPLACEMENT_3___", "___CSS_LOADER_URL_REPLACEMENT_4___", "u", "styleTagTransform", "setAttributes", "insert", "domAPI", "insertStyleElement", "locals", "stylesInDOM", "getIndexByIdentifier", "identifier", "modulesToDom", "idCountMap", "identifiers", "indexByIdentifier", "sourceMap", "references", "updater", "addElementStyle", "byIndex", "api", "newObj", "remove", "lastIdentifiers", "newList", "newLastIdentifiers", "_i", "_index", "memo", "styleTarget", "querySelector", "HTMLIFrameElement", "contentDocument", "head", "styleElement", "nonce", "parentNode", "removeChild", "styleSheet", "cssText", "firstChild", "__webpack_module_cache__", "__webpack_require__", "moduleId", "cachedModule", "__webpack_modules__", "getter", "definition", "globalThis", "prop", "toStringTag", "baseURI", "nc", "defaultInstanceSettings", "begin", "loopBegin", "changeBegin", "change", "changeComplete", "loopComplete", "complete", "loop", "direction", "autoplay", "timelineOffset", "defaultTweenSettings", "duration", "delay", "endDelay", "easing", "validTransforms", "cache", "CSS", "springs", "minMax", "stringContains", "applyArguments", "func", "hexRegex", "rgbPrefixRegex", "hslRegex", "is", "pth", "svg", "SVGElement", "inp", "HTMLInputElement", "dom", "nodeType", "fnc", "und", "hex", "rgb", "hsl", "col", "easingFunctionRegex", "parseEasingParameters", "spring", "mass", "stiffness", "damping", "velocity", "w0", "zeta", "wd", "solver", "progress", "exp", "cos", "sin", "cached", "elapsed", "rest", "elastic", "amplitude", "period", "PI", "asin", "bezier", "kSampleStepSize", "aA1", "aA2", "B", "C", "calcBezier", "aT", "getSlope", "mX1", "mY1", "mX2", "mY2", "sampleValues", "aX", "intervalStart", "currentSample", "kSplineTableSize", "guessForT", "initialSlope", "aGuessT", "currentSlope", "aA", "aB", "currentX", "currentT", "penner", "curves", "In", "Out", "InOut", "eases", "linear", "coords", "parseEasings", "ease", "selectString", "auxArrayFilter", "filterArray", "thisArg", "flattenArray", "toArray", "NodeList", "HTMLCollection", "arrayContains", "some", "cloneObject", "clone", "replaceObjectProps", "o1", "o2", "mergeObjects", "rgbRegex", "hexToRgbaHexRegex", "hexToRgbaRgbRegex", "hslToRgbaHsl1Regex", "hslToRgbaHsl2Regex", "unitRegex", "getUnit", "getFunctionValue", "animatable", "convertPxToUnit", "unit", "tempEl", "tagName", "parentEl", "factor", "offsetWidth", "convertedUnit", "getCSSValue", "uppercasePropName", "getComputedStyle", "getPropertyValue", "getAnimationType", "transformRegex", "getElementTransforms", "transform", "transforms", "Map", "getOriginalTargetValue", "propName", "defaultVal", "operatorRegex", "getRelativeValue", "operator", "whitespaceRegex", "validateValue", "rgbValue", "hexValue", "hslValue", "hue2rgb", "q", "originalUnit", "unitLess", "getDistance", "p1", "p2", "getPolylineLength", "previousPos", "totalLength", "numberOfItems", "currentPos", "getTotalLength", "getParentSvg", "pathEl", "svgData", "parentSvgEl", "rect", "getBoundingClientRect", "viewBoxAttr", "viewBox", "getPathProgress", "path", "point", "getPointAtLength", "p0", "property", "atan2", "valueRegex", "decomposeValue", "original", "numbers", "strings", "parseTargets", "targets", "getAnimatables", "springRegex", "normalizePropertyTweens", "tweenSettings", "propArray", "setProgressValue", "attribute", "object", "manual", "setTargetsValue", "properties", "animatables", "valueUnit", "originalValue", "animType", "getAnimations", "tweens", "previousTween", "tween", "tweenValue", "toUnit", "previousValue", "fromUnit", "isPath", "isColor", "lastTween", "getInstanceTimings", "animations", "animLength", "getTlOffset", "anim", "timings", "raf", "instanceID", "activeInstances", "pausedInstances", "engine", "requestAnimationFrame", "step", "activeInstancesLength", "activeInstance", "instanceIndex", "cancelAnimationFrame", "anime", "lastTime", "childrenLength", "resolve", "makePromise", "Promise", "_resolve", "promise", "instance", "instanceSettings", "keyframes", "propertyNames", "newKey", "toggleInstanceDirection", "reversed", "adjustTime", "time", "resetTime", "currentTime", "speed", "seekCild", "seek", "setAnimationsProgress", "insTime", "animationsLength", "tweenLength", "eased", "toNumbersLength", "toNumber", "fromNumber", "stringsLength", "n$1", "currentValue", "setCallback", "passThrough", "setInstanceProgress", "engineTime", "insDuration", "insDelay", "insEndDelay", "reversePlayback", "i$1", "began", "changeBegan", "changeCompleted", "completed", "reset", "reverse", "restart", "finished", "removeTargetsFromAnimations", "targetsArray", "hidden", "len$1", "version", "running", "childAnimations", "convertPx", "percent", "setDashoffset", "pathLength", "stagger", "grid", "axis", "fromIndex", "fromFirst", "fromCenter", "fromLast", "isRange", "val1", "val2", "maxValue", "fromX", "fromY", "distanceX", "distanceY", "timeline", "tl", "add", "instanceParams", "tlIndex", "ins", "insParams", "tlDuration", "random", "__WEBPACK_EXTERNAL_MODULE_three__", "_taskCache", "WeakMap", "DRACOLoader", "Loader", "manager", "decoderPath", "decoderConfig", "decoderBinary", "decoderPending", "workerLimit", "workerPool", "workerNextTaskID", "workerSourceURL", "defaultAttributeIDs", "normal", "uv", "defaultAttributeTypes", "setDecoderPath", "setDecoderConfig", "config", "setWorkerLimit", "onLoad", "onProgress", "onError", "loader", "FileLoader", "setPath", "setResponseType", "requestHeader", "setWithCredentials", "decodeDracoFile", "SRGBColorSpace", "catch", "attributeIDs", "attributeTypes", "vertexColorSpace", "LinearSRGBColorSpace", "taskConfig", "useUniqueIDs", "decodeGeometry", "then", "taskKey", "has", "cachedTask", "worker", "taskID", "taskCost", "geometryPending", "_getWorker", "_worker", "reject", "_callbacks", "postMessage", "_createGeometry", "geometry", "_releaseTask", "geometryData", "_assignVertexColorSpace", "normalized", "inputColorSpace", "_color", "Color", "il", "fromBufferAttribute", "ColorManagement", "toWorkingColorSpace", "setXYZ", "_loadLibrary", "preload", "_initDecoder", "useJS", "WebAssembly", "librariesPending", "all", "libraries", "jsContent", "wasmBinary", "DRACOWorker", "createObjectURL", "Blob", "Worker", "_taskCosts", "_taskLoad", "onmessage", "sort", "dispose", "terminate", "revokeObjectURL", "decodeAttribute", "draco", "decoder", "dracoGeometry", "attributeName", "attributeType", "numComponents", "num_components", "numValues", "num_points", "dataType", "DT_FLOAT32", "DT_INT8", "DT_INT16", "DT_INT32", "DT_UINT8", "DT_UINT16", "DT_UINT32", "ptr", "_malloc", "GetAttributeDataArrayForAllPoints", "HEAPF32", "_free", "onModuleLoaded", "DracoDecoderModule", "Decoder", "decodingStatus", "geometryType", "GetEncodedGeometryType", "TRIANGULAR_MESH", "Mesh", "DecodeArrayToMesh", "POINT_CLOUD", "PointCloud", "DecodeArrayToPointCloud", "ok", "error_msg", "attributeID", "GetAttributeByUniqueId", "GetAttributeId", "GetAttribute", "attributeResult", "num_faces", "GetTrianglesUInt32Array", "buffers", "attr", "computeMikkTSpaceTangents", "MikkTSpace", "negateSign", "isReady", "hasAttribute", "getAttributeArray", "isInterleavedBufferAttribute", "dstArray", "getX", "getY", "getZ", "_geometry", "toNonIndexed", "tangents", "generateTangents", "mergeGeometries", "useGroups", "isIndexed", "attributesUsed", "Set", "morphAttributesUsed", "morphAttributes", "morphTargetsRelative", "mergedGeometry", "attributesCount", "addGroup", "indexOffset", "mergedIndex", "mergedAttribute", "mergeAttributes", "numMorphTargets", "morphAttributesToMerge", "mergedMorphAttribute", "TypedArray", "gpuType", "arrayLength", "tupleOffset", "getComponent", "setComponent", "deepCloneAttribute", "isInstancedInterleavedBufferAttribute", "deinterleaveAttribute", "isInstancedBufferAttribute", "InstancedBufferAttribute", "interleaveAttributes", "stride", "interleavedBuffer", "InterleavedBuffer", "getters", "setters", "iba", "InterleavedBufferAttribute", "cons", "newAttribute", "meshPerAttribute", "setX", "setY", "setZ", "setW", "getW", "deinterleaveGeometry", "morphTargets", "attrMap", "estimateBytesUsed", "mem", "getIndex", "mergeVertices", "tolerance", "EPSILON", "hashToIndex", "vertexCount", "nextIndex", "attributeNames", "tmpAttributes", "tmpMorphAttributes", "newIndices", "morphAttr", "halfTolerance", "exponent", "log10", "hashMultiplier", "hashAdditive", "newArray", "newMorphArrays", "getterFunc", "setterFunc", "ml", "tmpAttribute", "tmpMorphAttribute", "toTrianglesDrawMode", "drawMode", "TrianglesDrawMode", "TriangleFanDrawMode", "TriangleStripDrawMode", "numberOfTriangles", "newGeometry", "clearGroups", "computeMorphedAttributes", "_vA", "Vector3", "_vB", "_vC", "_tempA", "_tempB", "_tempC", "_morphA", "_morphB", "_morphC", "_calculateMorphedAttributeData", "morphAttribute", "modifiedAttributeArray", "morphInfluences", "morphTargetInfluences", "influence", "morph", "addScaledVector", "isSkinnedMesh", "applyBoneTransform", "z", "material", "positionAttribute", "morphPosition", "normalAttribute", "morphNormal", "drawRange", "jl", "modifiedPosition", "modifiedNormal", "morphedPositionAttribute", "Float32BufferAttribute", "morphedNormalAttribute", "mergeGroups", "materialIndex", "groupStart", "groupLength", "currentGroup", "toCreasedNormals", "creaseAngle", "creaseDot", "verts", "tempVec1", "tempVec2", "tempNorm", "tempNorm2", "hashVertex", "resultGeometry", "posAttr", "vertexMap", "i3", "subVectors", "crossVectors", "normalize", "normalArray", "normAttr", "otherNormals", "lk", "otherNorm", "dot", "GLTFLoader", "dracoLoader", "ktx2Loader", "meshoptDecoder", "pluginCallbacks", "register", "parser", "GLTFMaterialsClearcoatExtension", "GLTFMaterialsDispersionExtension", "GLTFTextureBasisUExtension", "GLTFTextureWebPExtension", "GLTFTextureAVIFExtension", "GLTFMaterialsSheenExtension", "GLTFMaterialsTransmissionExtension", "GLTFMaterialsVolumeExtension", "GLTFMaterialsIorExtension", "GLTFMaterialsEmissiveStrengthExtension", "GLTFMaterialsSpecularExtension", "GLTFMaterialsIridescenceExtension", "GLTFMaterialsAnisotropyExtension", "GLTFMaterialsBumpExtension", "GLTFLightsExtension", "GLTFMeshoptCompression", "GLTFMeshGpuInstancing", "scope", "resourcePath", "relativeUrl", "LoaderUtils", "extractUrlBase", "resolveURL", "itemStart", "_onError", "itemError", "itemEnd", "gltf", "setDRACOLoader", "setKTX2Loader", "setMeshoptDecoder", "unregister", "extensions", "textDecoder", "TextDecoder", "decode", "BINARY_EXTENSION_HEADER_MAGIC", "EXTENSIONS", "KHR_BINARY_GLTF", "GLTFBinaryExtension", "asset", "GLTFParser", "crossOrigin", "fileLoader", "plugin", "extensionsUsed", "extensionName", "extensionsRequired", "KHR_MATERIALS_UNLIT", "GLTFMaterialsUnlitExtension", "KHR_DRACO_MESH_COMPRESSION", "GLTFDracoMeshCompressionExtension", "KHR_TEXTURE_TRANSFORM", "GLTFTextureTransformExtension", "KHR_MESH_QUANTIZATION", "GLTFMeshQuantizationExtension", "setExtensions", "setPlugins", "parseAsync", "GLTFRegistry", "objects", "removeAll", "KHR_LIGHTS_PUNCTUAL", "KHR_MATERIALS_CLEARCOAT", "KHR_MATERIALS_DISPERSION", "KHR_MATERIALS_IOR", "KHR_MATERIALS_SHEEN", "KHR_MATERIALS_SPECULAR", "KHR_MATERIALS_TRANSMISSION", "KHR_MATERIALS_IRIDESCENCE", "KHR_MATERIALS_ANISOTROPY", "KHR_MATERIALS_VOLUME", "KHR_TEXTURE_BASISU", "KHR_MATERIALS_EMISSIVE_STRENGTH", "EXT_MATERIALS_BUMP", "EXT_TEXTURE_WEBP", "EXT_TEXTURE_AVIF", "EXT_MESHOPT_COMPRESSION", "EXT_MESH_GPU_INSTANCING", "refs", "uses", "_markDefs", "nodeDefs", "nodes", "nodeIndex", "nodeLength", "nodeDef", "light", "_addNodeRef", "_loadLight", "lightIndex", "cacheKey", "dependency", "lightDef", "lights", "lightNode", "setRGB", "DirectionalLight", "PointLight", "distance", "SpotLight", "spot", "innerConeAngle", "outerConeAngle", "angle", "penumbra", "assignExtrasToUserData", "intensity", "createUniqueName", "getDependency", "createNodeAttachment", "_getNodeRef", "getMaterialType", "MeshBasicMaterial", "extendParams", "materialParams", "materialDef", "pending", "opacity", "metallicRoughness", "pbrMetallicRoughness", "baseColorFactor", "baseColorTexture", "assignTexture", "extendMaterialParams", "materials", "emissiveStrength", "emissiveIntensity", "MeshPhysicalMaterial", "extension", "clearcoatFactor", "clearcoat", "clearcoatTexture", "clearcoatRoughnessFactor", "clearcoatRoughness", "clearcoatRoughnessTexture", "clearcoatNormalTexture", "scale", "clearcoatNormalScale", "Vector2", "dispersion", "iridescenceFactor", "iridescence", "iridescenceTexture", "iridescenceIor", "iridescenceIOR", "iridescenceThicknessRange", "iridescenceThicknessMinimum", "iridescenceThicknessMaximum", "iridescenceThicknessTexture", "sheenColor", "sheenRoughness", "sheen", "sheenColorFactor", "colorFactor", "sheenRoughnessFactor", "sheenColorTexture", "sheenRoughnessTexture", "transmissionFactor", "transmission", "transmissionTexture", "thickness", "thicknessFactor", "thicknessTexture", "attenuationDistance", "colorArray", "attenuationColor", "ior", "specularIntensity", "specularFactor", "specularTexture", "specularColorFactor", "specularColor", "specularColorTexture", "bumpScale", "bumpFactor", "bumpTexture", "anisotropyStrength", "anisotropy", "anisotropyRotation", "anisotropyTexture", "loadTexture", "textureIndex", "textureDef", "loadTextureImage", "isSupported", "images", "textureLoader", "handler", "getHandler", "detectSupport", "image", "Image", "loadBufferView", "bufferView", "bufferViews", "extensionDef", "supported", "byteStride", "decodeGltfBufferAsync", "ready", "decodeGltfBuffer", "createNodeMesh", "mesh", "meshDef", "meshes", "primitive", "primitives", "WEBGL_CONSTANTS", "TRIANGLES", "TRIANGLE_STRIP", "TRIANGLE_FAN", "attributesDef", "accessor", "nodeObject", "pop", "isGroup", "instancedMeshes", "Matrix4", "Quaternion", "instancedMesh", "InstancedMesh", "TRANSLATION", "ROTATION", "SCALE", "setMatrixAt", "compose", "instanceColor", "Object3D", "assignFinalMaterial", "clear", "headerView", "DataView", "magic", "getUint32", "chunkContentsLength", "chunkView", "chunkIndex", "chunkLength", "chunkType", "contentArray", "decodePrimitive", "bufferViewIndex", "gltfAttributeMap", "threeAttributeMap", "attributeNormalizedMap", "attributeTypeMap", "threeAttributeName", "ATTRIBUTES", "accessorDef", "accessors", "componentType", "WEBGL_COMPONENT_TYPES", "extendTexture", "texture", "texCoord", "channel", "rotation", "fromArray", "repeat", "needsUpdate", "GLTFCubicSplineInterpolant", "Interpolant", "parameterPositions", "sampleSize", "resultBuffer", "copySampleValue_", "valueSize", "interpolate_", "i1", "t0", "t1", "stride2", "stride3", "td", "pp", "ppp", "offset1", "offset0", "s2", "s3", "s0", "s1", "m0", "m1", "_q", "GLTFCubicSplineQuaternionInterpolant", "FLOAT", "FLOAT_MAT3", "FLOAT_MAT4", "FLOAT_VEC2", "FLOAT_VEC3", "FLOAT_VEC4", "LINEAR", "REPEAT", "SAMPLER_2D", "LINES", "LINE_LOOP", "LINE_STRIP", "UNSIGNED_BYTE", "UNSIGNED_SHORT", "WEBGL_FILTERS", "NearestFilter", "LinearFilter", "NearestMipmapNearestFilter", "LinearMipmapNearestFilter", "NearestMipmapLinearFilter", "LinearMipmapLinearFilter", "WEBGL_WRAPPINGS", "ClampToEdgeWrapping", "MirroredRepeatWrapping", "RepeatWrapping", "WEBGL_TYPE_SIZES", "POSITION", "NORMAL", "TANGENT", "TEXCOORD_0", "TEXCOORD_1", "TEXCOORD_2", "TEXCOORD_3", "COLOR_0", "WEIGHTS_0", "JOINTS_0", "PATH_PROPERTIES", "translation", "weights", "INTERPOLATION", "CUBICSPLINE", "InterpolateLinear", "STEP", "InterpolateDiscrete", "createDefaultMaterial", "MeshStandardMaterial", "emissive", "metalness", "roughness", "transparent", "depthTest", "side", "FrontSide", "addUnknownExtensionsToUserData", "knownExtensions", "objectDef", "userData", "gltfExtensions", "gltfDef", "extras", "updateMorphTargets", "targetNames", "morphTargetDictionary", "createPrimitiveKey", "primitiveDef", "geometryKey", "dracoExtension", "createAttributesKey", "attributesKey", "getNormalizedComponentScale", "_identityMatrix", "associations", "primitiveCache", "nodeCache", "meshCache", "cameraCache", "lightCache", "sourceCache", "textureCache", "nodeNamesUsed", "isSafari", "safariVersion", "isFirefox", "firefoxVersion", "safariMatch", "createImageBitmap", "TextureLoader", "ImageBitmapLoader", "setCrossOrigin", "_invokeAll", "beforeRoot", "getDependencies", "dependencies", "scenes", "cameras", "afterRoot", "updateMatrixWorld", "skinDefs", "skins", "meshDefs", "skinIndex", "skinLength", "joints", "isBone", "skin", "camera", "ref", "updateMappings", "mappings", "entries", "_invokeOne", "loadScene", "loadNode", "loadMesh", "loadAccessor", "loadBuffer", "loadMaterial", "loadSkin", "loadAnimation", "loadCamera", "defs", "bufferIndex", "bufferDef", "bufferViewDef", "accessorIndex", "sparse", "pendingBufferViews", "elementBytes", "itemBytes", "bufferAttribute", "ibSlice", "ibCacheKey", "ib", "itemSizeIndices", "SCALAR", "TypedArrayIndices", "byteOffsetIndices", "byteOffsetValues", "sparseIndices", "sparseValues", "sourceIndex", "sourceDef", "sampler", "loadImageSource", "startsWith", "samplers", "magFilter", "minFilter", "wrapS", "wrapT", "generateMipmaps", "isCompressedTexture", "webkitURL", "sourceURI", "isObjectURL", "blob", "isImageBitmapLoader", "imageBitmap", "Texture", "mapName", "mapDef", "colorSpace", "gltfReference", "useDerivativeTangents", "tangent", "useVertexColors", "useFlatShading", "isPoints", "uuid", "pointsMaterial", "PointsMaterial", "Material", "sizeAttenuation", "isLine", "lineMaterial", "LineBasicMaterial", "cachedMaterial", "vertexColors", "flatShading", "normalScale", "materialType", "kmuExtension", "metallicFactor", "roughnessFactor", "metallicRoughnessTexture", "doubleSided", "DoubleSide", "alphaMode", "depthWrite", "alphaTest", "alphaCutoff", "normalTexture", "occlusionTexture", "strength", "aoMapIntensity", "emissiveFactor", "emissiveTexture", "originalName", "sanitizedName", "PropertyBinding", "sanitizeNodeName", "loadGeometries", "createDracoPrimitive", "addPrimitiveAttributes", "geometryPromise", "meshIndex", "SkinnedMesh", "normalizeSkinWeights", "LineSegments", "Line", "LineLoop", "Points", "Group", "cameraIndex", "cameraDef", "PerspectiveCamera", "MathUtils", "radToDeg", "yfov", "aspectRatio", "znear", "zfar", "OrthographicCamera", "xmag", "ymag", "skinDef", "_loadNodeShallow", "inverseBindMatrices", "jointNodes", "bones", "boneInverses", "jointNode", "mat", "Skeleton", "animationIndex", "animationDef", "animationName", "pendingNodes", "pendingInputAccessors", "pendingOutputAccessors", "pendingSamplers", "pendingTargets", "channels", "node", "parameters", "inputAccessors", "outputAccessors", "tracks", "inputAccessor", "outputAccessor", "updateMatrix", "createdTracks", "_createAnimationTracks", "AnimationClip", "traverse", "isMesh", "nodePending", "childPending", "childrenDef", "skeletonPending", "skeleton", "meshPromise", "Bone", "matrix", "applyMatrix4", "quaternion", "sceneIndex", "sceneDef", "nodeIds", "reducedAssociations", "targetName", "TypedKeyframeTrack", "NumberKeyframeTrack", "QuaternionKeyframeTrack", "VectorKeyframeTrack", "interpolation", "outputArray", "_getArrayFromAccessor", "track", "_createCubicSplineTrackInterpolant", "scaled", "createInterpolant", "times", "getValueSize", "isInterpolantFactoryMethodGLTFCubicSpline", "assignAttributeAccessor", "gltfAttributeName", "workingColorSpace", "boxScale", "multiplyScalar", "maxDisplacement", "vector", "expandByVector", "sphere", "getCenter", "distanceTo", "hasMorphPosition", "hasMorphNormal", "hasMorphColor", "pendingPositionAccessors", "pendingNormalAccessors", "pendingColorAccessors", "pendingAccessor", "morphPositions", "morphNormals", "morphColors", "WorkerPool", "pool", "queue", "workers", "workersResolve", "workerStatus", "_initWorker", "workerId", "workerCreator", "_onMessage", "_getIdleWorker", "transfer", "shift", "setWorkerCreator", "ct", "yt", "xt", "wt", "Ft", "Ct", "ae", "ge", "ue", "we", "Ae", "Sn", "pi", "Ii", "vkFormat", "typeSize", "pixelWidth", "pixelHeight", "pixelDepth", "layerCount", "faceCount", "supercompressionScheme", "levels", "dataFormatDescriptor", "vendorId", "descriptorType", "descriptorBlockSize", "versionNumber", "colorModel", "colorPrimaries", "transferFunction", "flags", "texelBlockDimension", "bytesPlane", "samples", "keyValue", "globalData", "Si", "_dataView", "_littleEndian", "_offset", "_nextUint8", "getUint8", "_nextUint16", "getUint16", "_nextUint32", "_nextUint64", "_nextInt32", "getInt32", "_nextUint8Array", "_skip", "_scan", "Oi", "Ti", "I", "emscripten_notify_memory_growth", "Q", "fetch", "arrayBuffer", "instantiate", "malloc", "ZSTD_findDecompressedSize", "ZSTD_decompress", "D", "free", "SRGBTransfer", "LinearTransfer", "_zstd", "_activeLoaders", "KTX2Loader", "transcoderPath", "transcoderBinary", "transcoderPending", "workerConfig", "MSC_TRANSCODER", "setTranscoderPath", "astcSupported", "hasFeatureAsync", "astcHDRSupported", "etc1Supported", "etc2Supported", "dxtSupported", "bptcSupported", "pvrtcSupported", "isWebGPURenderer", "hasFeature", "getSupportedProfiles", "jsLoader", "loadAsync", "binaryLoader", "binaryContent", "BasisWorker", "EngineFormat", "EngineType", "TranscoderFormat", "BasisFormat", "_createTexture", "_createTextureFrom", "transcodeResult", "container", "messageType", "faces", "dfdFlags", "CompressedCubeTexture", "mipmaps", "CompressedArrayTexture", "CompressedTexture", "parseColorSpace", "premultiplyAlpha", "U", "levelData", "uncompressedByteLength", "_", "bitOffset", "bitLength", "channelType", "samplePosition", "sampleLower", "sampleUpper", "imageFlags", "rgbSliceByteOffset", "rgbSliceByteLength", "alphaSliceByteOffset", "alphaSliceByteLength", "L", "V", "S", "F", "endpointCount", "selectorCount", "imageDescs", "endpointsData", "selectorsData", "tablesData", "extendedData", "isBasisHDR", "VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT", "FORMAT_MAP", "zstd", "ZSTDDecoder", "levelIndex", "levelWidth", "levelHeight", "levelDepth", "level", "TYPE_MAP", "FloatType", "HalfFloatType", "depth", "UNCOMPRESSED_FORMATS", "DataTexture", "Data3DTexture", "texturePending", "ETC1S", "UASTC", "UASTC_HDR", "ETC1", "ETC2", "BC1", "BC3", "BC4", "BC5", "BC7_M6_OPAQUE_ONLY", "BC7_M5", "PVRTC1_4_RGB", "PVRTC1_4_RGBA", "ASTC_4x4", "ATC_RGB", "ATC_RGBA_INTERPOLATED_ALPHA", "RGBA32", "RGB565", "BGR565", "RGBA4444", "BC6H", "RGB_HALF", "RGBA_HALF", "RGBAFormat", "RGBA_ASTC_4x4_Format", "RGB_BPTC_UNSIGNED_Format", "RGBA_BPTC_Format", "RGBA_ETC2_EAC_Format", "RGBA_PVRTC_4BPPV1_Format", "RGBA_S3TC_DXT5_Format", "RGB_ETC1_Format", "RGB_ETC2_Format", "RGB_PVRTC_4BPPV1_Format", "RGBA_S3TC_DXT1_Format", "UnsignedByteType", "BasisModule", "_EngineFormat", "_EngineType", "_TranscoderFormat", "_BasisFormat", "onRuntimeInitialized", "BASIS", "initializeBasis", "KTX2File", "hasAlpha", "ktx2File", "cleanup", "close", "delete", "isValid", "basisFormat", "isUASTC", "isETC1S", "isHDR", "getWidth", "getHeight", "getLayers", "levelCount", "getLevels", "getFaces", "getHasAlpha", "getDFDFlags", "transcoderFormat", "engineFormat", "engineType", "OPTIONS", "if", "needsPowerOfTwo", "isPowerOfTwo", "startTranscoding", "mip", "layerMips", "mipWidth", "mipHeight", "levelInfo", "getImageLevelInfo", "origWidth", "origHeight", "getImageTranscodedSizeInBytes", "transcodeImage", "mipData", "FORMAT_OPTIONS", "priorityETC1S", "priorityUASTC", "priorityHDR", "arrays", "totalByteLength", "RGFormat", "RedFormat", "VK_FORMAT_R32G32B32A32_SFLOAT", "VK_FORMAT_R16G16B16A16_SFLOAT", "VK_FORMAT_R8G8B8A8_UNORM", "VK_FORMAT_R8G8B8A8_SRGB", "VK_FORMAT_R32G32_SFLOAT", "VK_FORMAT_R16G16_SFLOAT", "VK_FORMAT_R8G8_UNORM", "VK_FORMAT_R8G8_SRGB", "VK_FORMAT_R32_SFLOAT", "VK_FORMAT_R16_SFLOAT", "VK_FORMAT_R8_SRGB", "VK_FORMAT_R8_UNORM", "VK_FORMAT_ASTC_6x6_SRGB_BLOCK", "RGBA_ASTC_6x6_Format", "VK_FORMAT_ASTC_6x6_UNORM_BLOCK", "dfd", "NoColorSpace", "R", "AbsR", "xAxis", "yAxis", "zAxis", "closestPoint", "rotationMatrix", "Matrix3", "aabb", "inverse", "localRay", "Ray", "OBB", "halfSize", "obb", "getSize", "clampPoint", "extractBasis", "clamp", "containsPoint", "intersectsBox3", "box3", "intersectsOBB", "fromBox3", "intersectsSphere", "distanceToSquared", "epsilon", "ra", "rb", "intersectsPlane", "plane", "constant", "intersectRay", "ray", "setFromCenterAndSize", "setFromMatrix3", "setPosition", "invert", "intersectBox", "intersectsRay", "identity", "sx", "sy", "sz", "determinant", "setFromMatrix4", "invSX", "invSY", "invSZ", "multiply", "setFromMatrixPosition", "_object_pattern", "_material_library_pattern", "_material_use_pattern", "_map_use_pattern", "_face_vertex_data_separator_pattern", "_ab", "_cb", "ParserState", "state", "normals", "materialLibraries", "startObject", "fromDeclaration", "previousMaterial", "currentMaterial", "_finalize", "hasUVIndices", "startMaterial", "previous", "inherited", "groupCount", "mtllib", "groupEnd", "cloned", "lastMultiMaterial", "mi", "declared", "finalize", "parseVertexIndex", "parseNormalIndex", "parseUVIndex", "addVertex", "addVertexPoint", "addVertexLine", "addNormal", "addFaceNormal", "cross", "addColor", "addUV", "addDefaultUV", "addUVLine", "addFace", "ua", "ub", "uc", "na", "nb", "vLen", "ia", "ic", "nLen", "uvLen", "addPointGeometry", "vi", "addLineGeometry", "uvi", "OBJLoader", "setMaterials", "trimStart", "lineFirstChar", "vertexData", "faceVertices", "vertex", "vertexParts", "v2", "v3", "lineParts", "lineVertices", "lineUVs", "li", "llen", "pointData", "hasVertexColors", "buffergeometry", "createdMaterials", "miLen", "sourceMaterial", "materialHash", "create", "materialPoints", "materialLine", "MeshPhongMaterial", "MTLLoader", "setMaterialOptions", "materialOptions", "delimiter_pattern", "materialsInfo", "ss", "materialCreator", "MaterialCreator", "setManager", "baseUrl", "materialsArray", "nameLookup", "wrap", "convert", "converted", "mn", "covmat", "lprop", "normalizeRGB", "ignoreZeroRGBs", "materialName", "getAsArray", "createMaterial_", "setMapForType", "mapType", "texParams", "getTextureParams", "specular", "shininess", "invertTrProperty", "matParams", "items", "mapping", "DefaultLoadingManager", "LightProbeGenerator", "cubeTexture", "totalWeight", "coord", "shBasis", "sh", "SphericalHarmonics3", "shCoefficients", "coefficients", "faceIndex", "canvas", "context", "imageData", "getImageData", "imageWidth", "pixelSize", "convertColorToLinear", "pixelIndex", "lengthSq", "weight", "getBasisAt", "norm", "LightProbe", "cubeRenderTarget", "flip", "coordinateSystem", "WebGLCoordinateSystem", "isWebGLRenderer", "readRenderTargetPixelsAsync", "DataUtils", "fromHalfFloat", "convertSRGBToLinear", "DeviceOrientationControls", "reorder", "deviceOrientation", "screenOrientation", "alphaOffset", "zee", "euler", "q0", "q1", "onDeviceOrientationChangeEvent", "event", "onScreenOrientationChangeEvent", "setObjectQuaternion", "Euler", "alpha", "beta", "gamma", "orient", "setFromEuler", "setFromAxisAngle", "connect", "disconnect", "removeEventListener", "device", "degToRad", "SUPER_THREE", "BufferGeometryUtils", "Cache", "AFRAME_CDN_ROOT", "AFRAME_INJECTED", "chunks", "ls", "logs", "supportsVRSession", "supportsARSession", "isWebXRAvailable", "xr", "updateEnterInterfaces", "sceneEl", "hasLoaded", "components", "errorHandler", "isSessionSupported", "supportsSession", "checkHeadsetConnected", "checkARSupport", "checkVRSupport", "_isMobile", "isMobile", "isIOS", "isTablet", "isR7", "isMobileVR", "mockUserAgent", "isIpad", "mockDevicePlatform", "mockDeviceTouchPoints", "platform", "maxTouchPoints", "MSStream", "isAppleVisionPro", "isMacintosh", "hasFiveTouchPoints", "isMobileDeviceRequestingDesktopSite", "isOculusBrowser", "isFirefoxReality", "isLandscape", "isBrowserEnvironment", "isNodeEnvironment", "EMPTY_SLOT", "freeze", "defaultObjectFactory", "createPool", "objectFactory", "objPool", "nextFreeSlot", "grow", "currentLength", "recycle", "use", "objToUse", "clearObject", "removeUnusedKeys", "schema", "COORDINATE_KEYS", "regex", "defaultVec", "coordinate", "vec", "parseIfString", "isCoordinates", "isCoordinate", "toVector3", "vec3", "splitCache", "getComponentPropertyPath", "getComponentProperty", "splitName", "setComponentProperty", "forceCanvasResizeSafariMobile", "canvasEl", "validateSrc", "isImageCb", "isVideoCb", "onResult", "contentType", "getResponseHeader", "checkIsImageFallback", "isImage", "validateEnvMapSrc", "isCubemapCb", "isEquirectCb", "urls", "cubemapSrcRegex", "validatedUrls", "parseUrl", "selector", "srcs", "validateCubemapSrc", "parsedSrc", "tester", "COLOR_MAPS", "setTextureProperties", "npot", "DEFAULT_ANISOTROPY", "updateMapMaterialFromData", "dataName", "shader", "rendererSystem", "systems", "materialSrcs", "setMap", "handleTextureEvents", "loadTextureSource", "isCompatibleTexture", "createCompatibleTexture", "applyColorCorrection", "updateMap", "updateDistortionMap", "longType", "shortType", "envMapPromises", "updateEnvMap", "envMap", "sphericalEnvMap", "refract", "checkSetMap", "srcLoader", "loadCubeMapTexture", "emitVideoTextureLoadedDataAll", "emit", "emitVideoTextureEndedAll", "HTMLCanvasElement", "isCanvasTexture", "HTMLVideoElement", "isVideoTexture", "isTexture", "DASH_REGEX", "parsedData", "getKeyValueChunks", "toCamelCase", "keyCount", "upperCase", "hasUnclosedUrl", "raw", "nextSplit", "chunk", "AXIS_LABELS", "checkControllerPresentAndSetup", "component", "idPrefix", "queryObject", "controller", "isPresent", "isControllerPresentWebXR", "controllerPresent", "addEventListeners", "injectTrackedControls", "removeEventListeners", "controllers", "trackedControlsSystem", "findMatchingControllerWebXR", "hand", "iterateControllerProfiles", "handTracking", "handedness", "iterateProfiles", "profiles", "controllerMatch", "emitIfAxesChanged", "axesMapping", "axes", "buttonType", "changed", "detail", "onButtonEvent", "evtName", "buttonName", "buttons", "updateModel", "throttle", "functionToThrottle", "minimumInterval", "optionalContext", "throttleLeadingAndTrailing", "deferTimer", "timerExpired", "sinceLastTime", "throttleTick", "delta", "debounce", "wait", "immediate", "callNow", "extendDeep", "deepAssign", "arrayPool", "deepEqual", "objectPool", "keysA", "keysB", "valA", "valB", "targetObject", "aVal", "bVal", "bKey", "isComparingObjects", "shouldCaptureKeyEvent", "metaKey", "activeElement", "splitString", "getElData", "defaults", "getUrlParameter", "isIframed", "findAllScenes", "matchingElements", "allElements", "isScene", "attrs", "MOBILE_HEAD_TAGS", "Meta", "MOBILE_IOS_HEAD_TAGS", "exists", "titleEl", "getSceneCanvasSize", "styleParser", "ATTR_NAME", "resize", "embedded", "maxCanvasSize", "aspect", "updateProjectionMatrix", "setSize", "propertyTypes", "nonCharRegex", "urlRegex", "registerPropertyType", "defaultValue", "cacheable", "defaultParse", "defaultStringify", "defaultEquals", "isCacheable", "arrayEquals", "assetParse", "parsedUrl", "getElementById", "assetStringify", "intParse", "vecParse", "coordinates", "isValidDefaultCoordinate", "possibleCoordinates", "dimensions", "isValidDefaultValue", "PropertyTypes", "isSingleProperty", "componentName", "processPropertyDefinition", "propDefinition", "isCustomType", "propType", "typeName", "propNames", "parseProperties", "propData", "getPartialData", "silent", "propValue", "parseProperty", "stringifyProperties", "stringifiedData", "stringifyProperty", "processSchema", "isSingleProp", "aframeScript", "currentScript", "upperCaseRegExp", "objectPools", "emptyInitialOldData", "encounteredUnknownProperties", "attrValueProxyHandler", "getComputedPropertyValue", "newValue", "recomputeProperty", "handleUnknownProperty", "Component", "attrValue", "sceneOnly", "multiple", "attrName", "evtDetail", "initialized", "events", "eventName", "isObjectBased", "oldData", "attrValueProxy", "Proxy", "deferUnknownPropertyWarnings", "updateSchema", "throttledEmitComponentChanged", "updateProperties", "prevData", "tock", "flushToDOM", "isDefault", "HTMLElement", "clobber", "updateData", "isLoading", "callUpdateHandler", "initComponent", "initialOldData", "initializingComponents", "dataChanged", "storeOldData", "isPlaying", "recomputeData", "schemaChangeRequired", "updateSchemaIfNeeded", "isPositionRotationScale", "oldDataInUse", "handleMixinUpdate", "resetProperty", "propertyName", "extendSchema", "schemaAddon", "extendedSchema", "mixinEls", "mixinData", "propertySchema", "newAttrValue", "oldComputedValue", "targetValue", "newComputedValue", "schemaChange", "silenceUnknownPropertyWarnings", "eventsAttach", "eventsDetach", "registrationOrderWarnings", "registerComponent", "NewComponent", "schemaIsSingleProp", "playMethod", "pauseMethod", "compareDocumentPosition", "Node", "DOCUMENT_POSITION_FOLLOWING", "system", "shouldPlay", "hasBehavior", "addBehavior", "removeBehavior", "isObject", "before", "after", "canInitializeElements", "emitReady", "dispatchEvent", "CustomEvent", "System", "buildData", "registerSystem", "NewSystem", "initSystem", "rawData", "knownTags", "isANode", "ANode", "computedMixinStr", "connectedCallback", "doConnectedCallback", "mixins", "closestScene", "isMixin", "updateMixins", "attributeChangedCallback", "oldVal", "newVal", "parentElement", "closest", "matches", "mozMatchesSelector", "msMatchesSelector", "oMatchesSelector", "webkitMatchesSelector", "disconnectedCallback", "childFilter", "childrenLoaded", "getChildren", "allSettled", "reason", "setupMutationObserver", "MutationObserver", "mutationList", "oldValue", "observe", "attributeOldValue", "newMixins", "oldMixins", "newMixinIds", "oldMixinIds", "newMixinIdArray", "oldMixinIdArray", "mixinIds", "unregisterMixin", "registerMixin", "mixinId", "compositedMixinIds", "mixin", "mixinEl", "bubbles", "extraData", "evtData", "customElements", "define", "MULTIPLE_COMPONENT_DELIMITER", "OBJECT3D_COMPONENTS", "ONCE", "once", "AEntity", "componentsToUpdate", "object3D", "order", "object3DMap", "rotationObj", "states", "justInitialized", "setEntityAttribute", "assetsEl", "addToParent", "removeComponent", "removeFromParent", "getObject3D", "setObject3D", "oldObj", "removeObject3D", "getOrCreateObject3D", "Constructor", "attachedToParent", "updateComponents", "getChildEntities", "childEntities", "isDependency", "componentId", "componentInfo", "COMPONENTS", "checkComponentDefined", "initComponentDependencies", "tryRemoveLater", "extraComponents", "componentCache", "isComponent", "getExtraComponents", "updateComponent", "getDOMAttribute", "mixinUpdate", "entities", "deferred", "componentsUpdated", "arg1", "arg2", "delimiterIndex", "singlePropUpdate", "recursive", "visible", "addState", "removeState", "stateIndex", "inspector", "openInspector", "inMixin", "postMessageAPIHandler", "enterVR", "exitVR", "scrollTo", "AScene", "clock", "hasWebXR", "isAR", "systemNames", "usedOfferSession", "componentOrder", "behaviors", "originalHTML", "addFullScreenStyles", "removeFullScreenStyles", "onFullScreenChange", "fullscreenElement", "mozFullScreenElement", "webkitFullscreenElement", "blur", "focus", "dataset", "aframeCanvas", "passive", "setupRenderer", "getCanvasSize", "loaderScene", "sphereGeometry", "sphereMaterial", "sphereMesh1", "sphereMesh2", "sphereMesh3", "loaderAttribute", "dotsColor", "backgroundColor", "innerWidth", "innerHeight", "getElapsedTime", "background", "title", "display", "setAnimationLoop", "tag", "headEl", "headScriptEl", "headTags", "createAndInjectTag", "tagObj", "meta", "constants", "insertBefore", "wakelock", "Wakelock", "enterVRBound", "exitVRBound", "attachedCallbackPostCamera", "initSystems", "determineComponentBehaviorOrder", "behavior", "behaviorSet", "behaviorType", "inUse", "markedForRemoval", "getPointerLockElement", "pointerLockElement", "enterAR", "errorMessage", "useAR", "useOfferSession", "xrInit", "vrManager", "offerSession", "xrSession", "refspace", "webxr", "sessionReferenceSpaceType", "setReferenceSpaceType", "xrMode", "sessionConfiguration", "requestSession", "layersEnabled", "requiredFeatures", "setSession", "setFoveation", "foveationLevel", "setWebXRFrameRate", "enterVRSuccess", "cause", "screen", "lock", "requestFullscreen", "webkitRequestFullscreen", "mozRequestFullScreen", "msRequestFullscreen", "navigationUI", "exitFullscreen", "mozCancelFullScreen", "webkitExitFullscreen", "unlock", "setPixelRatio", "devicePixelRatio", "componentPropValue", "isVRPresenting", "isPresenting", "rendererAttr", "rendererConfig", "antialias", "logarithmicDepthBuffer", "powerPreference", "precision", "stencil", "multiviewStereo", "maxCanvasWidth", "maxCanvasHeight", "rendererImpl", "find", "setPoseTarget", "renderStarted", "timeDelta", "callComponentBehaviors", "getDelta", "elapsedTime", "savedBackground", "renderCamera", "getCamera", "visited", "done", "beforeName", "visit", "afterName", "constrainSizeTo", "maxSize", "pixelRatio", "isVR", "offsetHeight", "geometryNames", "Geometry", "registerGeometry", "NewGeometry", "registerPrimitive", "defaultAttributes", "primitiveClass", "defaultComponentsFromPrimitive", "defaultComponents", "deprecated", "deprecatedMappings", "resolveMappingCollisions", "rawAttributeCache", "mixinComponents", "applyMapping", "isUndefined", "isPureObject", "shaders", "shaderNames", "propertyToThreeMapping", "int", "vec2", "vec4", "Shader", "registerShader", "NewShader", "vertexShader", "fragmentShader", "uniforms", "initUniforms", "glslVersion", "glsl3", "varType", "variables", "materialKey", "parseValue", "setMapOnTextureLoad", "mediaElementLoaded", "checkProgress", "secondsBuffered", "buffered", "fixUpMediaElement", "mediaEl", "newMediaEl", "domain", "host", "cloneNode", "isAssets", "mediaEls", "imgEl", "imgEls", "loaded", "srcObject", "isAssetItem", "fileName", "query", "filePath", "dotLastIndex", "loadedBytes", "totalBytes", "ACubeMap", "onReadyStateChange", "validate", "cacheAttributes", "updateEntities", "cacheAttribute", "parseComponentAttrValue", "parsedValue", "entity", "colorHelperFrom", "colorHelperTo", "TYPE_COLOR", "PROP_ROTATION", "STRING_COMPONENTS", "toRadians", "eventNames", "getRawProperty", "splitDot", "setRawProperty", "isRawProperty", "dur", "elasticity", "startEvents", "pauseEvents", "resumeEvents", "eventDetail", "animation", "animationIsPlaying", "onStartEvent", "beginAnimation", "pauseAnimation", "resumeAnimation", "fromColor", "toColor", "updateConfigForDefault", "updateConfigForRawColor", "createAndStartAnimation", "pausedWasPlaying", "updateConfig", "stopRelatedAnimations", "waitComponentInitRawProperty", "setColorConfig", "lastValue", "isBoolean", "aframeProperty", "updateConfigForVector", "persistent", "webxrData", "optionalFeaturesArray", "optionalFeatures", "auxQuaternion", "onEnterVR", "anchor", "requestPersistentAnchorPending", "requestAnchorPending", "refSpace", "pose", "xrManager", "restorePersistentAnchor", "createAnchor", "getReferenceSpace", "getPose", "anchorSpace", "referenceSpace", "anchorPose", "session", "getSession", "deleteAnchor", "XRRigidTransform", "persistentHandle", "requestPersistentHandle", "storedPersistentHandle", "persistentAnchors", "deletePersistentAnchor", "active", "far", "fov", "near", "spectator", "zoom", "updateActiveCamera", "updateSpectatorCamera", "activeCameraEl", "setActiveCamera", "disableActiveCamera", "spectatorCameraEl", "setSpectatorCamera", "disableSpectatorCamera", "mouse", "origin", "rayCasterConfig", "EVENTS", "STATES", "CANVAS_EVENTS", "DOWN", "UP", "WEBXR_EVENTS", "CANVAS_HOVER_CLASS", "dummyGeometry", "downEvents", "fuse", "fuseTimeout", "mouseCursorStylesEnabled", "upEvents", "rayOrigin", "oneOf", "cursorDownEl", "intersectedEl", "canvasBounds", "isCursorDown", "activeXRInput", "updateCanvasBounds", "intersectedEventDetail", "cursorEl", "onCursorDown", "onCursorUp", "onIntersection", "onIntersectionCleared", "onMouseMove", "resetRaycaster", "updateMouseEventListeners", "addWebXREventListeners", "removeWebXREventListeners", "inputSource", "addCanvasListeners", "downEvent", "upEvent", "cameraElParent", "parent", "touches", "clientX", "clientY", "isPerspectiveCamera", "matrixWorld", "unproject", "isOrthographicCamera", "transformDirection", "targetRaySpace", "applyQuaternion", "localToWorld", "raycaster", "checkIntersections", "intersectedEls", "reenableARHitTest", "twoWayEmit", "intersection", "currentIntersection", "els", "intersections", "getIntersection", "clearCurrentIntersection", "setIntersection", "clearedEls", "ignoreRemaining", "originalEvent", "addOriginalEvent", "MouseEvent", "mouseEvent", "TouchEvent", "touchEvent", "GAMEPAD_ID_PREFIX", "skipCache", "previousData", "unuseGeometry", "getOrCreateGeometry", "currentGeometryType", "newGeometryType", "defaultModel", "defaultModelColor", "disabled", "touchpad", "thumbstick", "bindMethods", "onControllersUpdate", "checkIfControllerPresent", "removeControllersUpdateListener", "onAxisMoved", "onButtonChanged", "onButtonDown", "onButtonUp", "onButtonTouchStart", "onButtonTouchEnd", "wasControllerConnected", "controllerEventsActive", "addControllersUpdateListener", "initDefaultModel", "button", "modelEl", "model", "getDRACOLoader", "getMeshoptDecoder", "ktxLoader", "getKTX2Loader", "gltfModel", "jointPose", "LEFT_HAND_MODEL_URL", "RIGHT_HAND_MODEL_URL", "JOINTS", "modelStyle", "modelColor", "modelOpacity", "onModelLoaded", "jointEls", "wristObject3D", "onChildAttached", "isPinched", "pinchEventDetail", "wristRotation", "indexTipPosition", "hasPoses", "jointPoses", "jointRadii", "updateReferenceSpace", "addChildEntity", "updateModelMaterial", "skinnedMesh", "referenceSpaceType", "requestReferenceSpace", "warnIfFeatureNotRequested", "trackedControlsWebXR", "fillPoses", "fillJointRadii", "updateHandModel", "detectGesture", "updateWristObject", "WRIST_INDEX", "setFromRotationMatrix", "updateHandDotsModel", "updateHandMeshModel", "getBone", "inputjoint", "bone", "jointName", "jointEl", "decompose", "detectPinch", "thumbTipPosition", "THUMB_TIP_INDEX", "INDEX_TIP_INDEX", "handTrackingEnabled", "XRHand", "initDotsModel", "initMeshHandModel", "modelURL", "getObjectByProperty", "frustumCulled", "setupChildrenEntities", "childrenEls", "childEl", "hoverColor", "hoverEnabled", "trackedObject3DVariable", "trackedObject3D", "auxMatrix", "onCollisionStarted", "onCollisionEnded", "onPinchStarted", "onPinchEnded", "transferEntityOwnership", "grabbingElComponent", "grabbingEls", "grabbedEl", "releaseGrabbedEntity", "withEl", "collidedEl", "grabbingObject3D", "grab", "newParent", "originalParent", "MODEL_URLS", "toonLeft", "toonRight", "lowPolyLeft", "lowPolyRight", "highPolyLeft", "highPolyRight", "ANIMATIONS", "getGestureEventName", "gesture", "handModelStyle", "pressedButtons", "touchedButtons", "onGripDown", "handleButton", "onGripUp", "onTrackpadDown", "onTrackpadUp", "onTrackpadTouchStart", "onTrackpadTouchEnd", "onTriggerDown", "onTriggerUp", "onTriggerTouchStart", "onTriggerTouchEnd", "onGripTouchStart", "onGripTouchEnd", "onThumbstickDown", "onThumbstickUp", "onAorXTouchStart", "onAorXTouchEnd", "onBorYTouchStart", "onBorYTouchEnd", "onSurfaceTouchStart", "onSurfaceTouchEnd", "onControllerConnected", "onControllerDisconnected", "mixer", "handModelOrientationZ", "handModelOrientationX", "previousHand", "controlConfiguration", "handColor", "handmodelUrl", "clips", "lastGesture", "isPressed", "isTouched", "determineGesture", "animateGesture", "emitGestureEvents", "trackedControls", "isGripActive", "grip", "isSurfaceActive", "surface", "isTrackpadActive", "trackpad", "isTriggerActive", "trigger", "isABXYActive", "AorX", "BorY", "getClip", "clip", "playAnimation", "toAction", "clipAction", "timeScale", "clampWhenFinished", "repetitions", "stopAllAction", "crossFadeTo", "GAMEPAD_ID", "HP_MIXED_REALITY_MODEL_GLB_BASE_URL", "HP_MIXED_REALITY_POSITION_OFFSET", "HP_MIXED_REALITY_ROTATION_OFFSET", "_x", "_y", "_z", "_order", "previousButtonValues", "controllerIndex", "analogValue", "controllerObject3D", "distanceOfPointFromPlane", "positionOnPlane", "planeNormal", "pointToTest", "rotateCubemap", "gl", "needsRedraw", "frameBuffer", "createFramebuffer", "requiredFeaturesArray", "onExitVR", "onRequestedReferenceSpace", "updateSrc", "loadCubeMapImages", "loadQuadImage", "glayer", "xrGLFactory", "visibilityChanged", "pendingCubeMapUpdate", "loadingScreen", "getSubImage", "loadCubeMapImage", "colorTexture", "initTexture", "textureIsVideo", "updateQuadPanel", "preGenerateCubeMapTextures", "generateCubeMapTextures", "faceOffset", "imgTmp0", "imgTmp2", "cubeFaceSize", "textureSourceCubeFaceSize", "cubefaceTextures", "tempCanvas", "tempCanvasContext", "translate", "rotate", "restore", "layerColorTexture", "pixelStorei", "UNPACK_FLIP_Y_WEBGL", "TEXTURE_CUBE_MAP", "loadingScreenImages", "errorCode", "texSubImage2D", "TEXTURE_CUBE_MAP_POSITIVE_X", "RGBA", "getError", "initLayer", "updateTransform", "onvisibilitychange", "visibilityState", "initCubeMapLayer", "initQuadLayer", "XRWebGLBinding", "createQuadLayer", "viewPixelHeight", "viewPixelWidth", "initLoadingScreenImages", "addLayer", "glSizeLimit", "getParameter", "MAX_CUBE_MAP_TEXTURE_SIZE", "createCubeLayer", "isStatic", "fillText", "destroyLayer", "removeLayer", "toggleCompositorLayer", "enableCompositorLayer", "layerEnabled", "quadPanelEl", "__webglTexture", "previousFrameBuffer", "FRAMEBUFFER_BINDING", "viewport", "bindFramebuffer", "FRAMEBUFFER", "framebufferTexture2D", "COLOR_ATTACHMENT0", "TEXTURE_2D", "subImage", "textureEl", "xrReadFramebuffer", "x1offset", "y1offset", "x2offset", "y2offset", "RGB", "READ_FRAMEBUFFER", "readBuffer", "blitFramebuffer", "COLOR_BUFFER_BIT", "NEAREST", "deleteFramebuffer", "controlsConfiguration", "createRay", "controllerConfig", "raycasterConfig", "showLine", "modelReady", "cursor", "cameraWorldPosition", "tempMat", "tempVector", "mat4", "cameraPosition", "portalNormal", "portalPosition", "CubeLoader", "probeCache", "isEqualVec3", "groundColor", "decay", "castShadow", "shadowBias", "shadowCameraFar", "shadowCameraFov", "shadowCameraNear", "shadowCameraTop", "shadowCameraRight", "shadowCameraBottom", "shadowCameraLeft", "shadowCameraVisible", "shadowCameraAutomatic", "shadowMapHeight", "shadowMapWidth", "shadowRadius", "defaultTarget", "registerLight", "diffData", "setLight", "updateShadow", "shadowsLoaded", "onSetTarget", "updateProbeMap", "shadowCameraAutomaticEls", "shadow", "getWorldDirection", "getWorldPosition", "bottom", "setFromObject", "getBoundingSphere", "resultPoint", "distanceToPlane", "mathUtils", "pointInXYPlane", "newLight", "getLight", "translateY", "cameraHelper", "bias", "mapSize", "getHex", "cube", "tempLightProbe", "fromCubeTexture", "targetEl", "geoNeedsUpdate", "positionArray", "setStyle", "borderColor", "highlighted", "highlightedColor", "on", "peekMode", "titleColor", "visualAspectEnabled", "navigate", "previousQuaternion", "quaternionClone", "hiddenEls", "strokeColor", "elScale", "previewDistance", "initVisualAspect", "updateEventListener", "updatePeekMode", "sphereEl", "hideAll", "showAll", "semiSphereEl", "textEl", "visualAspectInitialized", "segments", "pano", "phiStart", "segmentsWidth", "segmentsHeight", "phiLength", "thetaStart", "thetaLength", "borderEnabled", "elWorldPosition", "cameraPortalOrientation", "lookAt", "calculateCameraPortalOrientation", "peekCameraPortalOrientation", "cameraEl", "extractRotation", "sign", "LOGITECH_MX_INK_MODEL_GLB_BASE_URL", "PI_2", "orientationOffset", "loadModel", "GAMEPAD_ID_COMPOSITE", "magicWindowTrackingEnabled", "pointerLockEnabled", "reverseMouseDrag", "reverseTouchDrag", "touchEnabled", "mouseEnabled", "deltaYaw", "previousHMDPosition", "hmdQuaternion", "magicWindowAbsoluteEuler", "magicWindowDeltaEuler", "magicWindowObject", "deltaRotation", "savedPose", "pointerLocked", "setupMouseControls", "previousMouseEvent", "setupMagicWindowControls", "magicWindowControls", "DeviceOrientationEvent", "requestPermission", "permissionGranted", "updateGrabCursor", "exitPointerLock", "updateOrientation", "onMouseDown", "onMouseUp", "onTouchStart", "onTouchMove", "onTouchEnd", "onPointerLockChange", "onPointerLockError", "mouseDown", "pitchObject", "yawObject", "updateMagicWindowOrientation", "setFromQuaternion", "previousMagicWindowYaw", "movementX", "movementY", "mozMovementX", "mozMovementY", "screenX", "screenY", "showGrabbingCursor", "requestPointerLock", "mozRequestPointerLock", "hideGrabbingCursor", "touchStart", "pageX", "pageY", "touchStarted", "deltaY", "clientWidth", "saveCameraPose", "matrixAutoUpdate", "restoreCameraPose", "mozPointerLockElement", "enableGrabCursor", "disableGrabCursor", "hasSavedPose", "MAGICLEAP_CONTROLLER_MODEL_GLB_URL", "setButtonColor", "disposeMaterial", "unregisterMaterial", "vertexColorsEnabled", "blending", "dithering", "updateShader", "updateMaterial", "currentShader", "newShader", "updateBehavior", "tickProperties", "tickTime", "shaderName", "shaderInstance", "setMaterial", "oldDataHasKeys", "defaultMaterial", "registerMaterial", "waitForMesh", "auxPosition", "auxScale", "identityQuaternion", "TOUCH_CONTROLLER_MODEL_BASE_URL", "META_CONTROLLER_MODEL_BASE_URL", "OCULUS_TOUCH_CONFIG", "modelUrl", "modelPivotOffset", "modelPivotRotation", "CONTROLLER_DEFAULT", "CONTROLLER_PROPERTIES", "componentConfig", "buttonColor", "buttonTouchColor", "buttonHighlightColor", "controllerType", "onThumbstickMoved", "triggerEuler", "controllerId", "displayModel", "controllersPropertiesIds", "isTouchV3orPROorPlus", "onButtonChangedV3orPROorPlus", "buttonMeshes", "originalXRotationTrigger", "originalXPositionGrip", "buttonObjects", "slerpQuaternions", "buttonRanges", "lerpVectors", "onTouchV3orPROorPlusModelLoaded", "getObjectByName", "xbutton", "abutton", "ybutton", "bbutton", "cloneMeshMaterial", "applyOffset", "thumbstickXAxis", "thumbstickYAxis", "button1", "button2", "button1id", "button2id", "updateThumbstickTouchV3orPROorPlus", "axisMap", "originalRotation", "normalizedXAxis", "normalizedYAxis", "updateButtonModel", "originalColor", "object3d", "newMaterial", "minimumColliderDimension", "centerModel", "previousScale", "auxEuler", "boundingBoxSize", "updateCollider", "updateBoundingBox", "addCollider", "removeCollider", "trackedObject3DPath", "showColliders", "showCollider", "updateColliderMesh", "renderColliderMesh", "initColliderMesh", "hideCollider", "renderColliderGeometry", "matrixWorldAutoUpdate", "checkTrackedObject", "OCULUS_GO_CONTROLLER_MODEL_URL", "mtl", "objLoader", "mtlLoader", "applyMaterial", "resetMesh", "loadObj", "objUrl", "mtlUrl", "BASE_PATH", "setResourcePath", "objModel", "emissiveMap", "buttonTouchedColor", "PICO_MODEL_GLB_BASE_URL", "OBSERVER_SELECTOR_RE", "OBSERVER_CONFIG", "childList", "subtree", "copyArray", "autoRefresh", "interval", "lineColor", "lineOpacity", "useWorldCoordinates", "clearedIntersectedEls", "unitLineEndVec3", "newIntersectedEls", "newIntersections", "prevCheckTime", "prevIntersectedEls", "rawIntersections", "updateOriginDirection", "setDirty", "updateLine", "observer", "dirty", "lineEndVec3", "otherLineEndVec3", "intersectedDetail", "intersectedClearedDetail", "intersectionClearedDetail", "intersectionDetail", "drawLine", "clearAllIntersections", "refreshObjects", "flattenObject3DMaps", "intersectObjects", "lineLength", "originVec3", "endVec3", "isAttachedToScene", "geometryUpdateBase", "geometryUpdateData", "newLineRegex", "tabRegex", "cast", "receive", "onMeshChanged", "setShadowMapEnabled", "updateDescendants", "receiveShadow", "distanceModel", "loopStart", "loopEnd", "maxDistance", "positional", "refDistance", "rolloffFactor", "volume", "listener", "audioLoader", "mustPlay", "playSoundBound", "playSound", "sound", "srcChanged", "setupSound", "setDistanceModel", "setMaxDistance", "setRefDistance", "setRolloffFactor", "setLoop", "setLoopStart", "setLoopEnd", "setVolume", "isPaused", "setBuffer", "processSound", "stopSound", "oldEvt", "audioListener", "onEnded", "pauseSound", "FONT_BASE_URL", "FONTS", "aileronsemibold", "dejavu", "exo2bold", "exo2semibold", "kelsonsans", "monoid", "mozillavr", "roboto", "sourcecodepro", "MSDF_FONTS", "DEFAULT_FONT", "promiseGenerator", "fontWidthFactors", "protocolRe", "computeWidth", "wrapPixels", "wrapCount", "widthFactor", "fontImage", "negate", "whiteSpace", "xOffset", "yOffset", "zOffset", "shaderData", "createTextGeometry", "createOrUpdateMaterial", "explicitGeoDimensionsChecked", "currentFont", "updateGeometry", "updateLayout", "updateFont", "shaderObject", "hasChangedShader", "fontSrc", "lookupFont", "loadBMFont", "ch", "fontImgSrc", "sum", "digitsum", "digits", "getFontImageSrc", "initMesh", "fontObj", "imageSrc", "geometryComponent", "textScale", "hasExplicitGeoWidth", "hasExplicitGeoHeight", "ascender", "directionVector", "rotationEuler", "INDEX_CONTROLLER_MODEL_BASE_URL", "autoHide", "buttonEventDetails", "buttonStates", "changedAxes", "axisMoveEventDetail", "updateController", "isControllerPresent", "gamepad", "controllerUtils", "gripSpace", "updatePose", "updateButtons", "buttonState", "pressed", "touched", "handleAxes", "handlePress", "handleTouch", "handleValue", "controllerAxes", "previousAxis", "previousButtonState", "INDEX_CONTROLLER_MODEL_URL", "INDEX_CONTROLLER_ROTATION_OFFSET", "INDEX_CONTROLLER_POSITION_OFFSET", "VIVE_CONTROLLER_MODEL_OBJ_URL", "triggerOriginalRotationX", "menu", "VIVE_CONTROLLER_MODEL_OBJ_MTL", "VIVE_FOCUS_CONTROLLER_MODEL_URL", "KEYCODE_TO_CODE", "triggerPressed", "touchpadPressed", "trackpadPressed", "pressedName", "CLAMP_VELOCITY", "KEYS", "acceleration", "adAxis", "adEnabled", "adInverted", "fly", "wsAxis", "wsEnabled", "wsInverted", "onBlur", "onContextMenu", "onFocus", "onKeyDown", "onKeyUp", "onVisibilityChange", "attachVisibilityEventListeners", "updateVelocity", "getMovementVector", "removeKeyEventListeners", "removeVisibilityEventListeners", "attachKeyEventListeners", "adSign", "wsSign", "scaledEasing", "KeyA", "ArrowLeft", "KeyD", "ArrowRight", "KeyW", "ArrowUp", "KeyS", "ArrowDown", "xRotation", "applyEuler", "oncontextmenu", "keyCode", "tempQuaternion", "tempVec3", "hitTestCache", "MODEL_BASE_URL", "MODEL_FILENAMES", "applyPose", "pair", "axisMeshNames", "buttonMeshNames", "pointingPoseMeshName", "onModelError", "setModelVisibility", "loadedMeshInfo", "axisMeshes", "createdFromMesh", "updateControllerModel", "sourceUrl", "createControllerModelUrl", "forceDefault", "defaultUrl", "meshName", "meshInfo", "rootNode", "controllerModel", "getImmediateChildByName", "unpressed", "calculateRayOriginFromMesh", "getWorldQuaternion", "lerpAxisTransform", "axisValue", "axisMeshInfo", "lerpValue", "setRotationFromQuaternion", "slerp", "lerpButtonTransform", "buttonValue", "buttonMeshInfo", "numAxes", "modelVisible", "HitTest", "hitTestSourceDetails", "xrHitTestSource", "sessionStart", "warnAboutHitTest", "tempFakePose", "previousFrameAnchors", "anchorToObject3D", "requestHitTestSource", "profile", "requestHitTestSourceForTransientInput", "transient", "anchorFromLastHitTestResult", "hitTest", "lastHitTest", "object3DOptions", "entry", "entryObject", "doHit", "hitTestResults", "xrViewerPose", "getViewerPose", "getHitTestResultsForTransientInput", "getHitTestResults", "updateAnchorPoses", "trackedAnchors", "footprintDepth", "imageDataArray", "ImageData", "orthoCam", "layers", "textureTarget", "basicMaterial", "imageSmoothingEnabled", "canvasTexture", "hasPosedOnce", "bboxMesh", "viewerSpace", "viewerHitTest", "arHitTestComp", "inputSources", "targetRayMode", "cancel", "profileToSupport", "transientHitTest", "bboxOffset", "makeBBox", "bboxNeedsUpdate", "rotateX", "rotateY", "updateFootprint", "tempImageData", "oldRenderTarget", "oldBackground", "isXREnabled", "getRenderTarget", "setRenderTarget", "overrideMaterial", "readRenderTargetPixels", "putImageData", "shadowColor", "shadowBlur", "DIALOG_BUTTONS_CONTAINER_CLASS", "DIALOG_BUTTON_CLASS", "createDialog", "buttonsContainerEl", "modalContainer", "dialog", "dialogTextContainer", "dialogText", "deviceMotionMessage", "httpsMessage", "denyButtonText", "allowButtonText", "cancelButtonText", "isSecureContext", "showHTTPAlert", "onDeviceMotionDialogAllowClicked", "onDeviceMotionDialogDenyClicked", "denyText", "allowText", "onAllowClicked", "onDenyClicked", "buttonsContainer", "denyButton", "acceptButton", "devicePermissionDialogEl", "stopPropagation", "closeText", "onOkClicked", "okButton", "httpAlertEl", "enterVREl", "INSPECTOR_RELEASE_URL", "pkg", "getFuzzyPatchVersion", "firstPlay", "onKeydown", "onMessage", "initOverlay", "urlParam", "loadingMessageEl", "LOADING_MESSAGE", "ctrlKey", "altKey", "getModifierState", "showLoader", "hideLoader", "focusEl", "script", "AFRAME", "INSPECTOR", "inspectorInjected", "density", "fog", "onKeyup", "dynamic", "initPool", "availableEls", "usedEls", "createEntity", "wrapPlay", "object3DParent", "requestEntity", "updateRaycasters", "returnEntity", "filterLabels", "meshesEnabled", "meshMixin", "planesEnabled", "planeMixin", "meshEntities", "initWorldMeshEntity", "detectMeshes", "updateMeshes", "detectedMeshes", "detectedPlanes", "present", "newMeshes", "semanticLabel", "lastChangedTime", "updateMeshGeometry", "deleteMeshes", "createNewMeshes", "meshPose", "meshEl", "meshSpace", "planeSpace", "newMeshEntities", "initMeshGeometry", "shape", "polygon", "XRPlane", "moveTo", "lineTo", "meshEntity", "entityEl", "entityMesh", "directionalLight", "cubeCamera", "lightingEstimationTexture", "needsVREnvironmentUpdate", "requestLightProbe", "startLightProbe", "xrLightProbe", "stopLightProbe", "environment", "probeLight", "needsLightProbeUpdate", "setupLightProbe", "preferredReflectionFormat", "getExtension", "glBinding", "lightProbe", "updateXRCubeMap", "cubeMap", "getReflectionCubeMap", "needsPMREMUpdate", "estimate", "getLightEstimate", "directionalLightPosition", "intensityScalar", "primaryLightIntensity", "sphericalHarmonicsCoefficients", "primaryLightDirection", "VERTEX_SHADER", "FRAGMENT_SHADER", "setup", "cubeMapSize", "quad", "ctx", "outputColorSpace", "shortcutPressed", "projection", "shiftKey", "capture", "setCapture", "renderTarget", "isVREnabled", "renderCapture", "saveCapture", "getCanvas", "pixels", "autoClear", "flipPixelsVertically", "flippedPixels", "toBlob", "linkEl", "click", "AFrameStats", "HIDDEN_CLASS", "ThreeStats", "stats", "RStats", "fps", "statsEl", "hideBound", "hide", "showBound", "show", "applyStickyHoverFix", "buttonEl", "enterVRButton", "enterVREnabled", "enterARButton", "enterAREnabled", "XRMode", "insideLoader", "enterAREl", "orientationModalEl", "toggleOrientationModalIfNeeded", "onEnterVRButtonClick", "onEnterARButtonClick", "onModalClick", "onClick", "vrButton", "arButton", "modal", "exit", "uiElement", "toggleEnterVRButtonIfNeeded", "toggleEnterARButtonIfNeeded", "segmentsDepth", "openEnded", "radiusBottom", "radiusTop", "segmentsRadial", "radiusInner", "radiusOuter", "segmentsPhi", "segmentsTheta", "arc", "radiusTubular", "segmentsTubular", "rotateVector", "uvMinVector", "uvMaxVector", "uvScaleVector", "getMaterialData", "materialData", "wireframe", "toneMapped", "wireframeLinewidth", "normalMap", "ambientOcclusionMap", "ambientOcclusionMapIntensity", "displacementMap", "displacementScale", "displacementBias", "reflectivity", "refractionRatio", "combine", "bumpMap", "bumpMapScale", "vertexA", "vertexB", "vertexC", "triangle", "uvA", "uvB", "uvC", "getNormal", "setFromUnitVectors", "divide", "ambientOcclusionTextureOffset", "ambientOcclusionTextureRepeat", "displacementTextureOffset", "displacementTextureRepeat", "metalnessMap", "metalnessTextureOffset", "metalnessTextureRepeat", "normalTextureOffset", "normalTextureRepeat", "roughnessMap", "roughnessTextureOffset", "roughnessTextureRepeat", "oneOF", "bumpTextureOffset", "bumpTextureRepeat", "_envMap", "merge", "alphaToCoverage", "DEFAULT_CAMERA_ATTR", "createGeometry", "GeometryClass", "geometryInstance", "unwrapRender", "wrapRender", "initialCameraFound", "numUserCameras", "numUserCamerasChecked", "setupInitialCamera", "cameraEls", "checkUserCamera", "createDefaultCamera", "cameraData", "defaultCameraEl", "newCameraEl", "newCamera", "previousCamera", "defaultCameraWrapper", "defaultCamera", "originalRender", "spectatorCamera", "cacheCount", "clearCache", "cachedGeometry", "dracoDecoderPath", "basisTranscoderPath", "meshoptDecoderPath", "MeshoptDecoder", "DEFAULT_LIGHT_ATTR", "defaultLightsEnabled", "defaultLights", "userDefinedLights", "setupDefaultLights", "removeDefaultLights", "ambientLight", "ImageLoader", "clearTextureSourceCache", "sourceLoaded", "sourcePromise", "loadImage", "loadVideo", "loadSide", "statusText", "videoEl", "controls", "collisions", "colliderEls", "colliderEl", "detectCollisions", "elIndex", "registerCollision", "componentA", "componentB", "existingCollision", "boundingBoxA", "boundingBoxB", "collisionMeshA", "collisionMeshB", "detected", "resetCollisions", "clearCollisions", "detectedCollisions", "boxA", "boxB", "sortFrontToBack", "groupOrder", "renderOrder", "sortRenderOrderOnly", "sortBackToFront", "highRefreshRate", "exposure", "toneMapping", "sortTransparentObjects", "colorManagement", "toneMappingName", "sortObjects", "setOpaqueSort", "toneMappingExposure", "setTransparentSort", "targetRate", "rates", "supportedFrameRates", "updateTargetFrameRate", "SHADOW_MAP_TYPE_MAP", "basic", "pcf", "pcfsoft", "autoUpdate", "shadowMapEnabled", "shadowMap", "newEnabledState", "onInputSourcesChange", "materialMappings", "overlayElement", "domOverlay", "root", "wasFeatureRequested", "feature", "optIntro", "addMapping", "htmlAttrName", "getMeshMixin", "standard", "originalPosition", "originalGroup", "outerGroup", "envmap", "link", "meshPrimitives", "unCamelCase", "geometryName", "geometryHyphened", "cordova", "protocol", "REVISION", "AFRAME_ASYNC", "AComponent", "ANIME", "coreComponents"]
}
